/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


window[esri._dojoScopeName||"dojo"]._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dojo.io.script"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dojo.io.script"]){_4._hasResource["dojo.io.script"]=true;_4.provide("dojo.io.script");_4.getObject("io",true,_4);(function(){var _7=_4.isIE?"onreadystatechange":"load",_8=/complete|loaded/;_4.io.script={get:function(_9){var _a=this._makeScriptDeferred(_9);var _b=_a.ioArgs;_4._ioAddQueryToUrl(_b);_4._ioNotifyStart(_a);if(this._canAttach(_b)){var _c=this.attach(_b.id,_b.url,_9.frameDoc,_b.args.isAsync);if(!_b.jsonp&&!_b.args.checkString){var _d=_4.connect(_c,_7,function(_e){if(_e.type=="load"||_8.test(_c.readyState)){_4.disconnect(_d);_b.scriptLoaded=_e;}});}}_4._ioWatch(_a,this._validCheck,this._ioCheck,this._resHandle);return _a;},attach:function(id,_f,_10,_11){var doc=(_10||_4.doc);var _12=doc.createElement("script");_12.type="text/javascript";_12.src=_f;_12.id=id;_12.charset="utf-8";if(_11){_12.setAttribute("async","async");}return doc.getElementsByTagName("head")[0].appendChild(_12);},remove:function(id,_13){_4.destroy(_4.byId(id,_13));if(this["jsonp_"+id]){delete this["jsonp_"+id];}},_makeScriptDeferred:function(_14){var dfd=_4._ioSetArgs(_14,this._deferredCancel,this._deferredOk,this._deferredError);var _15=dfd.ioArgs;_15.id=_4._scopeName+"IoScript"+(_14.callbackSuffix||(this._counter++));_15.canDelete=false;_15.jsonp=_14.callbackParamName||_14.jsonp;if(_15.jsonp){_15.query=_15.query||"";if(_15.query.length>0){_15.query+="&";}_15.query+=_15.jsonp+"="+(_14.frameDoc?"parent.":"")+_4._scopeName+".io.script.jsonp_"+_15.id+"._jsonpCallback";_15.frameDoc=_14.frameDoc;_15.canDelete=true;dfd._jsonpCallback=this._jsonpCallback;this["jsonp_"+_15.id]=dfd;}return dfd;},_deferredCancel:function(dfd){dfd.canceled=true;if(dfd.ioArgs.canDelete){_4.io.script._addDeadScript(dfd.ioArgs);}},_deferredOk:function(dfd){var _16=dfd.ioArgs;if(_16.canDelete){_4.io.script._addDeadScript(_16);}return _16.json||_16.scriptLoaded||_16;},_deferredError:function(_17,dfd){if(dfd.ioArgs.canDelete){if(_17.dojoType=="timeout"){_4.io.script.remove(dfd.ioArgs.id,dfd.ioArgs.frameDoc);}else{_4.io.script._addDeadScript(dfd.ioArgs);}}console.log("dojo.io.script error",_17);return _17;},_deadScripts:[],_counter:1,_addDeadScript:function(_18){_4.io.script._deadScripts.push({id:_18.id,frameDoc:_18.frameDoc});_18.frameDoc=null;},_validCheck:function(dfd){var _19=_4.io.script;var _1a=_19._deadScripts;if(_1a&&_1a.length>0){for(var i=0;i<_1a.length;i++){_19.remove(_1a[i].id,_1a[i].frameDoc);_1a[i].frameDoc=null;}_4.io.script._deadScripts=[];}return true;},_ioCheck:function(dfd){var _1b=dfd.ioArgs;if(_1b.json||(_1b.scriptLoaded&&!_1b.args.checkString)){return true;}var _1c=_1b.args.checkString;if(_1c&&eval("typeof("+_1c+") != 'undefined'")){return true;}return false;},_resHandle:function(dfd){if(_4.io.script._ioCheck(dfd)){dfd.callback(dfd);}else{dfd.errback(new Error("inconceivable dojo.io.script._resHandle error"));}},_canAttach:function(_1d){return true;},_jsonpCallback:function(_1e){this.ioArgs.json=_1e;}};})();}}};});