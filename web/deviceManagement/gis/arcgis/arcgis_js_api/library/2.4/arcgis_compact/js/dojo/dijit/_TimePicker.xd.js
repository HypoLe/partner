/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


window[esri._dojoScopeName||"dojo"]._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dijit._TimePicker"],["require","dijit.form._FormWidget"],["require","dojo.date.locale"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dijit._TimePicker"]){_4._hasResource["dijit._TimePicker"]=true;_4.provide("dijit._TimePicker");_4.require("dijit.form._FormWidget");_4.require("dojo.date.locale");_4.declare("dijit._TimePicker",[_5._Widget,_5._Templated],{templateString:_4.cache("dijit","templates/TimePicker.html","<div id=\"widget_${id}\" class=\"dijitMenu\"\r\n    ><div dojoAttachPoint=\"upArrow\" class=\"dijitButtonNode dijitUpArrowButton\" dojoAttachEvent=\"onmouseenter:_buttonMouse,onmouseleave:_buttonMouse\"\r\n\t\t><div class=\"dijitReset dijitInline dijitArrowButtonInner\" role=\"presentation\">&nbsp;</div\r\n\t\t><div class=\"dijitArrowButtonChar\">&#9650;</div></div\r\n    ><div dojoAttachPoint=\"timeMenu,focusNode\" dojoAttachEvent=\"onclick:_onOptionSelected,onmouseover,onmouseout\"></div\r\n    ><div dojoAttachPoint=\"downArrow\" class=\"dijitButtonNode dijitDownArrowButton\" dojoAttachEvent=\"onmouseenter:_buttonMouse,onmouseleave:_buttonMouse\"\r\n\t\t><div class=\"dijitReset dijitInline dijitArrowButtonInner\" role=\"presentation\">&nbsp;</div\r\n\t\t><div class=\"dijitArrowButtonChar\">&#9660;</div></div\r\n></div>\r\n"),baseClass:"dijitTimePicker",clickableIncrement:"T00:15:00",visibleIncrement:"T01:00:00",visibleRange:"T05:00:00",value:new Date(),_visibleIncrement:2,_clickableIncrement:1,_totalIncrements:10,constraints:{},serialize:_4.date.stamp.toISOString,setValue:function(_7){_4.deprecated("dijit._TimePicker:setValue() is deprecated.  Use set('value', ...) instead.","","2.0");this.set("value",_7);},_setValueAttr:function(_8){this._set("value",_8);this._showText();},_setFilterStringAttr:function(_9){this._set("filterString",_9);this._showText();},isDisabledDate:function(_a,_b){return false;},_getFilteredNodes:function(_c,_d,_e,_f){var _10=[],_11=_f?_f.date:this._refDate,n,i=_c,max=this._maxIncrement+Math.abs(i),chk=_e?-1:1,dec=_e?1:0,inc=1-dec;do{i=i-dec;n=this._createOption(i);if(n){if((_e&&n.date>_11)||(!_e&&n.date<_11)){break;}_10[_e?"unshift":"push"](n);_11=n.date;}i=i+inc;}while(_10.length<_d&&(i*chk)<max);return _10;},_showText:function(){var _12=_4.date.stamp.fromISOString;this.timeMenu.innerHTML="";this._clickableIncrementDate=_12(this.clickableIncrement);this._visibleIncrementDate=_12(this.visibleIncrement);this._visibleRangeDate=_12(this.visibleRange);var _13=function(_14){return _14.getHours()*60*60+_14.getMinutes()*60+_14.getSeconds();},_15=_13(this._clickableIncrementDate),_16=_13(this._visibleIncrementDate),_17=_13(this._visibleRangeDate),_18=(this.value||this.currentFocus).getTime();this._refDate=new Date(_18-_18%(_16*1000));this._refDate.setFullYear(1970,0,1);this._clickableIncrement=1;this._totalIncrements=_17/_15;this._visibleIncrement=_16/_15;this._maxIncrement=(60*60*24)/_15;var _19=this._getFilteredNodes(0,Math.min(this._totalIncrements>>1,10)-1),_1a=this._getFilteredNodes(0,Math.min(this._totalIncrements,10)-_19.length,true,_19[0]);_4.forEach(_1a.concat(_19),function(n){this.timeMenu.appendChild(n);},this);},constructor:function(){this.constraints={};},postMixInProperties:function(){this.inherited(arguments);this._setConstraintsAttr(this.constraints);},_setConstraintsAttr:function(_1b){_4.mixin(this,_1b);if(!_1b.locale){_1b.locale=this.lang;}},postCreate:function(){this.connect(this.timeMenu,_4.isIE?"onmousewheel":"DOMMouseScroll","_mouseWheeled");this._connects.push(_5.typematic.addMouseListener(this.upArrow,this,"_onArrowUp",33,250));this._connects.push(_5.typematic.addMouseListener(this.downArrow,this,"_onArrowDown",33,250));this.inherited(arguments);},_buttonMouse:function(e){_4.toggleClass(e.currentTarget,e.currentTarget==this.upArrow?"dijitUpArrowHover":"dijitDownArrowHover",e.type=="mouseenter"||e.type=="mouseover");},_createOption:function(_1c){var _1d=new Date(this._refDate);var _1e=this._clickableIncrementDate;_1d.setHours(_1d.getHours()+_1e.getHours()*_1c,_1d.getMinutes()+_1e.getMinutes()*_1c,_1d.getSeconds()+_1e.getSeconds()*_1c);if(this.constraints.selector=="time"){_1d.setFullYear(1970,0,1);}var _1f=_4.date.locale.format(_1d,this.constraints);if(this.filterString&&_1f.toLowerCase().indexOf(this.filterString)!==0){return null;}var div=_4.create("div",{"class":this.baseClass+"Item"});div.date=_1d;div.index=_1c;_4.create("div",{"class":this.baseClass+"ItemInner",innerHTML:_1f},div);if(_1c%this._visibleIncrement<1&&_1c%this._visibleIncrement>-1){_4.addClass(div,this.baseClass+"Marker");}else{if(!(_1c%this._clickableIncrement)){_4.addClass(div,this.baseClass+"Tick");}}if(this.isDisabledDate(_1d)){_4.addClass(div,this.baseClass+"ItemDisabled");}if(this.value&&!_4.date.compare(this.value,_1d,this.constraints.selector)){div.selected=true;_4.addClass(div,this.baseClass+"ItemSelected");if(_4.hasClass(div,this.baseClass+"Marker")){_4.addClass(div,this.baseClass+"MarkerSelected");}else{_4.addClass(div,this.baseClass+"TickSelected");}this._highlightOption(div,true);}return div;},_onOptionSelected:function(tgt){var _20=tgt.target.date||tgt.target.parentNode.date;if(!_20||this.isDisabledDate(_20)){return;}this._highlighted_option=null;this.set("value",_20);this.onChange(_20);},onChange:function(_21){},_highlightOption:function(_22,_23){if(!_22){return;}if(_23){if(this._highlighted_option){this._highlightOption(this._highlighted_option,false);}this._highlighted_option=_22;}else{if(this._highlighted_option!==_22){return;}else{this._highlighted_option=null;}}_4.toggleClass(_22,this.baseClass+"ItemHover",_23);if(_4.hasClass(_22,this.baseClass+"Marker")){_4.toggleClass(_22,this.baseClass+"MarkerHover",_23);}else{_4.toggleClass(_22,this.baseClass+"TickHover",_23);}},onmouseover:function(e){this._keyboardSelected=null;var tgr=(e.target.parentNode===this.timeMenu)?e.target:e.target.parentNode;if(!_4.hasClass(tgr,this.baseClass+"Item")){return;}this._highlightOption(tgr,true);},onmouseout:function(e){this._keyboardSelected=null;var tgr=(e.target.parentNode===this.timeMenu)?e.target:e.target.parentNode;this._highlightOption(tgr,false);},_mouseWheeled:function(e){this._keyboardSelected=null;_4.stopEvent(e);var _24=(_4.isIE?e.wheelDelta:-e.detail);this[(_24>0?"_onArrowUp":"_onArrowDown")]();},_onArrowUp:function(_25){if(typeof _25=="number"&&_25==-1){return;}if(!this.timeMenu.childNodes.length){return;}var _26=this.timeMenu.childNodes[0].index;var _27=this._getFilteredNodes(_26,1,true,this.timeMenu.childNodes[0]);if(_27.length){this.timeMenu.removeChild(this.timeMenu.childNodes[this.timeMenu.childNodes.length-1]);this.timeMenu.insertBefore(_27[0],this.timeMenu.childNodes[0]);}},_onArrowDown:function(_28){if(typeof _28=="number"&&_28==-1){return;}if(!this.timeMenu.childNodes.length){return;}var _29=this.timeMenu.childNodes[this.timeMenu.childNodes.length-1].index+1;var _2a=this._getFilteredNodes(_29,1,false,this.timeMenu.childNodes[this.timeMenu.childNodes.length-1]);if(_2a.length){this.timeMenu.removeChild(this.timeMenu.childNodes[0]);this.timeMenu.appendChild(_2a[0]);}},handleKey:function(e){var dk=_4.keys;if(e.charOrCode==dk.DOWN_ARROW||e.charOrCode==dk.UP_ARROW){_4.stopEvent(e);if(this._highlighted_option&&!this._highlighted_option.parentNode){this._highlighted_option=null;}var _2b=this.timeMenu,tgt=this._highlighted_option||_4.query("."+this.baseClass+"ItemSelected",_2b)[0];if(!tgt){tgt=_2b.childNodes[0];}else{if(_2b.childNodes.length){if(e.charOrCode==dk.DOWN_ARROW&&!tgt.nextSibling){this._onArrowDown();}else{if(e.charOrCode==dk.UP_ARROW&&!tgt.previousSibling){this._onArrowUp();}}if(e.charOrCode==dk.DOWN_ARROW){tgt=tgt.nextSibling;}else{tgt=tgt.previousSibling;}}}this._highlightOption(tgt,true);this._keyboardSelected=tgt;return false;}else{if(e.charOrCode==dk.ENTER||e.charOrCode===dk.TAB){if(!this._keyboardSelected&&e.charOrCode===dk.TAB){return true;}if(this._highlighted_option){this._onOptionSelected({target:this._highlighted_option});}return e.charOrCode===dk.TAB;}}}});}}};});