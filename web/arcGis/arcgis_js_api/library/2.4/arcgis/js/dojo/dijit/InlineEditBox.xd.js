/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


window[esri._dojoScopeName||"dojo"]._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dijit.InlineEditBox"],["require","dojo.i18n"],["require","dijit._Widget"],["require","dijit._Container"],["require","dijit.form.Button"],["require","dijit.form.TextBox"],["requireLocalization","dijit","common",null,"ROOT,ar,ca,cs,da,de,el,es,fi,fr,he,hu,it,ja,kk,ko,nb,nl,pl,pt,pt-pt,ro,ru,sk,sl,sv,th,tr,zh,zh-tw","ROOT,ar,ca,cs,da,de,el,es,fi,fr,he,hu,it,ja,kk,ko,nb,nl,pl,pt,pt-pt,ro,ru,sk,sl,sv,th,tr,zh,zh-tw"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dijit.InlineEditBox"]){_4._hasResource["dijit.InlineEditBox"]=true;_4.provide("dijit.InlineEditBox");_4.require("dojo.i18n");_4.require("dijit._Widget");_4.require("dijit._Container");_4.require("dijit.form.Button");_4.require("dijit.form.TextBox");_4.declare("dijit.InlineEditBox",_5._Widget,{editing:false,autoSave:true,buttonSave:"",buttonCancel:"",renderAsHtml:false,editor:"dijit.form.TextBox",editorWrapper:"dijit._InlineEditor",editorParams:{},disabled:false,onChange:function(_7){},onCancel:function(){},width:"100%",value:"",noValueIndicator:_4.isIE<=6?"<span style='font-family: wingdings; text-decoration: underline;'>&nbsp;&nbsp;&nbsp;&nbsp;&#x270d;&nbsp;&nbsp;&nbsp;&nbsp;</span>":"<span style='text-decoration: underline;'>&nbsp;&nbsp;&nbsp;&nbsp;&#x270d;&nbsp;&nbsp;&nbsp;&nbsp;</span>",constructor:function(){this.editorParams={};},postMixInProperties:function(){this.inherited(arguments);this.displayNode=this.srcNodeRef;var _8={ondijitclick:"_onClick",onmouseover:"_onMouseOver",onmouseout:"_onMouseOut",onfocus:"_onMouseOver",onblur:"_onMouseOut"};for(var _9 in _8){this.connect(this.displayNode,_9,_8[_9]);}_5.setWaiRole(this.displayNode,"button");if(!this.displayNode.getAttribute("tabIndex")){this.displayNode.setAttribute("tabIndex",0);}if(!this.value&&!("value" in this.params)){this.value=_4.trim(this.renderAsHtml?this.displayNode.innerHTML:(this.displayNode.innerText||this.displayNode.textContent||""));}if(!this.value){this.displayNode.innerHTML=this.noValueIndicator;}_4.addClass(this.displayNode,"dijitInlineEditBoxDisplayMode");},setDisabled:function(_a){_4.deprecated("dijit.InlineEditBox.setDisabled() is deprecated.  Use set('disabled', bool) instead.","","2.0");this.set("disabled",_a);},_setDisabledAttr:function(_b){_5.setWaiState(this.domNode,"disabled",_b);if(_b){this.displayNode.removeAttribute("tabIndex");}else{this.displayNode.setAttribute("tabIndex",0);}_4.toggleClass(this.displayNode,"dijitInlineEditBoxDisplayModeDisabled",_b);this._set("disabled",_b);},_onMouseOver:function(){if(!this.disabled){_4.addClass(this.displayNode,"dijitInlineEditBoxDisplayModeHover");}},_onMouseOut:function(){_4.removeClass(this.displayNode,"dijitInlineEditBoxDisplayModeHover");},_onClick:function(e){if(this.disabled){return;}if(e){_4.stopEvent(e);}this._onMouseOut();setTimeout(_4.hitch(this,"edit"),0);},edit:function(){if(this.disabled||this.editing){return;}this.editing=true;this._savedPosition=_4.style(this.displayNode,"position")||"static";this._savedOpacity=_4.style(this.displayNode,"opacity")||"1";this._savedTabIndex=_4.attr(this.displayNode,"tabIndex")||"0";if(this.wrapperWidget){var ew=this.wrapperWidget.editWidget;ew.set("displayedValue" in ew?"displayedValue":"value",this.value);}else{var _c=_4.create("span",null,this.domNode,"before");var _d=typeof this.editorWrapper=="string"?_4.getObject(this.editorWrapper):this.editorWrapper;this.wrapperWidget=new _d({value:this.value,buttonSave:this.buttonSave,buttonCancel:this.buttonCancel,dir:this.dir,lang:this.lang,tabIndex:this._savedTabIndex,editor:this.editor,inlineEditBox:this,sourceStyle:_4.getComputedStyle(this.displayNode),save:_4.hitch(this,"save"),cancel:_4.hitch(this,"cancel")},_c);if(!this._started){this.startup();}}var ww=this.wrapperWidget;if(_4.isIE){_5.focus(_5.getFocus());}_4.style(this.displayNode,{position:"absolute",opacity:"0",display:"none"});_4.style(ww.domNode,{position:this._savedPosition,visibility:"visible",opacity:"1"});_4.attr(this.displayNode,"tabIndex","-1");setTimeout(_4.hitch(this,function(){ww.focus();ww._resetValue=ww.getValue();}),0);},_onBlur:function(){this.inherited(arguments);if(!this.editing){}},destroy:function(){if(this.wrapperWidget&&!this.wrapperWidget._destroyed){this.wrapperWidget.destroy();delete this.wrapperWidget;}this.inherited(arguments);},_showText:function(_e){var ww=this.wrapperWidget;_4.style(ww.domNode,{position:"absolute",visibility:"hidden",opacity:"0"});_4.style(this.displayNode,{position:this._savedPosition,opacity:this._savedOpacity,display:""});_4.attr(this.displayNode,"tabIndex",this._savedTabIndex);if(_e){_5.focus(this.displayNode);}},save:function(_f){if(this.disabled||!this.editing){return;}this.editing=false;var ww=this.wrapperWidget;var _10=ww.getValue();this.set("value",_10);this._showText(_f);},setValue:function(val){_4.deprecated("dijit.InlineEditBox.setValue() is deprecated.  Use set('value', ...) instead.","","2.0");return this.set("value",val);},_setValueAttr:function(val){val=_4.trim(val);var _11=this.renderAsHtml?val:val.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;").replace(/\n/g,"<br>");this.displayNode.innerHTML=_11||this.noValueIndicator;this._set("value",val);if(this._started){setTimeout(_4.hitch(this,"onChange",val),0);}},getValue:function(){_4.deprecated("dijit.InlineEditBox.getValue() is deprecated.  Use get('value') instead.","","2.0");return this.get("value");},cancel:function(_12){if(this.disabled||!this.editing){return;}this.editing=false;setTimeout(_4.hitch(this,"onCancel"),0);this._showText(_12);}});_4.declare("dijit._InlineEditor",[_5._Widget,_5._Templated],{templateString:_4.cache("dijit","templates/InlineEditBox.html","<span data-dojo-attach-point=\"editNode\" role=\"presentation\" style=\"position: absolute; visibility:hidden\" class=\"dijitReset dijitInline\"\r\n\tdata-dojo-attach-event=\"onkeypress: _onKeyPress\"\r\n\t><span data-dojo-attach-point=\"editorPlaceholder\"></span\r\n\t><span data-dojo-attach-point=\"buttonContainer\"\r\n\t\t><button data-dojo-type=\"dijit.form.Button\" data-dojo-props=\"label: '${buttonSave}', 'class': 'saveButton'\"\r\n\t\t\tdata-dojo-attach-point=\"saveButton\" data-dojo-attach-event=\"onClick:save\"></button\r\n\t\t><button data-dojo-type=\"dijit.form.Button\"  data-dojo-props=\"label: '${buttonCancel}', 'class': 'cancelButton'\"\r\n\t\t\tdata-dojo-attach-point=\"cancelButton\" data-dojo-attach-event=\"onClick:cancel\"></button\r\n\t></span\r\n></span>\r\n"),widgetsInTemplate:true,postMixInProperties:function(){this.inherited(arguments);this.messages=_4.i18n.getLocalization("dijit","common",this.lang);_4.forEach(["buttonSave","buttonCancel"],function(_13){if(!this[_13]){this[_13]=this.messages[_13];}},this);},buildRendering:function(){this.inherited(arguments);var cls=typeof this.editor=="string"?_4.getObject(this.editor):this.editor;var _14=this.sourceStyle,_15="line-height:"+_14.lineHeight+";",_16=_4.getComputedStyle(this.domNode);_4.forEach(["Weight","Family","Size","Style"],function(_17){var _18=_14["font"+_17],_19=_16["font"+_17];if(_19!=_18){_15+="font-"+_17+":"+_14["font"+_17]+";";}},this);_4.forEach(["marginTop","marginBottom","marginLeft","marginRight"],function(_1a){this.domNode.style[_1a]=_14[_1a];},this);var _1b=this.inlineEditBox.width;if(_1b=="100%"){_15+="width:100%;";this.domNode.style.display="block";}else{_15+="width:"+(_1b+(Number(_1b)==_1b?"px":""))+";";}var _1c=_4.delegate(this.inlineEditBox.editorParams,{style:_15,dir:this.dir,lang:this.lang});_1c["displayedValue" in cls.prototype?"displayedValue":"value"]=this.value;this.editWidget=new cls(_1c,this.editorPlaceholder);if(this.inlineEditBox.autoSave){_4.destroy(this.buttonContainer);}},postCreate:function(){this.inherited(arguments);var ew=this.editWidget;if(this.inlineEditBox.autoSave){this.connect(ew,"onChange","_onChange");this.connect(ew,"onKeyPress","_onKeyPress");}else{if("intermediateChanges" in ew){ew.set("intermediateChanges",true);this.connect(ew,"onChange","_onIntermediateChange");this.saveButton.set("disabled",true);}}},_onIntermediateChange:function(val){this.saveButton.set("disabled",(this.getValue()==this._resetValue)||!this.enableSave());},destroy:function(){this.editWidget.destroy(true);this.inherited(arguments);},getValue:function(){var ew=this.editWidget;return String(ew.get("displayedValue" in ew?"displayedValue":"value"));},_onKeyPress:function(e){if(this.inlineEditBox.autoSave&&this.inlineEditBox.editing){if(e.altKey||e.ctrlKey){return;}if(e.charOrCode==_4.keys.ESCAPE){_4.stopEvent(e);this.cancel(true);}else{if(e.charOrCode==_4.keys.ENTER&&e.target.tagName=="INPUT"){_4.stopEvent(e);this._onChange();}}}},_onBlur:function(){this.inherited(arguments);if(this.inlineEditBox.autoSave&&this.inlineEditBox.editing){if(this.getValue()==this._resetValue){this.cancel(false);}else{if(this.enableSave()){this.save(false);}}}},_onChange:function(){if(this.inlineEditBox.autoSave&&this.inlineEditBox.editing&&this.enableSave()){_4.style(this.inlineEditBox.displayNode,{display:""});_5.focus(this.inlineEditBox.displayNode);}},enableSave:function(){return (this.editWidget.isValid?this.editWidget.isValid():true);},focus:function(){this.editWidget.focus();setTimeout(_4.hitch(this,function(){if(this.editWidget.focusNode&&this.editWidget.focusNode.tagName=="INPUT"){_5.selectInputText(this.editWidget.focusNode);}}),0);}});}}};});