/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


window[esri._dojoScopeName||"dojo"]._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dijit.Calendar"],["require","dojo.cldr.supplemental"],["require","dojo.date"],["require","dojo.date.locale"],["require","dijit._Widget"],["require","dijit._Templated"],["require","dijit._CssStateMixin"],["require","dijit.form.DropDownButton"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dijit.Calendar"]){_4._hasResource["dijit.Calendar"]=true;_4.provide("dijit.Calendar");_4.require("dojo.cldr.supplemental");_4.require("dojo.date");_4.require("dojo.date.locale");_4.require("dijit._Widget");_4.require("dijit._Templated");_4.require("dijit._CssStateMixin");_4.require("dijit.form.DropDownButton");_4.declare("dijit.Calendar",[_5._Widget,_5._Templated,_5._CssStateMixin],{templateString:_4.cache("dijit","templates/Calendar.html","<table cellspacing=\"0\" cellpadding=\"0\" class=\"dijitCalendarContainer\" role=\"grid\" dojoAttachEvent=\"onkeypress: _onKeyPress\" aria-labelledby=\"${id}_year\">\r\n\t<thead>\r\n\t\t<tr class=\"dijitReset dijitCalendarMonthContainer\" valign=\"top\">\r\n\t\t\t<th class='dijitReset dijitCalendarArrow' dojoAttachPoint=\"decrementMonth\">\r\n\t\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitCalendarIncrementControl dijitCalendarDecrease\" role=\"presentation\"/>\r\n\t\t\t\t<span dojoAttachPoint=\"decreaseArrowNode\" class=\"dijitA11ySideArrow\">-</span>\r\n\t\t\t</th>\r\n\t\t\t<th class='dijitReset' colspan=\"5\">\r\n\t\t\t\t<div dojoType=\"dijit.form.DropDownButton\" dojoAttachPoint=\"monthDropDownButton\"\r\n\t\t\t\t\tid=\"${id}_mddb\" tabIndex=\"-1\">\r\n\t\t\t\t</div>\r\n\t\t\t</th>\r\n\t\t\t<th class='dijitReset dijitCalendarArrow' dojoAttachPoint=\"incrementMonth\">\r\n\t\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitCalendarIncrementControl dijitCalendarIncrease\" role=\"presentation\"/>\r\n\t\t\t\t<span dojoAttachPoint=\"increaseArrowNode\" class=\"dijitA11ySideArrow\">+</span>\r\n\t\t\t</th>\r\n\t\t</tr>\r\n\t\t<tr>\r\n\t\t\t<th class=\"dijitReset dijitCalendarDayLabelTemplate\" role=\"columnheader\"><span class=\"dijitCalendarDayLabel\"></span></th>\r\n\t\t</tr>\r\n\t</thead>\r\n\t<tbody dojoAttachEvent=\"onclick: _onDayClick, onmouseover: _onDayMouseOver, onmouseout: _onDayMouseOut, onmousedown: _onDayMouseDown, onmouseup: _onDayMouseUp\" class=\"dijitReset dijitCalendarBodyContainer\">\r\n\t\t<tr class=\"dijitReset dijitCalendarWeekTemplate\" role=\"row\">\r\n\t\t\t<td class=\"dijitReset dijitCalendarDateTemplate\" role=\"gridcell\"><span class=\"dijitCalendarDateLabel\"></span></td>\r\n\t\t</tr>\r\n\t</tbody>\r\n\t<tfoot class=\"dijitReset dijitCalendarYearContainer\">\r\n\t\t<tr>\r\n\t\t\t<td class='dijitReset' valign=\"top\" colspan=\"7\">\r\n\t\t\t\t<h3 class=\"dijitCalendarYearLabel\">\r\n\t\t\t\t\t<span dojoAttachPoint=\"previousYearLabelNode\" class=\"dijitInline dijitCalendarPreviousYear\"></span>\r\n\t\t\t\t\t<span dojoAttachPoint=\"currentYearLabelNode\" class=\"dijitInline dijitCalendarSelectedYear\" id=\"${id}_year\"></span>\r\n\t\t\t\t\t<span dojoAttachPoint=\"nextYearLabelNode\" class=\"dijitInline dijitCalendarNextYear\"></span>\r\n\t\t\t\t</h3>\r\n\t\t\t</td>\r\n\t\t</tr>\r\n\t</tfoot>\r\n</table>\r\n"),widgetsInTemplate:true,value:new Date(""),datePackage:"dojo.date",dayWidth:"narrow",tabIndex:"0",currentFocus:new Date(),baseClass:"dijitCalendar",cssStateNodes:{"decrementMonth":"dijitCalendarArrow","incrementMonth":"dijitCalendarArrow","previousYearLabelNode":"dijitCalendarPreviousYear","nextYearLabelNode":"dijitCalendarNextYear"},_isValidDate:function(_7){return _7&&!isNaN(_7)&&typeof _7=="object"&&_7.toString()!=this.constructor.prototype.value.toString();},setValue:function(_8){_4.deprecated("dijit.Calendar:setValue() is deprecated.  Use set('value', ...) instead.","","2.0");this.set("value",_8);},_getValueAttr:function(){var _9=new this.dateClassObj(this.value);_9.setHours(0,0,0,0);if(_9.getDate()<this.value.getDate()){_9=this.dateFuncObj.add(_9,"hour",1);}return _9;},_setValueAttr:function(_a,_b){if(_a){_a=new this.dateClassObj(_a);}if(this._isValidDate(_a)){if(!this._isValidDate(this.value)||this.dateFuncObj.compare(_a,this.value)){_a.setHours(1,0,0,0);if(!this.isDisabledDate(_a,this.lang)){this._set("value",_a);this.set("currentFocus",_a);if(_b||typeof _b=="undefined"){this.onChange(this.get("value"));this.onValueSelected(this.get("value"));}}}}else{this._set("value",null);this.set("currentFocus",this.currentFocus);}},_setText:function(_c,_d){while(_c.firstChild){_c.removeChild(_c.firstChild);}_c.appendChild(_4.doc.createTextNode(_d));},_populateGrid:function(){var _e=new this.dateClassObj(this.currentFocus);_e.setDate(1);var _f=_e.getDay(),_10=this.dateFuncObj.getDaysInMonth(_e),_11=this.dateFuncObj.getDaysInMonth(this.dateFuncObj.add(_e,"month",-1)),_12=new this.dateClassObj(),_13=_4.cldr.supplemental.getFirstDayOfWeek(this.lang);if(_13>_f){_13-=7;}_4.query(".dijitCalendarDateTemplate",this.domNode).forEach(function(_14,i){i+=_13;var _15=new this.dateClassObj(_e),_16,_17="dijitCalendar",adj=0;if(i<_f){_16=_11-_f+i+1;adj=-1;_17+="Previous";}else{if(i>=(_f+_10)){_16=i-_f-_10+1;adj=1;_17+="Next";}else{_16=i-_f+1;_17+="Current";}}if(adj){_15=this.dateFuncObj.add(_15,"month",adj);}_15.setDate(_16);if(!this.dateFuncObj.compare(_15,_12,"date")){_17="dijitCalendarCurrentDate "+_17;}if(this._isSelectedDate(_15,this.lang)){_17="dijitCalendarSelectedDate "+_17;}if(this.isDisabledDate(_15,this.lang)){_17="dijitCalendarDisabledDate "+_17;}var _18=this.getClassForDate(_15,this.lang);if(_18){_17=_18+" "+_17;}_14.className=_17+"Month dijitCalendarDateTemplate";_14.dijitDateValue=_15.valueOf();_4.attr(_14,"dijitDateValue",_15.valueOf());var _19=_4.query(".dijitCalendarDateLabel",_14)[0],_1a=_15.getDateLocalized?_15.getDateLocalized(this.lang):_15.getDate();this._setText(_19,_1a);},this);var _1b=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,_e);this.monthDropDownButton.dropDown.set("months",_1b);this.monthDropDownButton.containerNode.innerHTML=(_4.isIE==6?"":"<div class='dijitSpacer'>"+this.monthDropDownButton.dropDown.domNode.innerHTML+"</div>")+"<div class='dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'>"+_1b[_e.getMonth()]+"</div>";var y=_e.getFullYear()-1;var d=new this.dateClassObj();_4.forEach(["previous","current","next"],function(_1c){d.setFullYear(y++);this._setText(this[_1c+"YearLabelNode"],this.dateLocaleModule.format(d,{selector:"year",locale:this.lang}));},this);},goToToday:function(){this.set("value",new this.dateClassObj());},constructor:function(_1d){var _1e=(_1d.datePackage&&(_1d.datePackage!="dojo.date"))?_1d.datePackage+".Date":"Date";this.dateClassObj=_4.getObject(_1e,false);this.datePackage=_1d.datePackage||this.datePackage;this.dateFuncObj=_4.getObject(this.datePackage,false);this.dateLocaleModule=_4.getObject(this.datePackage+".locale",false);},postMixInProperties:function(){if(isNaN(this.value)){delete this.value;}this.inherited(arguments);},buildRendering:function(){this.inherited(arguments);_4.setSelectable(this.domNode,false);var _1f=_4.hitch(this,function(_20,n){var _21=_4.query(_20,this.domNode)[0];for(var i=0;i<n;i++){_21.parentNode.appendChild(_21.cloneNode(true));}});_1f(".dijitCalendarDayLabelTemplate",6);_1f(".dijitCalendarDateTemplate",6);_1f(".dijitCalendarWeekTemplate",5);var _22=this.dateLocaleModule.getNames("days",this.dayWidth,"standAlone",this.lang);var _23=_4.cldr.supplemental.getFirstDayOfWeek(this.lang);_4.query(".dijitCalendarDayLabel",this.domNode).forEach(function(_24,i){this._setText(_24,_22[(i+_23)%7]);},this);var _25=new this.dateClassObj(this.currentFocus);this.monthDropDownButton.dropDown=new _5.Calendar._MonthDropDown({id:this.id+"_mdd",onChange:_4.hitch(this,"_onMonthSelect")});this.set("currentFocus",_25,false);var _26=this;var _27=function(_28,_29,adj){_26._connects.push(_5.typematic.addMouseListener(_26[_28],_26,function(_2a){if(_2a>=0){_26._adjustDisplay(_29,adj);}},0.8,500));};_27("incrementMonth","month",1);_27("decrementMonth","month",-1);_27("nextYearLabelNode","year",1);_27("previousYearLabelNode","year",-1);},_adjustDisplay:function(_2b,_2c){this._setCurrentFocusAttr(this.dateFuncObj.add(this.currentFocus,_2b,_2c));},_setCurrentFocusAttr:function(_2d,_2e){var _2f=this.currentFocus,_30=_2f?_4.query("[dijitDateValue="+_2f.valueOf()+"]",this.domNode)[0]:null;_2d=new this.dateClassObj(_2d);_2d.setHours(1,0,0,0);this._set("currentFocus",_2d);this._populateGrid();var _31=_4.query("[dijitDateValue="+_2d.valueOf()+"]",this.domNode)[0];_31.setAttribute("tabIndex",this.tabIndex);if(this._focused||_2e){_31.focus();}if(_30&&_30!=_31){if(_4.isWebKit){_30.setAttribute("tabIndex","-1");}else{_30.removeAttribute("tabIndex");}}},focus:function(){this._setCurrentFocusAttr(this.currentFocus,true);},_onMonthSelect:function(_32){this.currentFocus=this.dateFuncObj.add(this.currentFocus,"month",_32-this.currentFocus.getMonth());this._populateGrid();},_onDayClick:function(evt){_4.stopEvent(evt);for(var _33=evt.target;_33&&!_33.dijitDateValue;_33=_33.parentNode){}if(_33&&!_4.hasClass(_33,"dijitCalendarDisabledDate")){this.set("value",_33.dijitDateValue);}},_onDayMouseOver:function(evt){var _34=_4.hasClass(evt.target,"dijitCalendarDateLabel")?evt.target.parentNode:evt.target;if(_34&&(_34.dijitDateValue||_34==this.previousYearLabelNode||_34==this.nextYearLabelNode)){_4.addClass(_34,"dijitCalendarHoveredDate");this._currentNode=_34;}},_onDayMouseOut:function(evt){if(!this._currentNode){return;}if(evt.relatedTarget&&evt.relatedTarget.parentNode==this._currentNode){return;}var cls="dijitCalendarHoveredDate";if(_4.hasClass(this._currentNode,"dijitCalendarActiveDate")){cls+=" dijitCalendarActiveDate";}_4.removeClass(this._currentNode,cls);this._currentNode=null;},_onDayMouseDown:function(evt){var _35=evt.target.parentNode;if(_35&&_35.dijitDateValue){_4.addClass(_35,"dijitCalendarActiveDate");this._currentNode=_35;}},_onDayMouseUp:function(evt){var _36=evt.target.parentNode;if(_36&&_36.dijitDateValue){_4.removeClass(_36,"dijitCalendarActiveDate");}},handleKey:function(evt){var dk=_4.keys,_37=-1,_38,_39=this.currentFocus;switch(evt.keyCode){case dk.RIGHT_ARROW:_37=1;case dk.LEFT_ARROW:_38="day";if(!this.isLeftToRight()){_37*=-1;}break;case dk.DOWN_ARROW:_37=1;case dk.UP_ARROW:_38="week";break;case dk.PAGE_DOWN:_37=1;case dk.PAGE_UP:_38=evt.ctrlKey||evt.altKey?"year":"month";break;case dk.END:_39=this.dateFuncObj.add(_39,"month",1);_38="day";case dk.HOME:_39=new this.dateClassObj(_39);_39.setDate(1);break;case dk.ENTER:case dk.SPACE:this.set("value",this.currentFocus);break;default:return true;}if(_38){_39=this.dateFuncObj.add(_39,_38,_37);}this._setCurrentFocusAttr(_39);return false;},_onKeyPress:function(evt){if(!this.handleKey(evt)){_4.stopEvent(evt);}},onValueSelected:function(_3a){},onChange:function(_3b){},_isSelectedDate:function(_3c,_3d){return this._isValidDate(this.value)&&!this.dateFuncObj.compare(_3c,this.value,"date");},isDisabledDate:function(_3e,_3f){},getClassForDate:function(_40,_41){}});_4.declare("dijit.Calendar._MonthDropDown",[_5._Widget,_5._Templated],{months:[],templateString:"<div class='dijitCalendarMonthMenu dijitMenu' "+"dojoAttachEvent='onclick:_onClick,onmouseover:_onMenuHover,onmouseout:_onMenuHover'></div>",_setMonthsAttr:function(_42){this.domNode.innerHTML=_4.map(_42,function(_43,idx){return _43?"<div class='dijitCalendarMonthLabel' month='"+idx+"'>"+_43+"</div>":"";}).join("");},_onClick:function(evt){this.onChange(_4.attr(evt.target,"month"));},onChange:function(_44){},_onMenuHover:function(evt){_4.toggleClass(evt.target,"dijitCalendarMonthLabelHover",evt.type=="mouseover");}});}}};});