/*
 COPYRIGHT 2009 ESRI

 TRADE SECRETS: ESRI PROPRIETARY AND CONFIDENTIAL
 Unpublished material - all rights reserved under the
 Copyright Laws of the United States and applicable international
 laws, treaties, and conventions.

 For additional information, contact:
 Environmental Systems Research Institute, Inc.
 Attn: Contracts and Legal Services Department
 380 New York Street
 Redlands, California, 92373
 USA

 email: contracts@esri.com
 */

if(!dojo._hasResource["esri.symbol"]){dojo._hasResource["esri.symbol"]=true;dojo.provide("esri.symbol");dojo.require("dojo._base.Color");dojo.require("dojox.gfx._base");dojo.require("esri.utils");dojo.mixin(esri.symbol,{toDojoColor:function(_1){return _1&&new dojo.Color([_1[0],_1[1],_1[2],_1[3]/255]);},toJsonColor:function(_2){return _2&&[_2.r,_2.g,_2.b,Math.round(_2.a*255)];},fromJson:function(_3){var _4=_3.type,_5=null;switch(_4.substring(0,"esriXX".length)){case "esriSM":_5=new esri.symbol.SimpleMarkerSymbol(_3);break;case "esriPM":_5=new esri.symbol.PictureMarkerSymbol(_3);break;case "esriTS":_5=new esri.symbol.TextSymbol(_3);break;case "esriSL":if(_3.cap!==undefined){_5=new esri.symbol.CartographicLineSymbol(_3);}else{_5=new esri.symbol.SimpleLineSymbol(_3);}break;case "esriSF":_5=new esri.symbol.SimpleFillSymbol(_3);break;case "esriPF":_5=new esri.symbol.PictureFillSymbol(_3);break;}return _5;}});dojo.declare("esri.symbol.Symbol",null,{color:new dojo.Color([0,0,0,1]),type:null,_stroke:null,_fill:null,constructor:function(_6){if(_6&&dojo.isObject(_6)){dojo.mixin(this,_6);this.color=esri.symbol.toDojoColor(this.color);var _7=this.type;if(_7){this.type={"esriSMS":"simplemarkersymbol","esriPMS":"picturemarkersymbol","esriSLS":"simplelinesymbol","esriCLS":"cartographiclinesymbol","esriSFS":"simplefillsymbol","esriPFS":"picturefillsymbol","esriTS":"textsymbol"}[_7];}}},setColor:function(_8){this.color=_8;return this;},toJson:function(){return {color:esri.symbol.toJsonColor(this.color)};}});dojo.declare("esri.symbol.MarkerSymbol",esri.symbol.Symbol,{constructor:function(_9){if(_9&&dojo.isObject(_9)){this.size=dojox.gfx.pt2px(this.size);this.xoffset=dojox.gfx.pt2px(this.xoffset);this.yoffset=dojox.gfx.pt2px(this.yoffset);}},setAngle:function(_a){this.angle=_a;return this;},setSize:function(_b){this.size=_b;return this;},setOffset:function(x,y){this.xoffset=x;this.yoffset=y;return this;},toJson:function(){var _c=dojox.gfx.px2pt(this.size);_c=isNaN(_c)?undefined:_c;var _d=dojox.gfx.px2pt(this.xoffset);_d=isNaN(_d)?undefined:_d;var _e=dojox.gfx.px2pt(this.yoffset);_e=isNaN(_e)?undefined:_e;return dojo.mixin(this.inherited("toJson",arguments),{size:_c,angle:this.angle,xoffset:_d,yoffset:_e});},angle:0,xoffset:0,yoffset:0,size:12});dojo.declare("esri.symbol.SimpleMarkerSymbol",esri.symbol.MarkerSymbol,{constructor:function(_f,_10,_11,_12){if(_f){if(dojo.isString(_f)){this.style=_f;if(_10){this.size=_10;}if(_11){this.outline=_11;}if(_12){this.color=_12;}}else{this.style=esri.valueOf(this._styles,this.style);if(_f.outline){this.outline=new esri.symbol.SimpleLineSymbol(_f.outline);}}}else{dojo.mixin(this,esri.symbol.defaultSimpleMarkerSymbol);this.size=dojox.gfx.pt2px(this.size);this.outline=new esri.symbol.SimpleLineSymbol(this.outline);this.color=new dojo.Color(this.color);}if(!this.style){this.style=esri.symbol.SimpleMarkerSymbol.STYLE_CIRCLE;}},type:"simplemarkersymbol",setStyle:function(_13){this.style=_13;return this;},setOutline:function(_14){this.outline=_14;return this;},getStroke:function(){return this.outline&&this.outline.getStroke();},getFill:function(){return this.color;},_setDim:function(_15,_16,_17){this._targetWidth=_15;this._targetHeight=_16;this._spikeSize=_17;},toJson:function(){var _18=dojo.mixin(this.inherited("toJson",arguments),{type:"esriSMS",style:this._styles[this.style]}),_19=this.outline;if(_19){_18.outline=_19.toJson();}return esri._sanitize(_18);},_styles:{circle:"esriSMSCircle",square:"esriSMSSquare",cross:"esriSMSCross",x:"esriSMSX",diamond:"esriSMSDiamond"}});dojo.mixin(esri.symbol.SimpleMarkerSymbol,{STYLE_CIRCLE:"circle",STYLE_SQUARE:"square",STYLE_CROSS:"cross",STYLE_X:"x",STYLE_DIAMOND:"diamond",STYLE_TARGET:"target"});dojo.declare("esri.symbol.PictureMarkerSymbol",esri.symbol.MarkerSymbol,{constructor:function(_1a,_1b,_1c){if(_1a){if(dojo.isString(_1a)){this.url=_1a;if(_1b){this.width=_1b;}if(_1c){this.height=_1c;}}else{this.width=dojox.gfx.pt2px(_1a.width);this.height=dojox.gfx.pt2px(_1a.height);var _1d=_1a.imageData;if((!esri.vml)&&_1d){var _1e=this.url;this.url="data:"+(_1a.contentType||"image")+";base64,"+_1d;this.imageData=_1e;}}}else{dojo.mixin(this,esri.symbol.defaultPictureMarkerSymbol);this.width=dojox.gfx.pt2px(this.width);this.height=dojox.gfx.pt2px(this.height);}},type:"picturemarkersymbol",getStroke:function(){return null;},getFill:function(){return null;},setWidth:function(_1f){this.width=_1f;return this;},setHeight:function(_20){this.height=_20;return this;},setUrl:function(url){if(url!==this.url){delete this.imageData;delete this.contentType;}this.url=url;return this;},toJson:function(){var url=this.url,_21=this.imageData;if(url.indexOf("data:")===0){var _22=url;url=_21;var _23=_22.indexOf(";base64,")+8;_21=_22.substr(_23);}var _24=dojox.gfx.px2pt(this.width);_24=isNaN(_24)?undefined:_24;var _25=dojox.gfx.px2pt(this.height);_25=isNaN(_25)?undefined:_25;var _26=esri._sanitize(dojo.mixin(this.inherited("toJson",arguments),{type:"esriPMS",url:url,imageData:_21,contentType:this.contentType,width:_24,height:_25}));delete _26.color;delete _26.size;return _26;}});dojo.declare("esri.symbol.LineSymbol",esri.symbol.Symbol,{constructor:function(_27){if(dojo.isObject(_27)){this.width=dojox.gfx.pt2px(this.width);}else{this.width=12;}},setWidth:function(_28){this.width=_28;return this;},toJson:function(){var _29=dojox.gfx.px2pt(this.width);_29=isNaN(_29)?undefined:_29;return dojo.mixin(this.inherited("toJson",arguments),{width:_29});}});dojo.declare("esri.symbol.SimpleLineSymbol",esri.symbol.LineSymbol,{constructor:function(_2a,_2b,_2c){if(_2a){if(dojo.isString(_2a)){this.style=_2a;if(_2b){this.color=_2b;}if(_2c){this.width=_2c;}}else{this.style=esri.valueOf(this._styles,_2a.style)||esri.symbol.SimpleLineSymbol.STYLE_SOLID;}}else{dojo.mixin(this,esri.symbol.defaultSimpleLineSymbol);this.color=new dojo.Color(this.color);this.width=dojox.gfx.pt2px(this.width);}},type:"simplelinesymbol",setStyle:function(_2d){this.style=_2d;return this;},getStroke:function(){return (this.style===esri.symbol.SimpleLineSymbol.STYLE_NULL||this.width===0)?null:{color:this.color,style:this.style,width:this.width};},getFill:function(){return null;},toJson:function(){return esri._sanitize(dojo.mixin(this.inherited("toJson",arguments),{type:"esriSLS",style:this._styles[this.style]}));},_styles:{solid:"esriSLSSolid",dash:"esriSLSDash",dot:"esriSLSDot",dashdot:"esriSLSDashDot",longdashdotdot:"esriSLSDashDotDot",none:"esriSLSNull",insideframe:"esriSLSInsideFrame"}});dojo.mixin(esri.symbol.SimpleLineSymbol,{STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dashdot",STYLE_DASHDOTDOT:"longdashdotdot",STYLE_NULL:"none"});dojo.declare("esri.symbol.CartographicLineSymbol",esri.symbol.SimpleLineSymbol,{constructor:function(_2e,_2f,_30,cap,_31,_32){if(_2e){if(dojo.isString(_2e)){this.style=_2e;if(_2f){this.color=_2f;}if(_30!==undefined){this.width=_30;}if(cap){this.cap=cap;}if(_31){this.join=_31;}if(_32!==undefined){this.miterLimit=_32;}}else{this.cap=esri.valueOf(this._caps,_2e.cap);this.join=esri.valueOf(this._joins,_2e.join);this.width=dojox.gfx.pt2px(_2e.width);this.miterLimit=dojox.gfx.pt2px(_2e.miterLimit);}}else{dojo.mixin(this,esri.symbol.defaultCartographicLineSymbol);this.color=new dojo.Color(this.color);this.width=dojox.gfx.pt2px(this.width);this.miterLimit=dojox.gfx.pt2px(this.miterLimit);}},type:"cartographiclinesymbol",setCap:function(cap){this.cap=cap;return this;},setJoin:function(_33){this.join=_33;return this;},setMiterLimit:function(_34){this.miterLimit=_34;return this;},getStroke:function(){return dojo.mixin(this.inherited("getStroke",arguments),{cap:this.cap,join:(this.join===esri.symbol.CartographicLineSymbol.JOIN_MITER?this.miterLimit:this.join)});},getFill:function(){return null;},toJson:function(){var _35=dojox.gfx.px2pt(this.miterLimit);_35=isNaN(_35)?undefined:_35;return esri._sanitize(dojo.mixin(this.inherited("toJson",arguments),{type:"esriCLS",cap:this._caps[this.cap],join:this._joins[this.join],miterLimit:_35}));},_caps:{butt:"esriLCSButt",round:"esriLCSRound",square:"esriLCSSquare"},_joins:{miter:"esriLJSMiter",round:"esriLJSRound",bevel:"esriLJSBevel"}});dojo.mixin(esri.symbol.CartographicLineSymbol,{STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dashdot",STYLE_DASHDOTDOT:"longdashdotdot",STYLE_NULL:"none",STYLE_INSIDE_FRAME:"insideframe",CAP_BUTT:"butt",CAP_ROUND:"round",CAP_SQUARE:"square",JOIN_MITER:"miter",JOIN_ROUND:"round",JOIN_BEVEL:"bevel"});dojo.declare("esri.symbol.FillSymbol",esri.symbol.Symbol,{constructor:function(_36){if(_36&&dojo.isObject(_36)&&_36.outline){this.outline=new esri.symbol.SimpleLineSymbol(_36.outline);}},setOutline:function(_37){this.outline=_37;return this;},toJson:function(){var _38=this.inherited("toJson",arguments);if(this.outline){_38.outline=this.outline.toJson();}return _38;}});dojo.declare("esri.symbol.SimpleFillSymbol",esri.symbol.FillSymbol,{constructor:function(_39,_3a,_3b){if(_39){if(dojo.isString(_39)){this.style=_39;if(_3a!==undefined){this.outline=_3a;}if(_3b!==undefined){this.color=_3b;}}else{this.style=esri.valueOf(this._styles,_39.style);}}else{dojo.mixin(this,esri.symbol.defaultSimpleFillSymbol);this.outline=new esri.symbol.SimpleLineSymbol(this.outline);this.color=new dojo.Color(this.color);}var _3c=this.style;if(_3c!=="solid"&&_3c!=="none"){this._src=dojo.moduleUrl("esri","../../images/symbol/sfs/"+_3c+".png").toString();}},type:"simplefillsymbol",setStyle:function(_3d){this.style=_3d;return this;},getStroke:function(){return this.outline&&this.outline.getStroke();},getFill:function(){var _3e=this.style;if(_3e===esri.symbol.SimpleFillSymbol.STYLE_NULL){return null;}else{if(_3e===esri.symbol.SimpleFillSymbol.STYLE_SOLID){return this.color;}else{return dojo.mixin(dojo.mixin({},dojox.gfx.defaultPattern),{src:this._src,width:10,height:10});}}},toJson:function(){return esri._sanitize(dojo.mixin(this.inherited("toJson",arguments),{type:"esriSFS",style:this._styles[this.style]}));},_styles:{solid:"esriSFSSolid",none:"esriSFSNull",horizontal:"esriSFSHorizontal",vertical:"esriSFSVertical",forwarddiagonal:"esriSFSForwardDiagonal",backwarddiagonal:"esriSFSBackwardDiagonal",cross:"esriSFSCross",diagonalcross:"esriSFSDiagonalCross"}});dojo.mixin(esri.symbol.SimpleFillSymbol,{STYLE_SOLID:"solid",STYLE_NULL:"none",STYLE_HORIZONTAL:"horizontal",STYLE_VERTICAL:"vertical",STYLE_FORWARD_DIAGONAL:"forwarddiagonal",STYLE_BACKWARD_DIAGONAL:"backwarddiagonal",STYLE_CROSS:"cross",STYLE_DIAGONAL_CROSS:"diagonalcross",STYLE_FORWARDDIAGONAL:"forwarddiagonal",STYLE_BACKWARDDIAGONAL:"backwarddiagonal",STYLE_DIAGONALCROSS:"diagonalcross"});dojo.declare("esri.symbol.PictureFillSymbol",esri.symbol.FillSymbol,{constructor:function(_3f,_40,_41,_42){if(_3f){if(dojo.isString(_3f)){this.url=_3f;if(_40!==undefined){this.outline=_40;}if(_41!==undefined){this.width=_41;}if(_42!==undefined){this.height=_42;}}else{this.xoffset=dojox.gfx.pt2px(_3f.xoffset);this.yoffset=dojox.gfx.pt2px(_3f.yoffset);this.width=dojox.gfx.pt2px(_3f.width);this.height=dojox.gfx.pt2px(_3f.height);var _43=_3f.imageData;if((!esri.vml)&&_43){var _44=this.url;this.url="data:"+(_3f.contentType||"image")+";base64,"+_43;this.imageData=_44;}}}else{dojo.mixin(this,esri.symbol.defaultPictureFillSymbol);this.width=dojox.gfx.pt2px(this.width);this.height=dojox.gfx.pt2px(this.height);}},type:"picturefillsymbol",xscale:1,yscale:1,xoffset:0,yoffset:0,setWidth:function(_45){this.width=_45;return this;},setHeight:function(_46){this.height=_46;return this;},setOffset:function(x,y){this.xoffset=x;this.yoffset=y;return this;},setUrl:function(url){if(url!==this.url){delete this.imageData;delete this.contentType;}this.url=url;return this;},setXScale:function(_47){this.xscale=_47;return this;},setYScale:function(_48){this.yscale=_48;return this;},getStroke:function(){return this.outline&&this.outline.getStroke();},getFill:function(){return dojo.mixin({},dojox.gfx.defaultPattern,{src:this.url,width:(this.width*this.xscale),height:(this.height*this.yscale),x:this.xoffset,y:this.yoffset});},toJson:function(){var url=this.url,_49=this.imageData;if(url.indexOf("data:")===0){var _4a=url;url=_49;var _4b=_4a.indexOf(";base64,")+8;_49=_4a.substr(_4b);}var _4c=dojox.gfx.px2pt(this.width);_4c=isNaN(_4c)?undefined:_4c;var _4d=dojox.gfx.px2pt(this.height);_4d=isNaN(_4d)?undefined:_4d;var _4e=dojox.gfx.px2pt(this.xoffset);_4e=isNaN(_4e)?undefined:_4e;var _4f=dojox.gfx.px2pt(this.yoffset);_4f=isNaN(_4f)?undefined:_4f;return esri._sanitize(dojo.mixin(this.inherited("toJson",arguments),{type:"esriPFS",url:url,imageData:_49,contentType:this.contentType,width:_4c,height:_4d,xoffset:_4e,yoffset:_4f,xscale:this.xscale,yscale:this.yscale}));}});dojo.declare("esri.symbol.Font",null,{constructor:function(_50,_51,_52,_53,_54){if(_50){if(dojo.isObject(_50)){dojo.mixin(this,_50);}else{this.size=_50;if(_51!==undefined){this.style=_51;}if(_52!==undefined){this.variant=_52;}if(_53!==undefined){this.weight=_53;}if(_54!==undefined){this.family=_54;}}}else{dojo.mixin(this,dojox.gfx.defaultFont);}},setSize:function(_55){this.size=_55;return this;},setStyle:function(_56){this.style=_56;return this;},setVariant:function(_57){this.variant=_57;return this;},setWeight:function(_58){this.weight=_58;return this;},setFamily:function(_59){this.family=_59;return this;},toJson:function(){return esri._sanitize({size:this.size,style:this.style,variant:this.variant,decoration:this.decoration,weight:this.weight,family:this.family});}});dojo.mixin(esri.symbol.Font,{STYLE_NORMAL:"normal",STYLE_ITALIC:"italic",STYLE_OBLIQUE:"oblique",VARIANT_NORMAL:"normal",VARIANT_SMALLCAPS:"small-caps",WEIGHT_NORMAL:"normal",WEIGHT_BOLD:"bold",WEIGHT_BOLDER:"bolder",WEIGHT_LIGHTER:"lighter"});dojo.declare("esri.symbol.TextSymbol",esri.symbol.Symbol,{constructor:function(_5a,_5b,_5c){dojo.mixin(this,esri.symbol.defaultTextSymbol);this.font=new esri.symbol.Font(this.font);this.color=new dojo.Color(this.color);if(_5a){if(dojo.isObject(_5a)){dojo.mixin(this,_5a);this.color=esri.symbol.toDojoColor(this.color);this.type="textsymbol";this.font=new esri.symbol.Font(this.font);this.xoffset=dojox.gfx.pt2px(this.xoffset);this.yoffset=dojox.gfx.pt2px(this.yoffset);}else{this.text=_5a;if(_5b){this.font=_5b;}if(_5c){this.color=_5c;}}}},angle:0,xoffset:0,yoffset:0,setFont:function(_5d){this.font=_5d;return this;},setAngle:function(_5e){this.angle=_5e;return this;},setOffset:function(x,y){this.xoffset=x;this.yoffset=y;return this;},setAlign:function(_5f){this.align=_5f;return this;},setDecoration:function(_60){this.decoration=_60;return this;},setRotated:function(_61){this.rotated=_61;return this;},setKerning:function(_62){this.kerning=_62;return this;},setText:function(_63){this.text=_63;return this;},getStroke:function(){return null;},getFill:function(){return this.color;},toJson:function(){var _64=dojox.gfx.px2pt(this.xoffset);_64=isNaN(_64)?undefined:_64;var _65=dojox.gfx.px2pt(this.yoffset);_65=isNaN(_65)?undefined:_65;return esri._sanitize(dojo.mixin(this.inherited("toJson",arguments),{type:"esriTS",backgroundColor:this.backgroundColor,borderLineColor:this.borderLineColor,verticalAlignment:this.verticalAlignment,horizontalAlignment:this.horizontalAlignment,rightToLeft:this.rightToLeft,width:this.width,angle:this.angle,xoffset:_64,yoffset:_65,text:this.text,align:this.align,decoration:this.decoration,rotated:this.rotated,kerning:this.kerning,font:this.font.toJson()}));}});dojo.mixin(esri.symbol.TextSymbol,{ALIGN_START:"start",ALIGN_MIDDLE:"middle",ALIGN_END:"end",DECORATION_NONE:"none",DECORATION_UNDERLINE:"underline",DECORATION_OVERLINE:"overline",DECORATION_LINETHROUGH:"line-through"});dojo.mixin(esri.symbol,{defaultSimpleLineSymbol:{color:[0,0,0,1],style:esri.symbol.SimpleLineSymbol.STYLE_SOLID,width:1},defaultSimpleMarkerSymbol:{style:esri.symbol.SimpleMarkerSymbol.STYLE_CIRCLE,color:[255,255,255,0.25],outline:esri.symbol.defaultSimpleLineSymbol,size:12,angle:0,xoffset:0,yoffset:0},defaultPictureMarkerSymbol:{url:"",width:12,height:12,angle:0,xoffset:0,yoffset:0},defaultCartographicLineSymbol:{color:[0,0,0,1],style:esri.symbol.CartographicLineSymbol.STYLE_SOLID,width:1,cap:esri.symbol.CartographicLineSymbol.CAP_BUTT,join:esri.symbol.CartographicLineSymbol.JOIN_MITER,miterLimit:10},defaultSimpleFillSymbol:{style:esri.symbol.SimpleFillSymbol.STYLE_SOLID,color:[0,0,0,0.25],outline:esri.symbol.defaultSimpleLineSymbol},defaultPictureFillSymbol:{xoffset:0,yoffset:0,width:12,height:12},defaultTextSymbol:{color:[0,0,0,1],font:dojox.gfx.defaultFont,angle:0,xoffset:0,yoffset:0},getShapeDescriptors:function(_66){var _67,_68,_69;var _6a=_66.type;switch(_6a){case "simplemarkersymbol":var _6b=_66.style,SMS=esri.symbol.SimpleMarkerSymbol;var _6c=_66.size||dojox.gfx.pt2px(esri.symbol.defaultSimpleMarkerSymbol.size),cx=0,cy=0,_6d=_6c/2;var _6e=cx-_6d,_6f=cx+_6d,top=cy-_6d,_70=cy+_6d;switch(_6b){case SMS.STYLE_CIRCLE:_67={type:"circle",cx:cx,cy:cy,r:_6d};_68=_66.getFill();_69=_66.getStroke();if(_69){_69.style=_69.style||"Solid";}break;case SMS.STYLE_CROSS:_67={type:"path",path:"M "+_6e+",0 L "+_6f+",0 M 0,"+top+" L 0,"+_70+" E"};_68=null;_69=_66.getStroke();break;case SMS.STYLE_DIAMOND:_67={type:"path",path:"M "+_6e+",0 L 0,"+top+" L "+_6f+",0 L 0,"+_70+" L "+_6e+",0 E"};_68=_66.getFill();_69=_66.getStroke();break;case SMS.STYLE_SQUARE:_67={type:"path",path:"M "+_6e+","+_70+" L "+_6e+","+top+" L "+_6f+","+top+" L "+_6f+","+_70+" L "+_6e+","+_70+" E"};_68=_66.getFill();_69=_66.getStroke();break;case SMS.STYLE_X:_67={type:"path",path:"M "+_6e+","+_70+" L "+_6f+","+top+" M "+_6e+","+top+" L "+_6f+","+_70+" E"};_68=null;_69=_66.getStroke();break;}break;case "picturemarkersymbol":_67={type:"image",x:0,y:0,width:16,height:16,src:""};_67.x=_67.x-Math.round(_66.width/2);_67.y=_67.y-Math.round(_66.height/2);_67.width=_66.width;_67.height=_66.height;_67.src=_66.url;break;case "simplelinesymbol":case "cartographiclinesymbol":_67={type:"path",path:"M -15,0 L 15,0 E"};_68=null;_69=_66.getStroke();break;case "simplefillsymbol":case "picturefillsymbol":_67={type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 E"};_68=_66.getFill();_69=_66.getStroke();break;}return {defaultShape:_67,fill:_68,stroke:_69};}});dojo.mixin(esri.symbol.defaultTextSymbol,dojox.gfx.defaultText,{type:"textsymbol",align:"middle"});}