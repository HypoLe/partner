/*
 COPYRIGHT 2009 ESRI

 TRADE SECRETS: ESRI PROPRIETARY AND CONFIDENTIAL
 Unpublished material - all rights reserved under the
 Copyright Laws of the United States and applicable international
 laws, treaties, and conventions.

 For additional information, contact:
 Environmental Systems Research Institute, Inc.
 Attn: Contracts and Legal Services Department
 380 New York Street
 Redlands, California, 92373
 USA

 email: contracts@esri.com
 */

window[esri._dojoScopeName||"dojo"]._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","esri.layers.agscommon"],["require","esri.geometry"],["require","esri.utils"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["esri.layers.agscommon"]){_4._hasResource["esri.layers.agscommon"]=true;_4.provide("esri.layers.agscommon");_4.require("esri.geometry");_4.require("esri.utils");_4.declare("esri.layers.ArcGISMapServiceLayer",null,{constructor:function(_7,_8){this.layerInfos=[];var _9=(this._params={}),_a=this._url.query?this._url.query.token:null;if(_a){_9.token=_a;}},_load:function(){esri.request({url:this._url.path,content:_4.mixin({f:"json"},this._params),callbackParamName:"callback",load:this._initLayer,error:this._errorHandler});},spatialReference:null,initialExtent:null,fullExtent:null,description:null,units:null,_initLayer:function(_b,io){try{this.description=_b.description;this.copyright=_b.copyrightText;this.spatialReference=new esri.SpatialReference(_b.spatialReference);this.initialExtent=new esri.geometry.Extent(_b.initialExtent);this.fullExtent=new esri.geometry.Extent(_b.fullExtent);this.units=_b.units;var _c=(this.layerInfos=[]),_d=_b.layers,_e=(this._defaultVisibleLayers=[]);_4.forEach(_d,function(_f,i){_c[i]=new esri.layers.LayerInfo(_f);if(_f.defaultVisibility){_e.push(_f.id);}});if(!this.visibleLayers){this.visibleLayers=_e;}this.version=_b.currentVersion;if(!this.version){var ver;if("capabilities" in _b||"tables" in _b){ver=10;}else{if("supportedImageFormatTypes" in _b){ver=9.31;}else{ver=9.3;}}this.version=ver;}this.capabilities=_b.capabilities;}catch(e){this._errorHandler(e);}}});_4.declare("esri.layers.LayerInfo",null,{constructor:function(_10){_4.mixin(this,_10);}});_4.declare("esri.layers.TimeInfo",null,{constructor:function(_11){if(_11!==null){_4.mixin(this,_11);if(_11.exportOptions){this.exportOptions=new esri.layers.LayerTimeOptions(_11.exportOptions);}this.timeExtent=new esri.TimeExtent(_11.timeExtent);this.timeReference=new esri.layers.TimeReference(_11.timeReference);}}});_4.mixin(esri.layers.TimeInfo,{UNIT_CENTURIES:"esriTimeUnitsCenturies",UNIT_DAYS:"esriTimeUnitsDays",UNIT_DECADES:"esriTimeUnitsDecades",UNIT_HOURS:"esriTimeUnitsHours",UNIT_MILLISECONDS:"esriTimeUnitsMilliseconds",UNIT_MINUTES:"esriTimeUnitsMinutes",UNIT_MONTHS:"esriTimeUnitsMonths",UNIT_SECONDS:"esriTimeUnitsSeconds",UNIT_UNKNOWN:"esriTimeUnitsUnknown",UNIT_WEEKS:"esriTimeUnitsWeeks",UNIT_YEARS:"esriTimeUnitsYears"});_4.declare("esri.layers.LayerTimeOptions",null,{constructor:function(_12){if(_12){_4.mixin(this,_12);}},toJson:function(){var _13={timeDataCumulative:this.timeDataCumulative,timeOffset:this.timeOffset,timeOffsetUnits:this.timeOffsetUnits,useTime:this.useTime};return esri._sanitize(_13);}});_4.declare("esri.layers.TimeReference",null,{constructor:function(_14){if(_14){_4.mixin(this,_14);}}});_4.declare("esri.layers.Field",null,{constructor:function(_15){if(_15&&_4.isObject(_15)){this.name=_15.name;this.type=_15.type;this.alias=_15.alias;this.length=_15.length;this.editable=_15.editable;var _16=_15.domain;if(_16&&_4.isObject(_16)){switch(_16.type){case "range":this.domain=new esri.layers.RangeDomain(_16);break;case "codedValue":this.domain=new esri.layers.CodedValueDomain(_16);break;}}}}});_4.declare("esri.layers.Domain",null,{constructor:function(_17){if(_17&&_4.isObject(_17)){this.name=_17.name;this.type=_17.type;}},toJson:function(){return esri._sanitize({name:this.name,type:this.type});}});_4.declare("esri.layers.RangeDomain",[esri.layers.Domain],{constructor:function(_18){if(_18&&_4.isObject(_18)){this.minValue=_18.range[0];this.maxValue=_18.range[1];}},toJson:function(){var _19=this.inherited(arguments);_19.range=[this.minValue,this.maxValue];return esri._sanitize(_19);}});_4.declare("esri.layers.CodedValueDomain",[esri.layers.Domain],{constructor:function(_1a){if(_1a&&_4.isObject(_1a)){this.codedValues=_1a.codedValues;}},toJson:function(){var _1b=this.inherited(arguments);_1b.codedValues=_4.clone(this.codedValues);return esri._sanitize(_1b);}});_4.declare("esri.layers.InheritedDomain",[esri.layers.Domain],{});}}};});