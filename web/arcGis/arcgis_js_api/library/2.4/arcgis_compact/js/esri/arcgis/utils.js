/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

/*
	This is an optimized version of Dojo, built for deployment and not for
	development. To get sources and documentation, please visit:

		http://dojotoolkit.org
*/

if(!dojo._hasResource["esri.layers.agsimageservice"]){dojo._hasResource["esri.layers.agsimageservice"]=true;dojo.provide("esri.layers.agsimageservice");dojo.declare("esri.layers.ArcGISImageServiceLayer",esri.layers.DynamicMapServiceLayer,{constructor:function(_1,_2){this._url=esri.urlToObject(_1);var _3=_2&&_2.imageServiceParameters;this.format=_3&&_3.format;this.interpolation=_3?_3.interpolation:null;this.compressionQuality=_3?_3.compressionQuality:null;this.bandIds=_3?_3.bandIds:null;this.mosaicRule=_3?_3.mosaicRule:null;this.renderingRule=_3?_3.renderingRule:null;this._params=dojo.mixin({},this._url.query,{f:"image",interpolation:this.interpolation,format:this.format,compressionQuality:this.compressionQuality,bandIds:this.bandIds?this.bandIds.join(","):null},_3?_3.toJson():{});this._initLayer=dojo.hitch(this,this._initLayer);this.useMapImage=(_2&&_2.useMapImage)||false;this._loadCallback=_2&&_2.loadCallback;var _4=_2&&_2.resourceInfo;if(_4){this._initLayer(_4);}else{esri.request({url:this._url.path,content:dojo.mixin({f:"json"},this._url.query),callbackParamName:"callback",load:this._initLayer,error:esri.config.defaults.io.errorHandler});}},disableClientCaching:false,_initLayer:function(_5,io){dojo.mixin(this,_5);this.initialExtent=(this.fullExtent=this.extent=(new esri.geometry.Extent(_5.extent)));this.spatialReference=this.initialExtent.spatialReference;this.pixelSizeX=parseFloat(this.pixelSizeX);this.pixelSizeY=parseFloat(this.pixelSizeY);var i,il,_6=this.minValues,_7=this.maxValues,_8=this.meanValues,_9=this.stdvValues,bs=(this.bands=[]);for(i=0,il=this.bandCount;i<il;i++){bs[i]={min:_6[i],max:_7[i],mean:_8[i],stddev:_9[i]};}var _a=this.timeInfo;this.timeInfo=(_a&&_a.timeExtent)?new esri.layers.TimeInfo(_a):null;var _b=this.fields=[];var _c=_5.fields;if(_c){for(i=0;i<_c.length;i++){_b.push(new esri.layers.Field(_c[i]));}}this.version=_5.currentVersion;if(!this.version){var _d;if("fields" in _5||"objectIdField" in _5||"timeInfo" in _5){_d=10;}else{_d=9.3;}this.version=_d;}this.loaded=true;this.onLoad(this);var _e=this._loadCallback;if(_e){delete this._loadCallback;_e(this);}},getImageUrl:function(_f,_10,_11,_12){var sr=_f.spatialReference.wkid||dojo.toJson(_f.spatialReference.toJson());delete this._params._ts;var _13=this._url.path+"/exportImage?";dojo.mixin(this._params,{bbox:_f.xmin+","+_f.ymin+","+_f.xmax+","+_f.ymax,imageSR:sr,bboxSR:sr,size:_10+","+_11},this.disableClientCaching?{_ts:new Date().getTime()}:{});var _14=esri._getProxiedUrl(_13+dojo.objectToQuery(dojo.mixin(this._params,{f:"image"})));if((_14.length>esri.config.defaults.io.postLength)||this.useMapImage){this._jsonRequest=esri.request({url:_13,content:dojo.mixin(this._params,{f:"json"}),callbackParamName:"callback",load:function(_15,io){_12(esri._getProxiedUrl(_15.href));},error:this._errorHandler});}else{_12(_14);}},setInterpolation:function(_16,_17){this.interpolation=(this._params.interpolation=_16);if(!_17){this.refresh(true);}},setCompressionQuality:function(_18,_19){this.compressionQuality=(this._params.compressionQuality=_18);if(!_19){this.refresh(true);}},setBandIds:function(ids,_1a){this.bandIds=ids;this._params.bandIds=ids.join(",");if(!_1a){this.refresh(true);}},setDefaultBandIds:function(_1b){this.bandIds=(this._params.bandIds=null);if(!_1b){this.refresh(true);}},setDisableClientCaching:function(_1c){this.disableClientCaching=_1c;},setMosaicRule:function(_1d,_1e){this.mosaicRule=_1d;this._params.mosaicRule=dojo.toJson(_1d.toJson());if(!_1e){this.refresh(true);}},setRenderingRule:function(_1f,_20){this.renderingRule=_1f;this._params.renderingRule=dojo.toJson(_1f.toJson());if(!_20){this.refresh(true);}},setImageFormat:function(_21,_22){this.format=(this._params.format=_21);if(!_22){this.refresh(true);}},refresh:function(_23){if(_23){this.inherited(arguments);}else{var dc=this.disableClientCaching;this.disableClientCaching=true;this.inherited(arguments);this.disableClientCaching=dc;}},exportMapImage:function(_24,_25){var m=esri.config.defaults.map,p=dojo.mixin({size:m.width+","+m.height},this._params,_24?_24.toJson(this.normalization):{},{f:"json"});delete p._ts;this._exportMapImage(this._url.path+"/exportImage",p,_25);}});dojo.declare("esri.layers.ImageServiceParameters",null,{extent:null,width:null,height:null,imageSpatialReference:null,format:null,interpolation:null,compressionQuality:null,bandIds:null,timeExtent:null,mosaicRule:null,renderingRule:null,noData:null,toJson:function(_26){var ext=this.bbox||this.extent;ext=ext&&_26&&ext._normalize(true);var _27=ext?(ext.spatialReference.wkid||dojo.toJson(ext.spatialReference.toJson())):null,_28=this.imageSpatialReference,_29={bbox:ext?(ext.xmin+","+ext.ymin+","+ext.xmax+","+ext.ymax):null,bboxSR:_27,size:(this.width!==null&&this.height!==null?this.width+","+this.height:null),imageSR:(_28?(_28.wkid||dojo.toJson(_28.toJson())):_27),format:this.format,interpolation:this.interpolation,compressionQuality:this.compressionQuality,bandIds:this.bandIds?this.bandIds.join(","):null,mosaicRule:this.mosaicRule?dojo.toJson(this.mosaicRule.toJson()):null,renderingRule:this.renderingRule?dojo.toJson(this.renderingRule.toJson()):null,noData:this.noData};var _2a=this.timeExtent;_29.time=_2a?_2a.toJson().join(","):null;return esri.filter(_29,function(_2b){if(_2b!==null){return true;}});}});dojo.mixin(esri.layers.ImageServiceParameters,{INTERPOLATION_BILINEAR:"RSP_BilinearInterpolation",INTERPOLATION_CUBICCONVOLUTION:"RSP_CubicConvolution",INTERPOLATION_MAJORITY:"RSP_Majority",INTERPOLATION_NEARESTNEIGHBOR:"RSP_NearestNeighbor"});dojo.declare("esri.layers.MosaicRule",null,{method:null,where:null,sortField:null,sortValue:null,ascending:false,lockRasterIds:null,viewpoint:null,objectIds:null,operation:null,toJson:function(){var _2c={mosaicMethod:this.method,where:this.where,sortField:this.sortField,sortValue:this.sortValue?dojo.toJson(this.sortValue):null,ascending:this.ascending,lockRasterIds:this.lockRasterIds,viewpoint:this.viewpoint?this.viewpoint.toJson():null,fids:this.objectIds,mosaicOperation:this.operation};return esri.filter(_2c,function(_2d){if(_2d!==null){return true;}});}});dojo.mixin(esri.layers.MosaicRule,{METHOD_NONE:"esriMosaicNone",METHOD_CENTER:"esriMosaicCenter",METHOD_NADIR:"esriMosaicNadir",METHOD_VIEWPOINT:"esriMosaicViewpoint",METHOD_ATTRIBUTE:"esriMosaicAttribute",METHOD_LOCKRASTER:"esriMosaicLockRaster",METHOD_NORTHWEST:"esriMosaicNorthwest",METHOD_SEAMLINE:"esriMosaicSeamline",OPERATION_FIRST:"MT_FIRST",OPERATION_LAST:"MT_LAST",OPERATION_MIN:"MT_MIN",OPERATION_MAX:"MT_MAX",OPERATION_MEAN:"MT_MEAN",OPERATION_BLEND:"MT_BLEND"});dojo.declare("esri.layers.RasterFunction",null,{functionName:null,"arguments":null,variableName:null,toJson:function(){var _2e={rasterFunction:this.functionName,rasterFunctionArguments:this["arguments"],variableName:this.variableName};return esri.filter(_2e,function(_2f){if(_2f!==null){return true;}});}});}if(!dojo._hasResource["esri.layers.osm"]){dojo._hasResource["esri.layers.osm"]=true;dojo.provide("esri.layers.osm");dojo.declare("esri.layers.OpenStreetMapLayer",esri.layers.TiledMapServiceLayer,{constructor:function(_30){this.spatialReference=new esri.SpatialReference({wkid:102100});this.tileInfo=new esri.layers.TileInfo({rows:256,cols:256,dpi:96,format:"PNG8",compressionQuality:0,origin:{x:-20037508.342787,y:20037508.342787},spatialReference:{wkid:102100},lods:[{level:0,scale:591657527.591555,resolution:156543.033928},{level:1,scale:295828763.795777,resolution:78271.5169639999},{level:2,scale:147914381.897889,resolution:39135.7584820001},{level:3,scale:73957190.948944,resolution:19567.8792409999},{level:4,scale:36978595.474472,resolution:9783.93962049996},{level:5,scale:18489297.737236,resolution:4891.96981024998},{level:6,scale:9244648.868618,resolution:2445.98490512499},{level:7,scale:4622324.434309,resolution:1222.99245256249},{level:8,scale:2311162.217155,resolution:611.49622628138},{level:9,scale:1155581.108577,resolution:305.748113140558},{level:10,scale:577790.554289,resolution:152.874056570411},{level:11,scale:288895.277144,resolution:76.4370282850732},{level:12,scale:144447.638572,resolution:38.2185141425366},{level:13,scale:72223.819286,resolution:19.1092570712683},{level:14,scale:36111.909643,resolution:9.55462853563415},{level:15,scale:18055.954822,resolution:4.77731426794937},{level:16,scale:9027.977411,resolution:2.38865713397468},{level:17,scale:4513.988705,resolution:1.19432856685505},{level:18,scale:2256.994353,resolution:0.597164283559817}]});this.fullExtent=new esri.geometry.Extent({xmin:-20037508.34,ymin:-20037508.34,xmax:20037508.34,ymax:20037508.34,spatialReference:{wkid:102100}});this.initialExtent=new esri.geometry.Extent({xmin:-20037508.34,ymin:-20037508.34,xmax:20037508.34,ymax:20037508.34,spatialReference:{wkid:102100}});this.tileServers=(_30&&_30.tileServers)||["http://a.tile.openstreetmap.org/","http://b.tile.openstreetmap.org/","http://c.tile.openstreetmap.org/"];this.serversLength=this.tileServers.length;this.serverIndex=0;this._displayLevels=_30?_30.displayLevels:null;this.loaded=true;this.onLoad(this);var _31=_30&&_30.loadCallback;if(_31){_31(this);}},getTileUrl:function(_32,row,col){return esri._getProxiedUrl(this.tileServers[this.serverIndex++%this.serversLength]+"/"+_32+"/"+col+"/"+row+".png");}});}if(!dojo._hasResource["esri.tasks._task"]){dojo._hasResource["esri.tasks._task"]=true;dojo.provide("esri.tasks._task");dojo.declare("esri.tasks._Task",null,{constructor:function(url){if(url&&dojo.isString(url)){this._url=esri.urlToObject(this.url=url);}this.normalization=true;this._errorHandler=dojo.hitch(this,this._errorHandler);},_encode:function(_33,_34,_35){var _36,_37,_38={};for(var i in _33){if(i==="declaredClass"){continue;}_36=_33[i];_37=typeof (_36);if(_36!==null&&_36!==undefined&&_37!=="function"){if(dojo.isArray(_36)){_38[i]=[];for(var p=0,pl=_36.length;p<pl;p++){_38[i][p]=this._encode(_36[p]);}}else{if(_37==="object"){if(_36.toJson){var _39=_36.toJson(_35&&_35[i]);if(_36 instanceof esri.tasks.FeatureSet){if(_39.spatialReference){_39.sr=_39.spatialReference;delete _39.spatialReference;}}_38[i]=_34?_39:dojo.toJson(_39);}}else{_38[i]=_36;}}}}return _38;},_successHandler:function(_3a,_3b,_3c,dfd){if(_3b){this[_3b].apply(this,_3a);}if(_3c){_3c.apply(null,_3a);}if(dfd){esri._resDfd(dfd,_3a);}},_errorHandler:function(err,_3d,dfd){this.onError(err);if(_3d){_3d(err);}if(dfd){dfd.errback(err);}},setNormalization:function(_3e){this.normalization=_3e;},onError:function(){}});dojo.declare("esri.tasks.FeatureSet",null,{constructor:function(_3f){if(_3f){dojo.mixin(this,_3f);var _40=this.features,sr=_3f.spatialReference,_41=esri.Graphic,_42=esri.geometry.getGeometryType(_3f.geometryType);sr=(this.spatialReference=new esri.SpatialReference(sr));this.geometryType=_3f.geometryType;if(_3f.fields){this.fields=_3f.fields;}dojo.forEach(_40,function(_43,i){var _44=_43.geometry&&_43.geometry.spatialReference;_40[i]=new _41(_42?new _42(_43.geometry):null,_43.symbol&&esri.symbol.fromJson(_43.symbol),_43.attributes);if(_40[i].geometry&&!_44){_40[i].geometry.setSpatialReference(sr);}});}else{this.features=[];}},displayFieldName:null,geometryType:null,spatialReference:null,fields:[],features:[],fieldAliases:null,toJson:function(_45){var _46={};if(this.displayFieldName){_46.displayFieldName=this.displayFieldName;}if(this.fields){_46.fields=this.fields;}if(this.spatialReference){_46.spatialReference=this.spatialReference.toJson();}else{if(this.features[0].geometry){_46.spatialReference=this.features[0].geometry.spatialReference.toJson();}}if(this.features[0]){if(this.features[0].geometry){_46.geometryType=esri.geometry.getJsonType(this.features[0].geometry);}_46.features=esri._encodeGraphics(this.features,_45);}return _46;}});esri.tasks._SpatialRelationship={SPATIAL_REL_INTERSECTS:"esriSpatialRelIntersects",SPATIAL_REL_CONTAINS:"esriSpatialRelContains",SPATIAL_REL_CROSSES:"esriSpatialRelCrosses",SPATIAL_REL_ENVELOPEINTERSECTS:"esriSpatialRelEnvelopeIntersects",SPATIAL_REL_INDEXINTERSECTS:"esriSpatialRelIndexIntersects",SPATIAL_REL_OVERLAPS:"esriSpatialRelOverlaps",SPATIAL_REL_TOUCHES:"esriSpatialRelTouches",SPATIAL_REL_WITHIN:"esriSpatialRelWithin",SPATIAL_REL_RELATION:"esriSpatialRelRelation"};}if(!dojo._hasResource["esri.tasks.query"]){dojo._hasResource["esri.tasks.query"]=true;dojo.provide("esri.tasks.query");dojo.declare("esri.tasks.QueryTask",esri.tasks._Task,{constructor:function(url){this._handler=dojo.hitch(this,this._handler);this._relationshipQueryHandler=dojo.hitch(this,this._relationshipQueryHandler);this._executeForIdsHandler=dojo.hitch(this,this._executeForIdsHandler);this._countHandler=dojo.hitch(this,this._countHandler);},__msigns:[{n:"execute",c:4,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForIds",c:3,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForCount",c:3,a:[{i:0,p:["geometry"]}],e:2}],onComplete:function(){},onExecuteRelationshipQueryComplete:function(){},onExecuteForIdsComplete:function(){},onExecuteForCountComplete:function(){},execute:function(_47,_48,_49,_4a,_4b){var _4c=_4b.assembly,_4d=this._encode(dojo.mixin({},this._url.query,{f:"json"},_47.toJson(_4c&&_4c[0]))),_4e=this._handler,_4f=this._errorHandler;return esri.request({url:this._url.path+"/query",content:_4d,callbackParamName:"callback",load:function(r,i){_4e(r,i,_48,_49,_4b.dfd);},error:function(r){_4f(r,_49,_4b.dfd);},callbackSuffix:_4a});},executeRelationshipQuery:function(_50,_51,_52){var _53=this._encode(dojo.mixin({},this._url.query,{f:"json"},_50.toJson())),_54=this._relationshipQueryHandler,_55=this._errorHandler;var dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/queryRelatedRecords",content:_53,callbackParamName:"callback",load:function(r,i){_54(r,i,_51,_52,dfd);},error:function(r){_55(r,_52,dfd);}});return dfd;},executeForIds:function(_56,_57,_58,_59){var _5a=_59.assembly,_5b=this._encode(dojo.mixin({},this._url.query,{f:"json",returnIdsOnly:true},_56.toJson(_5a&&_5a[0]))),_5c=this._executeForIdsHandler,_5d=this._errorHandler;return esri.request({url:this._url.path+"/query",content:_5b,callbackParamName:"callback",load:function(r,i){_5c(r,i,_57,_58,_59.dfd);},error:function(r){_5d(r,_58,_59.dfd);}});},executeForCount:function(_5e,_5f,_60,_61){var _62=_61.assembly,_63=this._encode(dojo.mixin({},this._url.query,{f:"json",returnIdsOnly:true,returnCountOnly:true},_5e.toJson(_62&&_62[0]))),_64=this._countHandler,_65=this._errorHandler;return esri.request({url:this._url.path+"/query",content:_63,callbackParamName:"callback",load:function(r,i){_64(r,i,_5f,_60,_61.dfd);},error:function(r){_65(r,_60,_61.dfd);}});},_handler:function(_66,io,_67,_68,dfd){try{var _69=new esri.tasks.FeatureSet(_66);this._successHandler([_69],"onComplete",_67,dfd);}catch(err){this._errorHandler(err,_68,dfd);}},_relationshipQueryHandler:function(_6a,io,_6b,_6c,dfd){try{var gt=_6a.geometryType,sr=_6a.spatialReference,_6d={};dojo.forEach(_6a.relatedRecordGroups,function(gr){var _6e={};_6e.geometryType=gt;_6e.spatialReference=sr;_6e.features=gr.relatedRecords;var _6f=new esri.tasks.FeatureSet(_6e);_6d[gr.objectId]=_6f;});this._successHandler([_6d],"onExecuteRelationshipQueryComplete",_6b,dfd);}catch(err){this._errorHandler(err,_6c,dfd);}},_executeForIdsHandler:function(_70,io,_71,_72,dfd){try{this._successHandler([_70.objectIds],"onExecuteForIdsComplete",_71,dfd);}catch(err){this._errorHandler(err,_72,dfd);}},_countHandler:function(_73,io,_74,_75,dfd){try{var _76,_77=_73.features,ids=_73.objectIds;if(ids){_76=ids.length;}else{if(_77){throw new Error(esri.bundle.tasks.query.invalid);}else{_76=_73.count;}}this._successHandler([_76],"onExecuteForCountComplete",_74,dfd);}catch(err){this._errorHandler(err,_75,dfd);}}});esri._createWrappers("esri.tasks.QueryTask");dojo.declare("esri.tasks.Query",null,{constructor:function(){this.spatialRelationship=esri.tasks.Query.SPATIAL_REL_INTERSECTS;},text:null,where:"",geometry:null,objectIds:null,returnGeometry:false,outSpatialReference:null,outFields:null,timeExtent:null,relationParam:null,toJson:function(_78){var _79={text:this.text,where:this.where,returnGeometry:this.returnGeometry,spatialRel:this.spatialRelationship,maxAllowableOffset:this.maxAllowableOffset},g=_78&&_78["geometry"]||this.geometry,ids=this.objectIds,_7a=this.outFields,_7b=this.outSpatialReference;if(g){_79.geometry=g;_79.geometryType=esri.geometry.getJsonType(g);_79.inSR=g.spatialReference.wkid||dojo.toJson(g.spatialReference.toJson());}if(ids){_79.objectIds=ids.join(",");}if(_7a){_79.outFields=_7a.join(",");}if(_7b!==null){_79.outSR=_7b.wkid||dojo.toJson(_7b.toJson());}else{if(g){_79.outSR=g.spatialReference.wkid||dojo.toJson(g.spatialReference.toJson());}}var _7c=this.timeExtent;_79.time=_7c?_7c.toJson().join(","):null;var _7d=this.relationParam;if(_7d&&this.spatialRelationship===esri.tasks.Query.SPATIAL_REL_RELATION){_79.relationParam=_7d;}_79._ts=this._ts;return _79;}});dojo.mixin(esri.tasks.Query,esri.tasks._SpatialRelationship);dojo.declare("esri.tasks.RelationshipQuery",null,{definitionExpression:"",relationshipId:null,returnGeometry:false,objectIds:null,outSpatialReference:null,outFields:null,toJson:function(){var _7e={definitionExpression:this.definitionExpression,relationshipId:this.relationshipId,returnGeometry:this.returnGeometry,maxAllowableOffset:this.maxAllowableOffset},_7f=this.objectIds,_80=this.outFields,_81=this.outSpatialReference;if(_7f){_7e.objectIds=_7f.join(",");}if(_80){_7e.outFields=_80.join(",");}if(_81){_7e.outSR=_81.toJson();}_7e._ts=this._ts;return _7e;}});}if(!dojo._hasResource["dojo.io.iframe"]){dojo._hasResource["dojo.io.iframe"]=true;dojo.provide("dojo.io.iframe");dojo.getObject("io",true,dojo);dojo.io.iframe={create:function(_82,_83,uri){if(window[_82]){return window[_82];}if(window.frames[_82]){return window.frames[_82];}var _84=null;var _85=uri;if(!_85){if(dojo.config["useXDomain"]&&!dojo.config["dojoBlankHtmlUrl"]){console.warn("dojo.io.iframe.create: When using cross-domain Dojo builds,"+" please save dojo/resources/blank.html to your domain and set djConfig.dojoBlankHtmlUrl"+" to the path on your domain to blank.html");}_85=(dojo.config["dojoBlankHtmlUrl"]||dojo.moduleUrl("dojo","resources/blank.html"));}var _84=dojo.place("<iframe id=\""+_82+"\" name=\""+_82+"\" src=\""+_85+"\" onload=\""+_83+"\" style=\"position: absolute; left: 1px; top: 1px; height: 1px; width: 1px; visibility: hidden\">",dojo.body());window[_82]=_84;return _84;},setSrc:function(_86,src,_87){try{if(!_87){if(dojo.isWebKit){_86.location=src;}else{frames[_86.name].location=src;}}else{var _88;if(dojo.isIE||dojo.isWebKit){_88=_86.contentWindow.document;}else{_88=_86.contentWindow;}if(!_88){_86.location=src;return;}else{_88.location.replace(src);}}}catch(e){console.log("dojo.io.iframe.setSrc: ",e);}},doc:function(_89){var doc=_89.contentDocument||(((_89.name)&&(_89.document)&&(dojo.doc.getElementsByTagName("iframe")[_89.name].contentWindow)&&(dojo.doc.getElementsByTagName("iframe")[_89.name].contentWindow.document)))||((_89.name)&&(dojo.doc.frames[_89.name])&&(dojo.doc.frames[_89.name].document))||null;return doc;},send:function(_8a){if(!this["_frame"]){this._frame=this.create(this._iframeName,dojo._scopeName+".io.iframe._iframeOnload();");}var dfd=dojo._ioSetArgs(_8a,function(dfd){dfd.canceled=true;dfd.ioArgs._callNext();},function(dfd){var _8b=null;try{var _8c=dfd.ioArgs;var dii=dojo.io.iframe;var ifd=dii.doc(dii._frame);var _8d=_8c.handleAs;_8b=ifd;if(_8d!="html"){if(_8d=="xml"){if(dojo.isIE<9||(dojo.isIE&&dojo.isQuirks)){dojo.query("a",dii._frame.contentWindow.document.documentElement).orphan();var _8e=(dii._frame.contentWindow.document).documentElement.innerText;_8e=_8e.replace(/>\s+</g,"><");_8e=dojo.trim(_8e);var _8f={responseText:_8e};_8b=dojo._contentHandlers["xml"](_8f);}}else{_8b=ifd.getElementsByTagName("textarea")[0].value;if(_8d=="json"){_8b=dojo.fromJson(_8b);}else{if(_8d=="javascript"){_8b=dojo.eval(_8b);}}}}}catch(e){_8b=e;}finally{_8c._callNext();}return _8b;},function(_90,dfd){dfd.ioArgs._hasError=true;dfd.ioArgs._callNext();return _90;});dfd.ioArgs._callNext=function(){if(!this["_calledNext"]){this._calledNext=true;dojo.io.iframe._currentDfd=null;dojo.io.iframe._fireNextRequest();}};this._dfdQueue.push(dfd);this._fireNextRequest();dojo._ioWatch(dfd,function(dfd){return !dfd.ioArgs["_hasError"];},function(dfd){return (!!dfd.ioArgs["_finished"]);},function(dfd){if(dfd.ioArgs._finished){dfd.callback(dfd);}else{dfd.errback(new Error("Invalid dojo.io.iframe request state"));}});return dfd;},_currentDfd:null,_dfdQueue:[],_iframeName:dojo._scopeName+"IoIframe",_fireNextRequest:function(){try{if((this._currentDfd)||(this._dfdQueue.length==0)){return;}do{var dfd=this._currentDfd=this._dfdQueue.shift();}while(dfd&&dfd.canceled&&this._dfdQueue.length);if(!dfd||dfd.canceled){this._currentDfd=null;return;}var _91=dfd.ioArgs;var _92=_91.args;_91._contentToClean=[];var fn=dojo.byId(_92["form"]);var _93=_92["content"]||{};if(fn){if(_93){var _94=function(_95,_96){dojo.create("input",{type:"hidden",name:_95,value:_96},fn);_91._contentToClean.push(_95);};for(var x in _93){var val=_93[x];if(dojo.isArray(val)&&val.length>1){var i;for(i=0;i<val.length;i++){_94(x,val[i]);}}else{if(!fn[x]){_94(x,val);}else{fn[x].value=val;}}}}var _97=fn.getAttributeNode("action");var _98=fn.getAttributeNode("method");var _99=fn.getAttributeNode("target");if(_92["url"]){_91._originalAction=_97?_97.value:null;if(_97){_97.value=_92.url;}else{fn.setAttribute("action",_92.url);}}if(!_98||!_98.value){if(_98){_98.value=(_92["method"])?_92["method"]:"post";}else{fn.setAttribute("method",(_92["method"])?_92["method"]:"post");}}_91._originalTarget=_99?_99.value:null;if(_99){_99.value=this._iframeName;}else{fn.setAttribute("target",this._iframeName);}fn.target=this._iframeName;dojo._ioNotifyStart(dfd);fn.submit();}else{var _9a=_92.url+(_92.url.indexOf("?")>-1?"&":"?")+_91.query;dojo._ioNotifyStart(dfd);this.setSrc(this._frame,_9a,true);}}catch(e){dfd.errback(e);}},_iframeOnload:function(){var dfd=this._currentDfd;if(!dfd){this._fireNextRequest();return;}var _9b=dfd.ioArgs;var _9c=_9b.args;var _9d=dojo.byId(_9c.form);if(_9d){var _9e=_9b._contentToClean;for(var i=0;i<_9e.length;i++){var key=_9e[i];for(var j=0;j<_9d.childNodes.length;j++){var _9f=_9d.childNodes[j];if(_9f.name==key){dojo.destroy(_9f);break;}}}if(_9b["_originalAction"]){_9d.setAttribute("action",_9b._originalAction);}if(_9b["_originalTarget"]){_9d.setAttribute("target",_9b._originalTarget);_9d.target=_9b._originalTarget;}}_9b._finished=true;}};}if(!dojo._hasResource["esri.layers.FeatureLayer"]){dojo._hasResource["esri.layers.FeatureLayer"]=true;dojo.provide("esri.layers.FeatureLayer");dojo.declare("esri.layers.FeatureLayer",esri.layers.GraphicsLayer,{constructor:function(url,_a0){this._outFields=_a0&&_a0.outFields;this._loadCallback=_a0&&_a0.loadCallback;var _a1=_a0&&_a0._usePatch;this._usePatch=(_a1===null||_a1===undefined)?true:_a1;this._trackIdField=_a0&&_a0.trackIdField;this.objectIdField=_a0&&_a0.objectIdField;this._maxOffset=_a0&&_a0.maxAllowableOffset;this._optEditable=_a0&&_a0.editable;this.useMapTime=(_a0&&_a0.hasOwnProperty("useMapTime"))?(!!_a0.useMapTime):true;this._selectedFeatures={};this._selectedFeaturesArr=[];this._newFeatures=[];this._deletedFeatures={};this._ulid=this._getUniqueId();var _a2=this.constructor,_a3=this.mode=(esri._isDefined(_a0&&_a0.mode)?_a0.mode:_a2.MODE_ONDEMAND);switch(_a3){case _a2.MODE_SNAPSHOT:this._mode=new esri.layers._SnapshotMode(this);this._isSnapshot=true;break;case _a2.MODE_ONDEMAND:this._tileWidth=(_a0&&_a0.tileWidth)||512;this._tileHeight=(_a0&&_a0.tileHeight)||512;this._mode=new esri.layers._OnDemandMode(this);break;case _a2.MODE_SELECTION:this._mode=new esri.layers._SelectionMode(this);this._isSelOnly=true;break;}this._initLayer=dojo.hitch(this,this._initLayer);this._selectHandler=dojo.hitch(this,this._selectHandler);if(dojo.isObject(url)&&url.layerDefinition){var _a4=url;this._collection=true;this._editable=true;this.mode=_a2.MODE_SNAPSHOT;this._initLayer(_a4);return this;}this._task=new esri.tasks.QueryTask(this.url);var _a5=this._url.path;this._editable=this._fserver=false;if(_a5.search(/\/FeatureServer\//i)!==-1){this._fserver=true;}var _a6=_a0&&_a0.resourceInfo;if(_a6){this._initLayer(_a6);}else{esri.request({url:_a5,content:dojo.mixin({f:"json"},this._url.query),callbackParamName:"callback",load:this._initLayer,error:this._errorHandler});}},_initLayer:function(_a7,io){if(_a7||io){this._json=_a7;if(this._collection){this._mode=new esri.layers._SnapshotMode(this);this._isSnapshot=true;this._featureSet=_a7.featureSet;this._nextId=_a7.nextObjectId;_a7=_a7.layerDefinition;}else{if(_a7.hasOwnProperty("capabilities")){var _a8=(this.capabilities=_a7.capabilities);if(_a8&&_a8.toLowerCase().indexOf("editing")!==-1){this._editable=true;}}else{this._editable=this._fserver;}}if(esri._isDefined(this._optEditable)){this._editable=this._optEditable;delete this._optEditable;}this._json=dojo.toJson(this._json);if(this._editable){delete this._maxOffset;}this.minScale=_a7.minScale||0;this.maxScale=_a7.maxScale||0;this.layerId=_a7.id;this.name=_a7.name;this.description=_a7.description;this.copyright=_a7.copyrightText;this.type=_a7.type;this.geometryType=_a7.geometryType;this.displayField=_a7.displayField;this.defaultDefinitionExpression=_a7.definitionExpression;this.fullExtent=new esri.geometry.Extent(_a7.extent);this._isTable=(this.type==="Table");var _a9=this.fields=[];var _aa=_a7.fields;for(var i=0;i<_aa.length;i++){_a9.push(new esri.layers.Field(_aa[i]));}if(!this.objectIdField){this.objectIdField=_a7.objectIdField;if(!this.objectIdField){var _aa=_a7.fields;for(var i=0;i<_aa.length;i++){var _ab=_aa[i];if(_ab.type==="esriFieldTypeOID"){this.objectIdField=_ab.name;break;}}}if(!this.objectIdField){console.debug("esri.layers.FeatureLayer: "+esri.substitute({url:this.url},esri.bundle.layers.FeatureLayer.noOIDField));}}if(!esri._isDefined(this._nextId)){var _ac=this.objectIdField,_ad=-1;if(this._collection&&_ac){var _ae=this._featureSet,_af=_ae&&_ae.features,i,il,oid,_b0;for(i=0,il=_af?_af.length:0;i<il;i++){_b0=_af[i].attributes;oid=_b0&&_b0[_ac];if(oid>_ad){_ad=oid;}}}this._nextId=(_ad+1);}this.globalIdField=_a7.globalIdField;this.typeIdField=_a7.typeIdField;this.visibilityField=_a7.visibilityField;var _b1=_a7.defaultSymbol;if(_b1){this.defaultSymbol=esri.symbol.fromJson(_b1);}var _b2=this.types=[];var _b3=_a7.types;if(_b3){for(var i=0;i<_b3.length;i++){_b2.push(new esri.layers.FeatureType(_b3[i]));}}var _b4=_a7.templates;var _b5=this.templates=[];if(_b4){for(var i=0;i<_b4.length;i++){_b5.push(new esri.layers.FeatureTemplate(_b4[i]));}}var _b6=_a7.timeInfo;if(_b6){this.timeInfo=new esri.layers.TimeInfo(_b6);this._startTimeField=_b6.startTimeField;this._endTimeField=_b6.endTimeField;if(this._startTimeField&&this._endTimeField){this._twoTimeFields=true;}if(this._trackIdField){_b6.trackIdField=this._trackIdField;}else{this._trackIdField=_b6.trackIdField;}}this.relationships=_a7.relationships;this.hasAttachments=(!this._collection&&_a7.hasAttachments)?true:false;this.htmlPopupType=_a7.htmlPopupType;var _b7=_a7.drawingInfo;if(!this.renderer){if(_b7&&_b7.renderer){var _b8=_b7.renderer;this.setRenderer(esri.renderer.fromJson(_b8));if(_b8.type==="classBreaks"){this.renderer._setMaxInclusiveness(true);}if(!this._collection){var _b9=_b8.type,_b8=this.renderer,_ba=[];switch(_b9){case "simple":_ba.push(_b8.symbol);break;case "uniqueValue":case "classBreaks":_ba.push(_b8.defaultSymbol);_ba=_ba.concat(dojo.map(_b8.infos,function(_bb){return _bb.symbol;}));break;}_ba=dojo.filter(_ba,esri._isDefined);var _bc=this._url.path+"/images/",_bd=this._getToken();dojo.forEach(_ba,function(sym){var url=sym.url;if(url){if((url.search(/https?\:/)===-1)&&(url.indexOf("data:")===-1)){sym.url=_bc+url;}if(_bd&&sym.url.search(/https?\:/)!==-1){sym.url+=("?token="+_bd);}}});}}else{if(_b1){var _b3=this.types,_b8;if(_b3.length>0){_b8=new esri.renderer.UniqueValueRenderer(this.defaultSymbol,this.typeIdField);dojo.forEach(_b3,function(_be){_b8.addValue(_be.id,_be.symbol);});}else{_b8=new esri.renderer.SimpleRenderer(this.defaultSymbol);}this.setRenderer(_b8);}else{if(!this._isTable){var _bf;switch(this.geometryType){case "esriGeometryPoint":case "esriGeometryMultipoint":_bf=new esri.symbol.SimpleMarkerSymbol();break;case "esriGeometryPolyline":_bf=new esri.symbol.SimpleLineSymbol();break;case "esriGeometryPolygon":_bf=new esri.symbol.SimpleFillSymbol();break;}this.setRenderer(_bf?new esri.renderer.SimpleRenderer(_bf):null);}}}}var _c0=(_b7&&_b7.transparency)||0;if(!esri._isDefined(this.opacity)&&_c0>0){this.opacity=1-(_c0/100);}this.version=_a7.currentVersion;if(!this.version){var ver;if("capabilities" in _a7||"drawingInfo" in _a7||"hasAttachments" in _a7||"htmlPopupType" in _a7||"relationships" in _a7||"timeInfo" in _a7||"typeIdField" in _a7||"types" in _a7){ver=10;}else{ver=9.3;}this.version=ver;}if((dojo.isIE||dojo.isSafari)&&this._editable&&this.version<10.02){this._ts=true;}this.loaded=true;this._fixRendererFields();this._checkFields();if(this._collection){this._fireUpdateStart();var _ae=this._featureSet;delete this._featureSet;this._mode._drawFeatures(new esri.tasks.FeatureSet(_ae));this._fcAdded=true;}this.onLoad(this);var _c1=this._loadCallback;if(_c1){delete this._loadCallback;_c1(this);}}},setRenderer:function(ren){this.inherited("setRenderer",arguments);var _c2=this.renderer;if(_c2){this._ager=(_c2.declaredClass.indexOf("TemporalRenderer")!==-1&&_c2.observationAger&&_c2.observationRenderer);var _c3=dojo.filter([_c2,_c2.observationRenderer,_c2.latestObservationRenderer,_c2.trackRenderer],esri._isDefined);var _c4=[];dojo.forEach(_c3,function(rnd){_c4.push(rnd.attributeField);_c4.push(rnd.attributeField2);_c4.push(rnd.attributeField3);},this);this._rendererFields=dojo.filter(_c4,esri._isDefined);}else{this._ager=false;this._rendererFields=[];}if(this.loaded&&this._rendererFields.length>0){this._fixRendererFields();this._checkFields(this._rendererFields);}if(this.loaded&&this._collection){this._typesDirty=true;}},_setMap:function(map,_c5){this._map=map;this._toggleTime(true);var div=this.inherited("_setMap",arguments);this.clearSelection();var _c6=this.renderer;if(this.timeInfo){if(this._trackIdField||(_c6&&(_c6.latestObservationRenderer||_c6.trackRenderer))){this._trackManager=new esri.layers._TrackManager(this);this._trackManager.initialize(map);}}if(this.minScale!==0||this.maxScale!==0){this._zoomConnect=dojo.connect(map,"onZoomEnd",this,this._updateStatus);}var _c7=this._mode;if(_c7){_c7.initialize(map);}return div;},_unsetMap:function(map,_c8){var _c9=this._mode;if(_c9){_c9.destroy();this._mode=null;}if(this._trackManager){this._trackManager.destroy();this._trackManager=null;}dojo.disconnect(this._zoomConnect);this._toggleTime(false);this.inherited("_unsetMap",arguments);},refresh:function(){var _ca=this._mode;if(_ca){_ca.refresh();}},isEditable:function(){return this._editable;},setMaxAllowableOffset:function(_cb){if(!this._editable){this._maxOffset=_cb;}return this;},setDefinitionExpression:function(_cc){this._defnExpr=_cc;var _cd=this._mode;if(_cd){_cd.propertyChangeHandler(1);}return this;},getDefinitionExpression:function(){return this._defnExpr;},setTimeDefinition:function(_ce){if(this._isSnapshot){this._timeDefn=_ce;var _cf=this._mode;if(_cf){_cf.propertyChangeHandler(2);}}return this;},getTimeDefinition:function(){return this._timeDefn;},setTimeOffset:function(_d0,_d1){this._timeOffset=_d0;this._timeOffsetUnits=_d1;var _d2=this._mode;if(_d2){_d2.propertyChangeHandler(0);}return this;},setUseMapTime:function(use){this.useMapTime=use;this._toggleTime(!this._suspended);var _d3=this._mode;if(_d3){_d3.propertyChangeHandler(0);}},selectFeatures:function(_d4,_d5,_d6,_d7){_d5=_d5||this.constructor.SELECTION_NEW;var _d8=this._getShallowClone(_d4),map=this._map,dfd=esri._fixDfd(new dojo.Deferred(esri._dfdCanceller));_d8.outFields=this._getOutFields();_d8.returnGeometry=true;if(map){_d8.outSpatialReference=new esri.SpatialReference(map.spatialReference.toJson());}if(!this._applyQueryFilters(_d8)){var _d9={features:[]};this._selectHandler(_d9,_d5,_d6,_d7,dfd);return dfd;}var _da=this._canDoClientSideQuery(_d8);if(_da){var _d9={features:this._doQuery(_d8,_da)};this._selectHandler(_d9,_d5,_d6,_d7,dfd);return dfd;}else{if(this._collection){var err=new Error("FeatureLayer::selectFeatures - "+esri.bundle.layers.FeatureLayer.invalidParams);this._resolve([err],null,_d7,dfd,true);return dfd;}var _db=this;if(this._ts){_d8._ts=(new Date()).getTime();}var _dc=dfd._pendingDfd=this._task.execute(_d8);_dc.addCallbacks(function(_dd){_db._selectHandler(_dd,_d5,_d6,_d7,dfd);},function(err){_db._resolve([err],null,_d7,dfd,true);});return dfd;}},getSelectedFeatures:function(){var _de=this._selectedFeatures,_df=[];for(var _e0 in _de){if(_de.hasOwnProperty(_e0)){_df.push(_de[_e0]);}}return _df;},clearSelection:function(_e1){var _e2=this._selectedFeatures,_e3=this._mode;for(var _e4 in _e2){if(_e2.hasOwnProperty(_e4)){this._unSelectFeatureIIf(_e4,_e3);_e3._removeFeatureIIf(_e4);}}this._selectedFeatures={};if(this._isSelOnly){_e3._applyTimeFilter(true);}if(!_e1){this.onSelectionClear();}return this;},setSelectionSymbol:function(_e5){this._selectionSymbol=_e5;if(_e5){var _e6=this._selectedFeatures;for(var _e7 in _e6){if(_e6.hasOwnProperty(_e7)){_e6[_e7].setSymbol(_e5);}}}return this;},getSelectionSymbol:function(){return this._selectionSymbol;},__msigns:[{n:"applyEdits",c:5,a:[{i:0},{i:1}],e:4,f:1}],applyEdits:function(_e8,_e9,_ea,_eb,_ec,_ed){var _ee=_ed.assembly,dfd=_ed.dfd;this._applyNormalized(_e8,_ee&&_ee[0]);this._applyNormalized(_e9,_ee&&_ee[1]);this.onBeforeApplyEdits(_e8,_e9,_ea);var _ef={},_f0=this.objectIdField,_f1={f:"json"},_f2=false;if(this._collection){var _f3={};_f3.addResults=_e8?dojo.map(_e8,function(){_f2=true;return {objectId:this._nextId++,success:true};},this):null;_f3.updateResults=_e9?dojo.map(_e9,function(_f4){_f2=true;var oid=_f4.attributes[_f0];_ef[oid]=_f4;return {objectId:oid,success:true};},this):null;_f3.deleteResults=_ea?dojo.map(_ea,function(_f5){_f2=true;return {objectId:_f5.attributes[_f0],success:true};},this):null;if(_f2){this._editHandler(_f3,_e8,_ef,_eb,_ec,dfd);}return;}if(_e8&&_e8.length>0){_f1.adds=this._convertFeaturesToJson(_e8);_f2=true;}if(_e9&&_e9.length>0){for(var i=0;i<_e9.length;i++){var _f6=_e9[i];_ef[_f6.attributes[_f0]]=_f6;}_f1.updates=this._convertFeaturesToJson(_e9);_f2=true;}if(_ea&&_ea.length>0){var ids=[];for(var i=0;i<_ea.length;i++){ids.push(_ea[i].attributes[_f0]);}_f1.deletes=ids.join(",");_f2=true;}if(_f2){var _f7=this;return esri.request({url:this._url.path+"/applyEdits",content:dojo.mixin(_f1,this._url.query),callbackParamName:"callback",load:function(_f8){_f7._editHandler(_f8,_e8,_ef,_eb,_ec,dfd);},error:function(err){_f7._resolve([err],null,_ec,dfd,true);}},{usePost:true});}},queryFeatures:function(_f9,_fa,_fb){return this._query("execute","onQueryFeaturesComplete",_f9,_fa,_fb);},queryRelatedFeatures:function(_fc,_fd,_fe){return this._query("executeRelationshipQuery","onQueryRelatedFeaturesComplete",_fc,_fd,_fe);},queryIds:function(_ff,_100,_101){return this._query("executeForIds","onQueryIdsComplete",_ff,_100,_101);},queryCount:function(_102,_103,_104){return this._query("executeForCount","onQueryCountComplete",_102,_103,_104);},queryAttachmentInfos:function(_105,_106,_107){var url=this._url.path+"/"+_105+"/attachments",dfd=new dojo.Deferred(esri._dfdCanceller),self=this;dfd._pendingDfd=esri.request({url:url,content:dojo.mixin({f:"json"},this._url.query),callbackParamName:"callback",load:function(_108){var _109=_108.attachmentInfos;dojo.forEach(_109,function(info){info.url=url+"/"+info.id;info.objectId=_105;});self._resolve([_109],"onQueryAttachmentInfosComplete",_106,dfd);},error:function(err){self._resolve([err],null,_107,dfd,true);}});return dfd;},addAttachment:function(_10a,_10b,_10c,_10d){return this._sendAttachment("add",_10a,_10b,_10c,_10d);},updateAttachment:function(_10e,_10f,_110,_111,_112){_110.appendChild(dojo.create("input",{type:"hidden",name:"attachmentId",value:_10f}));return this._sendAttachment("update",_10e,_110,_111,_112);},deleteAttachments:function(_113,_114,_115,_116){var url=this._url.path+"/"+_113+"/deleteAttachments",dfd=new dojo.Deferred(esri._dfdCanceller),self=this,_117={f:"json",attachmentIds:_114.join(",")};dfd._pendingDfd=esri.request({url:url,content:dojo.mixin(_117,this._url.query),callbackParamName:"callback",load:dojo.hitch(this,function(_118){var _119=_118.deleteAttachmentResults;_119=dojo.map(_119,function(_11a){var res=new esri.layers.FeatureEditResult(_11a);res.attachmentId=res.objectId;res.objectId=_113;return res;});self._resolve([_119],"onDeleteAttachmentsComplete",_115,dfd);}),error:function(err){self._resolve([err],null,_116,dfd,true);}},{usePost:true});return dfd;},addType:function(_11b){if(!this._collection){return false;}var _11c=this.types;if(_11c){var _11d=dojo.some(_11c,function(type,_11e){if(type.id==_11b.id){return true;}return false;});if(_11d){return false;}else{_11c.push(_11b);}}else{this.types=[_11b];}this._typesDirty=true;return true;},deleteType:function(_11f){if(!this._collection){return;}var _120=this.types;if(_120){var _121=-1;dojo.some(_120,function(type,_122){if(type.id==_11f){_121=_122;return true;}return false;});if(_121>-1){this._typesDirty=true;return _120.splice(_121,1)[0];}}},toJson:function(){var _123=this._json,json=dojo.isString(_123)?dojo.fromJson(_123):dojo.clone(_123);if(!json){return;}json=json.layerDefinition?json:{layerDefinition:json};var _124=json.layerDefinition,_125=this._collection;if(_125&&this._typesDirty){_124.types=dojo.map(this.types||[],function(type){return type.toJson();});var _126=this.renderer,_127=_124.drawingInfo;if(_127&&_126&&_126.declaredClass.indexOf("TemporalRenderer")===-1){_127.renderer=_126.toJson();}}var _128=null;if(!(_125&&!this._fcAdded)){_128={geometryType:_124.geometryType,features:this._convertFeaturesToJson(this.graphics,true)};}json.featureSet=dojo.mixin({},json.featureSet||{},_128);if(_125){json.nextObjectId=this._nextId;}return json;},onSelectionComplete:function(){},onSelectionClear:function(){},onBeforeApplyEdits:function(){},onEditsComplete:function(){},onQueryFeaturesComplete:function(){},onQueryRelatedFeaturesComplete:function(){},onQueryIdsComplete:function(){},onQueryCountComplete:function(){},onQueryAttachmentInfosComplete:function(){},onAddAttachmentComplete:function(){},onUpdateAttachmentComplete:function(){},onDeleteAttachmentsComplete:function(){},_counter:{value:0},_getUniqueId:function(){return this._counter.value++;},_getDesiredStatus:function(){return this.visible&&this._isMapAtVisibleScale();},_isMapAtVisibleScale:function(){var _129=esri.geometry.getScale(this._map);var _12a=this.minScale,_12b=this.maxScale,_12c=!_12a,_12d=!_12b;if(!_12c&&_129<=_12a){_12c=true;}if(!_12d&&_129>=_12b){_12d=true;}return (_12c&&_12d)?true:false;},_suspend:function(){this.inherited("_suspend",arguments);this._toggleTime(false);var mode=this._mode;if(mode){mode.suspend();}},_resume:function(){this.inherited("_resume",arguments);this._toggleTime(true);var mode=this._mode;if(mode){mode.resume();}},_toggleTime:function(_12e){var map=this._map;if(_12e&&this.timeInfo&&this.useMapTime&&map){this._mapTimeExtent=map.timeExtent;if(!this._timeConnect){this._timeConnect=dojo.connect(map,"onTimeExtentChange",this,this._timeChangeHandler);}}else{this._mapTimeExtent=null;dojo.disconnect(this._timeConnect);this._timeConnect=null;}},_timeChangeHandler:function(_12f){this._mapTimeExtent=_12f;var mode=this._mode;if(mode){mode.propertyChangeHandler(0);}},_getOffsettedTE:function(_130){var _131=this._timeOffset,_132=this._timeOffsetUnits;return (_130&&_131&&_132)?_130.offset(-1*_131,_132):_130;},_getTimeOverlap:function(_133,_134){if(_133&&_134){return _133.intersection(_134);}else{return _133||_134;}},_getTimeFilter:function(_135){var _136=this.getTimeDefinition(),_137=null,_138;if(_136||_137){_138=this._getTimeOverlap(_136,_137);if(!_138){return [false];}}if(_135){_135=_138?this._getTimeOverlap(_135,_138):_135;if(!_135){return [false];}}else{_135=_138;}return [true,_135];},_getAttributeFilter:function(_139){var _13a=this.getDefinitionExpression();if(_139){_139=_13a?"("+_13a+") AND ("+_139+")":_139;}else{_139=_13a;}return _139;},_applyQueryFilters:function(_13b){_13b.where=this._getAttributeFilter(_13b.where);_13b.maxAllowableOffset=this._maxOffset;if(this.timeInfo){var _13c=this._getTimeFilter(_13b.timeExtent);if(!_13c[0]){return false;}else{_13b.timeExtent=_13c[1];}}return true;},_isNew:function(_13d){var _13e=dojo.indexOf(this._newFeatures,_13d);return _13e===-1?false:true;},_isDeleted:function(_13f){var _140=_13f.attributes,_141=this.objectIdField,oid=_140[_141];return this._deletedFeatures[oid]?true:false;},_add:function(_142){var _143=this._selectionSymbol,attr=_142.attributes,_144=this.visibilityField;if(_143&&this._isSelOnly){_142.setSymbol(_143);}if(_144&&attr&&attr.hasOwnProperty(_144)){_142[attr[_144]?"show":"hide"]();}return this.add.apply(this,arguments);},_remove:function(){return this.remove.apply(this,arguments);},_canDoClientSideQuery:function(_145){var _146=[],map=this._map;if(this._isTable||!map){return;}if(_145.text||(_145.where&&_145.where!==this.getDefinitionExpression())){return;}var _147=this._isSnapshot,_148=this._isSelOnly;var _149=_145.geometry;if(_149){if(!_148&&_145.spatialRelationship===esri.tasks.Query.SPATIAL_REL_INTERSECTS&&(_149.type==="extent"&&(_147||map.extent.contains(_149)))){_146.push(1);}else{return;}}var ids=_145.objectIds;if(ids){if(_147){_146.push(2);}else{var len=ids.length,mode=this._mode,_14a=0;for(var i=0;i<len;i++){if(mode._getFeature(ids[i])){_14a++;}}if(_14a===len){_146.push(2);}else{return;}}}if(this.timeInfo){var _14b=_145.timeExtent,_14c=this._mapTimeExtent;if(_147){if(_14b){_146.push(3);}}else{if(_148){if(_14b){return;}}else{if(_14c){if(dojo.indexOf(_146,2)!==-1){if(_14b){_146.push(3);}}else{return;}}else{if(_146.length>0){if(_14b){_146.push(3);}}else{if(_14b){return;}}}}}}return _146.length>0?_146:null;},_doQuery:function(_14d,_14e,_14f){var _150=[],mode=this._mode,_151=this.objectIdField;if(dojo.indexOf(_14e,2)!==-1){_150=[];var ids=_14d.objectIds,len=ids.length;for(var i=0;i<len;i++){var obj=mode._getFeature(ids[i]);if(obj){_150.push(obj);}}if(_150.length===0){return [];}}if(dojo.indexOf(_14e,1)!==-1){var _152=_150.length>0?_150:this.graphics,len=_152.length,_153=_14d.geometry._normalize(null,true);_150=[];for(var i=0;i<len;i++){var _154=_152[i],_155=_154.geometry;if(this.normalization&&_153.length){if(_153[0].intersects(_155)||_153[1].intersects(_155)){_150.push(_154);}}else{if(_153.intersects(_155)){_150.push(_154);}}}if(_150.length===0){return [];}}if(dojo.indexOf(_14e,3)!==-1){if(this.timeInfo){var _152=_150.length>0?_150:this.graphics,time=_14d.timeExtent;var _156=this._filterByTime(_152,time.startTime,time.endTime);_150=_156.match;}}if(_14f){return dojo.map(_150,function(obj){return obj.attributes[_151];},this);}else{return _150;}},_filterByTime:function(_157,_158,_159){var _15a=this._startTimeField,_15b=this._endTimeField,_15c;if(!this._twoTimeFields){_15c=_15a||_15b;}var _15d=esri._isDefined,yea=[],nay=[];_158=_158?_158.getTime():-Infinity;_159=_159?_159.getTime():Infinity;if(_15c){for(var i=0,len=_157.length;i<len;i++){var _15e=_157[i],_15f=_15e.attributes;var time=_15f[_15c];if(time>=_158&&time<=_159){yea.push(_15e);}else{nay.push(_15e);}}}else{for(var i=0,len=_157.length;i<len;i++){var _15e=_157[i],_15f=_15e.attributes;var _160=_15f[_15a],end=_15f[_15b];_160=_15d(_160)?_160:-Infinity;end=_15d(end)?end:Infinity;if((_160>=_158&&_160<=_159)||(end>=_158&&end<=_159)){yea.push(_15e);}else{nay.push(_15e);}}}return {match:yea,noMatch:nay};},_resolve:function(args,_161,_162,dfd,_163){if(_161){this[_161].apply(this,args);}if(_162){_162.apply(null,args);}if(dfd){esri._resDfd(dfd,args,_163);}},_getShallowClone:function(_164){var _165=new esri.tasks.Query();for(var prop in _164){if(_164.hasOwnProperty(prop)){_165[prop]=_164[prop];}}return _165;},_query:function(type,_166,_167,_168,_169){var that=this,dfd=new dojo.Deferred(esri._dfdCanceller);var _16a=function(_16b,_16c){if(!_16c&&type==="execute"&&!that._isTable){var _16d=_16b.features,mode=that._mode,_16e=that.objectIdField;for(var il=_16d.length,i=il-1;i>=0;i--){var oid=_16d[i].attributes[_16e];var _16f=mode._getFeature(oid);if(_16f){_16d.splice(i,1,_16f);}}}that._resolve([_16b],_166,_168,dfd);};if(type!=="executeRelationshipQuery"){_167=this._getShallowClone(_167);_167.outFields=this._getOutFields();_167.returnGeometry=true;var map=this._map;if(map){_167.outSpatialReference=new esri.SpatialReference(map.spatialReference.toJson());}if(!this._applyQueryFilters(_167)){var _170;switch(type){case "execute":_170=new esri.tasks.FeatureSet({features:[]});break;case "executeForIds":_170=[];break;case "executeForCount":_170=0;break;}_16a(_170,true);return dfd;}var _171=this._canDoClientSideQuery(_167);if(_171){var _172=this._doQuery(_167,_171,(type==="executeForIds"||type==="executeForCount"));var _170;switch(type){case "execute":_170=new esri.tasks.FeatureSet();_170.features=_172;break;case "executeForIds":_170=_172;break;case "executeForCount":_170=_172.length;break;}_16a(_170,true);return dfd;}}if(this._collection){var err=new Error("FeatureLayer::_query - "+esri.bundle.layers.FeatureLayer.invalidParams);this._resolve([err],null,_169,dfd,true);return dfd;}if(this._ts){_167._ts=(new Date()).getTime();}var temp=dfd._pendingDfd=this._task[type](_167);temp.addCallbacks(_16a,function(err){that._resolve([err],null,_169,dfd,true);});return dfd;},_convertFeaturesToJson:function(_173,_174){var json=[],_175=this._selectionSymbol,_176=this.visibilityField;for(var i=0;i<_173.length;i++){var _177=_173[i],_178={},_179=_177.geometry,attr=_177.attributes,_17a=_177.symbol;if(_179){_178.geometry=_179.toJson();}if(_176){_178.attributes=attr=dojo.mixin({},attr);attr[_176]=_177.visible?1:0;}else{if(attr){_178.attributes=dojo.mixin({},attr);}}if(_17a&&(_17a!==_175)){_178.symbol=_17a.toJson();}json.push(_178);}return _174?json:dojo.toJson(json);},_selectHandler:function(_17b,_17c,_17d,_17e,dfd){var _17f,ctor=this.constructor;switch(_17c){case ctor.SELECTION_NEW:this.clearSelection(true);_17f=true;break;case ctor.SELECTION_ADD:_17f=true;break;case ctor.SELECTION_SUBTRACT:_17f=false;break;}var _180=_17b.features,mode=this._mode,_181=[],_182=this.objectIdField;if(_17f){for(var i=0;i<_180.length;i++){var _183=_180[i];var oid=_183.attributes[_182];var _184=mode._addFeatureIIf(oid,_183);_181.push(_184);this._selectFeatureIIf(oid,_184,mode);}}else{for(var i=0;i<_180.length;i++){var _183=_180[i];var oid=_183.attributes[_182];this._unSelectFeatureIIf(oid,mode);var _185=mode._removeFeatureIIf(oid);_181.push(_185||_183);}}if(this._isSelOnly){mode._applyTimeFilter(true);}this._resolve([_181,_17c],"onSelectionComplete",_17d,dfd);},_selectFeatureIIf:function(oid,_186,mode){var _187=this._selectedFeatures,_188=_187[oid];if(!_188){mode._incRefCount(oid);_187[oid]=_186;if(!this._isTable){this._setSelectSymbol(_186);}}return _188||_186;},_unSelectFeatureIIf:function(oid,mode){var _189=this._selectedFeatures[oid];if(_189){mode._decRefCount(oid);delete this._selectedFeatures[oid];if(!this._isTable){this._setUnSelectSymbol(_189);}}return _189;},_isSelected:function(_18a){},_setSelectSymbol:function(_18b){var _18c=this._selectionSymbol;if(_18c&&!this._isSelOnly){_18b.setSymbol(_18c);}},_setUnSelectSymbol:function(_18d){var _18e=this._selectionSymbol;if(_18e&&!this._isSelOnly){if(_18e===_18d.symbol){_18d.setSymbol(null,true);}}},_getOutFields:function(){var _18f=dojo.filter([this.objectIdField,this.typeIdField,this._startTimeField,this._endTimeField,this._trackIdField].concat(this._rendererFields),function(_190,_191,arr){return !!_190&&(dojo.indexOf(arr,_190)===_191);});var _192=dojo.clone(this._outFields);if(_192){if(dojo.indexOf(_192,"*")!==-1){return _192;}dojo.forEach(_18f,function(_193){if(dojo.indexOf(_192,_193)===-1){_192.push(_193);}});return _192;}else{return _18f;}},_checkFields:function(_194){var _195=_194||this._getOutFields();dojo.forEach(_195,function(_196){if(_196==="*"){return;}if(!this._getField(_196)){console.debug("esri.layers.FeatureLayer: "+esri.substitute({url:this.url,field:_196},esri.bundle.layers.FeatureLayer.fieldNotFound));}},this);if(!_194&&!this._isTable&&!this._fserver&&!this._collection){var _197=dojo.some(this.fields,function(_198){return (_198&&_198.type==="esriFieldTypeGeometry")?true:false;});if(!_197){console.debug("esri.layers.FeatureLayer: "+esri.substitute({url:this.url},esri.bundle.layers.FeatureLayer.noGeometryField));}}},_fixRendererFields:function(){var _199=this.renderer;if(_199&&this.fields.length>0){var _19a=dojo.filter([_199,_199.observationRenderer,_199.latestObservationRenderer,_199.trackRenderer],esri._isDefined);var _19b=[];dojo.forEach(_19a,function(rnd){var _19c,_19d;_19d=rnd.attributeField;if(_19d){_19c=!this._getField(_19d)&&this._getField(_19d,true);if(_19c){rnd.attributeField=_19c.name;}}_19d=rnd.attributeField2;if(_19d){_19c=!this._getField(_19d)&&this._getField(_19d,true);if(_19c){rnd.attributeField2=_19c.name;}}_19d=rnd.attributeField3;if(_19d){_19c=!this._getField(_19d)&&this._getField(_19d,true);if(_19c){rnd.attributeField3=_19c.name;}}_19b.push(rnd.attributeField);_19b.push(rnd.attributeField2);_19b.push(rnd.attributeField3);},this);this._rendererFields=dojo.filter(_19b,esri._isDefined);}},_getField:function(_19e,_19f){var _1a0=this.fields;if(_1a0.length===0){return null;}var _1a1;if(_19f){_19e=_19e.toLowerCase();}dojo.some(_1a0,function(_1a2){var _1a3=false;if(_19f){_1a3=(_1a2&&_1a2.name.toLowerCase()===_19e)?true:false;}else{_1a3=(_1a2&&_1a2.name===_19e)?true:false;}if(_1a3){_1a1=_1a2;}return _1a3;});return _1a1;},_getDateOpts:function(){if(!this._dtOpts){var _1a4=dojo.map(dojo.filter(this.fields,function(_1a5){return !!(_1a5&&_1a5.type==="esriFieldTypeDate");}),function(_1a6){return _1a6.name;});this._dtOpts={properties:_1a4};}return this._dtOpts;},_applyNormalized:function(_1a7,_1a8){if(_1a7&&_1a8){dojo.forEach(_1a7,function(_1a9,_1aa){if(_1a9&&_1a8[_1aa]){_1a9.setGeometry(_1a8[_1aa]);}});}},_editHandler:function(_1ab,adds,_1ac,_1ad,_1ae,dfd){var _1af=_1ab.addResults,_1b0=_1ab.updateResults,_1b1=_1ab.deleteResults;var mode=this._mode;var _1b2=this._isTable;if(_1af){for(var i=0;i<_1af.length;i++){_1af[i]=new esri.layers.FeatureEditResult(_1af[i]);if(_1b2){continue;}var _1b3=_1af[i];if(_1b3.success){var oid=_1b3.objectId,_1b4=adds[i],gl=_1b4._graphicsLayer;if(gl&&gl!==this){gl.remove(_1b4);}var attr=_1b4.attributes||{},_1b5=this.objectIdField;attr[_1b5]=oid;_1b4.setAttributes(attr);mode.drawFeature(_1b4);}}}if(_1b0){for(var i=0;i<_1b0.length;i++){_1b0[i]=new esri.layers.FeatureEditResult(_1b0[i]);if(_1b2){continue;}var _1b3=_1b0[i];if(_1b3.success){var oid=_1b3.objectId;var _1b4=_1ac[oid];var _1b6=mode._getFeature(oid);if(_1b6){if(_1b6.geometry!==_1b4.geometry){_1b6.setGeometry(esri.geometry.fromJson(_1b4.geometry.toJson()));}this._repaint(_1b6,oid);}}}}if(_1b1){var _1b7=[];for(var i=0;i<_1b1.length;i++){_1b1[i]=new esri.layers.FeatureEditResult(_1b1[i]);if(_1b2){continue;}var _1b3=_1b1[i];if(_1b3.success){var oid=_1b3.objectId;var _1b4=mode._getFeature(oid);if(_1b4){if(this._unSelectFeatureIIf(oid,mode)){_1b7.push(_1b4);}_1b4._count=0;mode._removeFeatureIIf(oid);}}}if(_1b7.length>0){this.onSelectionComplete(_1b7,this.constructor.SELECTION_SUBTRACT);}}this._resolve([_1af,_1b0,_1b1],"onEditsComplete",_1ad,dfd);},_sendAttachment:function(type,_1b8,_1b9,_1ba,_1bb){var _1bc=(type==="add")?"addAttachment":"updateAttachment";var url=this._url.path+"/"+_1b8+"/"+_1bc;_1b9.enctype="multipart/form-data";if(dojo.isIE<9){_1b9.encoding="multipart/form-data";}_1b9.method="post";var _1bd=_1b9.elements;if(!dojo.some(_1bd,function(el){return el.name==="f";})){_1b9.appendChild(dojo.create("input",{type:"hidden",name:"f",value:"json"}));}if(!dojo.some(_1bd,function(el){return el.name==="callback.html";})){_1b9.appendChild(dojo.create("input",{type:"hidden",name:"callback.html",value:"textarea"}));}var _1be=this._getToken();if(_1be&&!dojo.some(_1bd,function(el){return el.name==="token";})){_1b9.appendChild(dojo.create("input",{type:"hidden",name:"token",value:_1be}));}var dfd=new dojo.Deferred(esri._dfdCanceller),self=this,_1bf=function(_1c0){if(!(_1c0 instanceof Error)){_1c0=dojo.mixin(new Error(),_1c0);}self._resolve([_1c0],null,_1bb,dfd,true);},_1c1=(esri.config.defaults.io.alwaysUseProxy||!esri._hasSameOrigin(url,window.location.href))?esri._getProxyUrl():null;dfd._pendingDfd=dojo.io.iframe.send({url:(_1c1?(_1c1.path+"?"):"")+url+"?callback.html=textarea",form:_1b9,handleAs:"json",load:dojo.hitch(this,function(_1c2,io){var _1c3=_1c2.error;if(_1c3){_1bf(_1c3);return;}var _1c4=(type==="add")?"addAttachmentResult":"updateAttachmentResult";var _1c5=(type==="add")?"onAddAttachmentComplete":"onUpdateAttachmentComplete";var _1c6=new esri.layers.FeatureEditResult(_1c2[_1c4]);_1c6.attachmentId=_1c6.objectId;_1c6.objectId=_1b8;self._resolve([_1c6],_1c5,_1ba,dfd);}),error:_1bf});return dfd;},_repaint:function(_1c7,oid,_1c8){oid=esri._isDefined(oid)?oid:_1c7.attributes[this.objectIdField];if(!(oid in this._selectedFeatures)||!this._selectionSymbol){_1c7.setSymbol(_1c7.symbol,_1c8);}},_getKind:function(_1c9){var _1ca=this._trackManager;if(_1ca){return _1ca.isLatestObservation(_1c9)?1:0;}return 0;}});dojo.mixin(esri.layers.FeatureLayer,{MODE_SNAPSHOT:0,MODE_ONDEMAND:1,MODE_SELECTION:2,SELECTION_NEW:3,SELECTION_ADD:4,SELECTION_SUBTRACT:5,POPUP_NONE:"esriServerHTMLPopupTypeNone",POPUP_HTML_TEXT:"esriServerHTMLPopupTypeAsHTMLText",POPUP_URL:"esriServerHTMLPopupTypeAsURL"});esri._createWrappers("esri.layers.FeatureLayer");dojo.declare("esri.layers.FeatureType",null,{constructor:function(json){if(json&&dojo.isObject(json)){this.id=json.id;this.name=json.name;var _1cb=json.symbol;if(_1cb){this.symbol=esri.symbol.fromJson(_1cb);}var _1cc=json.domains;var _1cd=this.domains={};for(var _1ce in _1cc){if(_1cc.hasOwnProperty(_1ce)){var _1cf=_1cc[_1ce];switch(_1cf.type){case "range":_1cd[_1ce]=new esri.layers.RangeDomain(_1cf);break;case "codedValue":_1cd[_1ce]=new esri.layers.CodedValueDomain(_1cf);break;case "inherited":_1cd[_1ce]=new esri.layers.InheritedDomain(_1cf);break;}}}var _1d0=json.templates;if(_1d0){var _1d1=this.templates=[];for(var i=0;i<_1d0.length;i++){_1d1.push(new esri.layers.FeatureTemplate(_1d0[i]));}}}},toJson:function(){var json={id:this.id,name:this.name,symbol:this.symbol&&this.symbol.toJson()};var _1d2=this.domains,_1d3=this.templates,_1d4=esri._sanitize;if(_1d2){var _1d5=json.domains={};for(var _1d6 in _1d2){if(_1d2.hasOwnProperty(_1d6)){_1d5[_1d6]=_1d2[_1d6]&&_1d2[_1d6].toJson();}}_1d4(_1d5);}if(_1d3){json.templates=dojo.map(_1d3,function(_1d7){return _1d7.toJson();});}return _1d4(json);}});dojo.declare("esri.layers.FeatureTemplate",null,{constructor:function(json){if(json&&dojo.isObject(json)){this.name=json.name;this.description=json.description;this.drawingTool=json.drawingTool;var _1d8=json.prototype;this.prototype=new esri.Graphic(_1d8.geometry,null,_1d8.attributes);}},toJson:function(){return esri._sanitize({name:this.name,description:this.description,drawingTool:this.drawingTool,prototype:this.prototype&&this.prototype.toJson()});}});dojo.mixin(esri.layers.FeatureTemplate,{TOOL_AUTO_COMPLETE_POLYGON:"esriFeatureEditToolAutoCompletePolygon",TOOL_CIRCLE:"esriFeatureEditToolCircle",TOOL_ELLIPSE:"esriFeatureEditToolEllipse",TOOL_FREEHAND:"esriFeatureEditToolFreehand",TOOL_LINE:"esriFeatureEditToolLine",TOOL_NONE:"esriFeatureEditToolNone",TOOL_POINT:"esriFeatureEditToolPoint",TOOL_POLYGON:"esriFeatureEditToolPolygon",TOOL_RECTANGLE:"esriFeatureEditToolRectangle",TOOL_ARROW:"esriFeatureEditToolArrow",TOOL_TRIANGLE:"esriFeatureEditToolTriangle",TOOL_LEFT_ARROW:"esriFeatureEditToolLeftArrow",TOOL_RIGHT_ARROW:"esriFeatureEditToolRightArrow",TOOL_UP_ARROW:"esriFeatureEditToolUpArrow",TOOL_DOWN_ARROW:"esriFeatureEditToolDownArrow"});dojo.declare("esri.layers.FeatureEditResult",null,{constructor:function(json){if(json&&dojo.isObject(json)){this.objectId=json.objectId;this.success=json.success;if(!json.success){var err=json.error;this.error=new Error();this.error.code=err.code;this.error.message=err.description;}}}});dojo.declare("esri.layers._RenderMode",null,{constructor:function(){this._prefix="jsonp_"+(dojo._scopeName||"dojo")+"IoScript";},initialize:function(map){},propertyChangeHandler:function(type){},destroy:function(){},drawFeature:function(_1d9){},suspend:function(){},resume:function(){},refresh:function(){},_incRefCount:function(oid){var _1da=this._featureMap[oid];if(_1da){_1da._count++;}},_decRefCount:function(oid){var _1db=this._featureMap[oid];if(_1db){_1db._count--;}},_getFeature:function(oid){return this._featureMap[oid];},_addFeatureIIf:function(oid,_1dc){var fmap=this._featureMap,_1dd=fmap[oid],_1de=this.featureLayer;if(!_1dd){fmap[oid]=_1dc;_1de._add(_1dc);_1dc._count=0;}return _1dd||_1dc;},_removeFeatureIIf:function(oid){var _1df=this._featureMap[oid],_1e0=this.featureLayer;if(_1df){if(_1df._count){return;}delete this._featureMap[oid];_1e0._remove(_1df);}return _1df;},_clearIIf:function(){var _1e1=this.featureLayer,_1e2=_1e1.graphics,_1e3=_1e1._selectedFeatures,_1e4=_1e1.objectIdField;for(var i=_1e2.length-1;i>=0;i--){var _1e5=_1e2[i];var oid=_1e5.attributes[_1e4];if(oid in _1e3){_1e5._count=1;continue;}_1e5._count=0;this._removeFeatureIIf(oid);}},_isPending:function(id){var dfd=dojo.io.script[this._prefix+id];return dfd?true:false;},_cancelPendingRequest:function(dfd,id){dfd=dfd||dojo.io.script[this._prefix+id];if(dfd){try{dfd.cancel();dojo.io.script._validCheck(dfd);}catch(e){}}},_purgeRequests:function(){dojo.io.script._validCheck(null);},_toggleVisibility:function(show){var _1e6=this.featureLayer,_1e7=_1e6.graphics,_1e8=show?"show":"hide";show=show&&_1e6._ager;for(var i=0,len=_1e7.length;i<len;i++){var _1e9=_1e7[i];_1e9[_1e8]();if(show){_1e6._repaint(_1e9);}}},_applyTimeFilter:function(_1ea){var _1eb=this.featureLayer;if(!_1eb.timeInfo||_1eb._suspended){return;}if(!_1ea){_1eb._fireUpdateStart();}var _1ec=_1eb._trackManager;if(_1ec){_1ec.clearTracks();}var defn=_1eb.getTimeDefinition(),_1ed=_1eb._getOffsettedTE(_1eb._mapTimeExtent);if(_1ed){_1ed=_1eb._getTimeOverlap(defn,_1ed);if(_1ed){var _1ee=_1eb._filterByTime(_1eb.graphics,_1ed.startTime,_1ed.endTime);if(_1ec){_1ec.addFeatures(_1ee.match);}dojo.forEach(_1ee.match,function(_1ef){var _1f0=_1ef._shape;if(!_1ef.visible){_1ef.show();_1f0=_1ef._shape;_1f0&&_1f0._moveToFront();}if(_1eb._ager&&_1f0){_1eb._repaint(_1ef);}});dojo.forEach(_1ee.noMatch,function(_1f1){if(_1f1.visible){_1f1.hide();}});}else{this._toggleVisibility(false);}}else{if(_1ec){_1ec.addFeatures(_1eb.graphics);}this._toggleVisibility(true);}if(_1ec){_1ec.moveLatestToFront();_1ec.drawTracks();}if(!_1ea){_1eb._fireUpdateEnd();}}});dojo.declare("esri.layers._SelectionMode",[esri.layers._RenderMode],{constructor:function(_1f2){this.featureLayer=_1f2;this._featureMap={};},initialize:function(map){this.map=map;this._init=true;},propertyChangeHandler:function(type){if(this._init&&type===0){this._applyTimeFilter();}},destroy:function(){this._init=false;},resume:function(){this.propertyChangeHandler(0);}});dojo.declare("esri.layers._SnapshotMode",[esri.layers._RenderMode],{constructor:function(_1f3){this.featureLayer=_1f3;this._featureMap={};this._drawFeatures=dojo.hitch(this,this._drawFeatures);this._queryErrorHandler=dojo.hitch(this,this._queryErrorHandler);},initialize:function(map){this.map=map;var _1f4=this.featureLayer;if(_1f4._collection){this._applyTimeFilter();}else{this._fetchAll();}this._init=true;},propertyChangeHandler:function(type){if(this._init){if(type){this._fetchAll();}else{this._applyTimeFilter();}}},destroy:function(){this._init=false;},drawFeature:function(_1f5){var _1f6=this.featureLayer,_1f7=_1f6.objectIdField,oid=_1f5.attributes[_1f7];if(!_1f6._isDeleted(_1f5)){this._addFeatureIIf(oid,_1f5);this._incRefCount(oid);}},resume:function(){this.propertyChangeHandler(0);},refresh:function(){var _1f8=this.featureLayer;if(_1f8._collection){_1f8._fireUpdateStart();_1f8._refresh(true);_1f8._fireUpdateEnd();}else{this._fetchAll();}},_getRequestId:function(_1f9){var id="_"+_1f9.name+_1f9.layerId+_1f9._ulid;return id.replace(/[^a-zA-Z0-9\_]+/g,"_");},_fetchAll:function(){var _1fa=this.featureLayer;if(_1fa._collection){return;}_1fa._fireUpdateStart();this._clearIIf();this._sendRequest();},_sendRequest:function(){var map=this.map,_1fb=this.featureLayer,_1fc=_1fb.getDefinitionExpression();var _1fd=new esri.tasks.Query();_1fd.outFields=_1fb._getOutFields();_1fd.where=_1fc||"1=1";_1fd.returnGeometry=true;_1fd.outSpatialReference=new esri.SpatialReference(map.spatialReference.toJson());_1fd.timeExtent=_1fb.getTimeDefinition();_1fd.maxAllowableOffset=_1fb._maxOffset;if(_1fb._ts){_1fd._ts=(new Date()).getTime();}var _1fe;if(_1fb._usePatch){_1fe=this._getRequestId(_1fb);this._cancelPendingRequest(null,_1fe);}_1fb._task.execute(_1fd,this._drawFeatures,this._queryErrorHandler,_1fe);},_drawFeatures:function(_1ff){this._purgeRequests();var _200=_1ff.features,_201=this.featureLayer,_202=_201.objectIdField;for(var i=0,len=_200.length;i<len;i++){var _203=_200[i];var oid=_203.attributes[_202];if(!_201._isDeleted(_203)){this._addFeatureIIf(oid,_203);this._incRefCount(oid);}}this._applyTimeFilter(true);_201._fireUpdateEnd();},_queryErrorHandler:function(err){this._purgeRequests();var _204=this.featureLayer;_204._errorHandler(err);_204._fireUpdateEnd(err);}});dojo.declare("esri.layers._OnDemandMode",[esri.layers._RenderMode],{constructor:function(_205){this.featureLayer=_205;this._featureMap={};this._queryErrorHandler=dojo.hitch(this,this._queryErrorHandler);},initialize:function(map){this.map=map;this._initialize();this._init=true;},propertyChangeHandler:function(type){if(this._init){if(type<2){this._zoomHandler();}}},destroy:function(){this._disableConnectors();this._init=false;},drawFeature:function(_206){var _207=this._gridLayer,geom=_206.geometry,type=geom.type,_208=[];switch(type){case "point":_208=_207.getCellsInExtent({xmin:geom.x,ymin:geom.y,xmax:geom.x,ymax:geom.y}).cells;break;default:_208=_207.getCellsInExtent(geom.getExtent()).cells;break;}var _209=this._cellMap,_20a=this.featureLayer,_20b=_20a.objectIdField;for(var i=0;i<_208.length;i++){var cell=_208[i];var oid=_206.attributes[_20b];if(!_20a._isDeleted(_206)){_209[cell.row][cell.col].features.push(_206);this._addFeatureIIf(oid,_206);this._incRefCount(oid);}}},suspend:function(){if(!this._init){return;}this._disableConnectors();},resume:function(){if(!this._init){return;}this._enableConnectors();this._zoomHandler();},refresh:function(){this._zoomHandler();},_initialize:function(){var map=this.map,_20c=this.featureLayer;var _20d=_20c._wrap&&_20c._srInfo;this._gridLayer=new esri.layers._GridLayout(new esri.geometry.Point(_20d?_20d.valid[0]:map.extent.xmin,map.extent.ymax,map.spatialReference),{width:_20c._tileWidth,height:_20c._tileHeight},{width:map.width,height:map.height},_20d);this._ioQueue=[];if(!_20c._suspended){this._zoomHandler();this._enableConnectors();}},_enableConnectors:function(){var map=this.map;this._zoomConnect=dojo.connect(map,"onZoomEnd",this,this._zoomHandler);this._panConnect=dojo.connect(map,"onPanEnd",this,this._panHandler);},_disableConnectors:function(){dojo.disconnect(this._zoomConnect);dojo.disconnect(this._panConnect);},_zoomHandler:function(){this._processIOQueue(true);var _20e=this.featureLayer;if(_20e._suspended){return;}_20e._fireUpdateStart();this._clearIIf();var _20f=_20e._trackManager;if(_20f){_20f.clearTracks();}this._cellMap={};this._gridLayer.setResolution(this.map.extent);this._sendRequest();},_panHandler:function(){this.featureLayer._fireUpdateStart();this._sendRequest();},_getRequestId:function(_210,cell){var id="_"+_210.name+_210.layerId+_210._ulid+"_"+cell.resolution+"_"+cell.row+"_"+cell.col;return id.replace(/[^a-zA-Z0-9\_]+/g,"_");},_sendRequest:function(){var _211=this.featureLayer,map=this.map,_212=map.extent;var _213=this._gridLayer.getCellsInExtent(_212),_214=_213.cells;if(!_211._editable){var _215=this._cellMap;_214=dojo.filter(_214,function(cell){if(_215[cell.row]&&_215[cell.row][cell.col]){return false;}return true;});}var _216=_211._getOutFields();var _217=_211.getDefinitionExpression();var time=_211._getOffsettedTE(_211._mapTimeExtent);var _218=_211._usePatch,_219=this._ioQueue;this._pending=this._pending||0;for(var i=0;i<_214.length;i++){var cell=_214[i];var _21a=new esri.tasks.Query();_21a.geometry=cell.extent;_21a.outFields=_216;_21a.where=_217;_21a.returnGeometry=true;_21a.timeExtent=time;_21a.maxAllowableOffset=_211._maxOffset;if(_211._ts){_21a._ts=(new Date()).getTime();}var _21b;if(_218){_21b=this._getRequestId(_211,cell);if(this._isPending(_21b)){continue;}}var self=this,func=this._drawFeatures;this._pending++;_219.push(_211._task.execute(_21a,function(){var _21c=cell;return function(_21d){func.apply(self,[_21d,_21c]);};}.call(this),this._queryErrorHandler,_21b));}this._removeOldCells(_212);this._endCheck();},_drawFeatures:function(_21e,cell){this._finalizeIO();var _21f=this.featureLayer,map=this.map,_220=map.extent,_221=cell.extent,row=cell.row,col=cell.col,_222=_21f.objectIdField;var _223=_21e.features,_224=this._gridLayer;var _225=this._cellMap;var _226=_225[row]&&_225[row][col];if((cell.resolution!=this._gridLayer._resolution)||(!_224.intersects(_221,_220))){if(_226){this._removeCell(row,col);}}else{if(_226){this._updateCell(_226,_223);}else{cell.features=_223;_225[row]=_225[row]||{};_225[row][col]=cell;for(var i=0,len=_223.length;i<len;i++){var _227=_223[i];var oid=_227.attributes[_222];if(!_21f._isDeleted(_227)){this._addFeatureIIf(oid,_227);this._incRefCount(oid);}}}}this._endCheck();},_queryErrorHandler:function(err){this._finalizeIO();this.featureLayer._errorHandler(err);this._endCheck(true);},_finalizeIO:function(){this._purgeRequests();this._pending--;},_endCheck:function(_228){if(this._pending===0){this._processIOQueue();var _229=this.featureLayer,_22a=_229._trackManager;if(_22a){_22a.clearTracks();_22a.addFeatures(_229.graphics);if(_229._ager){dojo.forEach(_229.graphics,function(_22b){if(_22b._shape){_229._repaint(_22b);}});}_22a.moveLatestToFront();_22a.drawTracks();}this.featureLayer._fireUpdateEnd(_228&&new Error("FeatureLayer: "+esri.bundle.layers.FeatureLayer.updateError));}},_processIOQueue:function(_22c){this._ioQueue=dojo.filter(this._ioQueue,function(dfd){var keep=dfd.fired>-1?false:true;return keep;});if(_22c){dojo.forEach(this._ioQueue,this._cancelPendingRequest);}},_removeOldCells:function(_22d){var _22e=this._cellMap,_22f=this._gridLayer;for(var _230 in _22e){if(_22e[_230]){var row=_22e[_230];var _231=0,_232=0;for(var _233 in row){if(row[_233]){_231++;var _234=row[_233].extent;if(!_22f.intersects(_234,_22d)){this._removeCell(_230,_233);_232++;}}}if(_232===_231){delete _22e[_230];}}}},_updateCell:function(cell,_235){var _236=this.featureLayer,_237=_236.objectIdField,_238=_236._selectedFeatures;cell.features=cell.features||[];for(var i=0,len=_235.length;i<len;i++){var _239=_235[i];var oid=_239.attributes[_237];var _23a=this._addFeatureIIf(oid,_239);if(_23a===_239){this._incRefCount(oid);cell.features.push(_23a);}else{if(!(oid in _238)){_23a.setGeometry(_239.geometry);_23a.setAttributes(_239.attributes);}}}},_removeCell:function(row,col){var _23b=this._cellMap,_23c=this.featureLayer,_23d=_23c.objectIdField;var cell=_23b[row]&&_23b[row][col];if(cell){delete _23b[row][col];var _23e=cell.features;for(var i=0;i<_23e.length;i++){var _23f=_23e[i];var oid=_23f.attributes[_23d];this._decRefCount(oid);if(oid in _23c._selectedFeatures){continue;}this._removeFeatureIIf(oid);}}}});dojo.declare("esri.layers._GridLayout",null,{constructor:function(_240,_241,_242,_243){this.origin=_240;this.cellWidth=_241.width;this.cellHeight=_241.height;this.mapWidth=_242.width;this.mapHeight=_242.height;this.srInfo=_243;},setResolution:function(_244){this._resolution=(_244.xmax-_244.xmin)/this.mapWidth;if(this.srInfo){var _245=Math.round((2*this.srInfo.valid[1])/this._resolution),_246=Math.round(_245/this.cellWidth);this._frameStats=[_246,0,_246-1];}},getCellCoordinates:function(_247){var res=this._resolution,_248=this.origin;return {row:Math.floor((_248.y-_247.y)/(this.cellHeight*res)),col:Math.floor((_247.x-_248.x)/(this.cellWidth*res))};},normalize:function(col){var _249=this._frameStats;if(_249){var _24a=_249[0],m180=_249[1],p180=_249[2];if(col<m180){col=col%_24a;col=col<m180?col+_24a:col;}else{if(col>p180){col=col%_24a;}}}return col;},intersects:function(_24b,_24c){var _24d=this.srInfo;if(_24d){return dojo.some(_24c._getParts(_24d),function(_24e){return _24b.intersects(_24e.extent);});}else{return _24b.intersects(_24c);}},getCellExtent:function(row,col){var res=this._resolution,_24f=this.origin,_250=this.cellWidth,_251=this.cellHeight;return new esri.geometry.Extent((col*_250*res)+_24f.x,_24f.y-((row+1)*_251*res),((col+1)*_250*res)+_24f.x,_24f.y-(row*_251*res),new esri.SpatialReference(_24f.spatialReference.toJson()));},getCellsInExtent:function(_252){var _253=this.getCellCoordinates({x:_252.xmin,y:_252.ymax}),_254=this.getCellCoordinates({x:_252.xmax,y:_252.ymin}),_255=_253.row,_256=_254.row,_257=_253.col,_258=_254.col,_259=[],i,j,nj;for(i=_255;i<=_256;i++){for(j=_257;j<=_258;j++){nj=this.normalize(j);_259.push({row:i,col:nj,extent:this.getCellExtent(i,nj),resolution:this._resolution});}}return {minRow:_255,maxRow:_256,minCol:_257,maxCol:_258,cells:_259};}});dojo.declare("esri.layers._TrackManager",null,{constructor:function(_25a){this.layer=_25a;this.trackMap={};},initialize:function(map){this.map=map;var _25b=this.layer,_25c=_25b.renderer.trackRenderer;if(_25c&&(_25b.geometryType==="esriGeometryPoint")){var _25d=(this.container=new esri.layers._GraphicsLayer({id:_25b.id+"_tracks"}));_25d._onPanHandler=function(){};_25d._setMap(map,_25b._div);_25d.setRenderer(_25c);}},addFeatures:function(_25e){var _25f=this.trackMap,_260=this.layer,_261=_260._trackIdField;dojo.forEach(_25e,function(_262){var _263=_262.attributes,tkid=_263[_261];var ary=(_25f[tkid]=(_25f[tkid]||[]));ary.push(_262);});var _264=_260._startTimeField,_265=_260.objectIdField;var _266=function(a,b){var _267=a.attributes[_264],_268=b.attributes[_264];if(_267===_268){return (a.attributes[_265]<b.attributes[_265])?-1:1;}else{return (_267<_268)?-1:1;}};for(var tkid in _25f){_25f[tkid].sort(_266);}},drawTracks:function(){var _269=this.container;if(!_269){return;}var _26a=this.trackMap,sr=this.map.spatialReference;var _26b=function(_26c){var _26d=_26c.geometry;return [_26d.x,_26d.y];};for(var tkid in _26a){var path=dojo.map(_26a[tkid],_26b);_269.add(new esri.Graphic(new esri.geometry.Polyline({paths:[path],spatialReference:sr})));}},moveLatestToFront:function(){dojo.forEach(this.getLatestObservations(),function(_26e){var _26f=_26e._shape;_26f&&_26f._moveToFront();this._repaint(_26e,null,true);},this.layer);},getLatestObservations:function(){var _270=[];if(!this.layer.renderer.latestObservationRenderer){return _270;}var _271=this.trackMap;for(var tkid in _271){var ary=_271[tkid];_270.push(ary[ary.length-1]);}return _270;},clearTracks:function(){var _272=this.getLatestObservations();this.trackMap={};var _273=this.container;if(_273){_273.clear();}dojo.forEach(_272,function(_274){this._repaint(_274,null,true);},this.layer);},isLatestObservation:function(_275){var _276=this.layer._trackIdField;var _277=this.trackMap[_275.attributes[_276]];if(_277){return (_277[_277.length-1]===_275);}return false;},destroy:function(){var _278=this.container;if(_278){_278.clear();_278._unsetMap(this.map,this.layer._div);this.container=null;}this.map=null;this.layer=null;this.trackMap=null;}});}if(!dojo._hasResource["esri.layers.MapImageLayer"]){dojo._hasResource["esri.layers.MapImageLayer"]=true;dojo.provide("esri.layers.MapImageLayer");dojo.declare("esri.layers.MapImageLayer",[esri.layers.Layer],{"-chains-":{constructor:"manual"},constructor:function(_279){this.inherited(arguments,[null,_279]);this._mapImages=[];var _27a=dojo.hitch;this._panStart=_27a(this,this._panStart);this._pan=_27a(this,this._pan);this._extentChange=_27a(this,this._extentChange);this._zoom=_27a(this,this._zoom);this.loaded=true;this.onLoad(this);},opacity:1,setOpacity:function(_27b){if(this.opacity!=_27b){this.onOpacityChange(this.opacity=_27b);}},onOpacityChange:function(_27c){if(this._div){dojo.style(this._div,"opacity",_27c);}},_transform:esri._getDOMAccessor("transform"),addImage:function(_27d){var _27e=this._mapImages.push(_27d);_27e=_27e-1;_27d._idx=_27e;_27d._layer=this;if(this._div){this._createImage(_27d,_27e);}},removeImage:function(_27f){if(_27f){var idx=_27f._idx,_280=this._mapImages;if(_280[idx]===_27f){delete _280[idx];var node=_27f._node;if(node){this._clearEvents(node);node.e_idx=node.e_bl=node.e_tr=node.e_l=node.e_t=node.e_w=node.e_h=null;var div=this._div;if(div){div.removeChild(node);dojo.destroy(node);}}_27f._node=_27f._idx=_27f._layer=null;}}},removeAllImages:function(){var _281=this._mapImages,i,len=_281.length;for(i=0;i<len;i++){var _282=_281[i];if(_282){this.removeImage(_282);}}this._mapImages=[];},getImages:function(){var _283=this._mapImages,_284=[],i,len=_283.length;for(i=0;i<len;i++){if(_283[i]){_284.push(_283[i]);}}return _284;},_createImage:function(_285,idx){var node=dojo.create("img");dojo.style(node,{position:"absolute",left:"0px",top:"0px"});if(_285.rotation){var _286="rotate("+(360-_285.rotation)+"deg)";if(dojo.isIE<9){}else{dojo.style(node,this._transform,_286);dojo.style(node,"transform",_286);}}_285._node=node;node.e_idx=idx;node.e_layer=this;node.e_load=dojo.connect(node,"onload",esri.layers.MapImageLayer.prototype._imageLoaded);node.e_error=dojo.connect(node,"onerror",esri.layers.MapImageLayer.prototype._imageError);node.e_abort=dojo.connect(node,"onabort",esri.layers.MapImageLayer.prototype._imageError);node.src=_285.href;},_imageLoaded:function(evt){var node=evt.target||evt.currentTarget,self=node.e_layer,_287=self._mapImages[node.e_idx];self._clearEvents(node);if(!_287||_287._node!==node){return;}if(self._map){self._attach(_287);}},_imageError:function(evt){var node=evt.target||evt.currentTarget,self=node.e_layer,_288=self._mapImages[node.e_idx];self._clearEvents(node);if(_288){_288._node=null;}},_clearEvents:function(node){var _289=dojo.disconnect;_289(node.e_load);_289(node.e_error);_289(node.e_abort);node.e_load=node.e_error=node.e_abort=node.e_layer=null;},_attach:function(_28a){var _28b=_28a.extent,_28c=_28b.spatialReference,_28d=this._sr,_28e=_28c.wkid||4326,div=this._div,node=_28a._node,_28f=new esri.geometry.Point({x:_28b.xmin,y:_28b.ymin}),_290=new esri.geometry.Point({x:_28b.xmax,y:_28b.ymax});if(_28c&&(_28e!==_28d.wkid)){if(_28e===4326&&_28d._isWebMercator()){node.e_bl=esri.geometry.geographicToWebMercator(_28f);node.e_tr=esri.geometry.geographicToWebMercator(_290);}else{if(_28c._isWebMercator()&&_28d.wkid===4326){node.e_bl=esri.geometry.webMercatorToGeographic(_28f);node.e_tr=esri.geometry.webMercatorToGeographic(_290);}}}else{node.e_bl=_28f;node.e_tr=_290;}if(_28a.visible){this._setPos(node,dojo.style(div,"left"),dojo.style(div,"top"));div.appendChild(node);}},_setPos:function(node,_291,_292){var _293=node.e_bl,_294=node.e_tr,map=this._map;_293=map.toScreen(_293);_294=map.toScreen(_294);var left=_293.x-_291,top=_294.y-_292,_295=Math.abs(_294.x-_293.x),_296=Math.abs(_293.y-_294.y);dojo.style(node,{left:left+"px",top:top+"px",width:_295+"px",height:_296+"px"});node.e_l=left;node.e_t=top;node.e_w=_295;node.e_h=_296;},_setMap:function(map,_297){this._map=map;this._sr=map.spatialReference;var div=this._div=dojo.create("div",null,_297);dojo.style(div,"position","absolute");dojo.style(div,"opacity",this.opacity);var _298=this._mapImages,i,len=_298.length;for(i=0;i<len;i++){var _299=_298[i],node=_299._node;if(!node){this._createImage(_299,_299._idx);}}this.onVisibilityChange(this.visible);return div;},_unsetMap:function(map,_29a){this._disconnect();var div=this._div;if(div){var _29b=this._mapImages,i,len=_29b.length;for(i=0;i<len;i++){var _29c=_29b[i];if(_29c){var node=_29c._node;if(node){this._clearEvents(node);node.e_idx=node.e_bl=node.e_tr=node.e_l=node.e_t=node.e_w=node.e_h=null;}_29c._node=null;}}_29a.removeChild(div);dojo.destroy(div);}this._map=this._div=this._sr=null;},onVisibilityChange:function(_29d){var div=this._div;if(div){if(_29d){this._redraw();this._connect(this._map);esri.show(div);}else{this._disconnect();esri.hide(div);}}},_connect:function(map){if(!this._connections){var _29e=dojo.connect;this._connections=[_29e(map,"onPanStart",this._panStart),_29e(map,"onPan",this._pan),_29e(map,"onExtentChange",this._extentChange),_29e(map,"onZoom",this._zoom)];}},_disconnect:function(){if(this._connections){dojo.forEach(this._connections,dojo.disconnect);this._connections=null;}},_panStart:function(){this._panL=dojo.style(this._div,"left");this._panT=dojo.style(this._div,"top");},_pan:function(_29f,_2a0){dojo.style(this._div,{left:this._panL+_2a0.x+"px",top:this._panT+_2a0.y+"px"});},_extentChange:function(_2a1,_2a2,_2a3){if(_2a3){this._redraw();}else{if(_2a2){dojo.style(this._div,{left:this._panL+_2a2.x+"px",top:this._panT+_2a2.y+"px"});}}},_redraw:function(){var div=this._div,_2a4=dojo.style(div,"left"),_2a5=dojo.style(div,"top"),i,len=div.childNodes.length,node;for(i=0;i<len;i++){node=div.childNodes[i];this._setPos(node,_2a4,_2a5);}},_zoom:function(_2a6,_2a7,_2a8){var div=this._div,_2a9=dojo.style(div,"left"),_2aa=dojo.style(div,"top"),i,len=div.childNodes.length,node;for(i=0;i<len;i++){node=div.childNodes[i];var _2ab=node.e_w*_2a7,_2ac=node.e_h*_2a7,_2ad=(_2a8.x-_2a9-node.e_l)*(_2ab-node.e_w)/node.e_w,_2ae=(_2a8.y-_2aa-node.e_t)*(_2ac-node.e_h)/node.e_h;_2ad=isNaN(_2ad)?0:_2ad;_2ae=isNaN(_2ae)?0:_2ae;dojo.style(node,{left:(node.e_l-_2ad)+"px",top:(node.e_t-_2ae)+"px",width:_2ab+"px",height:_2ac+"px"});}}});dojo.extend(esri.layers.MapImage,{visible:true,getLayer:function(){return this._layer;},getNode:function(){return this._node;},show:function(){if(!this.visible){this.visible=true;var node=this._node,_2af=this._layer;if(node){if(_2af&&_2af._div){_2af._setPos(node,dojo.style(_2af._div,"left"),dojo.style(_2af._div,"top"));_2af._div.appendChild(node);}esri.show(node);}}},hide:function(){if(this.visible){this.visible=false;var node=this._node,_2b0=this._layer;if(node){esri.hide(node);_2b0&&_2b0._div&&_2b0._div.removeChild(node);}}}});}if(!dojo._hasResource["esri.PopupBase"]){dojo._hasResource["esri.PopupBase"]=true;dojo.provide("esri.PopupBase");dojo.declare("esri.PopupBase",null,{onSetFeatures:function(){},onClearFeatures:function(){},onSelectionChange:function(){},onDfdComplete:function(){},initialize:function(){this.count=0;this.selectedIndex=-1;},cleanup:function(){this.features=this.deferreds=null;},setFeatures:function(arg){if(!arg||!arg.length){return;}this.clearFeatures();var _2b1,_2b2;if(arg[0] instanceof dojo.Deferred){_2b2=arg;}else{_2b1=arg;}if(_2b1){this._updateFeatures(null,_2b1);}else{this.deferreds=_2b2;_2b2=_2b2.slice(0);dojo.forEach(_2b2,function(dfd){dfd.addBoth(dojo.hitch(this,this._updateFeatures,dfd));},this);}},clearFeatures:function(){this.features=this.deferreds=null;this.count=0;var _2b3=this.selectedIndex;this.selectedIndex=-1;if(_2b3>-1){this.onSelectionChange();}this.onClearFeatures();},getSelectedFeature:function(){var _2b4=this.features;if(_2b4){return _2b4[this.selectedIndex];}},select:function(_2b5){if(_2b5<0||_2b5>=this.count){return;}this.selectedIndex=_2b5;this.onSelectionChange();},enableHighlight:function(map){this._highlighted=map.graphics.add(new esri.Graphic(new esri.geometry.Point(0,0,map.spatialReference)));this._highlighted.hide();var ESYM=esri.symbol;if(!this.markerSymbol){var _2b6=(this.markerSymbol=new ESYM.SimpleMarkerSymbol());_2b6.setStyle(ESYM.SimpleMarkerSymbol.STYLE_TARGET);_2b6._setDim(16,16,7);_2b6.setOutline(new ESYM.CartographicLineSymbol(ESYM.SimpleLineSymbol.STYLE_SOLID,new dojo.Color([0,255,255]),2,ESYM.CartographicLineSymbol.CAP_ROUND,ESYM.CartographicLineSymbol.JOIN_ROUND));_2b6.setColor(new dojo.Color([0,0,0,0]));}if(!this.lineSymbol){this.lineSymbol=new ESYM.SimpleLineSymbol(ESYM.SimpleLineSymbol.STYLE_SOLID,new dojo.Color([0,255,255]),2);}if(!this.fillSymbol){this.fillSymbol=new ESYM.SimpleFillSymbol(ESYM.SimpleFillSymbol.STYLE_NULL,new ESYM.SimpleLineSymbol(ESYM.SimpleLineSymbol.STYLE_SOLID,new dojo.Color([0,255,255]),2),new dojo.Color([0,0,0,0]));}},disableHighlight:function(map){var _2b7=this._highlighted;if(_2b7){_2b7.hide();map.graphics.remove(_2b7);delete this._highlighted;}this.markerSymbol=this.lineSymbol=this.fillSymbol=null;},showHighlight:function(){if(this._highlighted&&this.features&&this.features[this.selectedIndex]){this._highlighted.show();}},hideHighlight:function(){if(this._highlighted){this._highlighted.hide();}},updateHighlight:function(map,_2b8){var _2b9=_2b8.geometry,_2ba=this._highlighted;if(!_2b9||!_2ba){return;}_2ba.hide();if(!_2ba.getLayer()&&map){map.graphics.add(_2ba);}_2ba.setGeometry(esri.geometry.fromJson(_2b9.toJson()));var _2bb;switch(_2b9.type){case "point":case "multipoint":_2bb=this.markerSymbol;_2bb.setOffset(0,0);_2bb.setAngle(0);var lyr=_2b8.getLayer();if(lyr){var _2bc=lyr._getSymbol(_2b8),_2bd,_2be,xoff=0,yoff=0,_2bf=0;if(_2bc){switch(_2bc.type){case "simplemarkersymbol":_2bd=_2be=(_2bc.size||0);break;case "picturemarkersymbol":_2bd=(_2bc.width||0);_2be=(_2bc.height||0);break;}xoff=_2bc.xoffset||0;yoff=_2bc.yoffset||0;_2bf=_2bc.angle||0;}if(_2bd&&_2be){_2bb._setDim(_2bd+1,_2be+1,7);}_2bb.setOffset(xoff,yoff);_2bb.setAngle(_2bf);}break;case "polyline":_2bb=this.lineSymbol;break;case "polygon":_2bb=this.fillSymbol;break;}_2ba.setSymbol(_2bb);},_unbind:function(dfd){var _2c0=dojo.indexOf(this.deferreds,dfd);if(_2c0===-1){return;}this.deferreds.splice(_2c0,1);if(!this.deferreds.length){this.deferreds=null;return 2;}return 1;},_updateFeatures:function(dfd,_2c1){if(dfd){if(this.deferreds){var res=this._unbind(dfd);if(!res){return;}if(_2c1&&_2c1 instanceof Error){this.onDfdComplete(_2c1);if(res===2){this.onSetFeatures();}return;}if(_2c1&&_2c1.length){if(!this.features){this.features=_2c1;this.count=_2c1.length;this.selectedIndex=0;this.onDfdComplete();if(res===2){this.onSetFeatures();}this.select(0);}else{var _2c2=dojo.filter(_2c1,function(_2c3){return dojo.indexOf(this.features,_2c3)===-1;},this);this.features=this.features.concat(_2c2);this.count=this.features.length;this.onDfdComplete();if(res===2){this.onSetFeatures();}}}else{this.onDfdComplete();if(res===2){this.onSetFeatures();}}}}else{this.features=_2c1;this.count=_2c1.length;this.selectedIndex=0;this.onSetFeatures();this.select(0);}}});dojo.declare("esri.PopupInfoTemplate",[esri.InfoTemplate],{"-chains-":{constructor:"manual"},initialize:function(json){if(!json){return;}this.info=json;this.title=this.getTitle;this.content=this.getContent;var _2c4=(this._fieldLabels={}),_2c5=(this._fieldsMap={});if(json.fieldInfos){dojo.forEach(json.fieldInfos,function(_2c6){_2c4[_2c6.fieldName]=_2c6.label;_2c5[_2c6.fieldName]=_2c6;});}},toJson:function(){return dojo.fromJson(dojo.toJson(this.info));},getTitle:function(){},getContent:function(){},getComponents:function(_2c7){var _2c8=this.info,_2c9=_2c7.getLayer(),_2ca=dojo.clone(_2c7.attributes)||{},_2cb=dojo.clone(_2ca),_2cc=_2c8.fieldInfos,_2cd="",_2ce="",_2cf,_2d0,_2d1,_2d2=_2c9&&_2c9._getDateOpts&&_2c9._getDateOpts().properties,_2d3={dateFormat:{properties:_2d2,formatter:"DateFormat"+this._dateFormats["shortDateShortTime"]}};if(_2cc){dojo.forEach(_2cc,function(_2d4){var _2d5=_2d4.fieldName,val=_2cb[_2d5];_2cb[_2d5]=this._formatValue(val,_2d5,_2d3);if(_2d2&&_2d4.format&&_2d4.format.dateFormat){var pos=dojo.indexOf(_2d2,_2d5);if(pos>-1){_2d2.splice(pos,1);}}},this);}if(_2c9){var _2d6=_2c9.types,_2d7=_2c9.typeIdField,_2d8=_2d7&&_2ca[_2d7];for(_2d0 in _2ca){_2d1=_2ca[_2d0];if(esri._isDefined(_2d1)){var _2d9=this._getDomainName(_2c9,_2d6,_2d8,_2d0,_2d1);if(esri._isDefined(_2d9)){_2cb[_2d0]=_2d9;}else{if(_2d0===_2d7){var _2da=this._getTypeName(_2c9,_2d1);if(esri._isDefined(_2da)){_2cb[_2d0]=_2da;}}}}}}if(_2c8.title){_2cd=dojo.trim(esri.substitute(_2cb,this._fixTokens(_2c8.title),_2d3)||"");}if(_2c8.description){_2ce=dojo.trim(esri.substitute(_2cb,this._fixTokens(_2c8.description),_2d3)||"");}if(_2cc){_2cf=[];dojo.forEach(_2cc,function(_2db){_2d0=_2db.fieldName;if(_2d0&&_2db.visible){_2cf.push([_2db.label||_2d0,esri.substitute(_2cb,"${"+_2d0+"}",_2d3)||""]);}});}var _2dc,_2dd;if(_2c8.mediaInfos){_2dc=[];dojo.forEach(_2c8.mediaInfos,function(_2de){_2dd=0;_2d1=_2de.value;switch(_2de.type){case "image":var url=_2d1.sourceURL;url=url&&dojo.trim(esri.substitute(_2ca,this._fixTokens(url)));_2dd=!!url;break;case "piechart":case "linechart":case "columnchart":case "barchart":_2dd=dojo.some(_2d1.fields,function(_2df){return esri._isDefined(_2ca[_2df]);});break;default:return;}if(_2dd){_2de=dojo.clone(_2de);_2d1=_2de.value;_2de.title=_2de.title?dojo.trim(esri.substitute(_2cb,this._fixTokens(_2de.title),_2d3)||""):"";_2de.caption=_2de.caption?dojo.trim(esri.substitute(_2cb,this._fixTokens(_2de.caption),_2d3)||""):"";if(_2de.type==="image"){_2d1.sourceURL=esri.substitute(_2ca,this._fixTokens(_2d1.sourceURL));if(_2d1.linkURL){_2d1.linkURL=dojo.trim(esri.substitute(_2ca,this._fixTokens(_2d1.linkURL))||"");}}else{var _2e0=_2ca[_2d1.normalizeField]||0;_2d1.fields=dojo.map(_2d1.fields,function(_2e1){var data=_2ca[_2e1];data=(data===undefined)?null:data;if(data&&_2e0){data=data/_2e0;}return {y:data,tooltip:(this._fieldLabels[_2e1]||_2e1)+":<br/>"+this._formatValue(data,_2e1,_2d3)};},this);}_2dc.push(_2de);}},this);}return {title:_2cd,description:_2ce,fields:(_2cf&&_2cf.length)?_2cf:null,mediaInfos:(_2dc&&_2dc.length)?_2dc:null,formatted:_2cb};},getAttachments:function(_2e2){var _2e3=_2e2.getLayer(),_2e4=_2e2.attributes;if(this.info.showAttachments&&_2e3&&_2e3.hasAttachments&&_2e3.objectIdField){var oid=_2e4&&_2e4[_2e3.objectIdField];if(oid){return _2e3.queryAttachmentInfos(oid);}}},_dateFormats:{"shortDate":"(datePattern: 'M/d/y', selector: 'date')","longMonthDayYear":"(datePattern: 'MMMM d, y', selector: 'date')","dayShortMonthYear":"(datePattern: 'd MMM y', selector: 'date')","longDate":"(datePattern: 'EEEE, MMMM d, y', selector: 'date')","shortDateShortTime":"(datePattern: 'M/d/y', timePattern: 'h:mm a', selector: 'date and time')","shortDateShortTime24":"(datePattern: 'M/d/y', timePattern: 'H:mm', selector: 'date and time')","longMonthYear":"(datePattern: 'MMMM y', selector: 'date')","shortMonthYear":"(datePattern: 'MMM y', selector: 'date')","year":"(datePattern: 'y', selector: 'date')"},_fixTokens:function(_2e5){return _2e5.replace(/(\{[^\{\r\n]+\})/g,"$$$1");},_formatValue:function(val,_2e6,_2e7){var _2e8=this._fieldsMap[_2e6],fmt=_2e8&&_2e8.format;if(!esri._isDefined(val)||!_2e8||!esri._isDefined(fmt)){return val;}var _2e9="",_2ea=[],_2eb=fmt.hasOwnProperty("places")||fmt.hasOwnProperty("digitSeparator"),_2ec=fmt.hasOwnProperty("digitSeparator")?fmt.digitSeparator:true;if(_2eb){_2e9="NumberFormat";_2ea.push("places: "+(esri._isDefined(fmt.places)?Number(fmt.places):"Infinity"));if(_2ea.length){_2e9+=("("+_2ea.join(",")+")");}}else{if(fmt.dateFormat){_2e9="DateFormat"+(this._dateFormats[fmt.dateFormat]||this._dateFormats["shortDateShortTime"]);}else{return val;}}var _2ed=esri.substitute({"myKey":val},"${myKey:"+_2e9+"}",_2e7)||"";if(_2eb&&!_2ec){var _2ee=dojo.i18n.getLocalization("dojo.cldr","number");if(_2ee.group){_2ed=_2ed.replace(new RegExp("\\"+_2ee.group,"g"),"");}}return _2ed;},_getDomainName:function(_2ef,_2f0,_2f1,_2f2,_2f3){var _2f4,stop;if(_2f0&&esri._isDefined(_2f1)){dojo.some(_2f0,function(_2f5){if(_2f5.id==_2f1){_2f4=_2f5.domains&&_2f5.domains[_2f2];if(_2f4&&_2f4.type==="inherited"){_2f4=this._getLayerDomain(_2ef,_2f2);stop=true;}return true;}return false;},this);}if(!stop&&!_2f4){_2f4=this._getLayerDomain(_2ef,_2f2);}if(_2f4&&_2f4.codedValues){var _2f6;dojo.some(_2f4.codedValues,function(_2f7){if(_2f7.code==_2f3){_2f6=_2f7.name;return true;}return false;});return _2f6;}},_getLayerDomain:function(_2f8,_2f9){var _2fa=_2f8.fields;if(_2fa){var _2fb;dojo.some(_2fa,function(_2fc){if(_2fc.name===_2f9){_2fb=_2fc.domain;return true;}return false;});return _2fb;}},_getTypeName:function(_2fd,id){var _2fe=_2fd.types;if(_2fe){var _2ff;dojo.some(_2fe,function(_300){if(_300.id==id){_2ff=_300.name;return true;}return false;});return _2ff;}}});}if(!dojo._hasResource["dojo.Stateful"]){dojo._hasResource["dojo.Stateful"]=true;dojo.provide("dojo.Stateful");dojo.declare("dojo.Stateful",null,{postscript:function(_301){if(_301){dojo.mixin(this,_301);}},get:function(name){return this[name];},set:function(name,_302){if(typeof name==="object"){for(var x in name){this.set(x,name[x]);}return this;}var _303=this[name];this[name]=_302;if(this._watchCallbacks){this._watchCallbacks(name,_303,_302);}return this;},watch:function(name,_304){var _305=this._watchCallbacks;if(!_305){var self=this;_305=this._watchCallbacks=function(name,_306,_307,_308){var _309=function(_30a){if(_30a){_30a=_30a.slice();for(var i=0,l=_30a.length;i<l;i++){try{_30a[i].call(self,name,_306,_307);}catch(e){console.error(e);}}}};_309(_305["_"+name]);if(!_308){_309(_305["*"]);}};}if(!_304&&typeof name==="function"){_304=name;name="*";}else{name="_"+name;}var _30b=_305[name];if(typeof _30b!=="object"){_30b=_305[name]=[];}_30b.push(_304);return {unwatch:function(){_30b.splice(dojo.indexOf(_30b,_304),1);}};}});}if(!dojo._hasResource["dijit._WidgetBase"]){dojo._hasResource["dijit._WidgetBase"]=true;dojo.provide("dijit._WidgetBase");(function(){dojo.declare("dijit._WidgetBase",dojo.Stateful,{id:"",lang:"",dir:"","class":"",style:"",title:"",tooltip:"",baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,attributeMap:{id:"",dir:"",lang:"","class":"",style:"",title:""},_blankGif:(dojo.config.blankGif||dojo.moduleUrl("dojo","resources/blank.gif")).toString(),postscript:function(_30c,_30d){this.create(_30c,_30d);},create:function(_30e,_30f){this.srcNodeRef=dojo.byId(_30f);this._connects=[];this._subscribes=[];if(this.srcNodeRef&&(typeof this.srcNodeRef.id=="string")){this.id=this.srcNodeRef.id;}if(_30e){this.params=_30e;dojo._mixin(this,_30e);}this.postMixInProperties();if(!this.id){this.id=dijit.getUniqueId(this.declaredClass.replace(/\./g,"_"));}dijit.registry.add(this);this.buildRendering();if(this.domNode){this._applyAttributes();var _310=this.srcNodeRef;if(_310&&_310.parentNode&&this.domNode!==_310){_310.parentNode.replaceChild(this.domNode,_310);}}if(this.domNode){this.domNode.setAttribute("widgetId",this.id);}this.postCreate();if(this.srcNodeRef&&!this.srcNodeRef.parentNode){delete this.srcNodeRef;}this._created=true;},_applyAttributes:function(){var _311=function(attr,_312){if((_312.params&&attr in _312.params)||_312[attr]){_312.set(attr,_312[attr]);}};for(var attr in this.attributeMap){_311(attr,this);}dojo.forEach(this._getSetterAttributes(),function(a){if(!(a in this.attributeMap)){_311(a,this);}},this);},_getSetterAttributes:function(){var ctor=this.constructor;if(!ctor._setterAttrs){var r=(ctor._setterAttrs=[]),_313,_314=ctor.prototype;for(var _315 in _314){if(dojo.isFunction(_314[_315])&&(_313=_315.match(/^_set([a-zA-Z]*)Attr$/))&&_313[1]){r.push(_313[1].charAt(0).toLowerCase()+_313[1].substr(1));}}}return ctor._setterAttrs;},postMixInProperties:function(){},buildRendering:function(){if(!this.domNode){this.domNode=this.srcNodeRef||dojo.create("div");}if(this.baseClass){var _316=this.baseClass.split(" ");if(!this.isLeftToRight()){_316=_316.concat(dojo.map(_316,function(name){return name+"Rtl";}));}dojo.addClass(this.domNode,_316);}},postCreate:function(){},startup:function(){this._started=true;},destroyRecursive:function(_317){this._beingDestroyed=true;this.destroyDescendants(_317);this.destroy(_317);},destroy:function(_318){this._beingDestroyed=true;this.uninitialize();var d=dojo,dfe=d.forEach,dun=d.unsubscribe;dfe(this._connects,function(_319){dfe(_319,d.disconnect);});dfe(this._subscribes,function(_31a){dun(_31a);});dfe(this._supportingWidgets||[],function(w){if(w.destroyRecursive){w.destroyRecursive();}else{if(w.destroy){w.destroy();}}});this.destroyRendering(_318);dijit.registry.remove(this.id);this._destroyed=true;},destroyRendering:function(_31b){if(this.bgIframe){this.bgIframe.destroy(_31b);delete this.bgIframe;}if(this.domNode){if(_31b){dojo.removeAttr(this.domNode,"widgetId");}else{dojo.destroy(this.domNode);}delete this.domNode;}if(this.srcNodeRef){if(!_31b){dojo.destroy(this.srcNodeRef);}delete this.srcNodeRef;}},destroyDescendants:function(_31c){dojo.forEach(this.getChildren(),function(_31d){if(_31d.destroyRecursive){_31d.destroyRecursive(_31c);}});},uninitialize:function(){return false;},_setClassAttr:function(_31e){var _31f=this[this.attributeMap["class"]||"domNode"];dojo.replaceClass(_31f,_31e,this["class"]);this._set("class",_31e);},_setStyleAttr:function(_320){var _321=this[this.attributeMap.style||"domNode"];if(dojo.isObject(_320)){dojo.style(_321,_320);}else{if(_321.style.cssText){_321.style.cssText+="; "+_320;}else{_321.style.cssText=_320;}}this._set("style",_320);},_attrToDom:function(attr,_322){var _323=this.attributeMap[attr];dojo.forEach(dojo.isArray(_323)?_323:[_323],function(_324){var _325=this[_324.node||_324||"domNode"];var type=_324.type||"attribute";switch(type){case "attribute":if(dojo.isFunction(_322)){_322=dojo.hitch(this,_322);}var _326=_324.attribute?_324.attribute:(/^on[A-Z][a-zA-Z]*$/.test(attr)?attr.toLowerCase():attr);dojo.attr(_325,_326,_322);break;case "innerText":_325.innerHTML="";_325.appendChild(dojo.doc.createTextNode(_322));break;case "innerHTML":_325.innerHTML=_322;break;case "class":dojo.replaceClass(_325,_322,this[attr]);break;}},this);},get:function(name){var _327=this._getAttrNames(name);return this[_327.g]?this[_327.g]():this[name];},set:function(name,_328){if(typeof name==="object"){for(var x in name){this.set(x,name[x]);}return this;}var _329=this._getAttrNames(name);if(this[_329.s]){var _32a=this[_329.s].apply(this,Array.prototype.slice.call(arguments,1));}else{if(name in this.attributeMap){this._attrToDom(name,_328);}this._set(name,_328);}return _32a||this;},_attrPairNames:{},_getAttrNames:function(name){var apn=this._attrPairNames;if(apn[name]){return apn[name];}var uc=name.charAt(0).toUpperCase()+name.substr(1);return (apn[name]={n:name+"Node",s:"_set"+uc+"Attr",g:"_get"+uc+"Attr"});},_set:function(name,_32b){var _32c=this[name];this[name]=_32b;if(this._watchCallbacks&&this._created&&_32b!==_32c){this._watchCallbacks(name,_32c,_32b);}},toString:function(){return "[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]";},getDescendants:function(){return this.containerNode?dojo.query("[widgetId]",this.containerNode).map(dijit.byNode):[];},getChildren:function(){return this.containerNode?dijit.findWidgets(this.containerNode):[];},connect:function(obj,_32d,_32e){var _32f=[dojo._connect(obj,_32d,this,_32e)];this._connects.push(_32f);return _32f;},disconnect:function(_330){for(var i=0;i<this._connects.length;i++){if(this._connects[i]==_330){dojo.forEach(_330,dojo.disconnect);this._connects.splice(i,1);return;}}},subscribe:function(_331,_332){var _333=dojo.subscribe(_331,this,_332);this._subscribes.push(_333);return _333;},unsubscribe:function(_334){for(var i=0;i<this._subscribes.length;i++){if(this._subscribes[i]==_334){dojo.unsubscribe(_334);this._subscribes.splice(i,1);return;}}},isLeftToRight:function(){return this.dir?(this.dir=="ltr"):dojo._isBodyLtr();},placeAt:function(_335,_336){if(_335.declaredClass&&_335.addChild){_335.addChild(this,_336);}else{dojo.place(this.domNode,_335,_336);}return this;}});})();}if(!dojo._hasResource["dojo.window"]){dojo._hasResource["dojo.window"]=true;dojo.provide("dojo.window");dojo.getObject("window",true,dojo);dojo.window.getBox=function(){var _337=(dojo.doc.compatMode=="BackCompat")?dojo.body():dojo.doc.documentElement;var _338=dojo._docScroll();return {w:_337.clientWidth,h:_337.clientHeight,l:_338.x,t:_338.y};};dojo.window.get=function(doc){if(dojo.isIE&&window!==document.parentWindow){doc.parentWindow.execScript("document._parentWindow = window;","Javascript");var win=doc._parentWindow;doc._parentWindow=null;return win;}return doc.parentWindow||doc.defaultView;};dojo.window.scrollIntoView=function(node,pos){try{node=dojo.byId(node);var doc=node.ownerDocument||dojo.doc,body=doc.body||dojo.body(),html=doc.documentElement||body.parentNode,isIE=dojo.isIE,isWK=dojo.isWebKit;if((!(dojo.isMoz||isIE||isWK||dojo.isOpera)||node==body||node==html)&&(typeof node.scrollIntoView!="undefined")){node.scrollIntoView(false);return;}var _339=doc.compatMode=="BackCompat",_33a=(isIE>=9&&node.ownerDocument.parentWindow.frameElement)?((html.clientHeight>0&&html.clientWidth>0&&(body.clientHeight==0||body.clientWidth==0||body.clientHeight>html.clientHeight||body.clientWidth>html.clientWidth))?html:body):(_339?body:html),_33b=isWK?body:_33a,_33c=_33a.clientWidth,_33d=_33a.clientHeight,rtl=!dojo._isBodyLtr(),_33e=pos||dojo.position(node),el=node.parentNode,_33f=function(el){return ((isIE<=6||(isIE&&_339))?false:(dojo.style(el,"position").toLowerCase()=="fixed"));};if(_33f(node)){return;}while(el){if(el==body){el=_33b;}var _340=dojo.position(el),_341=_33f(el);if(el==_33b){_340.w=_33c;_340.h=_33d;if(_33b==html&&isIE&&rtl){_340.x+=_33b.offsetWidth-_340.w;}if(_340.x<0||!isIE){_340.x=0;}if(_340.y<0||!isIE){_340.y=0;}}else{var pb=dojo._getPadBorderExtents(el);_340.w-=pb.w;_340.h-=pb.h;_340.x+=pb.l;_340.y+=pb.t;var _342=el.clientWidth,_343=_340.w-_342;if(_342>0&&_343>0){_340.w=_342;_340.x+=(rtl&&(isIE||el.clientLeft>pb.l))?_343:0;}_342=el.clientHeight;_343=_340.h-_342;if(_342>0&&_343>0){_340.h=_342;}}if(_341){if(_340.y<0){_340.h+=_340.y;_340.y=0;}if(_340.x<0){_340.w+=_340.x;_340.x=0;}if(_340.y+_340.h>_33d){_340.h=_33d-_340.y;}if(_340.x+_340.w>_33c){_340.w=_33c-_340.x;}}var l=_33e.x-_340.x,t=_33e.y-Math.max(_340.y,0),r=l+_33e.w-_340.w,bot=t+_33e.h-_340.h;if(r*l>0){var s=Math[l<0?"max":"min"](l,r);if(rtl&&((isIE==8&&!_339)||isIE>=9)){s=-s;}_33e.x+=el.scrollLeft;el.scrollLeft+=s;_33e.x-=el.scrollLeft;}if(bot*t>0){_33e.y+=el.scrollTop;el.scrollTop+=Math[t<0?"max":"min"](t,bot);_33e.y-=el.scrollTop;}el=(el!=_33b)&&!_341&&el.parentNode;}}catch(error){console.error("scrollIntoView: "+error);node.scrollIntoView(false);}};}if(!dojo._hasResource["dijit._base.focus"]){dojo._hasResource["dijit._base.focus"]=true;dojo.provide("dijit._base.focus");dojo.mixin(dijit,{_curFocus:null,_prevFocus:null,isCollapsed:function(){return dijit.getBookmark().isCollapsed;},getBookmark:function(){var bm,rg,tg,sel=dojo.doc.selection,cf=dijit._curFocus;if(dojo.global.getSelection){sel=dojo.global.getSelection();if(sel){if(sel.isCollapsed){tg=cf?cf.tagName:"";if(tg){tg=tg.toLowerCase();if(tg=="textarea"||(tg=="input"&&(!cf.type||cf.type.toLowerCase()=="text"))){sel={start:cf.selectionStart,end:cf.selectionEnd,node:cf,pRange:true};return {isCollapsed:(sel.end<=sel.start),mark:sel};}}bm={isCollapsed:true};if(sel.rangeCount){bm.mark=sel.getRangeAt(0).cloneRange();}}else{rg=sel.getRangeAt(0);bm={isCollapsed:false,mark:rg.cloneRange()};}}}else{if(sel){tg=cf?cf.tagName:"";tg=tg.toLowerCase();if(cf&&tg&&(tg=="button"||tg=="textarea"||tg=="input")){if(sel.type&&sel.type.toLowerCase()=="none"){return {isCollapsed:true,mark:null};}else{rg=sel.createRange();return {isCollapsed:rg.text&&rg.text.length?false:true,mark:{range:rg,pRange:true}};}}bm={};try{rg=sel.createRange();bm.isCollapsed=!(sel.type=="Text"?rg.htmlText.length:rg.length);}catch(e){bm.isCollapsed=true;return bm;}if(sel.type.toUpperCase()=="CONTROL"){if(rg.length){bm.mark=[];var i=0,len=rg.length;while(i<len){bm.mark.push(rg.item(i++));}}else{bm.isCollapsed=true;bm.mark=null;}}else{bm.mark=rg.getBookmark();}}else{console.warn("No idea how to store the current selection for this browser!");}}return bm;},moveToBookmark:function(_344){var _345=dojo.doc,mark=_344.mark;if(mark){if(dojo.global.getSelection){var sel=dojo.global.getSelection();if(sel&&sel.removeAllRanges){if(mark.pRange){var r=mark;var n=r.node;n.selectionStart=r.start;n.selectionEnd=r.end;}else{sel.removeAllRanges();sel.addRange(mark);}}else{console.warn("No idea how to restore selection for this browser!");}}else{if(_345.selection&&mark){var rg;if(mark.pRange){rg=mark.range;}else{if(dojo.isArray(mark)){rg=_345.body.createControlRange();dojo.forEach(mark,function(n){rg.addElement(n);});}else{rg=_345.body.createTextRange();rg.moveToBookmark(mark);}}rg.select();}}}},getFocus:function(menu,_346){var node=!dijit._curFocus||(menu&&dojo.isDescendant(dijit._curFocus,menu.domNode))?dijit._prevFocus:dijit._curFocus;return {node:node,bookmark:(node==dijit._curFocus)&&dojo.withGlobal(_346||dojo.global,dijit.getBookmark),openedForWindow:_346};},focus:function(_347){if(!_347){return;}var node="node" in _347?_347.node:_347,_348=_347.bookmark,_349=_347.openedForWindow,_34a=_348?_348.isCollapsed:false;if(node){var _34b=(node.tagName.toLowerCase()=="iframe")?node.contentWindow:node;if(_34b&&_34b.focus){try{_34b.focus();}catch(e){}}dijit._onFocusNode(node);}if(_348&&dojo.withGlobal(_349||dojo.global,dijit.isCollapsed)&&!_34a){if(_349){_349.focus();}try{dojo.withGlobal(_349||dojo.global,dijit.moveToBookmark,null,[_348]);}catch(e2){}}},_activeStack:[],registerIframe:function(_34c){return dijit.registerWin(_34c.contentWindow,_34c);},unregisterIframe:function(_34d){dijit.unregisterWin(_34d);},registerWin:function(_34e,_34f){var _350=function(evt){dijit._justMouseDowned=true;setTimeout(function(){dijit._justMouseDowned=false;},0);if(dojo.isIE&&evt&&evt.srcElement&&evt.srcElement.parentNode==null){return;}dijit._onTouchNode(_34f||evt.target||evt.srcElement,"mouse");};var doc=dojo.isIE?_34e.document.documentElement:_34e.document;if(doc){if(dojo.isIE){_34e.document.body.attachEvent("onmousedown",_350);var _351=function(evt){if(evt.srcElement.tagName.toLowerCase()!="#document"&&dijit.isTabNavigable(evt.srcElement)){dijit._onFocusNode(_34f||evt.srcElement);}else{dijit._onTouchNode(_34f||evt.srcElement);}};doc.attachEvent("onactivate",_351);var _352=function(evt){dijit._onBlurNode(_34f||evt.srcElement);};doc.attachEvent("ondeactivate",_352);return function(){_34e.document.detachEvent("onmousedown",_350);doc.detachEvent("onactivate",_351);doc.detachEvent("ondeactivate",_352);doc=null;};}else{doc.body.addEventListener("mousedown",_350,true);var _353=function(evt){dijit._onFocusNode(_34f||evt.target);};doc.addEventListener("focus",_353,true);var _354=function(evt){dijit._onBlurNode(_34f||evt.target);};doc.addEventListener("blur",_354,true);return function(){doc.body.removeEventListener("mousedown",_350,true);doc.removeEventListener("focus",_353,true);doc.removeEventListener("blur",_354,true);doc=null;};}}},unregisterWin:function(_355){_355&&_355();},_onBlurNode:function(node){dijit._prevFocus=dijit._curFocus;dijit._curFocus=null;if(dijit._justMouseDowned){return;}if(dijit._clearActiveWidgetsTimer){clearTimeout(dijit._clearActiveWidgetsTimer);}dijit._clearActiveWidgetsTimer=setTimeout(function(){delete dijit._clearActiveWidgetsTimer;dijit._setStack([]);dijit._prevFocus=null;},100);},_onTouchNode:function(node,by){if(dijit._clearActiveWidgetsTimer){clearTimeout(dijit._clearActiveWidgetsTimer);delete dijit._clearActiveWidgetsTimer;}var _356=[];try{while(node){var _357=dojo.attr(node,"dijitPopupParent");if(_357){node=dijit.byId(_357).domNode;}else{if(node.tagName&&node.tagName.toLowerCase()=="body"){if(node===dojo.body()){break;}node=dojo.window.get(node.ownerDocument).frameElement;}else{var id=node.getAttribute&&node.getAttribute("widgetId"),_358=id&&dijit.byId(id);if(_358&&!(by=="mouse"&&_358.get("disabled"))){_356.unshift(id);}node=node.parentNode;}}}}catch(e){}dijit._setStack(_356,by);},_onFocusNode:function(node){if(!node){return;}if(node.nodeType==9){return;}dijit._onTouchNode(node);if(node==dijit._curFocus){return;}if(dijit._curFocus){dijit._prevFocus=dijit._curFocus;}dijit._curFocus=node;dojo.publish("focusNode",[node]);},_setStack:function(_359,by){var _35a=dijit._activeStack;dijit._activeStack=_359;for(var _35b=0;_35b<Math.min(_35a.length,_359.length);_35b++){if(_35a[_35b]!=_359[_35b]){break;}}var _35c;for(var i=_35a.length-1;i>=_35b;i--){_35c=dijit.byId(_35a[i]);if(_35c){_35c._focused=false;_35c.set("focused",false);_35c._hasBeenBlurred=true;if(_35c._onBlur){_35c._onBlur(by);}dojo.publish("widgetBlur",[_35c,by]);}}for(i=_35b;i<_359.length;i++){_35c=dijit.byId(_359[i]);if(_35c){_35c._focused=true;_35c.set("focused",true);if(_35c._onFocus){_35c._onFocus(by);}dojo.publish("widgetFocus",[_35c,by]);}}}});dojo.addOnLoad(function(){var _35d=dijit.registerWin(window);if(dojo.isIE){dojo.addOnWindowUnload(function(){dijit.unregisterWin(_35d);_35d=null;});}});}if(!dojo._hasResource["dojo.AdapterRegistry"]){dojo._hasResource["dojo.AdapterRegistry"]=true;dojo.provide("dojo.AdapterRegistry");dojo.AdapterRegistry=function(_35e){this.pairs=[];this.returnWrappers=_35e||false;};dojo.extend(dojo.AdapterRegistry,{register:function(name,_35f,wrap,_360,_361){this.pairs[((_361)?"unshift":"push")]([name,_35f,wrap,_360]);},match:function(){for(var i=0;i<this.pairs.length;i++){var pair=this.pairs[i];if(pair[1].apply(this,arguments)){if((pair[3])||(this.returnWrappers)){return pair[2];}else{return pair[2].apply(this,arguments);}}}throw new Error("No match found");},unregister:function(name){for(var i=0;i<this.pairs.length;i++){var pair=this.pairs[i];if(pair[0]==name){this.pairs.splice(i,1);return true;}}return false;}});}if(!dojo._hasResource["dijit._base.place"]){dojo._hasResource["dijit._base.place"]=true;dojo.provide("dijit._base.place");dijit.getViewport=function(){return dojo.window.getBox();};dijit.placeOnScreen=function(node,pos,_362,_363){var _364=dojo.map(_362,function(_365){var c={corner:_365,pos:{x:pos.x,y:pos.y}};if(_363){c.pos.x+=_365.charAt(1)=="L"?_363.x:-_363.x;c.pos.y+=_365.charAt(0)=="T"?_363.y:-_363.y;}return c;});return dijit._place(node,_364);};dijit._place=function(node,_366,_367,_368){var view=dojo.window.getBox();if(!node.parentNode||String(node.parentNode.tagName).toLowerCase()!="body"){dojo.body().appendChild(node);}var best=null;dojo.some(_366,function(_369){var _36a=_369.corner;var pos=_369.pos;var _36b=0;var _36c={w:_36a.charAt(1)=="L"?(view.l+view.w)-pos.x:pos.x-view.l,h:_36a.charAt(1)=="T"?(view.t+view.h)-pos.y:pos.y-view.t};if(_367){var res=_367(node,_369.aroundCorner,_36a,_36c,_368);_36b=typeof res=="undefined"?0:res;}var _36d=node.style;var _36e=_36d.display;var _36f=_36d.visibility;_36d.visibility="hidden";_36d.display="";var mb=dojo.marginBox(node);_36d.display=_36e;_36d.visibility=_36f;var _370=Math.max(view.l,_36a.charAt(1)=="L"?pos.x:(pos.x-mb.w)),_371=Math.max(view.t,_36a.charAt(0)=="T"?pos.y:(pos.y-mb.h)),endX=Math.min(view.l+view.w,_36a.charAt(1)=="L"?(_370+mb.w):pos.x),endY=Math.min(view.t+view.h,_36a.charAt(0)=="T"?(_371+mb.h):pos.y),_372=endX-_370,_373=endY-_371;_36b+=(mb.w-_372)+(mb.h-_373);if(best==null||_36b<best.overflow){best={corner:_36a,aroundCorner:_369.aroundCorner,x:_370,y:_371,w:_372,h:_373,overflow:_36b,spaceAvailable:_36c};}return !_36b;});if(best.overflow&&_367){_367(node,best.aroundCorner,best.corner,best.spaceAvailable,_368);}var l=dojo._isBodyLtr(),s=node.style;s.top=best.y+"px";s[l?"left":"right"]=(l?best.x:view.w-best.x-best.w)+"px";return best;};dijit.placeOnScreenAroundNode=function(node,_374,_375,_376){_374=dojo.byId(_374);var _377=dojo.position(_374,true);return dijit._placeOnScreenAroundRect(node,_377.x,_377.y,_377.w,_377.h,_375,_376);};dijit.placeOnScreenAroundRectangle=function(node,_378,_379,_37a){return dijit._placeOnScreenAroundRect(node,_378.x,_378.y,_378.width,_378.height,_379,_37a);};dijit._placeOnScreenAroundRect=function(node,x,y,_37b,_37c,_37d,_37e){var _37f=[];for(var _380 in _37d){_37f.push({aroundCorner:_380,corner:_37d[_380],pos:{x:x+(_380.charAt(1)=="L"?0:_37b),y:y+(_380.charAt(0)=="T"?0:_37c)}});}return dijit._place(node,_37f,_37e,{w:_37b,h:_37c});};dijit.placementRegistry=new dojo.AdapterRegistry();dijit.placementRegistry.register("node",function(n,x){return typeof x=="object"&&typeof x.offsetWidth!="undefined"&&typeof x.offsetHeight!="undefined";},dijit.placeOnScreenAroundNode);dijit.placementRegistry.register("rect",function(n,x){return typeof x=="object"&&"x" in x&&"y" in x&&"width" in x&&"height" in x;},dijit.placeOnScreenAroundRectangle);dijit.placeOnScreenAroundElement=function(node,_381,_382,_383){return dijit.placementRegistry.match.apply(dijit.placementRegistry,arguments);};dijit.getPopupAroundAlignment=function(_384,_385){var _386={};dojo.forEach(_384,function(pos){switch(pos){case "after":_386[_385?"BR":"BL"]=_385?"BL":"BR";break;case "before":_386[_385?"BL":"BR"]=_385?"BR":"BL";break;case "below-alt":_385=!_385;case "below":_386[_385?"BL":"BR"]=_385?"TL":"TR";_386[_385?"BR":"BL"]=_385?"TR":"TL";break;case "above-alt":_385=!_385;case "above":default:_386[_385?"TL":"TR"]=_385?"BL":"BR";_386[_385?"TR":"TL"]=_385?"BR":"BL";break;}});return _386;};}if(!dojo._hasResource["dijit._base.window"]){dojo._hasResource["dijit._base.window"]=true;dojo.provide("dijit._base.window");dijit.getDocumentWindow=function(doc){return dojo.window.get(doc);};}if(!dojo._hasResource["dijit._base.popup"]){dojo._hasResource["dijit._base.popup"]=true;dojo.provide("dijit._base.popup");dijit.popup={_stack:[],_beginZIndex:1000,_idGen:1,_createWrapper:function(_387){var _388=_387.declaredClass?_387._popupWrapper:(_387.parentNode&&dojo.hasClass(_387.parentNode,"dijitPopup")),node=_387.domNode||_387;if(!_388){_388=dojo.create("div",{"class":"dijitPopup",style:{display:"none"},role:"presentation"},dojo.body());_388.appendChild(node);var s=node.style;s.display="";s.visibility="";s.position="";s.top="0px";if(_387.declaredClass){_387._popupWrapper=_388;dojo.connect(_387,"destroy",function(){dojo.destroy(_388);delete _387._popupWrapper;});}}return _388;},moveOffScreen:function(_389){var _38a=this._createWrapper(_389);dojo.style(_38a,{visibility:"hidden",top:"-9999px",display:""});},hide:function(_38b){var _38c=this._createWrapper(_38b);dojo.style(_38c,"display","none");},getTopPopup:function(){var _38d=this._stack;for(var pi=_38d.length-1;pi>0&&_38d[pi].parent===_38d[pi-1].widget;pi--){}return _38d[pi];},open:function(args){var _38e=this._stack,_38f=args.popup,_390=args.orient||((args.parent?args.parent.isLeftToRight():dojo._isBodyLtr())?{"BL":"TL","BR":"TR","TL":"BL","TR":"BR"}:{"BR":"TR","BL":"TL","TR":"BR","TL":"BL"}),_391=args.around,id=(args.around&&args.around.id)?(args.around.id+"_dropdown"):("popup_"+this._idGen++);while(_38e.length&&(!args.parent||!dojo.isDescendant(args.parent.domNode,_38e[_38e.length-1].widget.domNode))){dijit.popup.close(_38e[_38e.length-1].widget);}var _392=this._createWrapper(_38f);dojo.attr(_392,{id:id,style:{zIndex:this._beginZIndex+_38e.length},"class":"dijitPopup "+(_38f.baseClass||_38f["class"]||"").split(" ")[0]+"Popup",dijitPopupParent:args.parent?args.parent.id:""});if(dojo.isIE||dojo.isMoz){if(!_38f.bgIframe){_38f.bgIframe=new dijit.BackgroundIframe(_392);}}var best=_391?dijit.placeOnScreenAroundElement(_392,_391,_390,_38f.orient?dojo.hitch(_38f,"orient"):null):dijit.placeOnScreen(_392,args,_390=="R"?["TR","BR","TL","BL"]:["TL","BL","TR","BR"],args.padding);_392.style.display="";_392.style.visibility="visible";_38f.domNode.style.visibility="visible";var _393=[];_393.push(dojo.connect(_392,"onkeypress",this,function(evt){if(evt.charOrCode==dojo.keys.ESCAPE&&args.onCancel){dojo.stopEvent(evt);args.onCancel();}else{if(evt.charOrCode===dojo.keys.TAB){dojo.stopEvent(evt);var _394=this.getTopPopup();if(_394&&_394.onCancel){_394.onCancel();}}}}));if(_38f.onCancel){_393.push(dojo.connect(_38f,"onCancel",args.onCancel));}_393.push(dojo.connect(_38f,_38f.onExecute?"onExecute":"onChange",this,function(){var _395=this.getTopPopup();if(_395&&_395.onExecute){_395.onExecute();}}));_38e.push({widget:_38f,parent:args.parent,onExecute:args.onExecute,onCancel:args.onCancel,onClose:args.onClose,handlers:_393});if(_38f.onOpen){_38f.onOpen(best);}return best;},close:function(_396){var _397=this._stack;while((_396&&dojo.some(_397,function(elem){return elem.widget==_396;}))||(!_396&&_397.length)){var top=_397.pop(),_398=top.widget,_399=top.onClose;if(_398.onClose){_398.onClose();}dojo.forEach(top.handlers,dojo.disconnect);if(_398&&_398.domNode){this.hide(_398);}if(_399){_399();}}}};dijit._frames=new function(){var _39a=[];this.pop=function(){var _39b;if(_39a.length){_39b=_39a.pop();_39b.style.display="";}else{if(dojo.isIE<9){var burl=dojo.config["dojoBlankHtmlUrl"]||(dojo.moduleUrl("dojo","resources/blank.html")+"")||"javascript:\"\"";var html="<iframe src='"+burl+"'"+" style='position: absolute; left: 0px; top: 0px;"+"z-index: -1; filter:Alpha(Opacity=\"0\");'>";_39b=dojo.doc.createElement(html);}else{_39b=dojo.create("iframe");_39b.src="javascript:\"\"";_39b.className="dijitBackgroundIframe";dojo.style(_39b,"opacity",0.1);}_39b.tabIndex=-1;dijit.setWaiRole(_39b,"presentation");}return _39b;};this.push=function(_39c){_39c.style.display="none";_39a.push(_39c);};}();dijit.BackgroundIframe=function(node){if(!node.id){throw new Error("no id");}if(dojo.isIE||dojo.isMoz){var _39d=(this.iframe=dijit._frames.pop());node.appendChild(_39d);if(dojo.isIE<7||dojo.isQuirks){this.resize(node);this._conn=dojo.connect(node,"onresize",this,function(){this.resize(node);});}else{dojo.style(_39d,{width:"100%",height:"100%"});}}};dojo.extend(dijit.BackgroundIframe,{resize:function(node){if(this.iframe){dojo.style(this.iframe,{width:node.offsetWidth+"px",height:node.offsetHeight+"px"});}},destroy:function(){if(this._conn){dojo.disconnect(this._conn);this._conn=null;}if(this.iframe){dijit._frames.push(this.iframe);delete this.iframe;}}});}if(!dojo._hasResource["dijit._base.scroll"]){dojo._hasResource["dijit._base.scroll"]=true;dojo.provide("dijit._base.scroll");dijit.scrollIntoView=function(node,pos){dojo.window.scrollIntoView(node,pos);};}if(!dojo._hasResource["dojo.uacss"]){dojo._hasResource["dojo.uacss"]=true;dojo.provide("dojo.uacss");(function(){var d=dojo,html=d.doc.documentElement,ie=d.isIE,_39e=d.isOpera,maj=Math.floor,ff=d.isFF,_39f=d.boxModel.replace(/-/,""),_3a0={dj_ie:ie,dj_ie6:maj(ie)==6,dj_ie7:maj(ie)==7,dj_ie8:maj(ie)==8,dj_ie9:maj(ie)==9,dj_quirks:d.isQuirks,dj_iequirks:ie&&d.isQuirks,dj_opera:_39e,dj_khtml:d.isKhtml,dj_webkit:d.isWebKit,dj_safari:d.isSafari,dj_chrome:d.isChrome,dj_gecko:d.isMozilla,dj_ff3:maj(ff)==3};_3a0["dj_"+_39f]=true;var _3a1="";for(var clz in _3a0){if(_3a0[clz]){_3a1+=clz+" ";}}html.className=d.trim(html.className+" "+_3a1);dojo._loaders.unshift(function(){if(!dojo._isBodyLtr()){var _3a2="dj_rtl dijitRtl "+_3a1.replace(/ /g,"-rtl ");html.className=d.trim(html.className+" "+_3a2);}});})();}if(!dojo._hasResource["dijit._base.sniff"]){dojo._hasResource["dijit._base.sniff"]=true;dojo.provide("dijit._base.sniff");}if(!dojo._hasResource["dijit._base.typematic"]){dojo._hasResource["dijit._base.typematic"]=true;dojo.provide("dijit._base.typematic");dijit.typematic={_fireEventAndReload:function(){this._timer=null;this._callback(++this._count,this._node,this._evt);this._currentTimeout=Math.max(this._currentTimeout<0?this._initialDelay:(this._subsequentDelay>1?this._subsequentDelay:Math.round(this._currentTimeout*this._subsequentDelay)),this._minDelay);this._timer=setTimeout(dojo.hitch(this,"_fireEventAndReload"),this._currentTimeout);},trigger:function(evt,_3a3,node,_3a4,obj,_3a5,_3a6,_3a7){if(obj!=this._obj){this.stop();this._initialDelay=_3a6||500;this._subsequentDelay=_3a5||0.9;this._minDelay=_3a7||10;this._obj=obj;this._evt=evt;this._node=node;this._currentTimeout=-1;this._count=-1;this._callback=dojo.hitch(_3a3,_3a4);this._fireEventAndReload();this._evt=dojo.mixin({faux:true},evt);}},stop:function(){if(this._timer){clearTimeout(this._timer);this._timer=null;}if(this._obj){this._callback(-1,this._node,this._evt);this._obj=null;}},addKeyListener:function(node,_3a8,_3a9,_3aa,_3ab,_3ac,_3ad){if(_3a8.keyCode){_3a8.charOrCode=_3a8.keyCode;dojo.deprecated("keyCode attribute parameter for dijit.typematic.addKeyListener is deprecated. Use charOrCode instead.","","2.0");}else{if(_3a8.charCode){_3a8.charOrCode=String.fromCharCode(_3a8.charCode);dojo.deprecated("charCode attribute parameter for dijit.typematic.addKeyListener is deprecated. Use charOrCode instead.","","2.0");}}return [dojo.connect(node,"onkeypress",this,function(evt){if(evt.charOrCode==_3a8.charOrCode&&(_3a8.ctrlKey===undefined||_3a8.ctrlKey==evt.ctrlKey)&&(_3a8.altKey===undefined||_3a8.altKey==evt.altKey)&&(_3a8.metaKey===undefined||_3a8.metaKey==(evt.metaKey||false))&&(_3a8.shiftKey===undefined||_3a8.shiftKey==evt.shiftKey)){dojo.stopEvent(evt);dijit.typematic.trigger(evt,_3a9,node,_3aa,_3a8,_3ab,_3ac,_3ad);}else{if(dijit.typematic._obj==_3a8){dijit.typematic.stop();}}}),dojo.connect(node,"onkeyup",this,function(evt){if(dijit.typematic._obj==_3a8){dijit.typematic.stop();}})];},addMouseListener:function(node,_3ae,_3af,_3b0,_3b1,_3b2){var dc=dojo.connect;return [dc(node,"mousedown",this,function(evt){dojo.stopEvent(evt);dijit.typematic.trigger(evt,_3ae,node,_3af,node,_3b0,_3b1,_3b2);}),dc(node,"mouseup",this,function(evt){dojo.stopEvent(evt);dijit.typematic.stop();}),dc(node,"mouseout",this,function(evt){dojo.stopEvent(evt);dijit.typematic.stop();}),dc(node,"mousemove",this,function(evt){evt.preventDefault();}),dc(node,"dblclick",this,function(evt){dojo.stopEvent(evt);if(dojo.isIE){dijit.typematic.trigger(evt,_3ae,node,_3af,node,_3b0,_3b1,_3b2);setTimeout(dojo.hitch(this,dijit.typematic.stop),50);}})];},addListener:function(_3b3,_3b4,_3b5,_3b6,_3b7,_3b8,_3b9,_3ba){return this.addKeyListener(_3b4,_3b5,_3b6,_3b7,_3b8,_3b9,_3ba).concat(this.addMouseListener(_3b3,_3b6,_3b7,_3b8,_3b9,_3ba));}};}if(!dojo._hasResource["dijit._base.wai"]){dojo._hasResource["dijit._base.wai"]=true;dojo.provide("dijit._base.wai");dijit.wai={onload:function(){var div=dojo.create("div",{id:"a11yTestNode",style:{cssText:"border: 1px solid;"+"border-color:red green;"+"position: absolute;"+"height: 5px;"+"top: -999px;"+"background-image: url(\""+(dojo.config.blankGif||dojo.moduleUrl("dojo","resources/blank.gif"))+"\");"}},dojo.body());var cs=dojo.getComputedStyle(div);if(cs){var _3bb=cs.backgroundImage;var _3bc=(cs.borderTopColor==cs.borderRightColor)||(_3bb!=null&&(_3bb=="none"||_3bb=="url(invalid-url:)"));dojo[_3bc?"addClass":"removeClass"](dojo.body(),"dijit_a11y");if(dojo.isIE){div.outerHTML="";}else{dojo.body().removeChild(div);}}}};if(dojo.isIE||dojo.isMoz){dojo._loaders.unshift(dijit.wai.onload);}dojo.mixin(dijit,{hasWaiRole:function(elem,role){var _3bd=this.getWaiRole(elem);return role?(_3bd.indexOf(role)>-1):(_3bd.length>0);},getWaiRole:function(elem){return dojo.trim((dojo.attr(elem,"role")||"").replace("wairole:",""));},setWaiRole:function(elem,role){dojo.attr(elem,"role",role);},removeWaiRole:function(elem,role){var _3be=dojo.attr(elem,"role");if(!_3be){return;}if(role){var t=dojo.trim((" "+_3be+" ").replace(" "+role+" "," "));dojo.attr(elem,"role",t);}else{elem.removeAttribute("role");}},hasWaiState:function(elem,_3bf){return elem.hasAttribute?elem.hasAttribute("aria-"+_3bf):!!elem.getAttribute("aria-"+_3bf);},getWaiState:function(elem,_3c0){return elem.getAttribute("aria-"+_3c0)||"";},setWaiState:function(elem,_3c1,_3c2){elem.setAttribute("aria-"+_3c1,_3c2);},removeWaiState:function(elem,_3c3){elem.removeAttribute("aria-"+_3c3);}});}if(!dojo._hasResource["dijit._base"]){dojo._hasResource["dijit._base"]=true;dojo.provide("dijit._base");}if(!dojo._hasResource["dijit._Widget"]){dojo._hasResource["dijit._Widget"]=true;dojo.provide("dijit._Widget");dojo.connect(dojo,"_connect",function(_3c4,_3c5){if(_3c4&&dojo.isFunction(_3c4._onConnect)){_3c4._onConnect(_3c5);}});dijit._connectOnUseEventHandler=function(_3c6){};dijit._lastKeyDownNode=null;if(dojo.isIE){(function(){var _3c7=function(evt){dijit._lastKeyDownNode=evt.srcElement;};dojo.doc.attachEvent("onkeydown",_3c7);dojo.addOnWindowUnload(function(){dojo.doc.detachEvent("onkeydown",_3c7);});})();}else{dojo.doc.addEventListener("keydown",function(evt){dijit._lastKeyDownNode=evt.target;},true);}(function(){dojo.declare("dijit._Widget",dijit._WidgetBase,{_deferredConnects:{onClick:"",onDblClick:"",onKeyDown:"",onKeyPress:"",onKeyUp:"",onMouseMove:"",onMouseDown:"",onMouseOut:"",onMouseOver:"",onMouseLeave:"",onMouseEnter:"",onMouseUp:""},onClick:dijit._connectOnUseEventHandler,onDblClick:dijit._connectOnUseEventHandler,onKeyDown:dijit._connectOnUseEventHandler,onKeyPress:dijit._connectOnUseEventHandler,onKeyUp:dijit._connectOnUseEventHandler,onMouseDown:dijit._connectOnUseEventHandler,onMouseMove:dijit._connectOnUseEventHandler,onMouseOut:dijit._connectOnUseEventHandler,onMouseOver:dijit._connectOnUseEventHandler,onMouseLeave:dijit._connectOnUseEventHandler,onMouseEnter:dijit._connectOnUseEventHandler,onMouseUp:dijit._connectOnUseEventHandler,create:function(_3c8,_3c9){this._deferredConnects=dojo.clone(this._deferredConnects);for(var attr in this.attributeMap){delete this._deferredConnects[attr];}for(attr in this._deferredConnects){if(this[attr]!==dijit._connectOnUseEventHandler){delete this._deferredConnects[attr];}}this.inherited(arguments);if(this.domNode){for(attr in this.params){this._onConnect(attr);}}},_onConnect:function(_3ca){if(_3ca in this._deferredConnects){var _3cb=this[this._deferredConnects[_3ca]||"domNode"];this.connect(_3cb,_3ca.toLowerCase(),_3ca);delete this._deferredConnects[_3ca];}},focused:false,isFocusable:function(){return this.focus&&(dojo.style(this.domNode,"display")!="none");},onFocus:function(){},onBlur:function(){},_onFocus:function(e){this.onFocus();},_onBlur:function(){this.onBlur();},setAttribute:function(attr,_3cc){dojo.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.","","2.0");this.set(attr,_3cc);},attr:function(name,_3cd){if(dojo.config.isDebug){var _3ce=arguments.callee._ach||(arguments.callee._ach={}),_3cf=(arguments.callee.caller||"unknown caller").toString();if(!_3ce[_3cf]){dojo.deprecated(this.declaredClass+"::attr() is deprecated. Use get() or set() instead, called from "+_3cf,"","2.0");_3ce[_3cf]=true;}}var args=arguments.length;if(args>=2||typeof name==="object"){return this.set.apply(this,arguments);}else{return this.get(name);}},nodesWithKeyClick:["input","button"],connect:function(obj,_3d0,_3d1){var d=dojo,dc=d._connect,_3d2=this.inherited(arguments,[obj,_3d0=="ondijitclick"?"onclick":_3d0,_3d1]);if(_3d0=="ondijitclick"){if(d.indexOf(this.nodesWithKeyClick,obj.nodeName.toLowerCase())==-1){var m=d.hitch(this,_3d1);_3d2.push(dc(obj,"onkeydown",this,function(e){if((e.keyCode==d.keys.ENTER||e.keyCode==d.keys.SPACE)&&!e.ctrlKey&&!e.shiftKey&&!e.altKey&&!e.metaKey){dijit._lastKeyDownNode=e.target;if(!("openDropDown" in this&&obj==this._buttonNode)){e.preventDefault();}}}),dc(obj,"onkeyup",this,function(e){if((e.keyCode==d.keys.ENTER||e.keyCode==d.keys.SPACE)&&e.target==dijit._lastKeyDownNode&&!e.ctrlKey&&!e.shiftKey&&!e.altKey&&!e.metaKey){dijit._lastKeyDownNode=null;return m(e);}}));}}return _3d2;},_onShow:function(){this.onShow();},onShow:function(){},onHide:function(){},onClose:function(){return true;}});})();}if(!dojo._hasResource["dojo.string"]){dojo._hasResource["dojo.string"]=true;dojo.provide("dojo.string");dojo.getObject("string",true,dojo);dojo.string.rep=function(str,num){if(num<=0||!str){return "";}var buf=[];for(;;){if(num&1){buf.push(str);}if(!(num>>=1)){break;}str+=str;}return buf.join("");};dojo.string.pad=function(text,size,ch,end){if(!ch){ch="0";}var out=String(text),pad=dojo.string.rep(ch,Math.ceil((size-out.length)/ch.length));return end?out+pad:pad+out;};dojo.string.substitute=function(_3d3,map,_3d4,_3d5){_3d5=_3d5||dojo.global;_3d4=_3d4?dojo.hitch(_3d5,_3d4):function(v){return v;};return _3d3.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,function(_3d6,key,_3d7){var _3d8=dojo.getObject(key,false,map);if(_3d7){_3d8=dojo.getObject(_3d7,false,_3d5).call(_3d5,_3d8,key);}return _3d4(_3d8,key).toString();});};dojo.string.trim=String.prototype.trim?dojo.trim:function(str){str=str.replace(/^\s+/,"");for(var i=str.length-1;i>=0;i--){if(/\S/.test(str.charAt(i))){str=str.substring(0,i+1);break;}}return str;};}if(!dojo._hasResource["dojo.date.stamp"]){dojo._hasResource["dojo.date.stamp"]=true;dojo.provide("dojo.date.stamp");dojo.getObject("date.stamp",true,dojo);dojo.date.stamp.fromISOString=function(_3d9,_3da){if(!dojo.date.stamp._isoRegExp){dojo.date.stamp._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/;}var _3db=dojo.date.stamp._isoRegExp.exec(_3d9),_3dc=null;if(_3db){_3db.shift();if(_3db[1]){_3db[1]--;}if(_3db[6]){_3db[6]*=1000;}if(_3da){_3da=new Date(_3da);dojo.forEach(dojo.map(["FullYear","Month","Date","Hours","Minutes","Seconds","Milliseconds"],function(prop){return _3da["get"+prop]();}),function(_3dd,_3de){_3db[_3de]=_3db[_3de]||_3dd;});}_3dc=new Date(_3db[0]||1970,_3db[1]||0,_3db[2]||1,_3db[3]||0,_3db[4]||0,_3db[5]||0,_3db[6]||0);if(_3db[0]<100){_3dc.setFullYear(_3db[0]||1970);}var _3df=0,_3e0=_3db[7]&&_3db[7].charAt(0);if(_3e0!="Z"){_3df=((_3db[8]||0)*60)+(Number(_3db[9])||0);if(_3e0!="-"){_3df*=-1;}}if(_3e0){_3df-=_3dc.getTimezoneOffset();}if(_3df){_3dc.setTime(_3dc.getTime()+_3df*60000);}}return _3dc;};dojo.date.stamp.toISOString=function(_3e1,_3e2){var _3e3=function(n){return (n<10)?"0"+n:n;};_3e2=_3e2||{};var _3e4=[],_3e5=_3e2.zulu?"getUTC":"get",date="";if(_3e2.selector!="time"){var year=_3e1[_3e5+"FullYear"]();date=["0000".substr((year+"").length)+year,_3e3(_3e1[_3e5+"Month"]()+1),_3e3(_3e1[_3e5+"Date"]())].join("-");}_3e4.push(date);if(_3e2.selector!="date"){var time=[_3e3(_3e1[_3e5+"Hours"]()),_3e3(_3e1[_3e5+"Minutes"]()),_3e3(_3e1[_3e5+"Seconds"]())].join(":");var _3e6=_3e1[_3e5+"Milliseconds"]();if(_3e2.milliseconds){time+="."+(_3e6<100?"0":"")+_3e3(_3e6);}if(_3e2.zulu){time+="Z";}else{if(_3e2.selector!="time"){var _3e7=_3e1.getTimezoneOffset();var _3e8=Math.abs(_3e7);time+=(_3e7>0?"-":"+")+_3e3(Math.floor(_3e8/60))+":"+_3e3(_3e8%60);}}_3e4.push(time);}return _3e4.join("T");};}if(!dojo._hasResource["dojo.parser"]){dojo._hasResource["dojo.parser"]=true;dojo.provide("dojo.parser");new Date("X");dojo.parser=new function(){var d=dojo;function _3e9(_3ea){if(d.isString(_3ea)){return "string";}if(typeof _3ea=="number"){return "number";}if(typeof _3ea=="boolean"){return "boolean";}if(d.isFunction(_3ea)){return "function";}if(d.isArray(_3ea)){return "array";}if(_3ea instanceof Date){return "date";}if(_3ea instanceof d._Url){return "url";}return "object";};function _3eb(_3ec,type){switch(type){case "string":return _3ec;case "number":return _3ec.length?Number(_3ec):NaN;case "boolean":return typeof _3ec=="boolean"?_3ec:!(_3ec.toLowerCase()=="false");case "function":if(d.isFunction(_3ec)){_3ec=_3ec.toString();_3ec=d.trim(_3ec.substring(_3ec.indexOf("{")+1,_3ec.length-1));}try{if(_3ec===""||_3ec.search(/[^\w\.]+/i)!=-1){return new Function(_3ec);}else{return d.getObject(_3ec,false)||new Function(_3ec);}}catch(e){return new Function();}case "array":return _3ec?_3ec.split(/\s*,\s*/):[];case "date":switch(_3ec){case "":return new Date("");case "now":return new Date();default:return d.date.stamp.fromISOString(_3ec);}case "url":return d.baseUrl+_3ec;default:return d.fromJson(_3ec);}};var _3ed={},_3ee={};d.connect(d,"extend",function(){_3ee={};});function _3ef(cls,_3f0){for(var name in cls){if(name.charAt(0)=="_"){continue;}if(name in _3ed){continue;}_3f0[name]=_3e9(cls[name]);}return _3f0;};function _3f1(_3f2,_3f3){var c=_3ee[_3f2];if(!c){var cls=d.getObject(_3f2),_3f4=null;if(!cls){return null;}if(!_3f3){_3f4=_3ef(cls.prototype,{});}c={cls:cls,params:_3f4};}else{if(!_3f3&&!c.params){c.params=_3ef(c.cls.prototype,{});}}return c;};this._functionFromScript=function(_3f5,_3f6){var _3f7="";var _3f8="";var _3f9=(_3f5.getAttribute(_3f6+"args")||_3f5.getAttribute("args"));if(_3f9){d.forEach(_3f9.split(/\s*,\s*/),function(part,idx){_3f7+="var "+part+" = arguments["+idx+"]; ";});}var _3fa=_3f5.getAttribute("with");if(_3fa&&_3fa.length){d.forEach(_3fa.split(/\s*,\s*/),function(part){_3f7+="with("+part+"){";_3f8+="}";});}return new Function(_3f7+_3f5.innerHTML+_3f8);};this.instantiate=function(_3fb,_3fc,args){var _3fd=[],_3fc=_3fc||{};args=args||{};var _3fe=(args.scope||d._scopeName)+"Type",_3ff="data-"+(args.scope||d._scopeName)+"-";d.forEach(_3fb,function(obj){if(!obj){return;}var node,type,_400,_401,_402,_403;if(obj.node){node=obj.node;type=obj.type;_403=obj.fastpath;_400=obj.clsInfo||(type&&_3f1(type,_403));_401=_400&&_400.cls;_402=obj.scripts;}else{node=obj;type=_3fe in _3fc?_3fc[_3fe]:node.getAttribute(_3fe);_400=type&&_3f1(type);_401=_400&&_400.cls;_402=(_401&&(_401._noScript||_401.prototype._noScript)?[]:d.query("> script[type^='dojo/']",node));}if(!_400){throw new Error("Could not load class '"+type);}var _404={};if(args.defaults){d._mixin(_404,args.defaults);}if(obj.inherited){d._mixin(_404,obj.inherited);}if(_403){var _405=node.getAttribute(_3ff+"props");if(_405&&_405.length){try{_405=d.fromJson.call(args.propsThis,"{"+_405+"}");d._mixin(_404,_405);}catch(e){throw new Error(e.toString()+" in data-dojo-props='"+_405+"'");}}var _406=node.getAttribute(_3ff+"attach-point");if(_406){_404.dojoAttachPoint=_406;}var _407=node.getAttribute(_3ff+"attach-event");if(_407){_404.dojoAttachEvent=_407;}dojo.mixin(_404,_3fc);}else{var _408=node.attributes;for(var name in _400.params){var item=name in _3fc?{value:_3fc[name],specified:true}:_408.getNamedItem(name);if(!item||(!item.specified&&(!dojo.isIE||name.toLowerCase()!="value"))){continue;}var _409=item.value;switch(name){case "class":_409="className" in _3fc?_3fc.className:node.className;break;case "style":_409="style" in _3fc?_3fc.style:(node.style&&node.style.cssText);}var _40a=_400.params[name];if(typeof _409=="string"){_404[name]=_3eb(_409,_40a);}else{_404[name]=_409;}}}var _40b=[],_40c=[];d.forEach(_402,function(_40d){node.removeChild(_40d);var _40e=(_40d.getAttribute(_3ff+"event")||_40d.getAttribute("event")),type=_40d.getAttribute("type"),nf=d.parser._functionFromScript(_40d,_3ff);if(_40e){if(type=="dojo/connect"){_40b.push({event:_40e,func:nf});}else{_404[_40e]=nf;}}else{_40c.push(nf);}});var _40f=_401.markupFactory||_401.prototype&&_401.prototype.markupFactory;var _410=_40f?_40f(_404,node,_401):new _401(_404,node);_3fd.push(_410);var _411=(node.getAttribute(_3ff+"id")||node.getAttribute("jsId"));if(_411){d.setObject(_411,_410);}d.forEach(_40b,function(_412){d.connect(_410,_412.event,null,_412.func);});d.forEach(_40c,function(func){func.call(_410);});});if(!_3fc._started){d.forEach(_3fd,function(_413){if(!args.noStart&&_413&&dojo.isFunction(_413.startup)&&!_413._started&&(!_413.getParent||!_413.getParent())){_413.startup();}});}return _3fd;};this.parse=function(_414,args){var root;if(!args&&_414&&_414.rootNode){args=_414;root=args.rootNode;}else{root=_414;}root=root?dojo.byId(root):dojo.body();args=args||{};var _415=(args.scope||d._scopeName)+"Type",_416="data-"+(args.scope||d._scopeName)+"-";function scan(_417,list){var _418=dojo.clone(_417.inherited);dojo.forEach(["dir","lang"],function(name){var val=_417.node.getAttribute(name);if(val){_418[name]=val;}});var _419=_417.clsInfo&&!_417.clsInfo.cls.prototype._noScript?_417.scripts:null;var _41a=(!_417.clsInfo||!_417.clsInfo.cls.prototype.stopParser)||(args&&args.template);for(var _41b=_417.node.firstChild;_41b;_41b=_41b.nextSibling){if(_41b.nodeType==1){var type,_41c=_41a&&_41b.getAttribute(_416+"type");if(_41c){type=_41c;}else{type=_41a&&_41b.getAttribute(_415);}var _41d=_41c==type;if(type){var _41e={"type":type,fastpath:_41d,clsInfo:_3f1(type,_41d),node:_41b,scripts:[],inherited:_418};list.push(_41e);scan(_41e,list);}else{if(_419&&_41b.nodeName.toLowerCase()=="script"){type=_41b.getAttribute("type");if(type&&/^dojo\/\w/i.test(type)){_419.push(_41b);}}else{if(_41a){scan({node:_41b,inherited:_418},list);}}}}}};var _41f={};if(args&&args.inherited){for(var key in args.inherited){if(args.inherited[key]){_41f[key]=args.inherited[key];}}}var list=[];scan({node:root,inherited:_41f},list);var _420=args&&args.template?{template:true}:null;return this.instantiate(list,_420,args);};}();(function(){var _421=function(){if(dojo.config.parseOnLoad){dojo.parser.parse();}};if(dojo.getObject("dijit.wai.onload")===dojo._loaders[0]){dojo._loaders.splice(1,0,_421);}else{dojo._loaders.unshift(_421);}})();}if(!dojo._hasResource["dojo.cache"]){dojo._hasResource["dojo.cache"]=true;dojo.provide("dojo.cache");var cache={};dojo.cache=function(_422,url,_423){if(typeof _422=="string"){var _424=dojo.moduleUrl(_422,url);}else{_424=_422;_423=url;}var key=_424.toString();var val=_423;if(_423!=undefined&&!dojo.isString(_423)){val=("value" in _423?_423.value:undefined);}var _425=_423&&_423.sanitize?true:false;if(typeof val=="string"){val=cache[key]=_425?dojo.cache._sanitize(val):val;}else{if(val===null){delete cache[key];}else{if(!(key in cache)){val=dojo._getText(key);cache[key]=_425?dojo.cache._sanitize(val):val;}val=cache[key];}}return val;};dojo.cache._sanitize=function(val){if(val){val=val.replace(/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,"");var _426=val.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);if(_426){val=_426[1];}}else{val="";}return val;};}if(!dojo._hasResource["dijit._Templated"]){dojo._hasResource["dijit._Templated"]=true;dojo.provide("dijit._Templated");dojo.declare("dijit._Templated",null,{templateString:null,templatePath:null,widgetsInTemplate:false,_skipNodeCache:false,_earlyTemplatedStartup:false,constructor:function(){this._attachPoints=[];this._attachEvents=[];},_stringRepl:function(tmpl){var _427=this.declaredClass,_428=this;return dojo.string.substitute(tmpl,this,function(_429,key){if(key.charAt(0)=="!"){_429=dojo.getObject(key.substr(1),false,_428);}if(typeof _429=="undefined"){throw new Error(_427+" template:"+key);}if(_429==null){return "";}return key.charAt(0)=="!"?_429:_429.toString().replace(/"/g,"&quot;");},this);},buildRendering:function(){var _42a=dijit._Templated.getCachedTemplate(this.templatePath,this.templateString,this._skipNodeCache);var node;if(dojo.isString(_42a)){node=dojo._toDom(this._stringRepl(_42a));if(node.nodeType!=1){throw new Error("Invalid template: "+_42a);}}else{node=_42a.cloneNode(true);}this.domNode=node;this.inherited(arguments);this._attachTemplateNodes(node);if(this.widgetsInTemplate){var cw=(this._startupWidgets=dojo.parser.parse(node,{noStart:!this._earlyTemplatedStartup,template:true,inherited:{dir:this.dir,lang:this.lang},propsThis:this,scope:"dojo"}));this._supportingWidgets=dijit.findWidgets(node);this._attachTemplateNodes(cw,function(n,p){return n[p];});}this._fillContent(this.srcNodeRef);},_fillContent:function(_42b){var dest=this.containerNode;if(_42b&&dest){while(_42b.hasChildNodes()){dest.appendChild(_42b.firstChild);}}},_attachTemplateNodes:function(_42c,_42d){_42d=_42d||function(n,p){return n.getAttribute(p);};var _42e=dojo.isArray(_42c)?_42c:(_42c.all||_42c.getElementsByTagName("*"));var x=dojo.isArray(_42c)?0:-1;for(;x<_42e.length;x++){var _42f=(x==-1)?_42c:_42e[x];if(this.widgetsInTemplate&&(_42d(_42f,"dojoType")||_42d(_42f,"data-dojo-type"))){continue;}var _430=_42d(_42f,"dojoAttachPoint")||_42d(_42f,"data-dojo-attach-point");if(_430){var _431,_432=_430.split(/\s*,\s*/);while((_431=_432.shift())){if(dojo.isArray(this[_431])){this[_431].push(_42f);}else{this[_431]=_42f;}this._attachPoints.push(_431);}}var _433=_42d(_42f,"dojoAttachEvent")||_42d(_42f,"data-dojo-attach-event");if(_433){var _434,_435=_433.split(/\s*,\s*/);var trim=dojo.trim;while((_434=_435.shift())){if(_434){var _436=null;if(_434.indexOf(":")!=-1){var _437=_434.split(":");_434=trim(_437[0]);_436=trim(_437[1]);}else{_434=trim(_434);}if(!_436){_436=_434;}this._attachEvents.push(this.connect(_42f,_434,_436));}}}var role=_42d(_42f,"waiRole");if(role){dijit.setWaiRole(_42f,role);}var _438=_42d(_42f,"waiState");if(_438){dojo.forEach(_438.split(/\s*,\s*/),function(_439){if(_439.indexOf("-")!=-1){var pair=_439.split("-");dijit.setWaiState(_42f,pair[0],pair[1]);}});}}},startup:function(){dojo.forEach(this._startupWidgets,function(w){if(w&&!w._started&&w.startup){w.startup();}});this.inherited(arguments);},destroyRendering:function(){dojo.forEach(this._attachPoints,function(_43a){delete this[_43a];},this);this._attachPoints=[];dojo.forEach(this._attachEvents,this.disconnect,this);this._attachEvents=[];this.inherited(arguments);}});dijit._Templated._templateCache={};dijit._Templated.getCachedTemplate=function(_43b,_43c,_43d){var _43e=dijit._Templated._templateCache;var key=_43c||_43b;var _43f=_43e[key];if(_43f){try{if(!_43f.ownerDocument||_43f.ownerDocument==dojo.doc){return _43f;}}catch(e){}dojo.destroy(_43f);}if(!_43c){_43c=dojo.cache(_43b,{sanitize:true});}_43c=dojo.string.trim(_43c);if(_43d||_43c.match(/\$\{([^\}]+)\}/g)){return (_43e[key]=_43c);}else{var node=dojo._toDom(_43c);if(node.nodeType!=1){throw new Error("Invalid template: "+_43c);}return (_43e[key]=node);}};if(dojo.isIE){dojo.addOnWindowUnload(function(){var _440=dijit._Templated._templateCache;for(var key in _440){var _441=_440[key];if(typeof _441=="object"){dojo.destroy(_441);}delete _440[key];}});}dojo.extend(dijit._Widget,{dojoAttachEvent:"",dojoAttachPoint:"",waiRole:"",waiState:""});}if(!dojo._hasResource["dojo.regexp"]){dojo._hasResource["dojo.regexp"]=true;dojo.provide("dojo.regexp");dojo.getObject("regexp",true,dojo);dojo.regexp.escapeString=function(str,_442){return str.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(ch){if(_442&&_442.indexOf(ch)!=-1){return ch;}return "\\"+ch;});};dojo.regexp.buildGroupRE=function(arr,re,_443){if(!(arr instanceof Array)){return re(arr);}var b=[];for(var i=0;i<arr.length;i++){b.push(re(arr[i]));}return dojo.regexp.group(b.join("|"),_443);};dojo.regexp.group=function(_444,_445){return "("+(_445?"?:":"")+_444+")";};}if(!dojo._hasResource["dojo.number"]){dojo._hasResource["dojo.number"]=true;dojo.provide("dojo.number");dojo.getObject("number",true,dojo);dojo.number.format=function(_446,_447){_447=dojo.mixin({},_447||{});var _448=dojo.i18n.normalizeLocale(_447.locale),_449=dojo.i18n.getLocalization("dojo.cldr","number",_448);_447.customs=_449;var _44a=_447.pattern||_449[(_447.type||"decimal")+"Format"];if(isNaN(_446)||Math.abs(_446)==Infinity){return null;}return dojo.number._applyPattern(_446,_44a,_447);};dojo.number._numberPatternRE=/[#0,]*[#0](?:\.0*#*)?/;dojo.number._applyPattern=function(_44b,_44c,_44d){_44d=_44d||{};var _44e=_44d.customs.group,_44f=_44d.customs.decimal,_450=_44c.split(";"),_451=_450[0];_44c=_450[(_44b<0)?1:0]||("-"+_451);if(_44c.indexOf("%")!=-1){_44b*=100;}else{if(_44c.indexOf("‰")!=-1){_44b*=1000;}else{if(_44c.indexOf("¤")!=-1){_44e=_44d.customs.currencyGroup||_44e;_44f=_44d.customs.currencyDecimal||_44f;_44c=_44c.replace(/\u00a4{1,3}/,function(_452){var prop=["symbol","currency","displayName"][_452.length-1];return _44d[prop]||_44d.currency||"";});}else{if(_44c.indexOf("E")!=-1){throw new Error("exponential notation not supported");}}}}var _453=dojo.number._numberPatternRE;var _454=_451.match(_453);if(!_454){throw new Error("unable to find a number expression in pattern: "+_44c);}if(_44d.fractional===false){_44d.places=0;}return _44c.replace(_453,dojo.number._formatAbsolute(_44b,_454[0],{decimal:_44f,group:_44e,places:_44d.places,round:_44d.round}));};dojo.number.round=function(_455,_456,_457){var _458=10/(_457||10);return (_458*+_455).toFixed(_456)/_458;};if((0.9).toFixed()==0){(function(){var _459=dojo.number.round;dojo.number.round=function(v,p,m){var d=Math.pow(10,-p||0),a=Math.abs(v);if(!v||a>=d||a*Math.pow(10,p+1)<5){d=0;}return _459(v,p,m)+(v>0?d:-d);};})();}dojo.number._formatAbsolute=function(_45a,_45b,_45c){_45c=_45c||{};if(_45c.places===true){_45c.places=0;}if(_45c.places===Infinity){_45c.places=6;}var _45d=_45b.split("."),_45e=typeof _45c.places=="string"&&_45c.places.indexOf(","),_45f=_45c.places;if(_45e){_45f=_45c.places.substring(_45e+1);}else{if(!(_45f>=0)){_45f=(_45d[1]||[]).length;}}if(!(_45c.round<0)){_45a=dojo.number.round(_45a,_45f,_45c.round);}var _460=String(Math.abs(_45a)).split("."),_461=_460[1]||"";if(_45d[1]||_45c.places){if(_45e){_45c.places=_45c.places.substring(0,_45e);}var pad=_45c.places!==undefined?_45c.places:(_45d[1]&&_45d[1].lastIndexOf("0")+1);if(pad>_461.length){_460[1]=dojo.string.pad(_461,pad,"0",true);}if(_45f<_461.length){_460[1]=_461.substr(0,_45f);}}else{if(_460[1]){_460.pop();}}var _462=_45d[0].replace(",","");pad=_462.indexOf("0");if(pad!=-1){pad=_462.length-pad;if(pad>_460[0].length){_460[0]=dojo.string.pad(_460[0],pad);}if(_462.indexOf("#")==-1){_460[0]=_460[0].substr(_460[0].length-pad);}}var _463=_45d[0].lastIndexOf(","),_464,_465;if(_463!=-1){_464=_45d[0].length-_463-1;var _466=_45d[0].substr(0,_463);_463=_466.lastIndexOf(",");if(_463!=-1){_465=_466.length-_463-1;}}var _467=[];for(var _468=_460[0];_468;){var off=_468.length-_464;_467.push((off>0)?_468.substr(off):_468);_468=(off>0)?_468.slice(0,off):"";if(_465){_464=_465;delete _465;}}_460[0]=_467.reverse().join(_45c.group||",");return _460.join(_45c.decimal||".");};dojo.number.regexp=function(_469){return dojo.number._parseInfo(_469).regexp;};dojo.number._parseInfo=function(_46a){_46a=_46a||{};var _46b=dojo.i18n.normalizeLocale(_46a.locale),_46c=dojo.i18n.getLocalization("dojo.cldr","number",_46b),_46d=_46a.pattern||_46c[(_46a.type||"decimal")+"Format"],_46e=_46c.group,_46f=_46c.decimal,_470=1;if(_46d.indexOf("%")!=-1){_470/=100;}else{if(_46d.indexOf("‰")!=-1){_470/=1000;}else{var _471=_46d.indexOf("¤")!=-1;if(_471){_46e=_46c.currencyGroup||_46e;_46f=_46c.currencyDecimal||_46f;}}}var _472=_46d.split(";");if(_472.length==1){_472.push("-"+_472[0]);}var re=dojo.regexp.buildGroupRE(_472,function(_473){_473="(?:"+dojo.regexp.escapeString(_473,".")+")";return _473.replace(dojo.number._numberPatternRE,function(_474){var _475={signed:false,separator:_46a.strict?_46e:[_46e,""],fractional:_46a.fractional,decimal:_46f,exponent:false},_476=_474.split("."),_477=_46a.places;if(_476.length==1&&_470!=1){_476[1]="###";}if(_476.length==1||_477===0){_475.fractional=false;}else{if(_477===undefined){_477=_46a.pattern?_476[1].lastIndexOf("0")+1:Infinity;}if(_477&&_46a.fractional==undefined){_475.fractional=true;}if(!_46a.places&&(_477<_476[1].length)){_477+=","+_476[1].length;}_475.places=_477;}var _478=_476[0].split(",");if(_478.length>1){_475.groupSize=_478.pop().length;if(_478.length>1){_475.groupSize2=_478.pop().length;}}return "("+dojo.number._realNumberRegexp(_475)+")";});},true);if(_471){re=re.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/g,function(_479,_47a,_47b,_47c){var prop=["symbol","currency","displayName"][_47b.length-1],_47d=dojo.regexp.escapeString(_46a[prop]||_46a.currency||"");_47a=_47a?"[\\s\\xa0]":"";_47c=_47c?"[\\s\\xa0]":"";if(!_46a.strict){if(_47a){_47a+="*";}if(_47c){_47c+="*";}return "(?:"+_47a+_47d+_47c+")?";}return _47a+_47d+_47c;});}return {regexp:re.replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:_46e,decimal:_46f,factor:_470};};dojo.number.parse=function(_47e,_47f){var info=dojo.number._parseInfo(_47f),_480=(new RegExp("^"+info.regexp+"$")).exec(_47e);if(!_480){return NaN;}var _481=_480[1];if(!_480[1]){if(!_480[2]){return NaN;}_481=_480[2];info.factor*=-1;}_481=_481.replace(new RegExp("["+info.group+"\\s\\xa0"+"]","g"),"").replace(info.decimal,".");return _481*info.factor;};dojo.number._realNumberRegexp=function(_482){_482=_482||{};if(!("places" in _482)){_482.places=Infinity;}if(typeof _482.decimal!="string"){_482.decimal=".";}if(!("fractional" in _482)||/^0/.test(_482.places)){_482.fractional=[true,false];}if(!("exponent" in _482)){_482.exponent=[true,false];}if(!("eSigned" in _482)){_482.eSigned=[true,false];}var _483=dojo.number._integerRegexp(_482),_484=dojo.regexp.buildGroupRE(_482.fractional,function(q){var re="";if(q&&(_482.places!==0)){re="\\"+_482.decimal;if(_482.places==Infinity){re="(?:"+re+"\\d+)?";}else{re+="\\d{"+_482.places+"}";}}return re;},true);var _485=dojo.regexp.buildGroupRE(_482.exponent,function(q){if(q){return "([eE]"+dojo.number._integerRegexp({signed:_482.eSigned})+")";}return "";});var _486=_483+_484;if(_484){_486="(?:(?:"+_486+")|(?:"+_484+"))";}return _486+_485;};dojo.number._integerRegexp=function(_487){_487=_487||{};if(!("signed" in _487)){_487.signed=[true,false];}if(!("separator" in _487)){_487.separator="";}else{if(!("groupSize" in _487)){_487.groupSize=3;}}var _488=dojo.regexp.buildGroupRE(_487.signed,function(q){return q?"[-+]":"";},true);var _489=dojo.regexp.buildGroupRE(_487.separator,function(sep){if(!sep){return "(?:\\d+)";}sep=dojo.regexp.escapeString(sep);if(sep==" "){sep="\\s";}else{if(sep==" "){sep="\\s\\xa0";}}var grp=_487.groupSize,grp2=_487.groupSize2;if(grp2){var _48a="(?:0|[1-9]\\d{0,"+(grp2-1)+"}(?:["+sep+"]\\d{"+grp2+"})*["+sep+"]\\d{"+grp+"})";return ((grp-grp2)>0)?"(?:"+_48a+"|(?:0|[1-9]\\d{0,"+(grp-1)+"}))":_48a;}return "(?:0|[1-9]\\d{0,"+(grp-1)+"}(?:["+sep+"]\\d{"+grp+"})*)";},true);return _488+_489;};}if(!dojo._hasResource["dojo.cldr.supplemental"]){dojo._hasResource["dojo.cldr.supplemental"]=true;dojo.provide("dojo.cldr.supplemental");dojo.getObject("cldr.supplemental",true,dojo);dojo.cldr.supplemental.getFirstDayOfWeek=function(_48b){var _48c={mv:5,ae:6,af:6,bh:6,dj:6,dz:6,eg:6,er:6,et:6,iq:6,ir:6,jo:6,ke:6,kw:6,ly:6,ma:6,om:6,qa:6,sa:6,sd:6,so:6,sy:6,tn:6,ye:6,ar:0,as:0,az:0,bw:0,ca:0,cn:0,fo:0,ge:0,gl:0,gu:0,hk:0,il:0,"in":0,jm:0,jp:0,kg:0,kr:0,la:0,mh:0,mn:0,mo:0,mp:0,mt:0,nz:0,ph:0,pk:0,sg:0,th:0,tt:0,tw:0,um:0,us:0,uz:0,vi:0,zw:0};var _48d=dojo.cldr.supplemental._region(_48b);var dow=_48c[_48d];return (dow===undefined)?1:dow;};dojo.cldr.supplemental._region=function(_48e){_48e=dojo.i18n.normalizeLocale(_48e);var tags=_48e.split("-");var _48f=tags[1];if(!_48f){_48f={de:"de",en:"us",es:"es",fi:"fi",fr:"fr",he:"il",hu:"hu",it:"it",ja:"jp",ko:"kr",nl:"nl",pt:"br",sv:"se",zh:"cn"}[tags[0]];}else{if(_48f.length==4){_48f=tags[2];}}return _48f;};dojo.cldr.supplemental.getWeekend=function(_490){var _491={"in":0,af:4,dz:4,ir:4,om:4,sa:4,ye:4,ae:5,bh:5,eg:5,il:5,iq:5,jo:5,kw:5,ly:5,ma:5,qa:5,sd:5,sy:5,tn:5};var _492={af:5,dz:5,ir:5,om:5,sa:5,ye:5,ae:6,bh:5,eg:6,il:6,iq:6,jo:6,kw:6,ly:6,ma:6,qa:6,sd:6,sy:6,tn:6};var _493=dojo.cldr.supplemental._region(_490);var _494=_491[_493];var end=_492[_493];if(_494===undefined){_494=6;}if(end===undefined){end=0;}return {start:_494,end:end};};}if(!dojo._hasResource["dojo.date.locale"]){dojo._hasResource["dojo.date.locale"]=true;dojo.provide("dojo.date.locale");dojo.getObject("date.locale",true,dojo);(function(){function _495(_496,_497,_498,_499){return _499.replace(/([a-z])\1*/ig,function(_49a){var s,pad,c=_49a.charAt(0),l=_49a.length,_49b=["abbr","wide","narrow"];switch(c){case "G":s=_497[(l<4)?"eraAbbr":"eraNames"][_496.getFullYear()<0?0:1];break;case "y":s=_496.getFullYear();switch(l){case 1:break;case 2:if(!_498.fullYear){s=String(s);s=s.substr(s.length-2);break;}default:pad=true;}break;case "Q":case "q":s=Math.ceil((_496.getMonth()+1)/3);pad=true;break;case "M":var m=_496.getMonth();if(l<3){s=m+1;pad=true;}else{var _49c=["months","format",_49b[l-3]].join("-");s=_497[_49c][m];}break;case "w":var _49d=0;s=dojo.date.locale._getWeekOfYear(_496,_49d);pad=true;break;case "d":s=_496.getDate();pad=true;break;case "D":s=dojo.date.locale._getDayOfYear(_496);pad=true;break;case "E":var d=_496.getDay();if(l<3){s=d+1;pad=true;}else{var _49e=["days","format",_49b[l-3]].join("-");s=_497[_49e][d];}break;case "a":var _49f=(_496.getHours()<12)?"am":"pm";s=_498[_49f]||_497["dayPeriods-format-wide-"+_49f];break;case "h":case "H":case "K":case "k":var h=_496.getHours();switch(c){case "h":s=(h%12)||12;break;case "H":s=h;break;case "K":s=(h%12);break;case "k":s=h||24;break;}pad=true;break;case "m":s=_496.getMinutes();pad=true;break;case "s":s=_496.getSeconds();pad=true;break;case "S":s=Math.round(_496.getMilliseconds()*Math.pow(10,l-3));pad=true;break;case "v":case "z":s=dojo.date.locale._getZone(_496,true,_498);if(s){break;}l=4;case "Z":var _4a0=dojo.date.locale._getZone(_496,false,_498);var tz=[(_4a0<=0?"+":"-"),dojo.string.pad(Math.floor(Math.abs(_4a0)/60),2),dojo.string.pad(Math.abs(_4a0)%60,2)];if(l==4){tz.splice(0,0,"GMT");tz.splice(3,0,":");}s=tz.join("");break;default:throw new Error("dojo.date.locale.format: invalid pattern char: "+_499);}if(pad){s=dojo.string.pad(s,l);}return s;});};dojo.date.locale._getZone=function(_4a1,_4a2,_4a3){if(_4a2){return dojo.date.getTimezoneName(_4a1);}else{return _4a1.getTimezoneOffset();}};dojo.date.locale.format=function(_4a4,_4a5){_4a5=_4a5||{};var _4a6=dojo.i18n.normalizeLocale(_4a5.locale),_4a7=_4a5.formatLength||"short",_4a8=dojo.date.locale._getGregorianBundle(_4a6),str=[],_4a9=dojo.hitch(this,_495,_4a4,_4a8,_4a5);if(_4a5.selector=="year"){return _4aa(_4a8["dateFormatItem-yyyy"]||"yyyy",_4a9);}var _4ab;if(_4a5.selector!="date"){_4ab=_4a5.timePattern||_4a8["timeFormat-"+_4a7];if(_4ab){str.push(_4aa(_4ab,_4a9));}}if(_4a5.selector!="time"){_4ab=_4a5.datePattern||_4a8["dateFormat-"+_4a7];if(_4ab){str.push(_4aa(_4ab,_4a9));}}return str.length==1?str[0]:_4a8["dateTimeFormat-"+_4a7].replace(/\{(\d+)\}/g,function(_4ac,key){return str[key];});};dojo.date.locale.regexp=function(_4ad){return dojo.date.locale._parseInfo(_4ad).regexp;};dojo.date.locale._parseInfo=function(_4ae){_4ae=_4ae||{};var _4af=dojo.i18n.normalizeLocale(_4ae.locale),_4b0=dojo.date.locale._getGregorianBundle(_4af),_4b1=_4ae.formatLength||"short",_4b2=_4ae.datePattern||_4b0["dateFormat-"+_4b1],_4b3=_4ae.timePattern||_4b0["timeFormat-"+_4b1],_4b4;if(_4ae.selector=="date"){_4b4=_4b2;}else{if(_4ae.selector=="time"){_4b4=_4b3;}else{_4b4=_4b0["dateTimeFormat-"+_4b1].replace(/\{(\d+)\}/g,function(_4b5,key){return [_4b3,_4b2][key];});}}var _4b6=[],re=_4aa(_4b4,dojo.hitch(this,_4b7,_4b6,_4b0,_4ae));return {regexp:re,tokens:_4b6,bundle:_4b0};};dojo.date.locale.parse=function(_4b8,_4b9){var _4ba=/[\u200E\u200F\u202A\u202E]/g,info=dojo.date.locale._parseInfo(_4b9),_4bb=info.tokens,_4bc=info.bundle,re=new RegExp("^"+info.regexp.replace(_4ba,"")+"$",info.strict?"":"i"),_4bd=re.exec(_4b8&&_4b8.replace(_4ba,""));if(!_4bd){return null;}var _4be=["abbr","wide","narrow"],_4bf=[1970,0,1,0,0,0,0],amPm="",_4c0=dojo.every(_4bd,function(v,i){if(!i){return true;}var _4c1=_4bb[i-1];var l=_4c1.length;switch(_4c1.charAt(0)){case "y":if(l!=2&&_4b9.strict){_4bf[0]=v;}else{if(v<100){v=Number(v);var year=""+new Date().getFullYear(),_4c2=year.substring(0,2)*100,_4c3=Math.min(Number(year.substring(2,4))+20,99),num=(v<_4c3)?_4c2+v:_4c2-100+v;_4bf[0]=num;}else{if(_4b9.strict){return false;}_4bf[0]=v;}}break;case "M":if(l>2){var _4c4=_4bc["months-format-"+_4be[l-3]].concat();if(!_4b9.strict){v=v.replace(".","").toLowerCase();_4c4=dojo.map(_4c4,function(s){return s.replace(".","").toLowerCase();});}v=dojo.indexOf(_4c4,v);if(v==-1){return false;}}else{v--;}_4bf[1]=v;break;case "E":case "e":var days=_4bc["days-format-"+_4be[l-3]].concat();if(!_4b9.strict){v=v.toLowerCase();days=dojo.map(days,function(d){return d.toLowerCase();});}v=dojo.indexOf(days,v);if(v==-1){return false;}break;case "D":_4bf[1]=0;case "d":_4bf[2]=v;break;case "a":var am=_4b9.am||_4bc["dayPeriods-format-wide-am"],pm=_4b9.pm||_4bc["dayPeriods-format-wide-pm"];if(!_4b9.strict){var _4c5=/\./g;v=v.replace(_4c5,"").toLowerCase();am=am.replace(_4c5,"").toLowerCase();pm=pm.replace(_4c5,"").toLowerCase();}if(_4b9.strict&&v!=am&&v!=pm){return false;}amPm=(v==pm)?"p":(v==am)?"a":"";break;case "K":if(v==24){v=0;}case "h":case "H":case "k":if(v>23){return false;}_4bf[3]=v;break;case "m":_4bf[4]=v;break;case "s":_4bf[5]=v;break;case "S":_4bf[6]=v;}return true;});var _4c6=+_4bf[3];if(amPm==="p"&&_4c6<12){_4bf[3]=_4c6+12;}else{if(amPm==="a"&&_4c6==12){_4bf[3]=0;}}var _4c7=new Date(_4bf[0],_4bf[1],_4bf[2],_4bf[3],_4bf[4],_4bf[5],_4bf[6]);if(_4b9.strict){_4c7.setFullYear(_4bf[0]);}var _4c8=_4bb.join(""),_4c9=_4c8.indexOf("d")!=-1,_4ca=_4c8.indexOf("M")!=-1;if(!_4c0||(_4ca&&_4c7.getMonth()>_4bf[1])||(_4c9&&_4c7.getDate()>_4bf[2])){return null;}if((_4ca&&_4c7.getMonth()<_4bf[1])||(_4c9&&_4c7.getDate()<_4bf[2])){_4c7=dojo.date.add(_4c7,"hour",1);}return _4c7;};function _4aa(_4cb,_4cc,_4cd,_4ce){var _4cf=function(x){return x;};_4cc=_4cc||_4cf;_4cd=_4cd||_4cf;_4ce=_4ce||_4cf;var _4d0=_4cb.match(/(''|[^'])+/g),_4d1=_4cb.charAt(0)=="'";dojo.forEach(_4d0,function(_4d2,i){if(!_4d2){_4d0[i]="";}else{_4d0[i]=(_4d1?_4cd:_4cc)(_4d2.replace(/''/g,"'"));_4d1=!_4d1;}});return _4ce(_4d0.join(""));};function _4b7(_4d3,_4d4,_4d5,_4d6){_4d6=dojo.regexp.escapeString(_4d6);if(!_4d5.strict){_4d6=_4d6.replace(" a"," ?a");}return _4d6.replace(/([a-z])\1*/ig,function(_4d7){var s,c=_4d7.charAt(0),l=_4d7.length,p2="",p3="";if(_4d5.strict){if(l>1){p2="0"+"{"+(l-1)+"}";}if(l>2){p3="0"+"{"+(l-2)+"}";}}else{p2="0?";p3="0{0,2}";}switch(c){case "y":s="\\d{2,4}";break;case "M":s=(l>2)?"\\S+?":"1[0-2]|"+p2+"[1-9]";break;case "D":s="[12][0-9][0-9]|3[0-5][0-9]|36[0-6]|"+p3+"[1-9][0-9]|"+p2+"[1-9]";break;case "d":s="3[01]|[12]\\d|"+p2+"[1-9]";break;case "w":s="[1-4][0-9]|5[0-3]|"+p2+"[1-9]";break;case "E":s="\\S+";break;case "h":s="1[0-2]|"+p2+"[1-9]";break;case "k":s="1[01]|"+p2+"\\d";break;case "H":s="1\\d|2[0-3]|"+p2+"\\d";break;case "K":s="1\\d|2[0-4]|"+p2+"[1-9]";break;case "m":case "s":s="[0-5]\\d";break;case "S":s="\\d{"+l+"}";break;case "a":var am=_4d5.am||_4d4["dayPeriods-format-wide-am"],pm=_4d5.pm||_4d4["dayPeriods-format-wide-pm"];s=am+"|"+pm;if(!_4d5.strict){if(am!=am.toLowerCase()){s+="|"+am.toLowerCase();}if(pm!=pm.toLowerCase()){s+="|"+pm.toLowerCase();}if(s.indexOf(".")!=-1){s+="|"+s.replace(/\./g,"");}}s=s.replace(/\./g,"\\.");break;default:s=".*";}if(_4d3){_4d3.push(_4d7);}return "("+s+")";}).replace(/[\xa0 ]/g,"[\\s\\xa0]");};})();(function(){var _4d8=[];dojo.date.locale.addCustomFormats=function(_4d9,_4da){_4d8.push({pkg:_4d9,name:_4da});};dojo.date.locale._getGregorianBundle=function(_4db){var _4dc={};dojo.forEach(_4d8,function(desc){var _4dd=dojo.i18n.getLocalization(desc.pkg,desc.name,_4db);_4dc=dojo.mixin(_4dc,_4dd);},this);return _4dc;};})();dojo.date.locale.addCustomFormats("dojo.cldr","gregorian");dojo.date.locale.getNames=function(item,type,_4de,_4df){var _4e0,_4e1=dojo.date.locale._getGregorianBundle(_4df),_4e2=[item,_4de,type];if(_4de=="standAlone"){var key=_4e2.join("-");_4e0=_4e1[key];if(_4e0[0]==1){_4e0=undefined;}}_4e2[1]="format";return (_4e0||_4e1[_4e2.join("-")]).concat();};dojo.date.locale.isWeekend=function(_4e3,_4e4){var _4e5=dojo.cldr.supplemental.getWeekend(_4e4),day=(_4e3||new Date()).getDay();if(_4e5.end<_4e5.start){_4e5.end+=7;if(day<_4e5.start){day+=7;}}return day>=_4e5.start&&day<=_4e5.end;};dojo.date.locale._getDayOfYear=function(_4e6){return dojo.date.difference(new Date(_4e6.getFullYear(),0,1,_4e6.getHours()),_4e6)+1;};dojo.date.locale._getWeekOfYear=function(_4e7,_4e8){if(arguments.length==1){_4e8=0;}var _4e9=new Date(_4e7.getFullYear(),0,1).getDay(),adj=(_4e9-_4e8+7)%7,week=Math.floor((dojo.date.locale._getDayOfYear(_4e7)+adj-1)/7);if(_4e9==_4e8){week++;}return week;};}if(!dojo._hasResource["dojox.charting.scaler.common"]){dojo._hasResource["dojox.charting.scaler.common"]=true;dojo.provide("dojox.charting.scaler.common");(function(){var eq=function(a,b){return Math.abs(a-b)<=0.000001*(Math.abs(a)+Math.abs(b));};dojo.mixin(dojox.charting.scaler.common,{findString:function(val,text){val=val.toLowerCase();for(var i=0;i<text.length;++i){if(val==text[i]){return true;}}return false;},getNumericLabel:function(_4ea,_4eb,_4ec){var def="";if(dojo.number){def=(_4ec.fixed?dojo.number.format(_4ea,{places:_4eb<0?-_4eb:0}):dojo.number.format(_4ea))||"";}else{def=_4ec.fixed?_4ea.toFixed(_4eb<0?-_4eb:0):_4ea.toString();}if(_4ec.labelFunc){var r=_4ec.labelFunc(def,_4ea,_4eb);if(r){return r;}}if(_4ec.labels){var l=_4ec.labels,lo=0,hi=l.length;while(lo<hi){var mid=Math.floor((lo+hi)/2),val=l[mid].value;if(val<_4ea){lo=mid+1;}else{hi=mid;}}if(lo<l.length&&eq(l[lo].value,_4ea)){return l[lo].text;}--lo;if(lo>=0&&lo<l.length&&eq(l[lo].value,_4ea)){return l[lo].text;}lo+=2;if(lo<l.length&&eq(l[lo].value,_4ea)){return l[lo].text;}}return def;}});})();}if(!dojo._hasResource["dojox.charting.scaler.linear"]){dojo._hasResource["dojox.charting.scaler.linear"]=true;dojo.provide("dojox.charting.scaler.linear");(function(){var _4ed=3,dc=dojox.charting,dcs=dc.scaler,dcsc=dcs.common,_4ee=dcsc.findString,_4ef=dcsc.getNumericLabel;var _4f0=function(min,max,_4f1,_4f2,_4f3,_4f4,span){_4f1=dojo.delegate(_4f1);if(!_4f2){if(_4f1.fixUpper=="major"){_4f1.fixUpper="minor";}if(_4f1.fixLower=="major"){_4f1.fixLower="minor";}}if(!_4f3){if(_4f1.fixUpper=="minor"){_4f1.fixUpper="micro";}if(_4f1.fixLower=="minor"){_4f1.fixLower="micro";}}if(!_4f4){if(_4f1.fixUpper=="micro"){_4f1.fixUpper="none";}if(_4f1.fixLower=="micro"){_4f1.fixLower="none";}}var _4f5=_4ee(_4f1.fixLower,["major"])?Math.floor(_4f1.min/_4f2)*_4f2:_4ee(_4f1.fixLower,["minor"])?Math.floor(_4f1.min/_4f3)*_4f3:_4ee(_4f1.fixLower,["micro"])?Math.floor(_4f1.min/_4f4)*_4f4:_4f1.min,_4f6=_4ee(_4f1.fixUpper,["major"])?Math.ceil(_4f1.max/_4f2)*_4f2:_4ee(_4f1.fixUpper,["minor"])?Math.ceil(_4f1.max/_4f3)*_4f3:_4ee(_4f1.fixUpper,["micro"])?Math.ceil(_4f1.max/_4f4)*_4f4:_4f1.max;if(_4f1.useMin){min=_4f5;}if(_4f1.useMax){max=_4f6;}var _4f7=(!_4f2||_4f1.useMin&&_4ee(_4f1.fixLower,["major"]))?min:Math.ceil(min/_4f2)*_4f2,_4f8=(!_4f3||_4f1.useMin&&_4ee(_4f1.fixLower,["major","minor"]))?min:Math.ceil(min/_4f3)*_4f3,_4f9=(!_4f4||_4f1.useMin&&_4ee(_4f1.fixLower,["major","minor","micro"]))?min:Math.ceil(min/_4f4)*_4f4,_4fa=!_4f2?0:(_4f1.useMax&&_4ee(_4f1.fixUpper,["major"])?Math.round((max-_4f7)/_4f2):Math.floor((max-_4f7)/_4f2))+1,_4fb=!_4f3?0:(_4f1.useMax&&_4ee(_4f1.fixUpper,["major","minor"])?Math.round((max-_4f8)/_4f3):Math.floor((max-_4f8)/_4f3))+1,_4fc=!_4f4?0:(_4f1.useMax&&_4ee(_4f1.fixUpper,["major","minor","micro"])?Math.round((max-_4f9)/_4f4):Math.floor((max-_4f9)/_4f4))+1,_4fd=_4f3?Math.round(_4f2/_4f3):0,_4fe=_4f4?Math.round(_4f3/_4f4):0,_4ff=_4f2?Math.floor(Math.log(_4f2)/Math.LN10):0,_500=_4f3?Math.floor(Math.log(_4f3)/Math.LN10):0,_501=span/(max-min);if(!isFinite(_501)){_501=1;}return {bounds:{lower:_4f5,upper:_4f6,from:min,to:max,scale:_501,span:span},major:{tick:_4f2,start:_4f7,count:_4fa,prec:_4ff},minor:{tick:_4f3,start:_4f8,count:_4fb,prec:_500},micro:{tick:_4f4,start:_4f9,count:_4fc,prec:0},minorPerMajor:_4fd,microPerMinor:_4fe,scaler:dcs.linear};};dojo.mixin(dojox.charting.scaler.linear,{buildScaler:function(min,max,span,_502){var h={fixUpper:"none",fixLower:"none",natural:false};if(_502){if("fixUpper" in _502){h.fixUpper=String(_502.fixUpper);}if("fixLower" in _502){h.fixLower=String(_502.fixLower);}if("natural" in _502){h.natural=Boolean(_502.natural);}}if("min" in _502){min=_502.min;}if("max" in _502){max=_502.max;}if(_502.includeZero){if(min>0){min=0;}if(max<0){max=0;}}h.min=min;h.useMin=true;h.max=max;h.useMax=true;if("from" in _502){min=_502.from;h.useMin=false;}if("to" in _502){max=_502.to;h.useMax=false;}if(max<=min){return _4f0(min,max,h,0,0,0,span);}var mag=Math.floor(Math.log(max-min)/Math.LN10),_503=_502&&("majorTickStep" in _502)?_502.majorTickStep:Math.pow(10,mag),_504=0,_505=0,_506;if(_502&&("minorTickStep" in _502)){_504=_502.minorTickStep;}else{do{_504=_503/10;if(!h.natural||_504>0.9){_506=_4f0(min,max,h,_503,_504,0,span);if(_506.bounds.scale*_506.minor.tick>_4ed){break;}}_504=_503/5;if(!h.natural||_504>0.9){_506=_4f0(min,max,h,_503,_504,0,span);if(_506.bounds.scale*_506.minor.tick>_4ed){break;}}_504=_503/2;if(!h.natural||_504>0.9){_506=_4f0(min,max,h,_503,_504,0,span);if(_506.bounds.scale*_506.minor.tick>_4ed){break;}}return _4f0(min,max,h,_503,0,0,span);}while(false);}if(_502&&("microTickStep" in _502)){_505=_502.microTickStep;_506=_4f0(min,max,h,_503,_504,_505,span);}else{do{_505=_504/10;if(!h.natural||_505>0.9){_506=_4f0(min,max,h,_503,_504,_505,span);if(_506.bounds.scale*_506.micro.tick>_4ed){break;}}_505=_504/5;if(!h.natural||_505>0.9){_506=_4f0(min,max,h,_503,_504,_505,span);if(_506.bounds.scale*_506.micro.tick>_4ed){break;}}_505=_504/2;if(!h.natural||_505>0.9){_506=_4f0(min,max,h,_503,_504,_505,span);if(_506.bounds.scale*_506.micro.tick>_4ed){break;}}_505=0;}while(false);}return _505?_506:_4f0(min,max,h,_503,_504,0,span);},buildTicks:function(_507,_508){var step,next,tick,_509=_507.major.start,_50a=_507.minor.start,_50b=_507.micro.start;if(_508.microTicks&&_507.micro.tick){step=_507.micro.tick,next=_50b;}else{if(_508.minorTicks&&_507.minor.tick){step=_507.minor.tick,next=_50a;}else{if(_507.major.tick){step=_507.major.tick,next=_509;}else{return null;}}}var _50c=1/_507.bounds.scale;if(_507.bounds.to<=_507.bounds.from||isNaN(_50c)||!isFinite(_50c)||step<=0||isNaN(step)||!isFinite(step)){return null;}var _50d=[],_50e=[],_50f=[];while(next<=_507.bounds.to+_50c){if(Math.abs(_509-next)<step/2){tick={value:_509};if(_508.majorLabels){tick.label=_4ef(_509,_507.major.prec,_508);}_50d.push(tick);_509+=_507.major.tick;_50a+=_507.minor.tick;_50b+=_507.micro.tick;}else{if(Math.abs(_50a-next)<step/2){if(_508.minorTicks){tick={value:_50a};if(_508.minorLabels&&(_507.minMinorStep<=_507.minor.tick*_507.bounds.scale)){tick.label=_4ef(_50a,_507.minor.prec,_508);}_50e.push(tick);}_50a+=_507.minor.tick;_50b+=_507.micro.tick;}else{if(_508.microTicks){_50f.push({value:_50b});}_50b+=_507.micro.tick;}}next+=step;}return {major:_50d,minor:_50e,micro:_50f};},getTransformerFromModel:function(_510){var _511=_510.bounds.from,_512=_510.bounds.scale;return function(x){return (x-_511)*_512;};},getTransformerFromPlot:function(_513){var _514=_513.bounds.from,_515=_513.bounds.scale;return function(x){return x/_515+_514;};}});})();}if(!dojo._hasResource["dojox.charting.axis2d.common"]){dojo._hasResource["dojox.charting.axis2d.common"]=true;dojo.provide("dojox.charting.axis2d.common");(function(){var g=dojox.gfx;var _516=function(s){s.marginLeft="0px";s.marginTop="0px";s.marginRight="0px";s.marginBottom="0px";s.paddingLeft="0px";s.paddingTop="0px";s.paddingRight="0px";s.paddingBottom="0px";s.borderLeftWidth="0px";s.borderTopWidth="0px";s.borderRightWidth="0px";s.borderBottomWidth="0px";};var _517=function(n){if(n["getBoundingClientRect"]){var bcr=n.getBoundingClientRect();return bcr.width||(bcr.right-bcr.left);}else{return dojo.marginBox(n).w;}};dojo.mixin(dojox.charting.axis2d.common,{createText:{gfx:function(_518,_519,x,y,_51a,text,font,_51b){return _519.createText({x:x,y:y,text:text,align:_51a}).setFont(font).setFill(_51b);},html:function(_51c,_51d,x,y,_51e,text,font,_51f,_520){var p=dojo.doc.createElement("div"),s=p.style,_521;_516(s);s.font=font;p.innerHTML=String(text).replace(/\s/g,"&nbsp;");s.color=_51f;s.position="absolute";s.left="-10000px";dojo.body().appendChild(p);var size=g.normalizedLength(g.splitFontString(font).size);if(!_520){_521=_517(p);}dojo.body().removeChild(p);s.position="relative";if(_520){s.width=_520+"px";switch(_51e){case "middle":s.textAlign="center";s.left=(x-_520/2)+"px";break;case "end":s.textAlign="right";s.left=(x-_520)+"px";break;default:s.left=x+"px";s.textAlign="left";break;}}else{switch(_51e){case "middle":s.left=Math.floor(x-_521/2)+"px";break;case "end":s.left=Math.floor(x-_521)+"px";break;default:s.left=Math.floor(x)+"px";break;}}s.top=Math.floor(y-size)+"px";s.whiteSpace="nowrap";var wrap=dojo.doc.createElement("div"),w=wrap.style;_516(w);w.width="0px";w.height="0px";wrap.appendChild(p);_51c.node.insertBefore(wrap,_51c.node.firstChild);return wrap;}}});})();}if(!dojo._hasResource["dojox.charting.Element"]){dojo._hasResource["dojox.charting.Element"]=true;dojo.provide("dojox.charting.Element");dojo.declare("dojox.charting.Element",null,{chart:null,group:null,htmlElements:null,dirty:true,constructor:function(_522){this.chart=_522;this.group=null;this.htmlElements=[];this.dirty=true;this.trailingSymbol="...";this._events=[];},createGroup:function(_523){if(!_523){_523=this.chart.surface;}if(!this.group){this.group=_523.createGroup();}return this;},purgeGroup:function(){this.destroyHtmlElements();if(this.group){this.group.clear();this.group.removeShape();this.group=null;}this.dirty=true;if(this._events.length){dojo.forEach(this._events,function(item){item.shape.disconnect(item.handle);});this._events=[];}return this;},cleanGroup:function(_524){this.destroyHtmlElements();if(!_524){_524=this.chart.surface;}if(this.group){this.group.clear();}else{this.group=_524.createGroup();}this.dirty=true;return this;},destroyHtmlElements:function(){if(this.htmlElements.length){dojo.forEach(this.htmlElements,dojo.destroy);this.htmlElements=[];}},destroy:function(){this.purgeGroup();},getTextWidth:function(s,font){return dojox.gfx._base._getTextBox(s,{font:font}).w||0;},getTextWithLimitLength:function(s,font,_525,_526){if(!s||s.length<=0){return {text:"",truncated:_526||false};}if(!_525||_525<=0){return {text:s,truncated:_526||false};}var _527=2,_528=0.618,_529=s.substring(0,1)+this.trailingSymbol,_52a=this.getTextWidth(_529,font);if(_525<=_52a){return {text:_529,truncated:true};}var _52b=this.getTextWidth(s,font);if(_52b<=_525){return {text:s,truncated:_526||false};}else{var _52c=0,end=s.length;while(_52c<end){if(end-_52c<=_527){while(this.getTextWidth(s.substring(0,_52c)+this.trailingSymbol,font)>_525){_52c-=1;}return {text:(s.substring(0,_52c)+this.trailingSymbol),truncated:true};}var _52d=_52c+Math.round((end-_52c)*_528),_52e=this.getTextWidth(s.substring(0,_52d),font);if(_52e<_525){_52c=_52d;end=end;}else{_52c=_52c;end=_52d;}}}},getTextWithLimitCharCount:function(s,font,_52f,_530){if(!s||s.length<=0){return {text:"",truncated:_530||false};}if(!_52f||_52f<=0||s.length<=_52f){return {text:s,truncated:_530||false};}return {text:s.substring(0,_52f)+this.trailingSymbol,truncated:true};},_plotFill:function(fill,dim,_531){if(!fill||!fill.type||!fill.space){return fill;}var _532=fill.space;switch(fill.type){case "linear":if(_532==="plot"||_532==="shapeX"||_532==="shapeY"){fill=dojox.gfx.makeParameters(dojox.gfx.defaultLinearGradient,fill);fill.space=_532;if(_532==="plot"||_532==="shapeX"){var span=dim.height-_531.t-_531.b;fill.y1=_531.t+span*fill.y1/100;fill.y2=_531.t+span*fill.y2/100;}if(_532==="plot"||_532==="shapeY"){var span=dim.width-_531.l-_531.r;fill.x1=_531.l+span*fill.x1/100;fill.x2=_531.l+span*fill.x2/100;}}break;case "radial":if(_532==="plot"){fill=dojox.gfx.makeParameters(dojox.gfx.defaultRadialGradient,fill);fill.space=_532;var _533=dim.width-_531.l-_531.r,_534=dim.height-_531.t-_531.b;fill.cx=_531.l+_533*fill.cx/100;fill.cy=_531.t+_534*fill.cy/100;fill.r=fill.r*Math.sqrt(_533*_533+_534*_534)/200;}break;case "pattern":if(_532==="plot"||_532==="shapeX"||_532==="shapeY"){fill=dojox.gfx.makeParameters(dojox.gfx.defaultPattern,fill);fill.space=_532;if(_532==="plot"||_532==="shapeX"){var span=dim.height-_531.t-_531.b;fill.y=_531.t+span*fill.y/100;fill.height=span*fill.height/100;}if(_532==="plot"||_532==="shapeY"){var span=dim.width-_531.l-_531.r;fill.x=_531.l+span*fill.x/100;fill.width=span*fill.width/100;}}break;}return fill;},_shapeFill:function(fill,bbox){if(!fill||!fill.space){return fill;}var _535=fill.space;switch(fill.type){case "linear":if(_535==="shape"||_535==="shapeX"||_535==="shapeY"){fill=dojox.gfx.makeParameters(dojox.gfx.defaultLinearGradient,fill);fill.space=_535;if(_535==="shape"||_535==="shapeX"){var span=bbox.width;fill.x1=bbox.x+span*fill.x1/100;fill.x2=bbox.x+span*fill.x2/100;}if(_535==="shape"||_535==="shapeY"){var span=bbox.height;fill.y1=bbox.y+span*fill.y1/100;fill.y2=bbox.y+span*fill.y2/100;}}break;case "radial":if(_535==="shape"){fill=dojox.gfx.makeParameters(dojox.gfx.defaultRadialGradient,fill);fill.space=_535;fill.cx=bbox.x+bbox.width/2;fill.cy=bbox.y+bbox.height/2;fill.r=fill.r*bbox.width/200;}break;case "pattern":if(_535==="shape"||_535==="shapeX"||_535==="shapeY"){fill=dojox.gfx.makeParameters(dojox.gfx.defaultPattern,fill);fill.space=_535;if(_535==="shape"||_535==="shapeX"){var span=bbox.width;fill.x=bbox.x+span*fill.x/100;fill.width=span*fill.width/100;}if(_535==="shape"||_535==="shapeY"){var span=bbox.height;fill.y=bbox.y+span*fill.y/100;fill.height=span*fill.height/100;}}break;}return fill;},_pseudoRadialFill:function(fill,_536,_537,_538,end){if(!fill||fill.type!=="radial"||fill.space!=="shape"){return fill;}var _539=fill.space;fill=dojox.gfx.makeParameters(dojox.gfx.defaultRadialGradient,fill);fill.space=_539;if(arguments.length<4){fill.cx=_536.x;fill.cy=_536.y;fill.r=fill.r*_537/100;return fill;}var _53a=arguments.length<5?_538:(end+_538)/2;return {type:"linear",x1:_536.x,y1:_536.y,x2:_536.x+fill.r*_537*Math.cos(_53a)/100,y2:_536.y+fill.r*_537*Math.sin(_53a)/100,colors:fill.colors};return fill;}});}if(!dojo._hasResource["dojox.charting.axis2d.Base"]){dojo._hasResource["dojox.charting.axis2d.Base"]=true;dojo.provide("dojox.charting.axis2d.Base");dojo.declare("dojox.charting.axis2d.Base",dojox.charting.Element,{constructor:function(_53b,_53c){this.vertical=_53c&&_53c.vertical;},clear:function(){return this;},initialized:function(){return false;},calculate:function(min,max,span){return this;},getScaler:function(){return null;},getTicks:function(){return null;},getOffsets:function(){return {l:0,r:0,t:0,b:0};},render:function(dim,_53d){this.dirty=false;return this;}});}if(!dojo._hasResource["dojox.lang.functional.lambda"]){dojo._hasResource["dojox.lang.functional.lambda"]=true;dojo.provide("dojox.lang.functional.lambda");(function(){var df=dojox.lang.functional,_53e={};var _53f="ab".split(/a*/).length>1?String.prototype.split:function(sep){var r=this.split.call(this,sep),m=sep.exec(this);if(m&&m.index==0){r.unshift("");}return r;};var _540=function(s){var args=[],_541=_53f.call(s,/\s*->\s*/m);if(_541.length>1){while(_541.length){s=_541.pop();args=_541.pop().split(/\s*,\s*|\s+/m);if(_541.length){_541.push("(function("+args+"){return ("+s+")})");}}}else{if(s.match(/\b_\b/)){args=["_"];}else{var l=s.match(/^\s*(?:[+*\/%&|\^\.=<>]|!=)/m),r=s.match(/[+\-*\/%&|\^\.=<>!]\s*$/m);if(l||r){if(l){args.push("$1");s="$1"+s;}if(r){args.push("$2");s=s+"$2";}}else{var vars=s.replace(/(?:\b[A-Z]|\.[a-zA-Z_$])[a-zA-Z_$\d]*|[a-zA-Z_$][a-zA-Z_$\d]*:|this|true|false|null|undefined|typeof|instanceof|in|delete|new|void|arguments|decodeURI|decodeURIComponent|encodeURI|encodeURIComponent|escape|eval|isFinite|isNaN|parseFloat|parseInt|unescape|dojo|dijit|dojox|window|document|'(?:[^'\\]|\\.)*'|"(?:[^"\\]|\\.)*"/g,"").match(/([a-z_$][a-z_$\d]*)/gi)||[],t={};dojo.forEach(vars,function(v){if(!(v in t)){args.push(v);t[v]=1;}});}}}return {args:args,body:s};};var _542=function(a){return a.length?function(){var i=a.length-1,x=df.lambda(a[i]).apply(this,arguments);for(--i;i>=0;--i){x=df.lambda(a[i]).call(this,x);}return x;}:function(x){return x;};};dojo.mixin(df,{rawLambda:function(s){return _540(s);},buildLambda:function(s){s=_540(s);return "function("+s.args.join(",")+"){return ("+s.body+");}";},lambda:function(s){if(typeof s=="function"){return s;}if(s instanceof Array){return _542(s);}if(s in _53e){return _53e[s];}s=_540(s);return _53e[s]=new Function(s.args,"return ("+s.body+");");},clearLambdaCache:function(){_53e={};}});})();}if(!dojo._hasResource["dojox.lang.functional.array"]){dojo._hasResource["dojox.lang.functional.array"]=true;dojo.provide("dojox.lang.functional.array");(function(){var d=dojo,df=dojox.lang.functional,_543={};d.mixin(df,{filter:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);var t=[],v,i,n;if(d.isArray(a)){for(i=0,n=a.length;i<n;++i){v=a[i];if(f.call(o,v,i,a)){t.push(v);}}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){for(i=0;a.hasNext();){v=a.next();if(f.call(o,v,i++,a)){t.push(v);}}}else{for(i in a){if(!(i in _543)){v=a[i];if(f.call(o,v,i,a)){t.push(v);}}}}}return t;},forEach:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);var i,n;if(d.isArray(a)){for(i=0,n=a.length;i<n;f.call(o,a[i],i,a),++i){}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){for(i=0;a.hasNext();f.call(o,a.next(),i++,a)){}}else{for(i in a){if(!(i in _543)){f.call(o,a[i],i,a);}}}}return o;},map:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);var t,n,i;if(d.isArray(a)){t=new Array(n=a.length);for(i=0;i<n;t[i]=f.call(o,a[i],i,a),++i){}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){t=[];for(i=0;a.hasNext();t.push(f.call(o,a.next(),i++,a))){}}else{t=[];for(i in a){if(!(i in _543)){t.push(f.call(o,a[i],i,a));}}}}return t;},every:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);var i,n;if(d.isArray(a)){for(i=0,n=a.length;i<n;++i){if(!f.call(o,a[i],i,a)){return false;}}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){for(i=0;a.hasNext();){if(!f.call(o,a.next(),i++,a)){return false;}}}else{for(i in a){if(!(i in _543)){if(!f.call(o,a[i],i,a)){return false;}}}}}return true;},some:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);var i,n;if(d.isArray(a)){for(i=0,n=a.length;i<n;++i){if(f.call(o,a[i],i,a)){return true;}}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){for(i=0;a.hasNext();){if(f.call(o,a.next(),i++,a)){return true;}}}else{for(i in a){if(!(i in _543)){if(f.call(o,a[i],i,a)){return true;}}}}}return false;}});})();}if(!dojo._hasResource["dojox.lang.functional.object"]){dojo._hasResource["dojox.lang.functional.object"]=true;dojo.provide("dojox.lang.functional.object");(function(){var d=dojo,df=dojox.lang.functional,_544={};d.mixin(df,{keys:function(obj){var t=[];for(var i in obj){if(!(i in _544)){t.push(i);}}return t;},values:function(obj){var t=[];for(var i in obj){if(!(i in _544)){t.push(obj[i]);}}return t;},filterIn:function(obj,f,o){o=o||d.global;f=df.lambda(f);var t={},v,i;for(i in obj){if(!(i in _544)){v=obj[i];if(f.call(o,v,i,obj)){t[i]=v;}}}return t;},forIn:function(obj,f,o){o=o||d.global;f=df.lambda(f);for(var i in obj){if(!(i in _544)){f.call(o,obj[i],i,obj);}}return o;},mapIn:function(obj,f,o){o=o||d.global;f=df.lambda(f);var t={},i;for(i in obj){if(!(i in _544)){t[i]=f.call(o,obj[i],i,obj);}}return t;}});})();}if(!dojo._hasResource["dojox.lang.functional"]){dojo._hasResource["dojox.lang.functional"]=true;dojo.provide("dojox.lang.functional");}if(!dojo._hasResource["dojox.lang.utils"]){dojo._hasResource["dojox.lang.utils"]=true;dojo.provide("dojox.lang.utils");(function(){var _545={},du=dojox.lang.utils,opts=Object.prototype.toString;var _546=function(o){if(o){switch(opts.call(o)){case "[object Array]":return o.slice(0);case "[object Object]":return dojo.delegate(o);}}return o;};dojo.mixin(du,{coerceType:function(_547,_548){switch(typeof _547){case "number":return Number(eval("("+_548+")"));case "string":return String(_548);case "boolean":return Boolean(eval("("+_548+")"));}return eval("("+_548+")");},updateWithObject:function(_549,_54a,conv){if(!_54a){return _549;}for(var x in _549){if(x in _54a&&!(x in _545)){var t=_549[x];if(t&&typeof t=="object"){du.updateWithObject(t,_54a[x],conv);}else{_549[x]=conv?du.coerceType(t,_54a[x]):_546(_54a[x]);}}}return _549;},updateWithPattern:function(_54b,_54c,_54d,conv){if(!_54c||!_54d){return _54b;}for(var x in _54d){if(x in _54c&&!(x in _545)){_54b[x]=conv?du.coerceType(_54d[x],_54c[x]):_546(_54c[x]);}}return _54b;},merge:function(_54e,_54f){if(_54f){var _550=opts.call(_54e),_551=opts.call(_54f),t,i,l,m;switch(_551){case "[object Array]":if(_551==_550){t=new Array(Math.max(_54e.length,_54f.length));for(i=0,l=t.length;i<l;++i){t[i]=du.merge(_54e[i],_54f[i]);}return t;}return _54f.slice(0);case "[object Object]":if(_551==_550&&_54e){t=dojo.delegate(_54e);for(i in _54f){if(i in _54e){l=_54e[i];m=_54f[i];if(m!==l){t[i]=du.merge(l,m);}}else{t[i]=dojo.clone(_54f[i]);}}return t;}return dojo.clone(_54f);}}return _54f;}});})();}if(!dojo._hasResource["dojox.charting.axis2d.Invisible"]){dojo._hasResource["dojox.charting.axis2d.Invisible"]=true;dojo.provide("dojox.charting.axis2d.Invisible");(function(){var dc=dojox.charting,df=dojox.lang.functional,du=dojox.lang.utils,g=dojox.gfx,lin=dc.scaler.linear,_552=du.merge,_553=4,_554=45;dojo.declare("dojox.charting.axis2d.Invisible",dojox.charting.axis2d.Base,{defaultParams:{vertical:false,fixUpper:"none",fixLower:"none",natural:false,leftBottom:true,includeZero:false,fixed:true,majorLabels:true,minorTicks:true,minorLabels:true,microTicks:false,rotation:0},optionalParams:{min:0,max:1,from:0,to:1,majorTickStep:4,minorTickStep:2,microTickStep:1,labels:[],labelFunc:null,maxLabelSize:0,maxLabelCharCount:0,trailingSymbol:null},constructor:function(_555,_556){this.opt=dojo.clone(this.defaultParams);du.updateWithObject(this.opt,_556);du.updateWithPattern(this.opt,_556,this.optionalParams);},dependOnData:function(){return !("min" in this.opt)||!("max" in this.opt);},clear:function(){delete this.scaler;delete this.ticks;this.dirty=true;return this;},initialized:function(){return "scaler" in this&&!(this.dirty&&this.dependOnData());},setWindow:function(_557,_558){this.scale=_557;this.offset=_558;return this.clear();},getWindowScale:function(){return "scale" in this?this.scale:1;},getWindowOffset:function(){return "offset" in this?this.offset:0;},_groupLabelWidth:function(_559,font,_55a){if(!_559.length){return 0;}if(dojo.isObject(_559[0])){_559=df.map(_559,function(_55b){return _55b.text;});}if(_55a){_559=df.map(_559,function(_55c){return dojo.trim(_55c).length==0?"":_55c.substring(0,_55a)+this.trailingSymbol;},this);}var s=_559.join("<br>");return dojox.gfx._base._getTextBox(s,{font:font}).w||0;},calculate:function(min,max,span,_55d){if(this.initialized()){return this;}var o=this.opt;this.labels="labels" in o?o.labels:_55d;this.scaler=lin.buildScaler(min,max,span,o);var tsb=this.scaler.bounds;if("scale" in this){o.from=tsb.lower+this.offset;o.to=(tsb.upper-tsb.lower)/this.scale+o.from;if(!isFinite(o.from)||isNaN(o.from)||!isFinite(o.to)||isNaN(o.to)||o.to-o.from>=tsb.upper-tsb.lower){delete o.from;delete o.to;delete this.scale;delete this.offset;}else{if(o.from<tsb.lower){o.to+=tsb.lower-o.from;o.from=tsb.lower;}else{if(o.to>tsb.upper){o.from+=tsb.upper-o.to;o.to=tsb.upper;}}this.offset=o.from-tsb.lower;}this.scaler=lin.buildScaler(min,max,span,o);tsb=this.scaler.bounds;if(this.scale==1&&this.offset==0){delete this.scale;delete this.offset;}}var ta=this.chart.theme.axis,_55e=0,_55f=o.rotation%360,_560=o.font||(ta.majorTick&&ta.majorTick.font)||(ta.tick&&ta.tick.font),size=_560?g.normalizedLength(g.splitFontString(_560).size):0,cosr=Math.abs(Math.cos(_55f*Math.PI/180)),sinr=Math.abs(Math.sin(_55f*Math.PI/180));if(_55f<0){_55f+=360;}if(size){if(this.vertical?_55f!=0&&_55f!=180:_55f!=90&&_55f!=270){if(this.labels){_55e=this._groupLabelWidth(this.labels,_560,o.maxLabelCharCount);}else{var _561=Math.ceil(Math.log(Math.max(Math.abs(tsb.from),Math.abs(tsb.to)))/Math.LN10),t=[];if(tsb.from<0||tsb.to<0){t.push("-");}t.push(dojo.string.rep("9",_561));var _562=Math.floor(Math.log(tsb.to-tsb.from)/Math.LN10);if(_562>0){t.push(".");t.push(dojo.string.rep("9",_562));}_55e=dojox.gfx._base._getTextBox(t.join(""),{font:_560}).w;}_55e=o.maxLabelSize?Math.min(o.maxLabelSize,_55e):_55e;}else{_55e=size;}switch(_55f){case 0:case 90:case 180:case 270:break;default:var gap1=Math.sqrt(_55e*_55e+size*size),gap2=this.vertical?size*cosr+_55e*sinr:_55e*cosr+size*sinr;_55e=Math.min(gap1,gap2);break;}}this.scaler.minMinorStep=_55e+_553;this.ticks=lin.buildTicks(this.scaler,o);return this;},getScaler:function(){return this.scaler;},getTicks:function(){return this.ticks;}});})();}if(!dojo._hasResource["dojo.colors"]){dojo._hasResource["dojo.colors"]=true;dojo.provide("dojo.colors");dojo.getObject("colors",true,dojo);(function(){var _563=function(m1,m2,h){if(h<0){++h;}if(h>1){--h;}var h6=6*h;if(h6<1){return m1+(m2-m1)*h6;}if(2*h<1){return m2;}if(3*h<2){return m1+(m2-m1)*(2/3-h)*6;}return m1;};dojo.colorFromRgb=function(_564,obj){var m=_564.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(m){var c=m[2].split(/\s*,\s*/),l=c.length,t=m[1],a;if((t=="rgb"&&l==3)||(t=="rgba"&&l==4)){var r=c[0];if(r.charAt(r.length-1)=="%"){a=dojo.map(c,function(x){return parseFloat(x)*2.56;});if(l==4){a[3]=c[3];}return dojo.colorFromArray(a,obj);}return dojo.colorFromArray(c,obj);}if((t=="hsl"&&l==3)||(t=="hsla"&&l==4)){var H=((parseFloat(c[0])%360)+360)%360/360,S=parseFloat(c[1])/100,L=parseFloat(c[2])/100,m2=L<=0.5?L*(S+1):L+S-L*S,m1=2*L-m2;a=[_563(m1,m2,H+1/3)*256,_563(m1,m2,H)*256,_563(m1,m2,H-1/3)*256,1];if(l==4){a[3]=c[3];}return dojo.colorFromArray(a,obj);}}return null;};var _565=function(c,low,high){c=Number(c);return isNaN(c)?high:c<low?low:c>high?high:c;};dojo.Color.prototype.sanitize=function(){var t=this;t.r=Math.round(_565(t.r,0,255));t.g=Math.round(_565(t.g,0,255));t.b=Math.round(_565(t.b,0,255));t.a=_565(t.a,0,1);return this;};})();dojo.colors.makeGrey=function(g,a){return dojo.colorFromArray([g,g,g,a]);};dojo.mixin(dojo.Color.named,{aliceblue:[240,248,255],antiquewhite:[250,235,215],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],blanchedalmond:[255,235,205],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],oldlace:[253,245,230],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],thistle:[216,191,216],tomato:[255,99,71],transparent:[0,0,0,0],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],whitesmoke:[245,245,245],yellowgreen:[154,205,50]});}if(!dojo._hasResource["dojox.charting.axis2d.Default"]){dojo._hasResource["dojox.charting.axis2d.Default"]=true;dojo.provide("dojox.charting.axis2d.Default");(function(){var dc=dojox.charting,du=dojox.lang.utils,g=dojox.gfx,lin=dc.scaler.linear,_566=4,_567=45;dojo.declare("dojox.charting.axis2d.Default",dojox.charting.axis2d.Invisible,{defaultParams:{vertical:false,fixUpper:"none",fixLower:"none",natural:false,leftBottom:true,includeZero:false,fixed:true,majorLabels:true,minorTicks:true,minorLabels:true,microTicks:false,rotation:0,htmlLabels:true},optionalParams:{min:0,max:1,from:0,to:1,majorTickStep:4,minorTickStep:2,microTickStep:1,labels:[],labelFunc:null,maxLabelSize:0,maxLabelCharCount:0,trailingSymbol:null,stroke:{},majorTick:{},minorTick:{},microTick:{},tick:{},font:"",fontColor:"",title:"",titleGap:0,titleFont:"",titleFontColor:"",titleOrientation:""},constructor:function(_568,_569){this.opt=dojo.clone(this.defaultParams);du.updateWithObject(this.opt,_569);du.updateWithPattern(this.opt,_569,this.optionalParams);},getOffsets:function(){var s=this.scaler,_56a={l:0,r:0,t:0,b:0};if(!s){return _56a;}var o=this.opt,_56b=0,a,b,c,d,gl=dc.scaler.common.getNumericLabel,_56c=0,ma=s.major,mi=s.minor,ta=this.chart.theme.axis,_56d=o.font||(ta.majorTick&&ta.majorTick.font)||(ta.tick&&ta.tick.font),_56e=o.titleFont||(ta.tick&&ta.tick.titleFont),_56f=(o.titleGap==0)?0:o.titleGap||(ta.tick&&ta.tick.titleGap)||15,_570=this.chart.theme.getTick("major",o),_571=this.chart.theme.getTick("minor",o),size=_56d?g.normalizedLength(g.splitFontString(_56d).size):0,_572=_56e?g.normalizedLength(g.splitFontString(_56e).size):0,_573=o.rotation%360,_574=o.leftBottom,cosr=Math.abs(Math.cos(_573*Math.PI/180)),sinr=Math.abs(Math.sin(_573*Math.PI/180));this.trailingSymbol=(o.trailingSymbol===undefined||o.trailingSymbol===null)?this.trailingSymbol:o.trailingSymbol;if(_573<0){_573+=360;}if(size){if(this.labels){_56b=this._groupLabelWidth(this.labels,_56d,o.maxLabelCharCount);}else{_56b=this._groupLabelWidth([gl(ma.start,ma.prec,o),gl(ma.start+ma.count*ma.tick,ma.prec,o),gl(mi.start,mi.prec,o),gl(mi.start+mi.count*mi.tick,mi.prec,o)],_56d,o.maxLabelCharCount);}_56b=o.maxLabelSize?Math.min(o.maxLabelSize,_56b):_56b;if(this.vertical){var side=_574?"l":"r";switch(_573){case 0:case 180:_56a[side]=_56b;_56a.t=_56a.b=size/2;break;case 90:case 270:_56a[side]=size;_56a.t=_56a.b=_56b/2;break;default:if(_573<=_567||(180<_573&&_573<=(180+_567))){_56a[side]=size*sinr/2+_56b*cosr;_56a[_574?"t":"b"]=size*cosr/2+_56b*sinr;_56a[_574?"b":"t"]=size*cosr/2;}else{if(_573>(360-_567)||(180>_573&&_573>(180-_567))){_56a[side]=size*sinr/2+_56b*cosr;_56a[_574?"b":"t"]=size*cosr/2+_56b*sinr;_56a[_574?"t":"b"]=size*cosr/2;}else{if(_573<90||(180<_573&&_573<270)){_56a[side]=size*sinr+_56b*cosr;_56a[_574?"t":"b"]=size*cosr+_56b*sinr;}else{_56a[side]=size*sinr+_56b*cosr;_56a[_574?"b":"t"]=size*cosr+_56b*sinr;}}}break;}_56a[side]+=_566+Math.max(_570.length,_571.length)+(o.title?(_572+_56f):0);}else{var side=_574?"b":"t";switch(_573){case 0:case 180:_56a[side]=size;_56a.l=_56a.r=_56b/2;break;case 90:case 270:_56a[side]=_56b;_56a.l=_56a.r=size/2;break;default:if((90-_567)<=_573&&_573<=90||(270-_567)<=_573&&_573<=270){_56a[side]=size*sinr/2+_56b*cosr;_56a[_574?"r":"l"]=size*cosr/2+_56b*sinr;_56a[_574?"l":"r"]=size*cosr/2;}else{if(90<=_573&&_573<=(90+_567)||270<=_573&&_573<=(270+_567)){_56a[side]=size*sinr/2+_56b*cosr;_56a[_574?"l":"r"]=size*cosr/2+_56b*sinr;_56a[_574?"r":"l"]=size*cosr/2;}else{if(_573<_567||(180<_573&&_573<(180-_567))){_56a[side]=size*sinr+_56b*cosr;_56a[_574?"r":"l"]=size*cosr+_56b*sinr;}else{_56a[side]=size*sinr+_56b*cosr;_56a[_574?"l":"r"]=size*cosr+_56b*sinr;}}}break;}_56a[side]+=_566+Math.max(_570.length,_571.length)+(o.title?(_572+_56f):0);}}if(_56b){this._cachedLabelWidth=_56b;}return _56a;},render:function(dim,_575){if(!this.dirty){return this;}var o=this.opt,ta=this.chart.theme.axis,_576=o.leftBottom,_577=o.rotation%360,_578,stop,_579,_57a=0,_57b,_57c,_57d,_57e,_57f,_580,_581=o.font||(ta.majorTick&&ta.majorTick.font)||(ta.tick&&ta.tick.font),_582=o.titleFont||(ta.tick&&ta.tick.titleFont),_583=o.fontColor||(ta.majorTick&&ta.majorTick.fontColor)||(ta.tick&&ta.tick.fontColor)||"black",_584=o.titleFontColor||(ta.tick&&ta.tick.titleFontColor)||"black",_585=(o.titleGap==0)?0:o.titleGap||(ta.tick&&ta.tick.titleGap)||15,_586=o.titleOrientation||(ta.tick&&ta.tick.titleOrientation)||"axis",_587=this.chart.theme.getTick("major",o),_588=this.chart.theme.getTick("minor",o),_589=this.chart.theme.getTick("micro",o),_58a=Math.max(_587.length,_588.length,_589.length),_58b="stroke" in o?o.stroke:ta.stroke,size=_581?g.normalizedLength(g.splitFontString(_581).size):0,cosr=Math.abs(Math.cos(_577*Math.PI/180)),sinr=Math.abs(Math.sin(_577*Math.PI/180)),_58c=_582?g.normalizedLength(g.splitFontString(_582).size):0;if(_577<0){_577+=360;}if(this.vertical){_578={y:dim.height-_575.b};stop={y:_575.t};_579={y:(dim.height-_575.b+_575.t)/2};_57b=size*sinr+(this._cachedLabelWidth||0)*cosr+_566+Math.max(_587.length,_588.length)+_58c+_585;_57c={x:0,y:-1};_57f={x:0,y:0};_57d={x:1,y:0};_57e={x:_566,y:0};switch(_577){case 0:_580="end";_57f.y=size*0.4;break;case 90:_580="middle";_57f.x=-size;break;case 180:_580="start";_57f.y=-size*0.4;break;case 270:_580="middle";break;default:if(_577<_567){_580="end";_57f.y=size*0.4;}else{if(_577<90){_580="end";_57f.y=size*0.4;}else{if(_577<(180-_567)){_580="start";}else{if(_577<(180+_567)){_580="start";_57f.y=-size*0.4;}else{if(_577<270){_580="start";_57f.x=_576?0:size*0.4;}else{if(_577<(360-_567)){_580="end";_57f.x=_576?0:size*0.4;}else{_580="end";_57f.y=size*0.4;}}}}}}}if(_576){_578.x=stop.x=_575.l;_57a=(_586&&_586=="away")?90:270;_579.x=_575.l-_57b+(_57a==270?_58c:0);_57d.x=-1;_57e.x=-_57e.x;}else{_578.x=stop.x=dim.width-_575.r;_57a=(_586&&_586=="axis")?90:270;_579.x=dim.width-_575.r+_57b-(_57a==270?0:_58c);switch(_580){case "start":_580="end";break;case "end":_580="start";break;case "middle":_57f.x+=size;break;}}}else{_578={x:_575.l};stop={x:dim.width-_575.r};_579={x:(dim.width-_575.r+_575.l)/2};_57b=size*cosr+(this._cachedLabelWidth||0)*sinr+_566+Math.max(_587.length,_588.length)+_58c+_585;_57c={x:1,y:0};_57f={x:0,y:0};_57d={x:0,y:1};_57e={x:0,y:_566};switch(_577){case 0:_580="middle";_57f.y=size;break;case 90:_580="start";_57f.x=-size*0.4;break;case 180:_580="middle";break;case 270:_580="end";_57f.x=size*0.4;break;default:if(_577<(90-_567)){_580="start";_57f.y=_576?size:0;}else{if(_577<(90+_567)){_580="start";_57f.x=-size*0.4;}else{if(_577<180){_580="start";_57f.y=_576?0:-size;}else{if(_577<(270-_567)){_580="end";_57f.y=_576?0:-size;}else{if(_577<(270+_567)){_580="end";_57f.y=_576?size*0.4:0;}else{_580="end";_57f.y=_576?size:0;}}}}}}if(_576){_578.y=stop.y=dim.height-_575.b;_57a=(_586&&_586=="axis")?180:0;_579.y=dim.height-_575.b+_57b-(_57a?_58c:0);}else{_578.y=stop.y=_575.t;_57a=(_586&&_586=="away")?180:0;_579.y=_575.t-_57b+(_57a?0:_58c);_57d.y=-1;_57e.y=-_57e.y;switch(_580){case "start":_580="end";break;case "end":_580="start";break;case "middle":_57f.y-=size;break;}}}this.cleanGroup();try{var s=this.group,c=this.scaler,t=this.ticks,_58d,f=lin.getTransformerFromModel(this.scaler),_58e=!_57a&&!_577&&this.opt.htmlLabels&&!dojo.isIE&&!dojo.isOpera?"html":"gfx",dx=_57d.x*_587.length,dy=_57d.y*_587.length;s.createLine({x1:_578.x,y1:_578.y,x2:stop.x,y2:stop.y}).setStroke(_58b);if(o.title){var _58f=dc.axis2d.common.createText[_58e](this.chart,s,_579.x,_579.y,"middle",o.title,_582,_584);if(_58e=="html"){this.htmlElements.push(_58f);}else{_58f.setTransform(g.matrix.rotategAt(_57a,_579.x,_579.y));}}dojo.forEach(t.major,function(tick){var _590=f(tick.value),elem,x=_578.x+_57c.x*_590,y=_578.y+_57c.y*_590;s.createLine({x1:x,y1:y,x2:x+dx,y2:y+dy}).setStroke(_587);if(tick.label){var _591=o.maxLabelCharCount?this.getTextWithLimitCharCount(tick.label,_581,o.maxLabelCharCount):{text:tick.label,truncated:false};_591=o.maxLabelSize?this.getTextWithLimitLength(_591.text,_581,o.maxLabelSize,_591.truncated):_591;elem=dc.axis2d.common.createText[_58e](this.chart,s,x+dx+_57e.x+(_577?0:_57f.x),y+dy+_57e.y+(_577?0:_57f.y),_580,_591.text,_581,_583);_591.truncated&&this.labelTooltip(elem,this.chart,tick.label,_591.text,_581,_58e);if(_58e=="html"){this.htmlElements.push(elem);}else{if(_577){elem.setTransform([{dx:_57f.x,dy:_57f.y},g.matrix.rotategAt(_577,x+dx+_57e.x,y+dy+_57e.y)]);}}}},this);dx=_57d.x*_588.length;dy=_57d.y*_588.length;_58d=c.minMinorStep<=c.minor.tick*c.bounds.scale;dojo.forEach(t.minor,function(tick){var _592=f(tick.value),elem,x=_578.x+_57c.x*_592,y=_578.y+_57c.y*_592;s.createLine({x1:x,y1:y,x2:x+dx,y2:y+dy}).setStroke(_588);if(_58d&&tick.label){var _593=o.maxLabelCharCount?this.getTextWithLimitCharCount(tick.label,_581,o.maxLabelCharCount):{text:tick.label,truncated:false};_593=o.maxLabelSize?this.getTextWithLimitLength(_593.text,_581,o.maxLabelSize,_593.truncated):_593;elem=dc.axis2d.common.createText[_58e](this.chart,s,x+dx+_57e.x+(_577?0:_57f.x),y+dy+_57e.y+(_577?0:_57f.y),_580,_593.text,_581,_583);_593.truncated&&this.labelTooltip(elem,this.chart,tick.label,_593.text,_581,_58e);if(_58e=="html"){this.htmlElements.push(elem);}else{if(_577){elem.setTransform([{dx:_57f.x,dy:_57f.y},g.matrix.rotategAt(_577,x+dx+_57e.x,y+dy+_57e.y)]);}}}},this);dx=_57d.x*_589.length;dy=_57d.y*_589.length;dojo.forEach(t.micro,function(tick){var _594=f(tick.value),elem,x=_578.x+_57c.x*_594,y=_578.y+_57c.y*_594;s.createLine({x1:x,y1:y,x2:x+dx,y2:y+dy}).setStroke(_589);},this);}catch(e){}this.dirty=false;return this;},labelTooltip:function(elem,_595,_596,_597,font,_598){if(!dijit||!dijit.Tooltip){return;}var _599={type:"rect"},_59a=["above","below"],_59b=dojox.gfx._base._getTextBox(_597,{font:font}).w||0;fontHeight=font?g.normalizedLength(g.splitFontString(font).size):0;if(_598=="html"){dojo.mixin(_599,dojo.coords(elem.firstChild,true));_599.width=Math.ceil(_59b);_599.height=Math.ceil(fontHeight);this._events.push({shape:dojo,handle:dojo.connect(elem.firstChild,"onmouseover",this,function(e){dijit.showTooltip(_596,_599,_59a);})});this._events.push({shape:dojo,handle:dojo.connect(elem.firstChild,"onmouseout",this,function(e){dijit.hideTooltip(_599);})});}else{var shp=elem.getShape(),lt=dojo.coords(_595.node,true);_599=dojo.mixin(_599,{x:shp.x-_59b/2,y:shp.y});_599.x+=lt.x;_599.y+=lt.y;_599.x=Math.round(_599.x);_599.y=Math.round(_599.y);_599.width=Math.ceil(_59b);_599.height=Math.ceil(fontHeight);this._events.push({shape:elem,handle:elem.connect("onmouseenter",this,function(e){dijit.showTooltip(_596,_599,_59a);})});this._events.push({shape:elem,handle:elem.connect("onmouseleave",this,function(e){dijit.hideTooltip(_599);})});}}});})();}if(!dojo._hasResource["dojox.charting.plot2d.common"]){dojo._hasResource["dojox.charting.plot2d.common"]=true;dojo.provide("dojox.charting.plot2d.common");(function(){var df=dojox.lang.functional,dc=dojox.charting.plot2d.common;dojo.mixin(dojox.charting.plot2d.common,{makeStroke:function(_59c){if(!_59c){return _59c;}if(typeof _59c=="string"||_59c instanceof dojo.Color){_59c={color:_59c};}return dojox.gfx.makeParameters(dojox.gfx.defaultStroke,_59c);},augmentColor:function(_59d,_59e){var t=new dojo.Color(_59d),c=new dojo.Color(_59e);c.a=t.a;return c;},augmentStroke:function(_59f,_5a0){var s=dc.makeStroke(_59f);if(s){s.color=dc.augmentColor(s.color,_5a0);}return s;},augmentFill:function(fill,_5a1){var fc,c=new dojo.Color(_5a1);if(typeof fill=="string"||fill instanceof dojo.Color){return dc.augmentColor(fill,_5a1);}return fill;},defaultStats:{vmin:Number.POSITIVE_INFINITY,vmax:Number.NEGATIVE_INFINITY,hmin:Number.POSITIVE_INFINITY,hmax:Number.NEGATIVE_INFINITY},collectSimpleStats:function(_5a2){var _5a3=dojo.delegate(dc.defaultStats);for(var i=0;i<_5a2.length;++i){var run=_5a2[i];for(var j=0;j<run.data.length;j++){if(run.data[j]!==null){if(typeof run.data[j]=="number"){var _5a4=_5a3.vmin,_5a5=_5a3.vmax;if(!("ymin" in run)||!("ymax" in run)){dojo.forEach(run.data,function(val,i){if(val!==null){var x=i+1,y=val;if(isNaN(y)){y=0;}_5a3.hmin=Math.min(_5a3.hmin,x);_5a3.hmax=Math.max(_5a3.hmax,x);_5a3.vmin=Math.min(_5a3.vmin,y);_5a3.vmax=Math.max(_5a3.vmax,y);}});}if("ymin" in run){_5a3.vmin=Math.min(_5a4,run.ymin);}if("ymax" in run){_5a3.vmax=Math.max(_5a5,run.ymax);}}else{var _5a6=_5a3.hmin,_5a7=_5a3.hmax,_5a4=_5a3.vmin,_5a5=_5a3.vmax;if(!("xmin" in run)||!("xmax" in run)||!("ymin" in run)||!("ymax" in run)){dojo.forEach(run.data,function(val,i){if(val!==null){var x="x" in val?val.x:i+1,y=val.y;if(isNaN(x)){x=0;}if(isNaN(y)){y=0;}_5a3.hmin=Math.min(_5a3.hmin,x);_5a3.hmax=Math.max(_5a3.hmax,x);_5a3.vmin=Math.min(_5a3.vmin,y);_5a3.vmax=Math.max(_5a3.vmax,y);}});}if("xmin" in run){_5a3.hmin=Math.min(_5a6,run.xmin);}if("xmax" in run){_5a3.hmax=Math.max(_5a7,run.xmax);}if("ymin" in run){_5a3.vmin=Math.min(_5a4,run.ymin);}if("ymax" in run){_5a3.vmax=Math.max(_5a5,run.ymax);}}break;}}}return _5a3;},calculateBarSize:function(_5a8,opt,_5a9){if(!_5a9){_5a9=1;}var gap=opt.gap,size=(_5a8-2*gap)/_5a9;if("minBarSize" in opt){size=Math.max(size,opt.minBarSize);}if("maxBarSize" in opt){size=Math.min(size,opt.maxBarSize);}size=Math.max(size,1);gap=(_5a8-size*_5a9)/2;return {size:size,gap:gap};},collectStackedStats:function(_5aa){var _5ab=dojo.clone(dc.defaultStats);if(_5aa.length){_5ab.hmin=Math.min(_5ab.hmin,1);_5ab.hmax=df.foldl(_5aa,"seed, run -> Math.max(seed, run.data.length)",_5ab.hmax);for(var i=0;i<_5ab.hmax;++i){var v=_5aa[0].data[i];v=v&&(typeof v=="number"?v:v.y);if(isNaN(v)){v=0;}_5ab.vmin=Math.min(_5ab.vmin,v);for(var j=1;j<_5aa.length;++j){var t=_5aa[j].data[i];t=t&&(typeof t=="number"?t:t.y);if(isNaN(t)){t=0;}v+=t;}_5ab.vmax=Math.max(_5ab.vmax,v);}}return _5ab;},curve:function(a,_5ac){var arr=a.slice(0);if(_5ac=="x"){arr[arr.length]=arr[0];}var p=dojo.map(arr,function(item,i){if(i==0){return "M"+item.x+","+item.y;}if(!isNaN(_5ac)){var dx=item.x-arr[i-1].x,dy=arr[i-1].y;return "C"+(item.x-(_5ac-1)*(dx/_5ac))+","+dy+" "+(item.x-(dx/_5ac))+","+item.y+" "+item.x+","+item.y;}else{if(_5ac=="X"||_5ac=="x"||_5ac=="S"){var p0,p1=arr[i-1],p2=arr[i],p3;var bz1x,bz1y,bz2x,bz2y;var f=1/6;if(i==1){if(_5ac=="x"){p0=arr[arr.length-2];}else{p0=p1;}f=1/3;}else{p0=arr[i-2];}if(i==(arr.length-1)){if(_5ac=="x"){p3=arr[1];}else{p3=p2;}f=1/3;}else{p3=arr[i+1];}var p1p2=Math.sqrt((p2.x-p1.x)*(p2.x-p1.x)+(p2.y-p1.y)*(p2.y-p1.y));var p0p2=Math.sqrt((p2.x-p0.x)*(p2.x-p0.x)+(p2.y-p0.y)*(p2.y-p0.y));var p1p3=Math.sqrt((p3.x-p1.x)*(p3.x-p1.x)+(p3.y-p1.y)*(p3.y-p1.y));var _5ad=p0p2*f;var _5ae=p1p3*f;if(_5ad>p1p2/2&&_5ae>p1p2/2){_5ad=p1p2/2;_5ae=p1p2/2;}else{if(_5ad>p1p2/2){_5ad=p1p2/2;_5ae=p1p2/2*p1p3/p0p2;}else{if(_5ae>p1p2/2){_5ae=p1p2/2;_5ad=p1p2/2*p0p2/p1p3;}}}if(_5ac=="S"){if(p0==p1){_5ad=0;}if(p2==p3){_5ae=0;}}bz1x=p1.x+_5ad*(p2.x-p0.x)/p0p2;bz1y=p1.y+_5ad*(p2.y-p0.y)/p0p2;bz2x=p2.x-_5ae*(p3.x-p1.x)/p1p3;bz2y=p2.y-_5ae*(p3.y-p1.y)/p1p3;}}return "C"+(bz1x+","+bz1y+" "+bz2x+","+bz2y+" "+p2.x+","+p2.y);});return p.join(" ");},getLabel:function(_5af,_5b0,_5b1){if(dojo.number){return (_5b0?dojo.number.format(_5af,{places:_5b1}):dojo.number.format(_5af))||"";}return _5b0?_5af.toFixed(_5b1):_5af.toString();}});})();}if(!dojo._hasResource["dojox.charting.scaler.primitive"]){dojo._hasResource["dojox.charting.scaler.primitive"]=true;dojo.provide("dojox.charting.scaler.primitive");dojox.charting.scaler.primitive={buildScaler:function(min,max,span,_5b2){if(min==max){min-=0.5;max+=0.5;}return {bounds:{lower:min,upper:max,from:min,to:max,scale:span/(max-min),span:span},scaler:dojox.charting.scaler.primitive};},buildTicks:function(_5b3,_5b4){return {major:[],minor:[],micro:[]};},getTransformerFromModel:function(_5b5){var _5b6=_5b5.bounds.from,_5b7=_5b5.bounds.scale;return function(x){return (x-_5b6)*_5b7;};},getTransformerFromPlot:function(_5b8){var _5b9=_5b8.bounds.from,_5ba=_5b8.bounds.scale;return function(x){return x/_5ba+_5b9;};}};}if(!dojo._hasResource["dojox.charting.plot2d._PlotEvents"]){dojo._hasResource["dojox.charting.plot2d._PlotEvents"]=true;dojo.provide("dojox.charting.plot2d._PlotEvents");dojo.declare("dojox.charting.plot2d._PlotEvents",null,{constructor:function(){this._shapeEvents=[];this._eventSeries={};},destroy:function(){this.resetEvents();this.inherited(arguments);},plotEvent:function(o){},raiseEvent:function(o){this.plotEvent(o);var t=dojo.delegate(o);t.originalEvent=o.type;t.originalPlot=o.plot;t.type="onindirect";dojo.forEach(this.chart.stack,function(plot){if(plot!==this&&plot.plotEvent){t.plot=plot;plot.plotEvent(t);}},this);},connect:function(_5bb,_5bc){this.dirty=true;return dojo.connect(this,"plotEvent",_5bb,_5bc);},events:function(){var ls=this.plotEvent._listeners;if(!ls||!ls.length){return false;}for(var i in ls){if(!(i in Array.prototype)){return true;}}return false;},resetEvents:function(){if(this._shapeEvents.length){dojo.forEach(this._shapeEvents,function(item){item.shape.disconnect(item.handle);});this._shapeEvents=[];}this.raiseEvent({type:"onplotreset",plot:this});},_connectSingleEvent:function(o,_5bd){this._shapeEvents.push({shape:o.eventMask,handle:o.eventMask.connect(_5bd,this,function(e){o.type=_5bd;o.event=e;this.raiseEvent(o);o.event=null;})});},_connectEvents:function(o){if(o){o.chart=this.chart;o.plot=this;o.hAxis=this.hAxis||null;o.vAxis=this.vAxis||null;o.eventMask=o.eventMask||o.shape;this._connectSingleEvent(o,"onmouseover");this._connectSingleEvent(o,"onmouseout");this._connectSingleEvent(o,"onclick");}},_reconnectEvents:function(_5be){var a=this._eventSeries[_5be];if(a){dojo.forEach(a,this._connectEvents,this);}},fireEvent:function(_5bf,_5c0,_5c1,_5c2){var s=this._eventSeries[_5bf];if(s&&s.length&&_5c1<s.length){var o=s[_5c1];o.type=_5c0;o.event=_5c2||null;this.raiseEvent(o);o.event=null;}}});}if(!dojo._hasResource["dojox.charting.plot2d.Base"]){dojo._hasResource["dojox.charting.plot2d.Base"]=true;dojo.provide("dojox.charting.plot2d.Base");dojo.declare("dojox.charting.plot2d.Base",[dojox.charting.Element,dojox.charting.plot2d._PlotEvents],{constructor:function(_5c3,_5c4){this.zoom=null,this.zoomQueue=[];this.lastWindow={vscale:1,hscale:1,xoffset:0,yoffset:0};},clear:function(){this.series=[];this._hAxis=null;this._vAxis=null;this.dirty=true;return this;},setAxis:function(axis){if(axis){this[axis.vertical?"_vAxis":"_hAxis"]=axis;}return this;},addSeries:function(run){this.series.push(run);return this;},getSeriesStats:function(){return dojox.charting.plot2d.common.collectSimpleStats(this.series);},calculateAxes:function(dim){this.initializeScalers(dim,this.getSeriesStats());return this;},isDirty:function(){return this.dirty||this._hAxis&&this._hAxis.dirty||this._vAxis&&this._vAxis.dirty;},isDataDirty:function(){return dojo.some(this.series,function(item){return item.dirty;});},performZoom:function(dim,_5c5){var vs=this._vAxis.scale||1,hs=this._hAxis.scale||1,_5c6=dim.height-_5c5.b,_5c7=this._hScaler.bounds,_5c8=(_5c7.from-_5c7.lower)*_5c7.scale,_5c9=this._vScaler.bounds,_5ca=(_5c9.from-_5c9.lower)*_5c9.scale;rVScale=vs/this.lastWindow.vscale,rHScale=hs/this.lastWindow.hscale,rXOffset=(this.lastWindow.xoffset-_5c8)/((this.lastWindow.hscale==1)?hs:this.lastWindow.hscale),rYOffset=(_5ca-this.lastWindow.yoffset)/((this.lastWindow.vscale==1)?vs:this.lastWindow.vscale),shape=this.group,anim=dojox.gfx.fx.animateTransform(dojo.delegate({shape:shape,duration:1200,transform:[{name:"translate",start:[0,0],end:[_5c5.l*(1-rHScale),_5c6*(1-rVScale)]},{name:"scale",start:[1,1],end:[rHScale,rVScale]},{name:"original"},{name:"translate",start:[0,0],end:[rXOffset,rYOffset]}]},this.zoom));dojo.mixin(this.lastWindow,{vscale:vs,hscale:hs,xoffset:_5c8,yoffset:_5ca});this.zoomQueue.push(anim);dojo.connect(anim,"onEnd",this,function(){this.zoom=null;this.zoomQueue.shift();if(this.zoomQueue.length>0){this.zoomQueue[0].play();}});if(this.zoomQueue.length==1){this.zoomQueue[0].play();}return this;},render:function(dim,_5cb){return this;},getRequiredColors:function(){return this.series.length;},initializeScalers:function(dim,_5cc){if(this._hAxis){if(!this._hAxis.initialized()){this._hAxis.calculate(_5cc.hmin,_5cc.hmax,dim.width);}this._hScaler=this._hAxis.getScaler();}else{this._hScaler=dojox.charting.scaler.primitive.buildScaler(_5cc.hmin,_5cc.hmax,dim.width);}if(this._vAxis){if(!this._vAxis.initialized()){this._vAxis.calculate(_5cc.vmin,_5cc.vmax,dim.height);}this._vScaler=this._vAxis.getScaler();}else{this._vScaler=dojox.charting.scaler.primitive.buildScaler(_5cc.vmin,_5cc.vmax,dim.height);}return this;}});}if(!dojo._hasResource["dojox.lang.functional.reversed"]){dojo._hasResource["dojox.lang.functional.reversed"]=true;dojo.provide("dojox.lang.functional.reversed");(function(){var d=dojo,df=dojox.lang.functional;d.mixin(df,{filterRev:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);var t=[],v,i=a.length-1;for(;i>=0;--i){v=a[i];if(f.call(o,v,i,a)){t.push(v);}}return t;},forEachRev:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);for(var i=a.length-1;i>=0;f.call(o,a[i],i,a),--i){}},mapRev:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);var n=a.length,t=new Array(n),i=n-1,j=0;for(;i>=0;t[j++]=f.call(o,a[i],i,a),--i){}return t;},everyRev:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);for(var i=a.length-1;i>=0;--i){if(!f.call(o,a[i],i,a)){return false;}}return true;},someRev:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);for(var i=a.length-1;i>=0;--i){if(f.call(o,a[i],i,a)){return true;}}return false;}});})();}if(!dojo._hasResource["dojox.gfx.fx"]){dojo._hasResource["dojox.gfx.fx"]=true;dojo.provide("dojox.gfx.fx");(function(){var d=dojo,g=dojox.gfx,m=g.matrix;function _5cd(_5ce,end){this.start=_5ce,this.end=end;};_5cd.prototype.getValue=function(r){return (this.end-this.start)*r+this.start;};function _5cf(_5d0,end,_5d1){this.start=_5d0,this.end=end;this.units=_5d1;};_5cf.prototype.getValue=function(r){return (this.end-this.start)*r+this.start+this.units;};function _5d2(_5d3,end){this.start=_5d3,this.end=end;this.temp=new dojo.Color();};_5d2.prototype.getValue=function(r){return d.blendColors(this.start,this.end,r,this.temp);};function _5d4(_5d5){this.values=_5d5;this.length=_5d5.length;};_5d4.prototype.getValue=function(r){return this.values[Math.min(Math.floor(r*this.length),this.length-1)];};function _5d6(_5d7,def){this.values=_5d7;this.def=def?def:{};};_5d6.prototype.getValue=function(r){var ret=dojo.clone(this.def);for(var i in this.values){ret[i]=this.values[i].getValue(r);}return ret;};function _5d8(_5d9,_5da){this.stack=_5d9;this.original=_5da;};_5d8.prototype.getValue=function(r){var ret=[];dojo.forEach(this.stack,function(t){if(t instanceof m.Matrix2D){ret.push(t);return;}if(t.name=="original"&&this.original){ret.push(this.original);return;}if(!(t.name in m)){return;}var f=m[t.name];if(typeof f!="function"){ret.push(f);return;}var val=dojo.map(t.start,function(v,i){return (t.end[i]-v)*r+v;}),_5db=f.apply(m,val);if(_5db instanceof m.Matrix2D){ret.push(_5db);}},this);return ret;};var _5dc=new d.Color(0,0,0,0);function _5dd(prop,obj,name,def){if(prop.values){return new _5d4(prop.values);}var _5de,_5df,end;if(prop.start){_5df=g.normalizeColor(prop.start);}else{_5df=_5de=obj?(name?obj[name]:obj):def;}if(prop.end){end=g.normalizeColor(prop.end);}else{if(!_5de){_5de=obj?(name?obj[name]:obj):def;}end=_5de;}return new _5d2(_5df,end);};function _5e0(prop,obj,name,def){if(prop.values){return new _5d4(prop.values);}var _5e1,_5e2,end;if(prop.start){_5e2=prop.start;}else{_5e2=_5e1=obj?obj[name]:def;}if(prop.end){end=prop.end;}else{if(typeof _5e1!="number"){_5e1=obj?obj[name]:def;}end=_5e1;}return new _5cd(_5e2,end);};g.fx.animateStroke=function(args){if(!args.easing){args.easing=d._defaultEasing;}var anim=new d.Animation(args),_5e3=args.shape,_5e4;d.connect(anim,"beforeBegin",anim,function(){_5e4=_5e3.getStroke();var prop=args.color,_5e5={},_5e6,_5e7,end;if(prop){_5e5.color=_5dd(prop,_5e4,"color",_5dc);}prop=args.style;if(prop&&prop.values){_5e5.style=new _5d4(prop.values);}prop=args.width;if(prop){_5e5.width=_5e0(prop,_5e4,"width",1);}prop=args.cap;if(prop&&prop.values){_5e5.cap=new _5d4(prop.values);}prop=args.join;if(prop){if(prop.values){_5e5.join=new _5d4(prop.values);}else{_5e7=prop.start?prop.start:(_5e4&&_5e4.join||0);end=prop.end?prop.end:(_5e4&&_5e4.join||0);if(typeof _5e7=="number"&&typeof end=="number"){_5e5.join=new _5cd(_5e7,end);}}}this.curve=new _5d6(_5e5,_5e4);});d.connect(anim,"onAnimate",_5e3,"setStroke");return anim;};g.fx.animateFill=function(args){if(!args.easing){args.easing=d._defaultEasing;}var anim=new d.Animation(args),_5e8=args.shape,fill;d.connect(anim,"beforeBegin",anim,function(){fill=_5e8.getFill();var prop=args.color,_5e9={};if(prop){this.curve=_5dd(prop,fill,"",_5dc);}});d.connect(anim,"onAnimate",_5e8,"setFill");return anim;};g.fx.animateFont=function(args){if(!args.easing){args.easing=d._defaultEasing;}var anim=new d.Animation(args),_5ea=args.shape,font;d.connect(anim,"beforeBegin",anim,function(){font=_5ea.getFont();var prop=args.style,_5eb={},_5ec,_5ed,end;if(prop&&prop.values){_5eb.style=new _5d4(prop.values);}prop=args.variant;if(prop&&prop.values){_5eb.variant=new _5d4(prop.values);}prop=args.weight;if(prop&&prop.values){_5eb.weight=new _5d4(prop.values);}prop=args.family;if(prop&&prop.values){_5eb.family=new _5d4(prop.values);}prop=args.size;if(prop&&prop.units){_5ed=parseFloat(prop.start?prop.start:(_5ea.font&&_5ea.font.size||"0"));end=parseFloat(prop.end?prop.end:(_5ea.font&&_5ea.font.size||"0"));_5eb.size=new _5cf(_5ed,end,prop.units);}this.curve=new _5d6(_5eb,font);});d.connect(anim,"onAnimate",_5ea,"setFont");return anim;};g.fx.animateTransform=function(args){if(!args.easing){args.easing=d._defaultEasing;}var anim=new d.Animation(args),_5ee=args.shape,_5ef;d.connect(anim,"beforeBegin",anim,function(){_5ef=_5ee.getTransform();this.curve=new _5d8(args.transform,_5ef);});d.connect(anim,"onAnimate",_5ee,"setTransform");return anim;};})();}if(!dojo._hasResource["dojox.charting.plot2d.Default"]){dojo._hasResource["dojox.charting.plot2d.Default"]=true;dojo.provide("dojox.charting.plot2d.Default");(function(){var df=dojox.lang.functional,du=dojox.lang.utils,dc=dojox.charting.plot2d.common,_5f0=df.lambda("item.purgeGroup()");var _5f1=1200;dojo.declare("dojox.charting.plot2d.Default",dojox.charting.plot2d.Base,{defaultParams:{hAxis:"x",vAxis:"y",lines:true,areas:false,markers:false,tension:"",animate:false},optionalParams:{stroke:{},outline:{},shadow:{},fill:{},font:"",fontColor:"",markerStroke:{},markerOutline:{},markerShadow:{},markerFill:{},markerFont:"",markerFontColor:""},constructor:function(_5f2,_5f3){this.opt=dojo.clone(this.defaultParams);du.updateWithObject(this.opt,_5f3);du.updateWithPattern(this.opt,_5f3,this.optionalParams);this.series=[];this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;this.animate=this.opt.animate;},render:function(dim,_5f4){if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_5f4);}this.resetEvents();this.dirty=this.isDirty();if(this.dirty){dojo.forEach(this.series,_5f0);this._eventSeries={};this.cleanGroup();this.group.setTransform(null);var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,_5f5,_5f6,_5f7,_5f8=this.events();for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();if(!run.data.length){run.dirty=false;t.skip();continue;}var _5f9=t.next(this.opt.areas?"area":"line",[this.opt,run],true),s=run.group,_5fa=[],_5fb=[],rseg=null,_5fc,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_5fd=this._eventSeries[run.name]=new Array(run.data.length);for(var j=0;j<run.data.length;j++){if(run.data[j]!=null){if(!rseg){rseg=[];_5fb.push(j);_5fa.push(rseg);}rseg.push(run.data[j]);}else{rseg=null;}}for(var seg=0;seg<_5fa.length;seg++){if(typeof _5fa[seg][0]=="number"){_5fc=dojo.map(_5fa[seg],function(v,i){return {x:ht(i+_5fb[seg]+1)+_5f4.l,y:dim.height-_5f4.b-vt(v)};},this);}else{_5fc=dojo.map(_5fa[seg],function(v,i){return {x:ht(v.x)+_5f4.l,y:dim.height-_5f4.b-vt(v.y)};},this);}var _5fe=this.opt.tension?dc.curve(_5fc,this.opt.tension):"";if(this.opt.areas&&_5fc.length>1){var fill=_5f9.series.fill;var _5ff=dojo.clone(_5fc);if(this.opt.tension){var _600="L"+_5ff[_5ff.length-1].x+","+(dim.height-_5f4.b)+" L"+_5ff[0].x+","+(dim.height-_5f4.b)+" L"+_5ff[0].x+","+_5ff[0].y;run.dyn.fill=s.createPath(_5fe+" "+_600).setFill(fill).getFill();}else{_5ff.push({x:_5fc[_5fc.length-1].x,y:dim.height-_5f4.b});_5ff.push({x:_5fc[0].x,y:dim.height-_5f4.b});_5ff.push(_5fc[0]);run.dyn.fill=s.createPolyline(_5ff).setFill(fill).getFill();}}if(this.opt.lines||this.opt.markers){_5f5=_5f9.series.stroke;if(_5f9.series.outline){_5f6=run.dyn.outline=dc.makeStroke(_5f9.series.outline);_5f6.width=2*_5f6.width+_5f5.width;}}if(this.opt.markers){run.dyn.marker=_5f9.symbol;}var _601=null,_602=null,_603=null;if(_5f5&&_5f9.series.shadow&&_5fc.length>1){var _604=_5f9.series.shadow,_605=dojo.map(_5fc,function(c){return {x:c.x+_604.dx,y:c.y+_604.dy};});if(this.opt.lines){if(this.opt.tension){run.dyn.shadow=s.createPath(dc.curve(_605,this.opt.tension)).setStroke(_604).getStroke();}else{run.dyn.shadow=s.createPolyline(_605).setStroke(_604).getStroke();}}if(this.opt.markers&&_5f9.marker.shadow){_604=_5f9.marker.shadow;_603=dojo.map(_605,function(c){return s.createPath("M"+c.x+" "+c.y+" "+_5f9.symbol).setStroke(_604).setFill(_604.color);},this);}}if(this.opt.lines&&_5fc.length>1){if(_5f6){if(this.opt.tension){run.dyn.outline=s.createPath(_5fe).setStroke(_5f6).getStroke();}else{run.dyn.outline=s.createPolyline(_5fc).setStroke(_5f6).getStroke();}}if(this.opt.tension){run.dyn.stroke=s.createPath(_5fe).setStroke(_5f5).getStroke();}else{run.dyn.stroke=s.createPolyline(_5fc).setStroke(_5f5).getStroke();}}if(this.opt.markers){_601=new Array(_5fc.length);_602=new Array(_5fc.length);_5f6=null;if(_5f9.marker.outline){_5f6=dc.makeStroke(_5f9.marker.outline);_5f6.width=2*_5f6.width+(_5f9.marker.stroke?_5f9.marker.stroke.width:0);}dojo.forEach(_5fc,function(c,i){var path="M"+c.x+" "+c.y+" "+_5f9.symbol;if(_5f6){_602[i]=s.createPath(path).setStroke(_5f6);}_601[i]=s.createPath(path).setStroke(_5f9.marker.stroke).setFill(_5f9.marker.fill);},this);run.dyn.markerFill=_5f9.marker.fill;run.dyn.markerStroke=_5f9.marker.stroke;if(_5f8){dojo.forEach(_601,function(s,i){var o={element:"marker",index:i+_5fb[seg],run:run,shape:s,outline:_602[i]||null,shadow:_603&&_603[i]||null,cx:_5fc[i].x,cy:_5fc[i].y};if(typeof _5fa[seg][0]=="number"){o.x=i+_5fb[seg]+1;o.y=_5fa[seg][i];}else{o.x=_5fa[seg][i].x;o.y=_5fa[seg][i].y;}this._connectEvents(o);_5fd[i+_5fb[seg]]=o;},this);}else{delete this._eventSeries[run.name];}}}run.dirty=false;}if(this.animate){var _606=this.group;dojox.gfx.fx.animateTransform(dojo.delegate({shape:_606,duration:_5f1,transform:[{name:"translate",start:[0,dim.height-_5f4.b],end:[0,0]},{name:"scale",start:[1,0],end:[1,1]},{name:"original"}]},this.animate)).play();}this.dirty=false;return this;}});})();}if(!dojo._hasResource["dojox.charting.plot2d.Lines"]){dojo._hasResource["dojox.charting.plot2d.Lines"]=true;dojo.provide("dojox.charting.plot2d.Lines");dojo.declare("dojox.charting.plot2d.Lines",dojox.charting.plot2d.Default,{constructor:function(){this.opt.lines=true;}});}if(!dojo._hasResource["dojox.charting.plot2d.Areas"]){dojo._hasResource["dojox.charting.plot2d.Areas"]=true;dojo.provide("dojox.charting.plot2d.Areas");dojo.declare("dojox.charting.plot2d.Areas",dojox.charting.plot2d.Default,{constructor:function(){this.opt.lines=true;this.opt.areas=true;}});}if(!dojo._hasResource["dojox.charting.plot2d.Markers"]){dojo._hasResource["dojox.charting.plot2d.Markers"]=true;dojo.provide("dojox.charting.plot2d.Markers");dojo.declare("dojox.charting.plot2d.Markers",dojox.charting.plot2d.Default,{constructor:function(){this.opt.markers=true;}});}if(!dojo._hasResource["dojox.charting.plot2d.MarkersOnly"]){dojo._hasResource["dojox.charting.plot2d.MarkersOnly"]=true;dojo.provide("dojox.charting.plot2d.MarkersOnly");dojo.declare("dojox.charting.plot2d.MarkersOnly",dojox.charting.plot2d.Default,{constructor:function(){this.opt.lines=false;this.opt.markers=true;}});}if(!dojo._hasResource["dojox.gfx.gradutils"]){dojo._hasResource["dojox.gfx.gradutils"]=true;dojo.provide("dojox.gfx.gradutils");(function(){var d=dojo,m=dojox.gfx.matrix,C=d.Color;function _607(o,c){if(o<=0){return c[0].color;}var len=c.length;if(o>=1){return c[len-1].color;}for(var i=0;i<len;++i){var stop=c[i];if(stop.offset>=o){if(i){var prev=c[i-1];return d.blendColors(new C(prev.color),new C(stop.color),(o-prev.offset)/(stop.offset-prev.offset));}return stop.color;}}return c[len-1].color;};dojox.gfx.gradutils.getColor=function(fill,pt){var o;if(fill){switch(fill.type){case "linear":var _608=Math.atan2(fill.y2-fill.y1,fill.x2-fill.x1),_609=m.rotate(-_608),_60a=m.project(fill.x2-fill.x1,fill.y2-fill.y1),p=m.multiplyPoint(_60a,pt),pf1=m.multiplyPoint(_60a,fill.x1,fill.y1),pf2=m.multiplyPoint(_60a,fill.x2,fill.y2),_60b=m.multiplyPoint(_609,pf2.x-pf1.x,pf2.y-pf1.y).x,o=m.multiplyPoint(_609,p.x-pf1.x,p.y-pf1.y).x/_60b;break;case "radial":var dx=pt.x-fill.cx,dy=pt.y-fill.cy,o=Math.sqrt(dx*dx+dy*dy)/fill.r;break;}return _607(o,fill.colors);}return new C(fill||[0,0,0,0]);};dojox.gfx.gradutils.reverse=function(fill){if(fill){switch(fill.type){case "linear":case "radial":fill=dojo.delegate(fill);if(fill.colors){var c=fill.colors,l=c.length,i=0,stop,n=fill.colors=new Array(c.length);for(;i<l;++i){stop=c[i];n[i]={offset:1-stop.offset,color:stop.color};}n.sort(function(a,b){return a.offset-b.offset;});}break;}}return fill;};})();}if(!dojo._hasResource["dojox.charting.plot2d.Scatter"]){dojo._hasResource["dojox.charting.plot2d.Scatter"]=true;dojo.provide("dojox.charting.plot2d.Scatter");(function(){var df=dojox.lang.functional,du=dojox.lang.utils,dc=dojox.charting.plot2d.common,_60c=df.lambda("item.purgeGroup()");dojo.declare("dojox.charting.plot2d.Scatter",dojox.charting.plot2d.Base,{defaultParams:{hAxis:"x",vAxis:"y",shadows:null,animate:null},optionalParams:{markerStroke:{},markerOutline:{},markerShadow:{},markerFill:{},markerFont:"",markerFontColor:""},constructor:function(_60d,_60e){this.opt=dojo.clone(this.defaultParams);du.updateWithObject(this.opt,_60e);du.updateWithPattern(this.opt,_60e,this.optionalParams);this.series=[];this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;this.animate=this.opt.animate;},render:function(dim,_60f){if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_60f);}this.resetEvents();this.dirty=this.isDirty();if(this.dirty){dojo.forEach(this.series,_60c);this._eventSeries={};this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,_610=this.events();for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();if(!run.data.length){run.dirty=false;t.skip();continue;}var _611=t.next("marker",[this.opt,run]),s=run.group,_612,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler);if(typeof run.data[0]=="number"){_612=dojo.map(run.data,function(v,i){return {x:ht(i+1)+_60f.l,y:dim.height-_60f.b-vt(v)};},this);}else{_612=dojo.map(run.data,function(v,i){return {x:ht(v.x)+_60f.l,y:dim.height-_60f.b-vt(v.y)};},this);}var _613=new Array(_612.length),_614=new Array(_612.length),_615=new Array(_612.length);dojo.forEach(_612,function(c,i){var _616=typeof run.data[i]=="number"?t.post(_611,"marker"):t.addMixin(_611,"marker",run.data[i],true),path="M"+c.x+" "+c.y+" "+_616.symbol;if(_616.marker.shadow){_613[i]=s.createPath("M"+(c.x+_616.marker.shadow.dx)+" "+(c.y+_616.marker.shadow.dy)+" "+_616.symbol).setStroke(_616.marker.shadow).setFill(_616.marker.shadow.color);if(this.animate){this._animateScatter(_613[i],dim.height-_60f.b);}}if(_616.marker.outline){var _617=dc.makeStroke(_616.marker.outline);_617.width=2*_617.width+_616.marker.stroke.width;_615[i]=s.createPath(path).setStroke(_617);if(this.animate){this._animateScatter(_615[i],dim.height-_60f.b);}}var _618=dc.makeStroke(_616.marker.stroke),fill=this._plotFill(_616.marker.fill,dim,_60f);if(fill&&(fill.type==="linear"||fill.type=="radial")){var _619=dojox.gfx.gradutils.getColor(fill,{x:c.x,y:c.y});if(_618){_618.color=_619;}_614[i]=s.createPath(path).setStroke(_618).setFill(_619);}else{_614[i]=s.createPath(path).setStroke(_618).setFill(fill);}if(this.animate){this._animateScatter(_614[i],dim.height-_60f.b);}},this);if(_614.length){run.dyn.stroke=_614[_614.length-1].getStroke();run.dyn.fill=_614[_614.length-1].getFill();}if(_610){var _61a=new Array(_614.length);dojo.forEach(_614,function(s,i){var o={element:"marker",index:i,run:run,shape:s,outline:_615&&_615[i]||null,shadow:_613&&_613[i]||null,cx:_612[i].x,cy:_612[i].y};if(typeof run.data[0]=="number"){o.x=i+1;o.y=run.data[i];}else{o.x=run.data[i].x;o.y=run.data[i].y;}this._connectEvents(o);_61a[i]=o;},this);this._eventSeries[run.name]=_61a;}else{delete this._eventSeries[run.name];}run.dirty=false;}this.dirty=false;return this;},_animateScatter:function(_61b,_61c){dojox.gfx.fx.animateTransform(dojo.delegate({shape:_61b,duration:1200,transform:[{name:"translate",start:[0,_61c],end:[0,0]},{name:"scale",start:[0,0],end:[1,1]},{name:"original"}]},this.animate)).play();}});})();}if(!dojo._hasResource["dojox.lang.functional.sequence"]){dojo._hasResource["dojox.lang.functional.sequence"]=true;dojo.provide("dojox.lang.functional.sequence");(function(){var d=dojo,df=dojox.lang.functional;d.mixin(df,{repeat:function(n,f,z,o){o=o||d.global;f=df.lambda(f);var t=new Array(n),i=1;t[0]=z;for(;i<n;t[i]=z=f.call(o,z),++i){}return t;},until:function(pr,f,z,o){o=o||d.global;f=df.lambda(f);pr=df.lambda(pr);var t=[];for(;!pr.call(o,z);t.push(z),z=f.call(o,z)){}return t;}});})();}if(!dojo._hasResource["dojox.charting.plot2d.Stacked"]){dojo._hasResource["dojox.charting.plot2d.Stacked"]=true;dojo.provide("dojox.charting.plot2d.Stacked");(function(){var df=dojox.lang.functional,dc=dojox.charting.plot2d.common,_61d=df.lambda("item.purgeGroup()");dojo.declare("dojox.charting.plot2d.Stacked",dojox.charting.plot2d.Default,{getSeriesStats:function(){var _61e=dc.collectStackedStats(this.series);this._maxRunLength=_61e.hmax;return _61e;},render:function(dim,_61f){if(this._maxRunLength<=0){return this;}var acc=df.repeat(this._maxRunLength,"-> 0",0);for(var i=0;i<this.series.length;++i){var run=this.series[i];for(var j=0;j<run.data.length;++j){var v=run.data[j];if(v!==null){if(isNaN(v)){v=0;}acc[j]+=v;}}}if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_61f);}this.resetEvents();this.dirty=this.isDirty();if(this.dirty){dojo.forEach(this.series,_61d);this._eventSeries={};this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,_620=this.events(),ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler);for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();var _621=t.next(this.opt.areas?"area":"line",[this.opt,run],true),s=run.group,_622,_623=dojo.map(acc,function(v,i){return {x:ht(i+1)+_61f.l,y:dim.height-_61f.b-vt(v)};},this);var _624=this.opt.tension?dc.curve(_623,this.opt.tension):"";if(this.opt.areas){var _625=dojo.clone(_623);if(this.opt.tension){var p=dc.curve(_625,this.opt.tension);p+=" L"+_623[_623.length-1].x+","+(dim.height-_61f.b)+" L"+_623[0].x+","+(dim.height-_61f.b)+" L"+_623[0].x+","+_623[0].y;run.dyn.fill=s.createPath(p).setFill(_621.series.fill).getFill();}else{_625.push({x:_623[_623.length-1].x,y:dim.height-_61f.b});_625.push({x:_623[0].x,y:dim.height-_61f.b});_625.push(_623[0]);run.dyn.fill=s.createPolyline(_625).setFill(_621.series.fill).getFill();}}if(this.opt.lines||this.opt.markers){if(_621.series.outline){_622=dc.makeStroke(_621.series.outline);_622.width=2*_622.width+_621.series.stroke.width;}}if(this.opt.markers){run.dyn.marker=_621.symbol;}var _626,_627,_628;if(_621.series.shadow&&_621.series.stroke){var _629=_621.series.shadow,_62a=dojo.map(_623,function(c){return {x:c.x+_629.dx,y:c.y+_629.dy};});if(this.opt.lines){if(this.opt.tension){run.dyn.shadow=s.createPath(dc.curve(_62a,this.opt.tension)).setStroke(_629).getStroke();}else{run.dyn.shadow=s.createPolyline(_62a).setStroke(_629).getStroke();}}if(this.opt.markers){_629=_621.marker.shadow;_628=dojo.map(_62a,function(c){return s.createPath("M"+c.x+" "+c.y+" "+_621.symbol).setStroke(_629).setFill(_629.color);},this);}}if(this.opt.lines){if(_622){if(this.opt.tension){run.dyn.outline=s.createPath(_624).setStroke(_622).getStroke();}else{run.dyn.outline=s.createPolyline(_623).setStroke(_622).getStroke();}}if(this.opt.tension){run.dyn.stroke=s.createPath(_624).setStroke(_621.series.stroke).getStroke();}else{run.dyn.stroke=s.createPolyline(_623).setStroke(_621.series.stroke).getStroke();}}if(this.opt.markers){_626=new Array(_623.length);_627=new Array(_623.length);_622=null;if(_621.marker.outline){_622=dc.makeStroke(_621.marker.outline);_622.width=2*_622.width+(_621.marker.stroke?_621.marker.stroke.width:0);}dojo.forEach(_623,function(c,i){var path="M"+c.x+" "+c.y+" "+_621.symbol;if(_622){_627[i]=s.createPath(path).setStroke(_622);}_626[i]=s.createPath(path).setStroke(_621.marker.stroke).setFill(_621.marker.fill);},this);if(_620){var _62b=new Array(_626.length);dojo.forEach(_626,function(s,i){var o={element:"marker",index:i,run:run,shape:s,outline:_627[i]||null,shadow:_628&&_628[i]||null,cx:_623[i].x,cy:_623[i].y,x:i+1,y:run.data[i]};this._connectEvents(o);_62b[i]=o;},this);this._eventSeries[run.name]=_62b;}else{delete this._eventSeries[run.name];}}run.dirty=false;for(var j=0;j<run.data.length;++j){var v=run.data[j];if(v!==null){if(isNaN(v)){v=0;}acc[j]-=v;}}}this.dirty=false;return this;}});})();}if(!dojo._hasResource["dojox.charting.plot2d.StackedLines"]){dojo._hasResource["dojox.charting.plot2d.StackedLines"]=true;dojo.provide("dojox.charting.plot2d.StackedLines");dojo.declare("dojox.charting.plot2d.StackedLines",dojox.charting.plot2d.Stacked,{constructor:function(){this.opt.lines=true;}});}if(!dojo._hasResource["dojox.charting.plot2d.StackedAreas"]){dojo._hasResource["dojox.charting.plot2d.StackedAreas"]=true;dojo.provide("dojox.charting.plot2d.StackedAreas");dojo.declare("dojox.charting.plot2d.StackedAreas",dojox.charting.plot2d.Stacked,{constructor:function(){this.opt.lines=true;this.opt.areas=true;}});}if(!dojo._hasResource["dojox.charting.plot2d.Columns"]){dojo._hasResource["dojox.charting.plot2d.Columns"]=true;dojo.provide("dojox.charting.plot2d.Columns");(function(){var df=dojox.lang.functional,du=dojox.lang.utils,dc=dojox.charting.plot2d.common,_62c=df.lambda("item.purgeGroup()");dojo.declare("dojox.charting.plot2d.Columns",dojox.charting.plot2d.Base,{defaultParams:{hAxis:"x",vAxis:"y",gap:0,animate:null},optionalParams:{minBarSize:1,maxBarSize:1,stroke:{},outline:{},shadow:{},fill:{},font:"",fontColor:""},constructor:function(_62d,_62e){this.opt=dojo.clone(this.defaultParams);du.updateWithObject(this.opt,_62e);du.updateWithPattern(this.opt,_62e,this.optionalParams);this.series=[];this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;this.animate=this.opt.animate;},getSeriesStats:function(){var _62f=dc.collectSimpleStats(this.series);_62f.hmin-=0.5;_62f.hmax+=0.5;return _62f;},render:function(dim,_630){if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_630);}this.resetEvents();this.dirty=this.isDirty();if(this.dirty){dojo.forEach(this.series,_62c);this._eventSeries={};this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,f,gap,_631,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_632=Math.max(0,this._vScaler.bounds.lower),_633=vt(_632),_634=this.events();f=dc.calculateBarSize(this._hScaler.bounds.scale,this.opt);gap=f.gap;_631=f.size;for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();var _635=t.next("column",[this.opt,run]),s=run.group,_636=new Array(run.data.length);for(var j=0;j<run.data.length;++j){var _637=run.data[j];if(_637!==null){var v=typeof _637=="number"?_637:_637.y,vv=vt(v),_638=vv-_633,h=Math.abs(_638),_639=typeof _637!="number"?t.addMixin(_635,"column",_637,true):t.post(_635,"column");if(_631>=1&&h>=1){var rect={x:_630.l+ht(j+0.5)+gap,y:dim.height-_630.b-(v>_632?vv:_633),width:_631,height:h};var _63a=this._plotFill(_639.series.fill,dim,_630);_63a=this._shapeFill(_63a,rect);var _63b=s.createRect(rect).setFill(_63a).setStroke(_639.series.stroke);run.dyn.fill=_63b.getFill();run.dyn.stroke=_63b.getStroke();if(_634){var o={element:"column",index:j,run:run,shape:_63b,x:j+0.5,y:v};this._connectEvents(o);_636[j]=o;}if(this.animate){this._animateColumn(_63b,dim.height-_630.b-_633,h);}}}}this._eventSeries[run.name]=_636;run.dirty=false;}this.dirty=false;return this;},_animateColumn:function(_63c,_63d,_63e){dojox.gfx.fx.animateTransform(dojo.delegate({shape:_63c,duration:1200,transform:[{name:"translate",start:[0,_63d-(_63d/_63e)],end:[0,0]},{name:"scale",start:[1,1/_63e],end:[1,1]},{name:"original"}]},this.animate)).play();}});})();}if(!dojo._hasResource["dojox.charting.plot2d.StackedColumns"]){dojo._hasResource["dojox.charting.plot2d.StackedColumns"]=true;dojo.provide("dojox.charting.plot2d.StackedColumns");(function(){var df=dojox.lang.functional,dc=dojox.charting.plot2d.common,_63f=df.lambda("item.purgeGroup()");dojo.declare("dojox.charting.plot2d.StackedColumns",dojox.charting.plot2d.Columns,{getSeriesStats:function(){var _640=dc.collectStackedStats(this.series);this._maxRunLength=_640.hmax;_640.hmin-=0.5;_640.hmax+=0.5;return _640;},render:function(dim,_641){if(this._maxRunLength<=0){return this;}var acc=df.repeat(this._maxRunLength,"-> 0",0);for(var i=0;i<this.series.length;++i){var run=this.series[i];for(var j=0;j<run.data.length;++j){var _642=run.data[j];if(_642!==null){var v=typeof _642=="number"?_642:_642.y;if(isNaN(v)){v=0;}acc[j]+=v;}}}if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_641);}this.resetEvents();this.dirty=this.isDirty();if(this.dirty){dojo.forEach(this.series,_63f);this._eventSeries={};this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,f,gap,_643,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_644=this.events();f=dc.calculateBarSize(this._hScaler.bounds.scale,this.opt);gap=f.gap;_643=f.size;for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();var _645=t.next("column",[this.opt,run]),s=run.group,_646=new Array(acc.length);for(var j=0;j<acc.length;++j){var _642=run.data[j];if(_642!==null){var v=acc[j],_647=vt(v),_648=typeof _642!="number"?t.addMixin(_645,"column",_642,true):t.post(_645,"column");if(_643>=1&&_647>=1){var rect={x:_641.l+ht(j+0.5)+gap,y:dim.height-_641.b-vt(v),width:_643,height:_647};var _649=this._plotFill(_648.series.fill,dim,_641);_649=this._shapeFill(_649,rect);var _64a=s.createRect(rect).setFill(_649).setStroke(_648.series.stroke);run.dyn.fill=_64a.getFill();run.dyn.stroke=_64a.getStroke();if(_644){var o={element:"column",index:j,run:run,shape:_64a,x:j+0.5,y:v};this._connectEvents(o);_646[j]=o;}if(this.animate){this._animateColumn(_64a,dim.height-_641.b,_647);}}}}this._eventSeries[run.name]=_646;run.dirty=false;for(var j=0;j<run.data.length;++j){var _642=run.data[j];if(_642!==null){var v=typeof _642=="number"?_642:_642.y;if(isNaN(v)){v=0;}acc[j]-=v;}}}this.dirty=false;return this;}});})();}if(!dojo._hasResource["dojox.charting.plot2d.ClusteredColumns"]){dojo._hasResource["dojox.charting.plot2d.ClusteredColumns"]=true;dojo.provide("dojox.charting.plot2d.ClusteredColumns");(function(){var df=dojox.lang.functional,dc=dojox.charting.plot2d.common,_64b=df.lambda("item.purgeGroup()");dojo.declare("dojox.charting.plot2d.ClusteredColumns",dojox.charting.plot2d.Columns,{render:function(dim,_64c){if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_64c);}this.resetEvents();this.dirty=this.isDirty();if(this.dirty){dojo.forEach(this.series,_64b);this._eventSeries={};this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,f,gap,_64d,_64e,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_64f=Math.max(0,this._vScaler.bounds.lower),_650=vt(_64f),_651=this.events();f=dc.calculateBarSize(this._hScaler.bounds.scale,this.opt,this.series.length);gap=f.gap;_64d=_64e=f.size;for(var i=0;i<this.series.length;++i){var run=this.series[i],_652=_64e*i;if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();var _653=t.next("column",[this.opt,run]),s=run.group,_654=new Array(run.data.length);for(var j=0;j<run.data.length;++j){var _655=run.data[j];if(_655!==null){var v=typeof _655=="number"?_655:_655.y,vv=vt(v),_656=vv-_650,h=Math.abs(_656),_657=typeof _655!="number"?t.addMixin(_653,"column",_655,true):t.post(_653,"column");if(_64d>=1&&h>=1){var rect={x:_64c.l+ht(j+0.5)+gap+_652,y:dim.height-_64c.b-(v>_64f?vv:_650),width:_64d,height:h};var _658=this._plotFill(_657.series.fill,dim,_64c);_658=this._shapeFill(_658,rect);var _659=s.createRect(rect).setFill(_658).setStroke(_657.series.stroke);run.dyn.fill=_659.getFill();run.dyn.stroke=_659.getStroke();if(_651){var o={element:"column",index:j,run:run,shape:_659,x:j+0.5,y:v};this._connectEvents(o);_654[j]=o;}if(this.animate){this._animateColumn(_659,dim.height-_64c.b-_650,h);}}}}this._eventSeries[run.name]=_654;run.dirty=false;}this.dirty=false;return this;}});})();}if(!dojo._hasResource["dojox.charting.plot2d.Bars"]){dojo._hasResource["dojox.charting.plot2d.Bars"]=true;dojo.provide("dojox.charting.plot2d.Bars");(function(){var df=dojox.lang.functional,du=dojox.lang.utils,dc=dojox.charting.plot2d.common,_65a=df.lambda("item.purgeGroup()");dojo.declare("dojox.charting.plot2d.Bars",dojox.charting.plot2d.Base,{defaultParams:{hAxis:"x",vAxis:"y",gap:0,animate:null},optionalParams:{minBarSize:1,maxBarSize:1,stroke:{},outline:{},shadow:{},fill:{},font:"",fontColor:""},constructor:function(_65b,_65c){this.opt=dojo.clone(this.defaultParams);du.updateWithObject(this.opt,_65c);du.updateWithPattern(this.opt,_65c,this.optionalParams);this.series=[];this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;this.animate=this.opt.animate;},getSeriesStats:function(){var _65d=dc.collectSimpleStats(this.series),t;_65d.hmin-=0.5;_65d.hmax+=0.5;t=_65d.hmin,_65d.hmin=_65d.vmin,_65d.vmin=t;t=_65d.hmax,_65d.hmax=_65d.vmax,_65d.vmax=t;return _65d;},render:function(dim,_65e){if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_65e);}this.dirty=this.isDirty();this.resetEvents();if(this.dirty){dojo.forEach(this.series,_65a);this._eventSeries={};this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,f,gap,_65f,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_660=Math.max(0,this._hScaler.bounds.lower),_661=ht(_660),_662=this.events();f=dc.calculateBarSize(this._vScaler.bounds.scale,this.opt);gap=f.gap;_65f=f.size;for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();var _663=t.next("bar",[this.opt,run]),s=run.group,_664=new Array(run.data.length);for(var j=0;j<run.data.length;++j){var _665=run.data[j];if(_665!==null){var v=typeof _665=="number"?_665:_665.y,hv=ht(v),_666=hv-_661,w=Math.abs(_666),_667=typeof _665!="number"?t.addMixin(_663,"bar",_665,true):t.post(_663,"bar");if(w>=1&&_65f>=1){var rect={x:_65e.l+(v<_660?hv:_661),y:dim.height-_65e.b-vt(j+1.5)+gap,width:w,height:_65f};var _668=this._plotFill(_667.series.fill,dim,_65e);_668=this._shapeFill(_668,rect);var _669=s.createRect(rect).setFill(_668).setStroke(_667.series.stroke);run.dyn.fill=_669.getFill();run.dyn.stroke=_669.getStroke();if(_662){var o={element:"bar",index:j,run:run,shape:_669,x:v,y:j+1.5};this._connectEvents(o);_664[j]=o;}if(this.animate){this._animateBar(_669,_65e.l+_661,-w);}}}}this._eventSeries[run.name]=_664;run.dirty=false;}this.dirty=false;return this;},_animateBar:function(_66a,_66b,_66c){dojox.gfx.fx.animateTransform(dojo.delegate({shape:_66a,duration:1200,transform:[{name:"translate",start:[_66b-(_66b/_66c),0],end:[0,0]},{name:"scale",start:[1/_66c,1],end:[1,1]},{name:"original"}]},this.animate)).play();}});})();}if(!dojo._hasResource["dojox.charting.plot2d.StackedBars"]){dojo._hasResource["dojox.charting.plot2d.StackedBars"]=true;dojo.provide("dojox.charting.plot2d.StackedBars");(function(){var df=dojox.lang.functional,dc=dojox.charting.plot2d.common,_66d=df.lambda("item.purgeGroup()");dojo.declare("dojox.charting.plot2d.StackedBars",dojox.charting.plot2d.Bars,{getSeriesStats:function(){var _66e=dc.collectStackedStats(this.series),t;this._maxRunLength=_66e.hmax;_66e.hmin-=0.5;_66e.hmax+=0.5;t=_66e.hmin,_66e.hmin=_66e.vmin,_66e.vmin=t;t=_66e.hmax,_66e.hmax=_66e.vmax,_66e.vmax=t;return _66e;},render:function(dim,_66f){if(this._maxRunLength<=0){return this;}var acc=df.repeat(this._maxRunLength,"-> 0",0);for(var i=0;i<this.series.length;++i){var run=this.series[i];for(var j=0;j<run.data.length;++j){var _670=run.data[j];if(_670!==null){var v=typeof _670=="number"?_670:_670.y;if(isNaN(v)){v=0;}acc[j]+=v;}}}if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_66f);}this.resetEvents();this.dirty=this.isDirty();if(this.dirty){dojo.forEach(this.series,_66d);this._eventSeries={};this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,f,gap,_671,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_672=this.events();f=dc.calculateBarSize(this._vScaler.bounds.scale,this.opt);gap=f.gap;_671=f.size;for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();var _673=t.next("bar",[this.opt,run]),s=run.group,_674=new Array(acc.length);for(var j=0;j<acc.length;++j){var _670=run.data[j];if(_670!==null){var v=acc[j],_675=ht(v),_676=typeof _670!="number"?t.addMixin(_673,"bar",_670,true):t.post(_673,"bar");if(_675>=1&&_671>=1){var rect={x:_66f.l,y:dim.height-_66f.b-vt(j+1.5)+gap,width:_675,height:_671};var _677=this._plotFill(_676.series.fill,dim,_66f);_677=this._shapeFill(_677,rect);var _678=s.createRect(rect).setFill(_677).setStroke(_676.series.stroke);run.dyn.fill=_678.getFill();run.dyn.stroke=_678.getStroke();if(_672){var o={element:"bar",index:j,run:run,shape:_678,x:v,y:j+1.5};this._connectEvents(o);_674[j]=o;}if(this.animate){this._animateBar(_678,_66f.l,-_675);}}}}this._eventSeries[run.name]=_674;run.dirty=false;for(var j=0;j<run.data.length;++j){var _670=run.data[j];if(_670!==null){var v=typeof _670=="number"?_670:_670.y;if(isNaN(v)){v=0;}acc[j]-=v;}}}this.dirty=false;return this;}});})();}if(!dojo._hasResource["dojox.charting.plot2d.ClusteredBars"]){dojo._hasResource["dojox.charting.plot2d.ClusteredBars"]=true;dojo.provide("dojox.charting.plot2d.ClusteredBars");(function(){var df=dojox.lang.functional,dc=dojox.charting.plot2d.common,_679=df.lambda("item.purgeGroup()");dojo.declare("dojox.charting.plot2d.ClusteredBars",dojox.charting.plot2d.Bars,{render:function(dim,_67a){if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_67a);}this.resetEvents();this.dirty=this.isDirty();if(this.dirty){dojo.forEach(this.series,_679);this._eventSeries={};this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,f,gap,_67b,_67c,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_67d=Math.max(0,this._hScaler.bounds.lower),_67e=ht(_67d),_67f=this.events();f=dc.calculateBarSize(this._vScaler.bounds.scale,this.opt,this.series.length);gap=f.gap;_67b=_67c=f.size;for(var i=this.series.length-1;i>=0;--i){var run=this.series[i],_680=_67c*(this.series.length-i-1);if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();var _681=t.next("bar",[this.opt,run]),s=run.group,_682=new Array(run.data.length);for(var j=0;j<run.data.length;++j){var _683=run.data[j];if(_683!==null){var v=typeof _683=="number"?_683:_683.y,hv=ht(v),_684=hv-_67e,w=Math.abs(_684),_685=typeof _683!="number"?t.addMixin(_681,"bar",_683,true):t.post(_681,"bar");if(w>=1&&_67b>=1){var rect={x:_67a.l+(v<_67d?hv:_67e),y:dim.height-_67a.b-vt(j+1.5)+gap+_680,width:w,height:_67b};var _686=this._plotFill(_685.series.fill,dim,_67a);_686=this._shapeFill(_686,rect);var _687=s.createRect(rect).setFill(_686).setStroke(_685.series.stroke);run.dyn.fill=_687.getFill();run.dyn.stroke=_687.getStroke();if(_67f){var o={element:"bar",index:j,run:run,shape:_687,x:v,y:j+1.5};this._connectEvents(o);_682[j]=o;}if(this.animate){this._animateBar(_687,_67a.l+_67e,-_684);}}}}this._eventSeries[run.name]=_682;run.dirty=false;}this.dirty=false;return this;}});})();}if(!dojo._hasResource["dojox.charting.plot2d.Grid"]){dojo._hasResource["dojox.charting.plot2d.Grid"]=true;dojo.provide("dojox.charting.plot2d.Grid");(function(){var du=dojox.lang.utils,dc=dojox.charting.plot2d.common;dojo.declare("dojox.charting.plot2d.Grid",dojox.charting.Element,{defaultParams:{hAxis:"x",vAxis:"y",hMajorLines:true,hMinorLines:false,vMajorLines:true,vMinorLines:false,hStripes:"none",vStripes:"none",animate:null},optionalParams:{},constructor:function(_688,_689){this.opt=dojo.clone(this.defaultParams);du.updateWithObject(this.opt,_689);this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;this.dirty=true;this.animate=this.opt.animate;this.zoom=null,this.zoomQueue=[];this.lastWindow={vscale:1,hscale:1,xoffset:0,yoffset:0};},clear:function(){this._hAxis=null;this._vAxis=null;this.dirty=true;return this;},setAxis:function(axis){if(axis){this[axis.vertical?"_vAxis":"_hAxis"]=axis;}return this;},addSeries:function(run){return this;},getSeriesStats:function(){return dojo.delegate(dc.defaultStats);},initializeScalers:function(){return this;},isDirty:function(){return this.dirty||this._hAxis&&this._hAxis.dirty||this._vAxis&&this._vAxis.dirty;},performZoom:function(dim,_68a){var vs=this._vAxis.scale||1,hs=this._hAxis.scale||1,_68b=dim.height-_68a.b,_68c=this._hAxis.getScaler().bounds,_68d=(_68c.from-_68c.lower)*_68c.scale,_68e=this._vAxis.getScaler().bounds,_68f=(_68e.from-_68e.lower)*_68e.scale;rVScale=vs/this.lastWindow.vscale,rHScale=hs/this.lastWindow.hscale,rXOffset=(this.lastWindow.xoffset-_68d)/((this.lastWindow.hscale==1)?hs:this.lastWindow.hscale),rYOffset=(_68f-this.lastWindow.yoffset)/((this.lastWindow.vscale==1)?vs:this.lastWindow.vscale),shape=this.group,anim=dojox.gfx.fx.animateTransform(dojo.delegate({shape:shape,duration:1200,transform:[{name:"translate",start:[0,0],end:[_68a.l*(1-rHScale),_68b*(1-rVScale)]},{name:"scale",start:[1,1],end:[rHScale,rVScale]},{name:"original"},{name:"translate",start:[0,0],end:[rXOffset,rYOffset]}]},this.zoom));dojo.mixin(this.lastWindow,{vscale:vs,hscale:hs,xoffset:_68d,yoffset:_68f});this.zoomQueue.push(anim);dojo.connect(anim,"onEnd",this,function(){this.zoom=null;this.zoomQueue.shift();if(this.zoomQueue.length>0){this.zoomQueue[0].play();}});if(this.zoomQueue.length==1){this.zoomQueue[0].play();}return this;},getRequiredColors:function(){return 0;},render:function(dim,_690){if(this.zoom){return this.performZoom(dim,_690);}this.dirty=this.isDirty();if(!this.dirty){return this;}this.cleanGroup();var s=this.group,ta=this.chart.theme.axis;try{var _691=this._vAxis.getScaler(),vt=_691.scaler.getTransformerFromModel(_691),_692=this._vAxis.getTicks();if(this.opt.hMinorLines){dojo.forEach(_692.minor,function(tick){var y=dim.height-_690.b-vt(tick.value);var _693=s.createLine({x1:_690.l,y1:y,x2:dim.width-_690.r,y2:y}).setStroke(ta.minorTick);if(this.animate){this._animateGrid(_693,"h",_690.l,_690.r+_690.l-dim.width);}},this);}if(this.opt.hMajorLines){dojo.forEach(_692.major,function(tick){var y=dim.height-_690.b-vt(tick.value);var _694=s.createLine({x1:_690.l,y1:y,x2:dim.width-_690.r,y2:y}).setStroke(ta.majorTick);if(this.animate){this._animateGrid(_694,"h",_690.l,_690.r+_690.l-dim.width);}},this);}}catch(e){}try{var _695=this._hAxis.getScaler(),ht=_695.scaler.getTransformerFromModel(_695),_692=this._hAxis.getTicks();if(_692&&this.opt.vMinorLines){dojo.forEach(_692.minor,function(tick){var x=_690.l+ht(tick.value);var _696=s.createLine({x1:x,y1:_690.t,x2:x,y2:dim.height-_690.b}).setStroke(ta.minorTick);if(this.animate){this._animateGrid(_696,"v",dim.height-_690.b,dim.height-_690.b-_690.t);}},this);}if(_692&&this.opt.vMajorLines){dojo.forEach(_692.major,function(tick){var x=_690.l+ht(tick.value);var _697=s.createLine({x1:x,y1:_690.t,x2:x,y2:dim.height-_690.b}).setStroke(ta.majorTick);if(this.animate){this._animateGrid(_697,"v",dim.height-_690.b,dim.height-_690.b-_690.t);}},this);}}catch(e){}this.dirty=false;return this;},_animateGrid:function(_698,type,_699,size){var _69a=type=="h"?[_699,0]:[0,_699];var _69b=type=="h"?[1/size,1]:[1,1/size];dojox.gfx.fx.animateTransform(dojo.delegate({shape:_698,duration:1200,transform:[{name:"translate",start:_69a,end:[0,0]},{name:"scale",start:_69b,end:[1,1]},{name:"original"}]},this.animate)).play();}});})();}if(!dojo._hasResource["dojox.charting.plot2d.Pie"]){dojo._hasResource["dojox.charting.plot2d.Pie"]=true;dojo.provide("dojox.charting.plot2d.Pie");(function(){var df=dojox.lang.functional,du=dojox.lang.utils,dc=dojox.charting.plot2d.common,da=dojox.charting.axis2d.common,g=dojox.gfx,m=g.matrix,_69c=0.2;dojo.declare("dojox.charting.plot2d.Pie",[dojox.charting.Element,dojox.charting.plot2d._PlotEvents],{defaultParams:{labels:true,ticks:false,fixed:true,precision:1,labelOffset:20,labelStyle:"default",htmlLabels:true,radGrad:"native",fanSize:5,startAngle:0},optionalParams:{radius:0,stroke:{},outline:{},shadow:{},fill:{},font:"",fontColor:"",labelWiring:{}},constructor:function(_69d,_69e){this.opt=dojo.clone(this.defaultParams);du.updateWithObject(this.opt,_69e);du.updateWithPattern(this.opt,_69e,this.optionalParams);this.run=null;this.dyn=[];},clear:function(){this.dirty=true;this.dyn=[];this.run=null;return this;},setAxis:function(axis){return this;},addSeries:function(run){this.run=run;return this;},getSeriesStats:function(){return dojo.delegate(dc.defaultStats);},initializeScalers:function(){return this;},getRequiredColors:function(){return this.run?this.run.data.length:0;},render:function(dim,_69f){if(!this.dirty){return this;}this.resetEvents();this.dirty=false;this._eventSeries={};this.cleanGroup();var s=this.group,t=this.chart.theme;if(!this.run||!this.run.data.length){return this;}var rx=(dim.width-_69f.l-_69f.r)/2,ry=(dim.height-_69f.t-_69f.b)/2,r=Math.min(rx,ry),_6a0="font" in this.opt?this.opt.font:t.axis.font,size=_6a0?g.normalizedLength(g.splitFontString(_6a0).size):0,_6a1="fontColor" in this.opt?this.opt.fontColor:t.axis.fontColor,_6a2=m._degToRad(this.opt.startAngle),_6a3=_6a2,step,_6a4,_6a5,_6a6,_6a7,_6a8,run=this.run.data,_6a9=this.events();if(typeof run[0]=="number"){_6a4=df.map(run,"x ? Math.max(x, 0) : 0");if(df.every(_6a4,"<= 0")){return this;}_6a5=df.map(_6a4,"/this",df.foldl(_6a4,"+",0));if(this.opt.labels){_6a6=dojo.map(_6a5,function(x){return x>0?this._getLabel(x*100)+"%":"";},this);}}else{_6a4=df.map(run,"x ? Math.max(x.y, 0) : 0");if(df.every(_6a4,"<= 0")){return this;}_6a5=df.map(_6a4,"/this",df.foldl(_6a4,"+",0));if(this.opt.labels){_6a6=dojo.map(_6a5,function(x,i){if(x<=0){return "";}var v=run[i];return "text" in v?v.text:this._getLabel(x*100)+"%";},this);}}var _6aa=df.map(run,function(v,i){if(v===null||typeof v=="number"){return t.next("slice",[this.opt,this.run],true);}return t.next("slice",[this.opt,this.run,v],true);},this);if(this.opt.labels){_6a7=df.foldl1(df.map(_6a6,function(_6ab,i){var font=_6aa[i].series.font;return dojox.gfx._base._getTextBox(_6ab,{font:font}).w;},this),"Math.max(a, b)")/2;if(this.opt.labelOffset<0){r=Math.min(rx-2*_6a7,ry-size)+this.opt.labelOffset;}_6a8=r-this.opt.labelOffset;}if("radius" in this.opt){r=this.opt.radius;_6a8=r-this.opt.labelOffset;}var _6ac={cx:_69f.l+rx,cy:_69f.t+ry,r:r};this.dyn=[];var _6ad=new Array(_6a5.length);dojo.some(_6a5,function(_6ae,i){if(_6ae<0){return false;}if(_6ae==0){this.dyn.push({fill:null,stroke:null});return false;}var v=run[i],_6af=_6aa[i],_6b0;if(_6ae>=1){_6b0=this._plotFill(_6af.series.fill,dim,_69f);_6b0=this._shapeFill(_6b0,{x:_6ac.cx-_6ac.r,y:_6ac.cy-_6ac.r,width:2*_6ac.r,height:2*_6ac.r});_6b0=this._pseudoRadialFill(_6b0,{x:_6ac.cx,y:_6ac.cy},_6ac.r);var _6b1=s.createCircle(_6ac).setFill(_6b0).setStroke(_6af.series.stroke);this.dyn.push({fill:_6b0,stroke:_6af.series.stroke});if(_6a9){var o={element:"slice",index:i,run:this.run,shape:_6b1,x:i,y:typeof v=="number"?v:v.y,cx:_6ac.cx,cy:_6ac.cy,cr:r};this._connectEvents(o);_6ad[i]=o;}return true;}var end=_6a3+_6ae*2*Math.PI;if(i+1==_6a5.length){end=_6a2+2*Math.PI;}var step=end-_6a3,x1=_6ac.cx+r*Math.cos(_6a3),y1=_6ac.cy+r*Math.sin(_6a3),x2=_6ac.cx+r*Math.cos(end),y2=_6ac.cy+r*Math.sin(end);var _6b2=m._degToRad(this.opt.fanSize);if(_6af.series.fill&&_6af.series.fill.type==="radial"&&this.opt.radGrad==="fan"&&step>_6b2){var _6b3=s.createGroup(),_6b4=Math.ceil(step/_6b2),_6b5=step/_6b4;_6b0=this._shapeFill(_6af.series.fill,{x:_6ac.cx-_6ac.r,y:_6ac.cy-_6ac.r,width:2*_6ac.r,height:2*_6ac.r});for(var j=0;j<_6b4;++j){var _6b6=j==0?x1:_6ac.cx+r*Math.cos(_6a3+(j-_69c)*_6b5),_6b7=j==0?y1:_6ac.cy+r*Math.sin(_6a3+(j-_69c)*_6b5),_6b8=j==_6b4-1?x2:_6ac.cx+r*Math.cos(_6a3+(j+1+_69c)*_6b5),_6b9=j==_6b4-1?y2:_6ac.cy+r*Math.sin(_6a3+(j+1+_69c)*_6b5),fan=_6b3.createPath({}).moveTo(_6ac.cx,_6ac.cy).lineTo(_6b6,_6b7).arcTo(r,r,0,_6b5>Math.PI,true,_6b8,_6b9).lineTo(_6ac.cx,_6ac.cy).closePath().setFill(this._pseudoRadialFill(_6b0,{x:_6ac.cx,y:_6ac.cy},r,_6a3+(j+0.5)*_6b5,_6a3+(j+0.5)*_6b5));}_6b3.createPath({}).moveTo(_6ac.cx,_6ac.cy).lineTo(x1,y1).arcTo(r,r,0,step>Math.PI,true,x2,y2).lineTo(_6ac.cx,_6ac.cy).closePath().setStroke(_6af.series.stroke);_6b1=_6b3;}else{_6b1=s.createPath({}).moveTo(_6ac.cx,_6ac.cy).lineTo(x1,y1).arcTo(r,r,0,step>Math.PI,true,x2,y2).lineTo(_6ac.cx,_6ac.cy).closePath().setStroke(_6af.series.stroke);var _6b0=_6af.series.fill;if(_6b0&&_6b0.type==="radial"){_6b0=this._shapeFill(_6b0,{x:_6ac.cx-_6ac.r,y:_6ac.cy-_6ac.r,width:2*_6ac.r,height:2*_6ac.r});if(this.opt.radGrad==="linear"){_6b0=this._pseudoRadialFill(_6b0,{x:_6ac.cx,y:_6ac.cy},r,_6a3,end);}}else{if(_6b0&&_6b0.type==="linear"){_6b0=this._plotFill(_6b0,dim,_69f);_6b0=this._shapeFill(_6b0,_6b1.getBoundingBox());}}_6b1.setFill(_6b0);}this.dyn.push({fill:_6b0,stroke:_6af.series.stroke});if(_6a9){var o={element:"slice",index:i,run:this.run,shape:_6b1,x:i,y:typeof v=="number"?v:v.y,cx:_6ac.cx,cy:_6ac.cy,cr:r};this._connectEvents(o);_6ad[i]=o;}_6a3=end;return false;},this);if(this.opt.labels){if(this.opt.labelStyle=="default"){_6a3=_6a2;dojo.some(_6a5,function(_6ba,i){if(_6ba<=0){return false;}var _6bb=_6aa[i];if(_6ba>=1){var v=run[i],elem=da.createText[this.opt.htmlLabels&&dojox.gfx.renderer!="vml"?"html":"gfx"](this.chart,s,_6ac.cx,_6ac.cy+size/2,"middle",_6a6[i],_6bb.series.font,_6bb.series.fontColor);if(this.opt.htmlLabels){this.htmlElements.push(elem);}return true;}var end=_6a3+_6ba*2*Math.PI,v=run[i];if(i+1==_6a5.length){end=_6a2+2*Math.PI;}var _6bc=(_6a3+end)/2,x=_6ac.cx+_6a8*Math.cos(_6bc),y=_6ac.cy+_6a8*Math.sin(_6bc)+size/2;var elem=da.createText[this.opt.htmlLabels&&dojox.gfx.renderer!="vml"?"html":"gfx"](this.chart,s,x,y,"middle",_6a6[i],_6bb.series.font,_6bb.series.fontColor);if(this.opt.htmlLabels){this.htmlElements.push(elem);}_6a3=end;return false;},this);}else{if(this.opt.labelStyle=="columns"){_6a3=_6a2;var _6bd=[];dojo.forEach(_6a5,function(_6be,i){var end=_6a3+_6be*2*Math.PI;if(i+1==_6a5.length){end=_6a2+2*Math.PI;}var _6bf=(_6a3+end)/2;_6bd.push({angle:_6bf,left:Math.cos(_6bf)<0,theme:_6aa[i],index:i,omit:end-_6a3<0.001});_6a3=end;});var _6c0=dojox.gfx._base._getTextBox("a",{font:_6a0}).h;this._getProperLabelRadius(_6bd,_6c0,_6ac.r*1.1);dojo.forEach(_6bd,function(_6c1,i){if(!_6c1.omit){var _6c2=_6ac.cx-_6ac.r*2,_6c3=_6ac.cx+_6ac.r*2,_6c4=dojox.gfx._base._getTextBox(_6a6[i],{font:_6a0}).w,x=_6ac.cx+_6c1.labelR*Math.cos(_6c1.angle),y=_6ac.cy+_6c1.labelR*Math.sin(_6c1.angle),_6c5=(_6c1.left)?(_6c2+_6c4):(_6c3-_6c4),_6c6=(_6c1.left)?_6c2:_6c5;var _6c7=s.createPath().moveTo(_6ac.cx+_6ac.r*Math.cos(_6c1.angle),_6ac.cy+_6ac.r*Math.sin(_6c1.angle));if(Math.abs(_6c1.labelR*Math.cos(_6c1.angle))<_6ac.r*2-_6c4){_6c7.lineTo(x,y);}_6c7.lineTo(_6c5,y).setStroke(_6c1.theme.series.labelWiring);var elem=da.createText[this.opt.htmlLabels&&dojox.gfx.renderer!="vml"?"html":"gfx"](this.chart,s,_6c6,y,"left",_6a6[i],_6c1.theme.series.font,_6c1.theme.series.fontColor);if(this.opt.htmlLabels){this.htmlElements.push(elem);}}},this);}}}var esi=0;this._eventSeries[this.run.name]=df.map(run,function(v){return v<=0?null:_6ad[esi++];});return this;},_getProperLabelRadius:function(_6c8,_6c9,_6ca){var _6cb={},_6cc={},_6cd=1,_6ce=1;if(_6c8.length==1){_6c8[0].labelR=_6ca;return;}for(var i=0;i<_6c8.length;i++){var _6cf=Math.abs(Math.sin(_6c8[i].angle));if(_6c8[i].left){if(_6cd>_6cf){_6cd=_6cf;_6cb=_6c8[i];}}else{if(_6ce>_6cf){_6ce=_6cf;_6cc=_6c8[i];}}}_6cb.labelR=_6cc.labelR=_6ca;this._caculateLabelR(_6cb,_6c8,_6c9);this._caculateLabelR(_6cc,_6c8,_6c9);},_caculateLabelR:function(_6d0,_6d1,_6d2){var i=_6d0.index,_6d3=_6d1.length,_6d4=_6d0.labelR;while(!(_6d1[i%_6d3].left^_6d1[(i+1)%_6d3].left)){if(!_6d1[(i+1)%_6d3].omit){var _6d5=(Math.sin(_6d1[i%_6d3].angle)*_6d4+((_6d1[i%_6d3].left)?(-_6d2):_6d2))/Math.sin(_6d1[(i+1)%_6d3].angle);_6d4=(_6d5<_6d0.labelR)?_6d0.labelR:_6d5;_6d1[(i+1)%_6d3].labelR=_6d4;}i++;}i=_6d0.index,j=(i==0)?_6d3-1:i-1;while(!(_6d1[i].left^_6d1[j].left)){if(!_6d1[j].omit){var _6d5=(Math.sin(_6d1[i].angle)*_6d4+((_6d1[i].left)?_6d2:(-_6d2)))/Math.sin(_6d1[j].angle);_6d4=(_6d5<_6d0.labelR)?_6d0.labelR:_6d5;_6d1[j].labelR=_6d4;}i--;j--;i=(i<0)?i+_6d1.length:i;j=(j<0)?j+_6d1.length:j;}},_getLabel:function(_6d6){return dc.getLabel(_6d6,this.opt.fixed,this.opt.precision);}});})();}if(!dojo._hasResource["dojox.charting.plot2d.Bubble"]){dojo._hasResource["dojox.charting.plot2d.Bubble"]=true;dojo.provide("dojox.charting.plot2d.Bubble");(function(){var df=dojox.lang.functional,du=dojox.lang.utils,dc=dojox.charting.plot2d.common,_6d7=df.lambda("item.purgeGroup()");dojo.declare("dojox.charting.plot2d.Bubble",dojox.charting.plot2d.Base,{defaultParams:{hAxis:"x",vAxis:"y",animate:null},optionalParams:{stroke:{},outline:{},shadow:{},fill:{},font:"",fontColor:""},constructor:function(_6d8,_6d9){this.opt=dojo.clone(this.defaultParams);du.updateWithObject(this.opt,_6d9);du.updateWithPattern(this.opt,_6d9,this.optionalParams);this.series=[];this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;this.animate=this.opt.animate;},render:function(dim,_6da){if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_6da);}this.resetEvents();this.dirty=this.isDirty();if(this.dirty){dojo.forEach(this.series,_6d7);this._eventSeries={};this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_6db=this.events();for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();if(!run.data.length){run.dirty=false;t.skip();continue;}if(typeof run.data[0]=="number"){console.warn("dojox.charting.plot2d.Bubble: the data in the following series cannot be rendered as a bubble chart; ",run);continue;}var _6dc=t.next("circle",[this.opt,run]),s=run.group,_6dd=dojo.map(run.data,function(v,i){return v?{x:ht(v.x)+_6da.l,y:dim.height-_6da.b-vt(v.y),radius:this._vScaler.bounds.scale*(v.size/2)}:null;},this);var _6de=null,_6df=null,_6e0=null;if(_6dc.series.shadow){_6e0=dojo.map(_6dd,function(item){if(item!==null){var _6e1=t.addMixin(_6dc,"circle",item,true),_6e2=_6e1.series.shadow;var _6e3=s.createCircle({cx:item.x+_6e2.dx,cy:item.y+_6e2.dy,r:item.radius}).setStroke(_6e2).setFill(_6e2.color);if(this.animate){this._animateBubble(_6e3,dim.height-_6da.b,item.radius);}return _6e3;}return null;},this);if(_6e0.length){run.dyn.shadow=_6e0[_6e0.length-1].getStroke();}}if(_6dc.series.outline){_6df=dojo.map(_6dd,function(item){if(item!==null){var _6e4=t.addMixin(_6dc,"circle",item,true),_6e5=dc.makeStroke(_6e4.series.outline);_6e5.width=2*_6e5.width+_6dc.series.stroke.width;var _6e6=s.createCircle({cx:item.x,cy:item.y,r:item.radius}).setStroke(_6e5);if(this.animate){this._animateBubble(_6e6,dim.height-_6da.b,item.radius);}return _6e6;}return null;},this);if(_6df.length){run.dyn.outline=_6df[_6df.length-1].getStroke();}}_6de=dojo.map(_6dd,function(item){if(item!==null){var _6e7=t.addMixin(_6dc,"circle",item,true),rect={x:item.x-item.radius,y:item.y-item.radius,width:2*item.radius,height:2*item.radius};var _6e8=this._plotFill(_6e7.series.fill,dim,_6da);_6e8=this._shapeFill(_6e8,rect);var _6e9=s.createCircle({cx:item.x,cy:item.y,r:item.radius}).setFill(_6e8).setStroke(_6e7.series.stroke);if(this.animate){this._animateBubble(_6e9,dim.height-_6da.b,item.radius);}return _6e9;}return null;},this);if(_6de.length){run.dyn.fill=_6de[_6de.length-1].getFill();run.dyn.stroke=_6de[_6de.length-1].getStroke();}if(_6db){var _6ea=new Array(_6de.length);dojo.forEach(_6de,function(s,i){if(s!==null){var o={element:"circle",index:i,run:run,shape:s,outline:_6df&&_6df[i]||null,shadow:_6e0&&_6e0[i]||null,x:run.data[i].x,y:run.data[i].y,r:run.data[i].size/2,cx:_6dd[i].x,cy:_6dd[i].y,cr:_6dd[i].radius};this._connectEvents(o);_6ea[i]=o;}},this);this._eventSeries[run.name]=_6ea;}else{delete this._eventSeries[run.name];}run.dirty=false;}this.dirty=false;return this;},_animateBubble:function(_6eb,_6ec,size){dojox.gfx.fx.animateTransform(dojo.delegate({shape:_6eb,duration:1200,transform:[{name:"translate",start:[0,_6ec],end:[0,0]},{name:"scale",start:[0,1/size],end:[1,1]},{name:"original"}]},this.animate)).play();}});})();}if(!dojo._hasResource["dojox.charting.plot2d.Candlesticks"]){dojo._hasResource["dojox.charting.plot2d.Candlesticks"]=true;dojo.provide("dojox.charting.plot2d.Candlesticks");(function(){var df=dojox.lang.functional,du=dojox.lang.utils,dc=dojox.charting.plot2d.common,_6ed=df.lambda("item.purgeGroup()");dojo.declare("dojox.charting.plot2d.Candlesticks",dojox.charting.plot2d.Base,{defaultParams:{hAxis:"x",vAxis:"y",gap:2,animate:null},optionalParams:{minBarSize:1,maxBarSize:1,stroke:{},outline:{},shadow:{},fill:{},font:"",fontColor:""},constructor:function(_6ee,_6ef){this.opt=dojo.clone(this.defaultParams);du.updateWithObject(this.opt,_6ef);du.updateWithPattern(this.opt,_6ef,this.optionalParams);this.series=[];this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;this.animate=this.opt.animate;},collectStats:function(_6f0){var _6f1=dojo.delegate(dc.defaultStats);for(var i=0;i<_6f0.length;i++){var run=_6f0[i];if(!run.data.length){continue;}var _6f2=_6f1.vmin,_6f3=_6f1.vmax;if(!("ymin" in run)||!("ymax" in run)){dojo.forEach(run.data,function(val,idx){if(val!==null){var x=val.x||idx+1;_6f1.hmin=Math.min(_6f1.hmin,x);_6f1.hmax=Math.max(_6f1.hmax,x);_6f1.vmin=Math.min(_6f1.vmin,val.open,val.close,val.high,val.low);_6f1.vmax=Math.max(_6f1.vmax,val.open,val.close,val.high,val.low);}});}if("ymin" in run){_6f1.vmin=Math.min(_6f2,run.ymin);}if("ymax" in run){_6f1.vmax=Math.max(_6f3,run.ymax);}}return _6f1;},getSeriesStats:function(){var _6f4=this.collectStats(this.series);_6f4.hmin-=0.5;_6f4.hmax+=0.5;return _6f4;},render:function(dim,_6f5){if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_6f5);}this.resetEvents();this.dirty=this.isDirty();if(this.dirty){dojo.forEach(this.series,_6ed);this._eventSeries={};this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,f,gap,_6f6,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_6f7=Math.max(0,this._vScaler.bounds.lower),_6f8=vt(_6f7),_6f9=this.events();f=dc.calculateBarSize(this._hScaler.bounds.scale,this.opt);gap=f.gap;_6f6=f.size;for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();var _6fa=t.next("candlestick",[this.opt,run]),s=run.group,_6fb=new Array(run.data.length);for(var j=0;j<run.data.length;++j){var v=run.data[j];if(v!==null){var _6fc=t.addMixin(_6fa,"candlestick",v,true);var x=ht(v.x||(j+0.5))+_6f5.l+gap,y=dim.height-_6f5.b,open=vt(v.open),_6fd=vt(v.close),high=vt(v.high),low=vt(v.low);if("mid" in v){var mid=vt(v.mid);}if(low>high){var tmp=high;high=low;low=tmp;}if(_6f6>=1){var _6fe=open>_6fd;var line={x1:_6f6/2,x2:_6f6/2,y1:y-high,y2:y-low},rect={x:0,y:y-Math.max(open,_6fd),width:_6f6,height:Math.max(_6fe?open-_6fd:_6fd-open,1)};shape=s.createGroup();shape.setTransform({dx:x,dy:0});var _6ff=shape.createGroup();_6ff.createLine(line).setStroke(_6fc.series.stroke);_6ff.createRect(rect).setStroke(_6fc.series.stroke).setFill(_6fe?_6fc.series.fill:"white");if("mid" in v){_6ff.createLine({x1:(_6fc.series.stroke.width||1),x2:_6f6-(_6fc.series.stroke.width||1),y1:y-mid,y2:y-mid}).setStroke(_6fe?"white":_6fc.series.stroke);}run.dyn.fill=_6fc.series.fill;run.dyn.stroke=_6fc.series.stroke;if(_6f9){var o={element:"candlestick",index:j,run:run,shape:_6ff,x:x,y:y-Math.max(open,_6fd),cx:_6f6/2,cy:(y-Math.max(open,_6fd))+(Math.max(_6fe?open-_6fd:_6fd-open,1)/2),width:_6f6,height:Math.max(_6fe?open-_6fd:_6fd-open,1),data:v};this._connectEvents(o);_6fb[j]=o;}}if(this.animate){this._animateCandlesticks(shape,y-low,high-low);}}}this._eventSeries[run.name]=_6fb;run.dirty=false;}this.dirty=false;return this;},_animateCandlesticks:function(_700,_701,_702){dojox.gfx.fx.animateTransform(dojo.delegate({shape:_700,duration:1200,transform:[{name:"translate",start:[0,_701-(_701/_702)],end:[0,0]},{name:"scale",start:[1,1/_702],end:[1,1]},{name:"original"}]},this.animate)).play();}});})();}if(!dojo._hasResource["dojox.charting.plot2d.OHLC"]){dojo._hasResource["dojox.charting.plot2d.OHLC"]=true;dojo.provide("dojox.charting.plot2d.OHLC");(function(){var df=dojox.lang.functional,du=dojox.lang.utils,dc=dojox.charting.plot2d.common,_703=df.lambda("item.purgeGroup()");dojo.declare("dojox.charting.plot2d.OHLC",dojox.charting.plot2d.Base,{defaultParams:{hAxis:"x",vAxis:"y",gap:2,animate:null},optionalParams:{minBarSize:1,maxBarSize:1,stroke:{},outline:{},shadow:{},fill:{},font:"",fontColor:""},constructor:function(_704,_705){this.opt=dojo.clone(this.defaultParams);du.updateWithObject(this.opt,_705);du.updateWithPattern(this.opt,_705,this.optionalParams);this.series=[];this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;this.animate=this.opt.animate;},collectStats:function(_706){var _707=dojo.delegate(dc.defaultStats);for(var i=0;i<_706.length;i++){var run=_706[i];if(!run.data.length){continue;}var _708=_707.vmin,_709=_707.vmax;if(!("ymin" in run)||!("ymax" in run)){dojo.forEach(run.data,function(val,idx){if(val!==null){var x=val.x||idx+1;_707.hmin=Math.min(_707.hmin,x);_707.hmax=Math.max(_707.hmax,x);_707.vmin=Math.min(_707.vmin,val.open,val.close,val.high,val.low);_707.vmax=Math.max(_707.vmax,val.open,val.close,val.high,val.low);}});}if("ymin" in run){_707.vmin=Math.min(_708,run.ymin);}if("ymax" in run){_707.vmax=Math.max(_709,run.ymax);}}return _707;},getSeriesStats:function(){var _70a=this.collectStats(this.series);_70a.hmin-=0.5;_70a.hmax+=0.5;return _70a;},render:function(dim,_70b){if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_70b);}this.resetEvents();this.dirty=this.isDirty();if(this.dirty){dojo.forEach(this.series,_703);this._eventSeries={};this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,f,gap,_70c,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_70d=Math.max(0,this._vScaler.bounds.lower),_70e=vt(_70d),_70f=this.events();f=dc.calculateBarSize(this._hScaler.bounds.scale,this.opt);gap=f.gap;_70c=f.size;for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();var _710=t.next("candlestick",[this.opt,run]),s=run.group,_711=new Array(run.data.length);for(var j=0;j<run.data.length;++j){var v=run.data[j];if(v!==null){var _712=t.addMixin(_710,"candlestick",v,true);var x=ht(v.x||(j+0.5))+_70b.l+gap,y=dim.height-_70b.b,open=vt(v.open),_713=vt(v.close),high=vt(v.high),low=vt(v.low);if(low>high){var tmp=high;high=low;low=tmp;}if(_70c>=1){var hl={x1:_70c/2,x2:_70c/2,y1:y-high,y2:y-low},op={x1:0,x2:((_70c/2)+((_712.series.stroke.width||1)/2)),y1:y-open,y2:y-open},cl={x1:((_70c/2)-((_712.series.stroke.width||1)/2)),x2:_70c,y1:y-_713,y2:y-_713};shape=s.createGroup();shape.setTransform({dx:x,dy:0});var _714=shape.createGroup();_714.createLine(hl).setStroke(_712.series.stroke);_714.createLine(op).setStroke(_712.series.stroke);_714.createLine(cl).setStroke(_712.series.stroke);run.dyn.stroke=_712.series.stroke;if(_70f){var o={element:"candlestick",index:j,run:run,shape:_714,x:x,y:y-Math.max(open,_713),cx:_70c/2,cy:(y-Math.max(open,_713))+(Math.max(open>_713?open-_713:_713-open,1)/2),width:_70c,height:Math.max(open>_713?open-_713:_713-open,1),data:v};this._connectEvents(o);_711[j]=o;}}if(this.animate){this._animateOHLC(shape,y-low,high-low);}}}this._eventSeries[run.name]=_711;run.dirty=false;}this.dirty=false;return this;},_animateOHLC:function(_715,_716,_717){dojox.gfx.fx.animateTransform(dojo.delegate({shape:_715,duration:1200,transform:[{name:"translate",start:[0,_716-(_716/_717)],end:[0,0]},{name:"scale",start:[1,1/_717],end:[1,1]},{name:"original"}]},this.animate)).play();}});})();}if(!dojo._hasResource["dojo.fx.easing"]){dojo._hasResource["dojo.fx.easing"]=true;dojo.provide("dojo.fx.easing");dojo.getObject("fx.easing",true,dojo);dojo.fx.easing={linear:function(n){return n;},quadIn:function(n){return Math.pow(n,2);},quadOut:function(n){return n*(n-2)*-1;},quadInOut:function(n){n=n*2;if(n<1){return Math.pow(n,2)/2;}return -1*((--n)*(n-2)-1)/2;},cubicIn:function(n){return Math.pow(n,3);},cubicOut:function(n){return Math.pow(n-1,3)+1;},cubicInOut:function(n){n=n*2;if(n<1){return Math.pow(n,3)/2;}n-=2;return (Math.pow(n,3)+2)/2;},quartIn:function(n){return Math.pow(n,4);},quartOut:function(n){return -1*(Math.pow(n-1,4)-1);},quartInOut:function(n){n=n*2;if(n<1){return Math.pow(n,4)/2;}n-=2;return -1/2*(Math.pow(n,4)-2);},quintIn:function(n){return Math.pow(n,5);},quintOut:function(n){return Math.pow(n-1,5)+1;},quintInOut:function(n){n=n*2;if(n<1){return Math.pow(n,5)/2;}n-=2;return (Math.pow(n,5)+2)/2;},sineIn:function(n){return -1*Math.cos(n*(Math.PI/2))+1;},sineOut:function(n){return Math.sin(n*(Math.PI/2));},sineInOut:function(n){return -1*(Math.cos(Math.PI*n)-1)/2;},expoIn:function(n){return (n==0)?0:Math.pow(2,10*(n-1));},expoOut:function(n){return (n==1)?1:(-1*Math.pow(2,-10*n)+1);},expoInOut:function(n){if(n==0){return 0;}if(n==1){return 1;}n=n*2;if(n<1){return Math.pow(2,10*(n-1))/2;}--n;return (-1*Math.pow(2,-10*n)+2)/2;},circIn:function(n){return -1*(Math.sqrt(1-Math.pow(n,2))-1);},circOut:function(n){n=n-1;return Math.sqrt(1-Math.pow(n,2));},circInOut:function(n){n=n*2;if(n<1){return -1/2*(Math.sqrt(1-Math.pow(n,2))-1);}n-=2;return 1/2*(Math.sqrt(1-Math.pow(n,2))+1);},backIn:function(n){var s=1.70158;return Math.pow(n,2)*((s+1)*n-s);},backOut:function(n){n=n-1;var s=1.70158;return Math.pow(n,2)*((s+1)*n+s)+1;},backInOut:function(n){var s=1.70158*1.525;n=n*2;if(n<1){return (Math.pow(n,2)*((s+1)*n-s))/2;}n-=2;return (Math.pow(n,2)*((s+1)*n+s)+2)/2;},elasticIn:function(n){if(n==0||n==1){return n;}var p=0.3;var s=p/4;n=n-1;return -1*Math.pow(2,10*n)*Math.sin((n-s)*(2*Math.PI)/p);},elasticOut:function(n){if(n==0||n==1){return n;}var p=0.3;var s=p/4;return Math.pow(2,-10*n)*Math.sin((n-s)*(2*Math.PI)/p)+1;},elasticInOut:function(n){if(n==0){return 0;}n=n*2;if(n==2){return 1;}var p=0.3*1.5;var s=p/4;if(n<1){n-=1;return -0.5*(Math.pow(2,10*n)*Math.sin((n-s)*(2*Math.PI)/p));}n-=1;return 0.5*(Math.pow(2,-10*n)*Math.sin((n-s)*(2*Math.PI)/p))+1;},bounceIn:function(n){return (1-dojo.fx.easing.bounceOut(1-n));},bounceOut:function(n){var s=7.5625;var p=2.75;var l;if(n<(1/p)){l=s*Math.pow(n,2);}else{if(n<(2/p)){n-=(1.5/p);l=s*Math.pow(n,2)+0.75;}else{if(n<(2.5/p)){n-=(2.25/p);l=s*Math.pow(n,2)+0.9375;}else{n-=(2.625/p);l=s*Math.pow(n,2)+0.984375;}}}return l;},bounceInOut:function(n){if(n<0.5){return dojo.fx.easing.bounceIn(n*2)/2;}return (dojo.fx.easing.bounceOut(n*2-1)/2)+0.5;}};}if(!dojo._hasResource["dojox.charting.plot2d.Spider"]){dojo._hasResource["dojox.charting.plot2d.Spider"]=true;dojo.provide("dojox.charting.plot2d.Spider");dojo.experimental("dojox.charting.plot2d.Spider");(function(){var df=dojox.lang.functional,du=dojox.lang.utils,dc=dojox.charting.plot2d.common,da=dojox.charting.axis2d.common,g=dojox.gfx,m=g.matrix,_718=0.2;dojo.declare("dojox.charting.plot2d.Spider",[dojox.charting.Element,dojox.charting.plot2d._PlotEvents],{defaultParams:{labels:true,ticks:false,fixed:true,precision:1,labelOffset:-10,labelStyle:"default",htmlLabels:true,startAngle:-90,divisions:3,axisColor:"",axisWidth:0,spiderColor:"",spiderWidth:0,seriesWidth:0,seriesFillAlpha:0.2,spiderOrigin:0.16,markerSize:3,spiderType:"polygon",animationType:dojo.fx.easing.backOut,axisTickFont:"",axisTickFontColor:"",axisFont:"",axisFontColor:""},optionalParams:{radius:0,font:"",fontColor:""},constructor:function(_719,_71a){this.opt=dojo.clone(this.defaultParams);du.updateWithObject(this.opt,_71a);du.updateWithPattern(this.opt,_71a,this.optionalParams);this.series=[];this.dyn=[];this.datas={};this.labelKey=[];this.oldSeriePoints={};this.animations={};},clear:function(){this.dirty=true;this.dyn=[];this.series=[];this.datas={};this.labelKey=[];this.oldSeriePoints={};this.animations={};return this;},setAxis:function(axis){return this;},addSeries:function(run){var _71b=false;this.series.push(run);for(var key in run.data){var val=run.data[key],data=this.datas[key];if(data){data.vlist.push(val);data.min=Math.min(data.min,val);data.max=Math.max(data.max,val);}else{this.datas[key]={min:val,max:val,vlist:[val]};}}if(this.labelKey.length<=0){for(var key in run.data){this.labelKey.push(key);}}return this;},getSeriesStats:function(){return dojox.charting.plot2d.common.collectSimpleStats(this.series);},calculateAxes:function(dim){this.initializeScalers(dim,this.getSeriesStats());return this;},getRequiredColors:function(){return this.series.length;},initializeScalers:function(dim,_71c){if(this._hAxis){if(!this._hAxis.initialized()){this._hAxis.calculate(_71c.hmin,_71c.hmax,dim.width);}this._hScaler=this._hAxis.getScaler();}else{this._hScaler=dojox.charting.scaler.primitive.buildScaler(_71c.hmin,_71c.hmax,dim.width);}if(this._vAxis){if(!this._vAxis.initialized()){this._vAxis.calculate(_71c.vmin,_71c.vmax,dim.height);}this._vScaler=this._vAxis.getScaler();}else{this._vScaler=dojox.charting.scaler.primitive.buildScaler(_71c.vmin,_71c.vmax,dim.height);}return this;},render:function(dim,_71d){if(!this.dirty){return this;}this.dirty=false;this.cleanGroup();var s=this.group,t=this.chart.theme;this.resetEvents();if(!this.series||!this.series.length){return this;}var o=this.opt,ta=t.axis,rx=(dim.width-_71d.l-_71d.r)/2,ry=(dim.height-_71d.t-_71d.b)/2,r=Math.min(rx,ry),_71e=o.font||(ta.majorTick&&ta.majorTick.font)||(ta.tick&&ta.tick.font)||"normal normal normal 7pt Tahoma",_71f=o.axisFont||(ta.tick&&ta.tick.titleFont)||"normal normal normal 11pt Tahoma",_720=o.axisTickFontColor||(ta.majorTick&&ta.majorTick.fontColor)||(ta.tick&&ta.tick.fontColor)||"silver",_721=o.axisFontColor||(ta.tick&&ta.tick.titleFontColor)||"black",_722=o.axisColor||(ta.tick&&ta.tick.axisColor)||"silver",_723=o.spiderColor||(ta.tick&&ta.tick.spiderColor)||"silver",_724=o.axisWidth||(ta.stroke&&ta.stroke.width)||2,_725=o.spiderWidth||(ta.stroke&&ta.stroke.width)||2,_726=o.seriesWidth||(ta.stroke&&ta.stroke.width)||2,_727=g.normalizedLength(g.splitFontString(_71f).size),_728=m._degToRad(o.startAngle),_729=_728,step,_72a,_72b,_72c,_72d,_72e,_72f,_730,_731,_732,_733,ro=o.spiderOrigin,dv=o.divisions>=3?o.divisions:3,ms=o.markerSize,spt=o.spiderType,at=o.animationType,_734=o.labelOffset<-10?o.labelOffset:-10,_735=0.2;if(o.labels){_72c=dojo.map(this.series,function(s){return s.name;},this);_72d=df.foldl1(df.map(_72c,function(_736,i){var font=t.series.font;return dojox.gfx._base._getTextBox(_736,{font:font}).w;},this),"Math.max(a, b)")/2;r=Math.min(rx-2*_72d,ry-_727)+_734;_72e=r-_734;}if("radius" in o){r=o.radius;_72e=r-_734;}r/=(1+_735);var _737={cx:_71d.l+rx,cy:_71d.t+ry,r:r};for(var i=this.series.length-1;i>=0;i--){var _738=this.series[i];if(!this.dirty&&!_738.dirty){t.skip();continue;}_738.cleanGroup();var run=_738.data;if(run!==null){var len=this._getObjectLength(run);if(!_72f||_72f.length<=0){_72f=[],_730=[],_733=[];this._buildPoints(_72f,len,_737,r,_729,true);this._buildPoints(_730,len,_737,r*ro,_729,true);this._buildPoints(_733,len,_737,_72e,_729);if(dv>2){_731=[],_732=[];for(var j=0;j<dv-2;j++){_731[j]=[];this._buildPoints(_731[j],len,_737,r*(ro+(1-ro)*(j+1)/(dv-1)),_729,true);_732[j]=r*(ro+(1-ro)*(j+1)/(dv-1));}}}}}var _739=s.createGroup(),_73a={color:_722,width:_724},_73b={color:_723,width:_725};for(var j=_72f.length-1;j>=0;--j){var _73c=_72f[j],st={x:_73c.x+(_73c.x-_737.cx)*_735,y:_73c.y+(_73c.y-_737.cy)*_735},nd={x:_73c.x+(_73c.x-_737.cx)*_735/2,y:_73c.y+(_73c.y-_737.cy)*_735/2};_739.createLine({x1:_737.cx,y1:_737.cy,x2:st.x,y2:st.y}).setStroke(_73a);this._drawArrow(_739,st,nd,_73a);}var _73d=s.createGroup();for(var j=_733.length-1;j>=0;--j){var _73c=_733[j],_73e=dojox.gfx._base._getTextBox(this.labelKey[j],{font:_71f}).w||0,_73f=this.opt.htmlLabels&&dojox.gfx.renderer!="vml"?"html":"gfx";elem=da.createText[_73f](this.chart,_73d,(!dojo._isBodyLtr()&&_73f=="html")?(_73c.x+_73e-dim.width):_73c.x,_73c.y,"middle",this.labelKey[j],_71f,_721);if(this.opt.htmlLabels){this.htmlElements.push(elem);}}var _740=s.createGroup();if(spt=="polygon"){_740.createPolyline(_72f).setStroke(_73b);_740.createPolyline(_730).setStroke(_73b);if(_731.length>0){for(var j=_731.length-1;j>=0;--j){_740.createPolyline(_731[j]).setStroke(_73b);}}}else{var _741=this._getObjectLength(this.datas);_740.createCircle({cx:_737.cx,cy:_737.cy,r:r}).setStroke(_73b);_740.createCircle({cx:_737.cx,cy:_737.cy,r:r*ro}).setStroke(_73b);if(_732.length>0){for(var j=_732.length-1;j>=0;--j){_740.createCircle({cx:_737.cx,cy:_737.cy,r:_732[j]}).setStroke(_73b);}}}var _742=s.createGroup(),len=this._getObjectLength(this.datas),k=0;for(var key in this.datas){var data=this.datas[key],min=data.min,max=data.max,_743=max-min,end=_729+2*Math.PI*k/len;for(var i=0;i<dv;i++){var text=min+_743*i/(dv-1),_73c=this._getCoordinate(_737,r*(ro+(1-ro)*i/(dv-1)),end);text=this._getLabel(text);var _73e=dojox.gfx._base._getTextBox(text,{font:_71e}).w||0,_73f=this.opt.htmlLabels&&dojox.gfx.renderer!="vml"?"html":"gfx";if(this.opt.htmlLabels){this.htmlElements.push(da.createText[_73f](this.chart,_742,(!dojo._isBodyLtr()&&_73f=="html")?(_73c.x+_73e-dim.width):_73c.x,_73c.y,"start",text,_71e,_720));}}k++;}this.chart.seriesShapes={};var _744=[];for(var i=this.series.length-1;i>=0;i--){var _738=this.series[i],run=_738.data;if(run!==null){var _745=[],k=0,_746=[];for(var key in run){var data=this.datas[key],min=data.min,max=data.max,_743=max-min,_747=run[key],end=_729+2*Math.PI*k/len,_73c=this._getCoordinate(_737,r*(ro+(1-ro)*(_747-min)/_743),end);_745.push(_73c);_746.push({sname:_738.name,key:key,data:_747});k++;}_745[_745.length]=_745[0];_746[_746.length]=_746[0];var _748=this._getBoundary(_745),_749=t.next("spider",[o,_738]),ts=_738.group,f=g.normalizeColor(_749.series.fill),sk={color:_749.series.fill,width:_726};f.a=o.seriesFillAlpha;_738.dyn={fill:f,stroke:sk};var osps=this.oldSeriePoints[_738.name];var cs=this._createSeriesEntry(ts,(osps||_730),_745,f,sk,r,ro,ms,at);this.chart.seriesShapes[_738.name]=cs;this.oldSeriePoints[_738.name]=_745;var po={element:"spider_poly",index:i,id:"spider_poly_"+_738.name,run:_738,plot:this,shape:cs.poly,parent:ts,brect:_748,cx:_737.cx,cy:_737.cy,cr:r,f:f,s:s};this._connectEvents(po);var so={element:"spider_plot",index:i,id:"spider_plot_"+_738.name,run:_738,plot:this,shape:_738.group};this._connectEvents(so);dojo.forEach(cs.circles,function(c,i){var _74a=c.getShape(),co={element:"spider_circle",index:i,id:"spider_circle_"+_738.name+i,run:_738,plot:this,shape:c,parent:ts,tdata:_746[i],cx:_745[i].x,cy:_745[i].y,f:f,s:s};this._connectEvents(co);},this);}}return this;},_createSeriesEntry:function(ts,osps,sps,f,sk,r,ro,ms,at){var _74b=ts.createPolyline(osps).setFill(f).setStroke(sk),_74c=[];for(var j=0;j<osps.length;j++){var _74d=osps[j],cr=ms;var _74e=ts.createCircle({cx:_74d.x,cy:_74d.y,r:cr}).setFill(f).setStroke(sk);_74c.push(_74e);}var _74f=dojo.map(sps,function(np,j){var sp=osps[j],anim=new dojo._Animation({duration:1000,easing:at,curve:[sp.y,np.y]});var spl=_74b,sc=_74c[j];dojo.connect(anim,"onAnimate",function(y){var _750=spl.getShape();_750.points[j].y=y;spl.setShape(_750);var _751=sc.getShape();_751.cy=y;sc.setShape(_751);});return anim;});var _752=dojo.map(sps,function(np,j){var sp=osps[j],anim=new dojo._Animation({duration:1000,easing:at,curve:[sp.x,np.x]});var spl=_74b,sc=_74c[j];dojo.connect(anim,"onAnimate",function(x){var _753=spl.getShape();_753.points[j].x=x;spl.setShape(_753);var _754=sc.getShape();_754.cx=x;sc.setShape(_754);});return anim;});var _755=dojo.fx.combine(_74f.concat(_752));_755.play();return {group:ts,poly:_74b,circles:_74c};},plotEvent:function(o){var _756=o.id?o.id:"default",a;if(_756 in this.animations){a=this.animations[_756];a.anim&&a.anim.stop(true);}else{a=this.animations[_756]={};}if(o.element=="spider_poly"){if(!a.color){var _757=o.shape.getFill();if(!_757||!(_757 instanceof dojo.Color)){return;}a.color={start:_757,end:_758(_757)};}var _759=a.color.start,end=a.color.end;if(o.type=="onmouseout"){var t=_759;_759=end;end=t;}a.anim=dojox.gfx.fx.animateFill({shape:o.shape,duration:800,easing:dojo.fx.easing.backOut,color:{start:_759,end:end}});a.anim.play();}else{if(o.element=="spider_circle"){var init,_75a,_75b=1.5;if(o.type=="onmouseover"){init=dojox.gfx.matrix.identity;_75a=_75b;var _75c={type:"rect"};_75c.x=o.cx;_75c.y=o.cy;_75c.width=_75c.height=1;var lt=dojo.coords(this.chart.node,true);_75c.x+=lt.x;_75c.y+=lt.y;_75c.x=Math.round(_75c.x);_75c.y=Math.round(_75c.y);_75c.width=Math.ceil(_75c.width);_75c.height=Math.ceil(_75c.height);this.aroundRect=_75c;var _75d=["after","before"];if(dijit&&dijit.Tooltip){dijit.showTooltip(o.tdata.sname+"<br/>"+o.tdata.key+"<br/>"+o.tdata.data,this.aroundRect,_75d);}}else{init=dojox.gfx.matrix.scaleAt(_75b,o.cx,o.cy);_75a=1/_75b;if(dijit&&dijit.Tooltip){this.aroundRect&&dijit.hideTooltip(this.aroundRect);}}var cs=o.shape.getShape(),init=m.scaleAt(_75b,cs.cx,cs.cy),_75e={shape:o.shape,duration:200,easing:dojo.fx.easing.backOut,transform:[{name:"scaleAt",start:[1,cs.cx,cs.cy],end:[_75a,cs.cx,cs.cy]},init]};a.anim=dojox.gfx.fx.animateTransform(_75e);a.anim.play();}else{if(o.element=="spider_plot"){if(o.type=="onmouseover"&&!dojo.isIE){o.shape.moveToFront();}}}}},_getBoundary:function(_75f){var xmax=_75f[0].x,xmin=_75f[0].x,ymax=_75f[0].y,ymin=_75f[0].y;for(var i=0;i<_75f.length;i++){var _760=_75f[i];xmax=Math.max(_760.x,xmax);ymax=Math.max(_760.y,ymax);xmin=Math.min(_760.x,xmin);ymin=Math.min(_760.y,ymin);}return {x:xmin,y:ymin,width:xmax-xmin,height:ymax-ymin};},_drawArrow:function(s,_761,end,_762){var len=Math.sqrt(Math.pow(end.x-_761.x,2)+Math.pow(end.y-_761.y,2)),sin=(end.y-_761.y)/len,cos=(end.x-_761.x)/len,_763={x:end.x+(len/3)*(-sin),y:end.y+(len/3)*cos},_764={x:end.x+(len/3)*sin,y:end.y+(len/3)*(-cos)};s.createPolyline([_761,_763,_764]).setFill(_762.color).setStroke(_762);},_buildPoints:function(_765,_766,_767,_768,_769,_76a){for(var i=0;i<_766;i++){var end=_769+2*Math.PI*i/_766;_765.push(this._getCoordinate(_767,_768,end));}if(_76a){_765.push(this._getCoordinate(_767,_768,_769+2*Math.PI));}},_getCoordinate:function(_76b,_76c,_76d){return {x:_76b.cx+_76c*Math.cos(_76d),y:_76b.cy+_76c*Math.sin(_76d)};},_getObjectLength:function(obj){var _76e=0;if(dojo.isObject(obj)){for(var key in obj){_76e++;}}return _76e;},_getLabel:function(_76f){return dc.getLabel(_76f,this.opt.fixed,this.opt.precision);}});function _758(_770){var a=new dojox.color.Color(_770),x=a.toHsl();if(x.s==0){x.l=x.l<50?100:0;}else{x.s=100;if(x.l<50){x.l=75;}else{if(x.l>75){x.l=50;}else{x.l=x.l-50>75-x.l?50:75;}}}var _770=dojox.color.fromHsl(x);_770.a=0.7;return _770;};})();}if(!dojo._hasResource["dojox.lang.functional.fold"]){dojo._hasResource["dojox.lang.functional.fold"]=true;dojo.provide("dojox.lang.functional.fold");(function(){var d=dojo,df=dojox.lang.functional,_771={};d.mixin(df,{foldl:function(a,f,z,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);var i,n;if(d.isArray(a)){for(i=0,n=a.length;i<n;z=f.call(o,z,a[i],i,a),++i){}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){for(i=0;a.hasNext();z=f.call(o,z,a.next(),i++,a)){}}else{for(i in a){if(!(i in _771)){z=f.call(o,z,a[i],i,a);}}}}return z;},foldl1:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);var z,i,n;if(d.isArray(a)){z=a[0];for(i=1,n=a.length;i<n;z=f.call(o,z,a[i],i,a),++i){}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){if(a.hasNext()){z=a.next();for(i=1;a.hasNext();z=f.call(o,z,a.next(),i++,a)){}}}else{var _772=true;for(i in a){if(!(i in _771)){if(_772){z=a[i];_772=false;}else{z=f.call(o,z,a[i],i,a);}}}}}return z;},foldr:function(a,f,z,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);for(var i=a.length;i>0;--i,z=f.call(o,z,a[i],i,a)){}return z;},foldr1:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);var n=a.length,z=a[n-1],i=n-1;for(;i>0;--i,z=f.call(o,z,a[i],i,a)){}return z;},reduce:function(a,f,z){return arguments.length<3?df.foldl1(a,f):df.foldl(a,f,z);},reduceRight:function(a,f,z){return arguments.length<3?df.foldr1(a,f):df.foldr(a,f,z);},unfold:function(pr,f,g,z,o){o=o||d.global;f=df.lambda(f);g=df.lambda(g);pr=df.lambda(pr);var t=[];for(;!pr.call(o,z);t.push(f.call(o,z)),z=g.call(o,z)){}return t;}});})();}if(!dojo._hasResource["dojox.color._base"]){dojo._hasResource["dojox.color._base"]=true;dojo.provide("dojox.color._base");dojox.color.Color=dojo.Color;dojox.color.blend=dojo.blendColors;dojox.color.fromRgb=dojo.colorFromRgb;dojox.color.fromHex=dojo.colorFromHex;dojox.color.fromArray=dojo.colorFromArray;dojox.color.fromString=dojo.colorFromString;dojox.color.greyscale=dojo.colors.makeGrey;dojo.mixin(dojox.color,{fromCmy:function(cyan,_773,_774){if(dojo.isArray(cyan)){_773=cyan[1],_774=cyan[2],cyan=cyan[0];}else{if(dojo.isObject(cyan)){_773=cyan.m,_774=cyan.y,cyan=cyan.c;}}cyan/=100,_773/=100,_774/=100;var r=1-cyan,g=1-_773,b=1-_774;return new dojox.color.Color({r:Math.round(r*255),g:Math.round(g*255),b:Math.round(b*255)});},fromCmyk:function(cyan,_775,_776,_777){if(dojo.isArray(cyan)){_775=cyan[1],_776=cyan[2],_777=cyan[3],cyan=cyan[0];}else{if(dojo.isObject(cyan)){_775=cyan.m,_776=cyan.y,_777=cyan.b,cyan=cyan.c;}}cyan/=100,_775/=100,_776/=100,_777/=100;var r,g,b;r=1-Math.min(1,cyan*(1-_777)+_777);g=1-Math.min(1,_775*(1-_777)+_777);b=1-Math.min(1,_776*(1-_777)+_777);return new dojox.color.Color({r:Math.round(r*255),g:Math.round(g*255),b:Math.round(b*255)});},fromHsl:function(hue,_778,_779){if(dojo.isArray(hue)){_778=hue[1],_779=hue[2],hue=hue[0];}else{if(dojo.isObject(hue)){_778=hue.s,_779=hue.l,hue=hue.h;}}_778/=100;_779/=100;while(hue<0){hue+=360;}while(hue>=360){hue-=360;}var r,g,b;if(hue<120){r=(120-hue)/60,g=hue/60,b=0;}else{if(hue<240){r=0,g=(240-hue)/60,b=(hue-120)/60;}else{r=(hue-240)/60,g=0,b=(360-hue)/60;}}r=2*_778*Math.min(r,1)+(1-_778);g=2*_778*Math.min(g,1)+(1-_778);b=2*_778*Math.min(b,1)+(1-_778);if(_779<0.5){r*=_779,g*=_779,b*=_779;}else{r=(1-_779)*r+2*_779-1;g=(1-_779)*g+2*_779-1;b=(1-_779)*b+2*_779-1;}return new dojox.color.Color({r:Math.round(r*255),g:Math.round(g*255),b:Math.round(b*255)});},fromHsv:function(hue,_77a,_77b){if(dojo.isArray(hue)){_77a=hue[1],_77b=hue[2],hue=hue[0];}else{if(dojo.isObject(hue)){_77a=hue.s,_77b=hue.v,hue=hue.h;}}if(hue==360){hue=0;}_77a/=100;_77b/=100;var r,g,b;if(_77a==0){r=_77b,b=_77b,g=_77b;}else{var _77c=hue/60,i=Math.floor(_77c),f=_77c-i;var p=_77b*(1-_77a);var q=_77b*(1-(_77a*f));var t=_77b*(1-(_77a*(1-f)));switch(i){case 0:r=_77b,g=t,b=p;break;case 1:r=q,g=_77b,b=p;break;case 2:r=p,g=_77b,b=t;break;case 3:r=p,g=q,b=_77b;break;case 4:r=t,g=p,b=_77b;break;case 5:r=_77b,g=p,b=q;break;}}return new dojox.color.Color({r:Math.round(r*255),g:Math.round(g*255),b:Math.round(b*255)});}});dojo.extend(dojox.color.Color,{toCmy:function(){var cyan=1-(this.r/255),_77d=1-(this.g/255),_77e=1-(this.b/255);return {c:Math.round(cyan*100),m:Math.round(_77d*100),y:Math.round(_77e*100)};},toCmyk:function(){var cyan,_77f,_780,_781;var r=this.r/255,g=this.g/255,b=this.b/255;_781=Math.min(1-r,1-g,1-b);cyan=(1-r-_781)/(1-_781);_77f=(1-g-_781)/(1-_781);_780=(1-b-_781)/(1-_781);return {c:Math.round(cyan*100),m:Math.round(_77f*100),y:Math.round(_780*100),b:Math.round(_781*100)};},toHsl:function(){var r=this.r/255,g=this.g/255,b=this.b/255;var min=Math.min(r,b,g),max=Math.max(r,g,b);var _782=max-min;var h=0,s=0,l=(min+max)/2;if(l>0&&l<1){s=_782/((l<0.5)?(2*l):(2-2*l));}if(_782>0){if(max==r&&max!=g){h+=(g-b)/_782;}if(max==g&&max!=b){h+=(2+(b-r)/_782);}if(max==b&&max!=r){h+=(4+(r-g)/_782);}h*=60;}return {h:h,s:Math.round(s*100),l:Math.round(l*100)};},toHsv:function(){var r=this.r/255,g=this.g/255,b=this.b/255;var min=Math.min(r,b,g),max=Math.max(r,g,b);var _783=max-min;var h=null,s=(max==0)?0:(_783/max);if(s==0){h=0;}else{if(r==max){h=60*(g-b)/_783;}else{if(g==max){h=120+60*(b-r)/_783;}else{h=240+60*(r-g)/_783;}}if(h<0){h+=360;}}return {h:h,s:Math.round(s*100),v:Math.round(max*100)};}});}if(!dojo._hasResource["dojox.color"]){dojo._hasResource["dojox.color"]=true;dojo.provide("dojox.color");}if(!dojo._hasResource["dojox.color.Palette"]){dojo._hasResource["dojox.color.Palette"]=true;dojo.provide("dojox.color.Palette");(function(){var dxc=dojox.color;dxc.Palette=function(base){this.colors=[];if(base instanceof dojox.color.Palette){this.colors=base.colors.slice(0);}else{if(base instanceof dojox.color.Color){this.colors=[null,null,base,null,null];}else{if(dojo.isArray(base)){this.colors=dojo.map(base.slice(0),function(item){if(dojo.isString(item)){return new dojox.color.Color(item);}return item;});}else{if(dojo.isString(base)){this.colors=[null,null,new dojox.color.Color(base),null,null];}}}}};function _784(p,_785,val){var ret=new dojox.color.Palette();ret.colors=[];dojo.forEach(p.colors,function(item){var r=(_785=="dr")?item.r+val:item.r,g=(_785=="dg")?item.g+val:item.g,b=(_785=="db")?item.b+val:item.b,a=(_785=="da")?item.a+val:item.a;ret.colors.push(new dojox.color.Color({r:Math.min(255,Math.max(0,r)),g:Math.min(255,Math.max(0,g)),b:Math.min(255,Math.max(0,b)),a:Math.min(1,Math.max(0,a))}));});return ret;};function tCMY(p,_786,val){var ret=new dojox.color.Palette();ret.colors=[];dojo.forEach(p.colors,function(item){var o=item.toCmy(),c=(_786=="dc")?o.c+val:o.c,m=(_786=="dm")?o.m+val:o.m,y=(_786=="dy")?o.y+val:o.y;ret.colors.push(dojox.color.fromCmy(Math.min(100,Math.max(0,c)),Math.min(100,Math.max(0,m)),Math.min(100,Math.max(0,y))));});return ret;};function _787(p,_788,val){var ret=new dojox.color.Palette();ret.colors=[];dojo.forEach(p.colors,function(item){var o=item.toCmyk(),c=(_788=="dc")?o.c+val:o.c,m=(_788=="dm")?o.m+val:o.m,y=(_788=="dy")?o.y+val:o.y,k=(_788=="dk")?o.b+val:o.b;ret.colors.push(dojox.color.fromCmyk(Math.min(100,Math.max(0,c)),Math.min(100,Math.max(0,m)),Math.min(100,Math.max(0,y)),Math.min(100,Math.max(0,k))));});return ret;};function tHSL(p,_789,val){var ret=new dojox.color.Palette();ret.colors=[];dojo.forEach(p.colors,function(item){var o=item.toHsl(),h=(_789=="dh")?o.h+val:o.h,s=(_789=="ds")?o.s+val:o.s,l=(_789=="dl")?o.l+val:o.l;ret.colors.push(dojox.color.fromHsl(h%360,Math.min(100,Math.max(0,s)),Math.min(100,Math.max(0,l))));});return ret;};function tHSV(p,_78a,val){var ret=new dojox.color.Palette();ret.colors=[];dojo.forEach(p.colors,function(item){var o=item.toHsv(),h=(_78a=="dh")?o.h+val:o.h,s=(_78a=="ds")?o.s+val:o.s,v=(_78a=="dv")?o.v+val:o.v;ret.colors.push(dojox.color.fromHsv(h%360,Math.min(100,Math.max(0,s)),Math.min(100,Math.max(0,v))));});return ret;};function _78b(val,low,high){return high-((high-val)*((high-low)/high));};dojo.extend(dxc.Palette,{transform:function(_78c){var fn=_784;if(_78c.use){var use=_78c.use.toLowerCase();if(use.indexOf("hs")==0){if(use.charAt(2)=="l"){fn=tHSL;}else{fn=tHSV;}}else{if(use.indexOf("cmy")==0){if(use.charAt(3)=="k"){fn=_787;}else{fn=tCMY;}}}}else{if("dc" in _78c||"dm" in _78c||"dy" in _78c){if("dk" in _78c){fn=_787;}else{fn=tCMY;}}else{if("dh" in _78c||"ds" in _78c){if("dv" in _78c){fn=tHSV;}else{fn=tHSL;}}}}var _78d=this;for(var p in _78c){if(p=="use"){continue;}_78d=fn(_78d,p,_78c[p]);}return _78d;},clone:function(){return new dxc.Palette(this);}});dojo.mixin(dxc.Palette,{generators:{analogous:function(args){var high=args.high||60,low=args.low||18,base=dojo.isString(args.base)?new dojox.color.Color(args.base):args.base,hsv=base.toHsv();var h=[(hsv.h+low+360)%360,(hsv.h+Math.round(low/2)+360)%360,hsv.h,(hsv.h-Math.round(high/2)+360)%360,(hsv.h-high+360)%360];var s1=Math.max(10,(hsv.s<=95)?hsv.s+5:(100-(hsv.s-95))),s2=(hsv.s>1)?hsv.s-1:21-hsv.s,v1=(hsv.v>=92)?hsv.v-9:Math.max(hsv.v+9,20),v2=(hsv.v<=90)?Math.max(hsv.v+5,20):(95+Math.ceil((hsv.v-90)/2)),s=[s1,s2,hsv.s,s1,s1],v=[v1,v2,hsv.v,v1,v2];return new dxc.Palette(dojo.map(h,function(hue,i){return dojox.color.fromHsv(hue,s[i],v[i]);}));},monochromatic:function(args){var base=dojo.isString(args.base)?new dojox.color.Color(args.base):args.base,hsv=base.toHsv();var s1=(hsv.s-30>9)?hsv.s-30:hsv.s+30,s2=hsv.s,v1=_78b(hsv.v,20,100),v2=(hsv.v-20>20)?hsv.v-20:hsv.v+60,v3=(hsv.v-50>20)?hsv.v-50:hsv.v+30;return new dxc.Palette([dojox.color.fromHsv(hsv.h,s1,v1),dojox.color.fromHsv(hsv.h,s2,v3),base,dojox.color.fromHsv(hsv.h,s1,v3),dojox.color.fromHsv(hsv.h,s2,v2)]);},triadic:function(args){var base=dojo.isString(args.base)?new dojox.color.Color(args.base):args.base,hsv=base.toHsv();var h1=(hsv.h+57+360)%360,h2=(hsv.h-157+360)%360,s1=(hsv.s>20)?hsv.s-10:hsv.s+10,s2=(hsv.s>90)?hsv.s-10:hsv.s+10,s3=(hsv.s>95)?hsv.s-5:hsv.s+5,v1=(hsv.v-20>20)?hsv.v-20:hsv.v+20,v2=(hsv.v-30>20)?hsv.v-30:hsv.v+30,v3=(hsv.v-30>70)?hsv.v-30:hsv.v+30;return new dxc.Palette([dojox.color.fromHsv(h1,s1,hsv.v),dojox.color.fromHsv(hsv.h,s2,v2),base,dojox.color.fromHsv(h2,s2,v1),dojox.color.fromHsv(h2,s3,v3)]);},complementary:function(args){var base=dojo.isString(args.base)?new dojox.color.Color(args.base):args.base,hsv=base.toHsv();var h1=((hsv.h*2)+137<360)?(hsv.h*2)+137:Math.floor(hsv.h/2)-137,s1=Math.max(hsv.s-10,0),s2=_78b(hsv.s,10,100),s3=Math.min(100,hsv.s+20),v1=Math.min(100,hsv.v+30),v2=(hsv.v>20)?hsv.v-30:hsv.v+30;return new dxc.Palette([dojox.color.fromHsv(hsv.h,s1,v1),dojox.color.fromHsv(hsv.h,s2,v2),base,dojox.color.fromHsv(h1,s3,v2),dojox.color.fromHsv(h1,hsv.s,hsv.v)]);},splitComplementary:function(args){var base=dojo.isString(args.base)?new dojox.color.Color(args.base):args.base,_78e=args.da||30,hsv=base.toHsv();var _78f=((hsv.h*2)+137<360)?(hsv.h*2)+137:Math.floor(hsv.h/2)-137,h1=(_78f-_78e+360)%360,h2=(_78f+_78e)%360,s1=Math.max(hsv.s-10,0),s2=_78b(hsv.s,10,100),s3=Math.min(100,hsv.s+20),v1=Math.min(100,hsv.v+30),v2=(hsv.v>20)?hsv.v-30:hsv.v+30;return new dxc.Palette([dojox.color.fromHsv(h1,s1,v1),dojox.color.fromHsv(h1,s2,v2),base,dojox.color.fromHsv(h2,s3,v2),dojox.color.fromHsv(h2,hsv.s,hsv.v)]);},compound:function(args){var base=dojo.isString(args.base)?new dojox.color.Color(args.base):args.base,hsv=base.toHsv();var h1=((hsv.h*2)+18<360)?(hsv.h*2)+18:Math.floor(hsv.h/2)-18,h2=((hsv.h*2)+120<360)?(hsv.h*2)+120:Math.floor(hsv.h/2)-120,h3=((hsv.h*2)+99<360)?(hsv.h*2)+99:Math.floor(hsv.h/2)-99,s1=(hsv.s-40>10)?hsv.s-40:hsv.s+40,s2=(hsv.s-10>80)?hsv.s-10:hsv.s+10,s3=(hsv.s-25>10)?hsv.s-25:hsv.s+25,v1=(hsv.v-40>10)?hsv.v-40:hsv.v+40,v2=(hsv.v-20>80)?hsv.v-20:hsv.v+20,v3=Math.max(hsv.v,20);return new dxc.Palette([dojox.color.fromHsv(h1,s1,v1),dojox.color.fromHsv(h1,s2,v2),base,dojox.color.fromHsv(h2,s3,v3),dojox.color.fromHsv(h3,s2,v2)]);},shades:function(args){var base=dojo.isString(args.base)?new dojox.color.Color(args.base):args.base,hsv=base.toHsv();var s=(hsv.s==100&&hsv.v==0)?0:hsv.s,v1=(hsv.v-50>20)?hsv.v-50:hsv.v+30,v2=(hsv.v-25>=20)?hsv.v-25:hsv.v+55,v3=(hsv.v-75>=20)?hsv.v-75:hsv.v+5,v4=Math.max(hsv.v-10,20);return new dxc.Palette([new dojox.color.fromHsv(hsv.h,s,v1),new dojox.color.fromHsv(hsv.h,s,v2),base,new dojox.color.fromHsv(hsv.h,s,v3),new dojox.color.fromHsv(hsv.h,s,v4)]);}},generate:function(base,type){if(dojo.isFunction(type)){return type({base:base});}else{if(dxc.Palette.generators[type]){return dxc.Palette.generators[type]({base:base});}}throw new Error("dojox.color.Palette.generate: the specified generator ('"+type+"') does not exist.");}});})();}if(!dojo._hasResource["dojox.charting.Theme"]){dojo._hasResource["dojox.charting.Theme"]=true;dojo.provide("dojox.charting.Theme");dojo.declare("dojox.charting.Theme",null,{shapeSpaces:{shape:1,shapeX:1,shapeY:1},constructor:function(_790){_790=_790||{};var def=dojox.charting.Theme.defaultTheme;dojo.forEach(["chart","plotarea","axis","series","marker"],function(name){this[name]=dojo.delegate(def[name],_790[name]);},this);if(_790.seriesThemes&&_790.seriesThemes.length){this.colors=null;this.seriesThemes=_790.seriesThemes.slice(0);}else{this.seriesThemes=null;this.colors=(_790.colors||dojox.charting.Theme.defaultColors).slice(0);}this.markerThemes=null;if(_790.markerThemes&&_790.markerThemes.length){this.markerThemes=_790.markerThemes.slice(0);}this.markers=_790.markers?dojo.clone(_790.markers):dojo.delegate(dojox.charting.Theme.defaultMarkers);this.noGradConv=_790.noGradConv;this.noRadialConv=_790.noRadialConv;if(_790.reverseFills){this.reverseFills();}this._current=0;this._buildMarkerArray();},clone:function(){var _791=new dojox.charting.Theme({chart:this.chart,plotarea:this.plotarea,axis:this.axis,series:this.series,marker:this.marker,colors:this.colors,markers:this.markers,seriesThemes:this.seriesThemes,markerThemes:this.markerThemes,noGradConv:this.noGradConv,noRadialConv:this.noRadialConv});dojo.forEach(["clone","clear","next","skip","addMixin","post","getTick"],function(name){if(this.hasOwnProperty(name)){_791[name]=this[name];}},this);return _791;},clear:function(){this._current=0;},next:function(_792,_793,_794){var _795=dojox.lang.utils.merge,_796,_797;if(this.colors){_796=dojo.delegate(this.series);_797=dojo.delegate(this.marker);var _798=new dojo.Color(this.colors[this._current%this.colors.length]),old;if(_796.stroke&&_796.stroke.color){_796.stroke=dojo.delegate(_796.stroke);old=new dojo.Color(_796.stroke.color);_796.stroke.color=new dojo.Color(_798);_796.stroke.color.a=old.a;}else{_796.stroke={color:_798};}if(_797.stroke&&_797.stroke.color){_797.stroke=dojo.delegate(_797.stroke);old=new dojo.Color(_797.stroke.color);_797.stroke.color=new dojo.Color(_798);_797.stroke.color.a=old.a;}else{_797.stroke={color:_798};}if(!_796.fill||_796.fill.type){_796.fill=_798;}else{old=new dojo.Color(_796.fill);_796.fill=new dojo.Color(_798);_796.fill.a=old.a;}if(!_797.fill||_797.fill.type){_797.fill=_798;}else{old=new dojo.Color(_797.fill);_797.fill=new dojo.Color(_798);_797.fill.a=old.a;}}else{_796=this.seriesThemes?_795(this.series,this.seriesThemes[this._current%this.seriesThemes.length]):this.series;_797=this.markerThemes?_795(this.marker,this.markerThemes[this._current%this.markerThemes.length]):_796;}var _799=_797&&_797.symbol||this._markers[this._current%this._markers.length];var _79a={series:_796,marker:_797,symbol:_799};++this._current;if(_793){_79a=this.addMixin(_79a,_792,_793);}if(_794){_79a=this.post(_79a,_792);}return _79a;},skip:function(){++this._current;},addMixin:function(_79b,_79c,_79d,_79e){if(dojo.isArray(_79d)){dojo.forEach(_79d,function(m){_79b=this.addMixin(_79b,_79c,m);},this);}else{var t={};if("color" in _79d){if(_79c=="line"||_79c=="area"){dojo.setObject("series.stroke.color",_79d.color,t);dojo.setObject("marker.stroke.color",_79d.color,t);}else{dojo.setObject("series.fill",_79d.color,t);}}dojo.forEach(["stroke","outline","shadow","fill","font","fontColor","labelWiring"],function(name){var _79f="marker"+name.charAt(0).toUpperCase()+name.substr(1),b=_79f in _79d;if(name in _79d){dojo.setObject("series."+name,_79d[name],t);if(!b){dojo.setObject("marker."+name,_79d[name],t);}}if(b){dojo.setObject("marker."+name,_79d[_79f],t);}});if("marker" in _79d){t.symbol=_79d.marker;}_79b=dojox.lang.utils.merge(_79b,t);}if(_79e){_79b=this.post(_79b,_79c);}return _79b;},post:function(_7a0,_7a1){var fill=_7a0.series.fill,t;if(!this.noGradConv&&this.shapeSpaces[fill.space]&&fill.type=="linear"){if(_7a1=="bar"){t={x1:fill.y1,y1:fill.x1,x2:fill.y2,y2:fill.x2};}else{if(!this.noRadialConv&&fill.space=="shape"&&(_7a1=="slice"||_7a1=="circle")){t={type:"radial",cx:0,cy:0,r:100};}}if(t){return dojox.lang.utils.merge(_7a0,{series:{fill:t}});}}return _7a0;},getTick:function(name,_7a2){var tick=this.axis.tick,_7a3=name+"Tick";merge=dojox.lang.utils.merge;if(tick){if(this.axis[_7a3]){tick=merge(tick,this.axis[_7a3]);}}else{tick=this.axis[_7a3];}if(_7a2){if(tick){if(_7a2[_7a3]){tick=merge(tick,_7a2[_7a3]);}}else{tick=_7a2[_7a3];}}return tick;},inspectObjects:function(f){dojo.forEach(["chart","plotarea","axis","series","marker"],function(name){f(this[name]);},this);if(this.seriesThemes){dojo.forEach(this.seriesThemes,f);}if(this.markerThemes){dojo.forEach(this.markerThemes,f);}},reverseFills:function(){this.inspectObjects(function(o){if(o&&o.fill){o.fill=dojox.gfx.gradutils.reverse(o.fill);}});},addMarker:function(name,_7a4){this.markers[name]=_7a4;this._buildMarkerArray();},setMarkers:function(obj){this.markers=obj;this._buildMarkerArray();},_buildMarkerArray:function(){this._markers=[];for(var p in this.markers){this._markers.push(this.markers[p]);}}});dojo.mixin(dojox.charting.Theme,{defaultMarkers:{CIRCLE:"m-3,0 c0,-4 6,-4 6,0 m-6,0 c0,4 6,4 6,0",SQUARE:"m-3,-3 l0,6 6,0 0,-6 z",DIAMOND:"m0,-3 l3,3 -3,3 -3,-3 z",CROSS:"m0,-3 l0,6 m-3,-3 l6,0",X:"m-3,-3 l6,6 m0,-6 l-6,6",TRIANGLE:"m-3,3 l3,-6 3,6 z",TRIANGLE_INVERTED:"m-3,-3 l3,6 3,-6 z"},defaultColors:["#54544c","#858e94","#6e767a","#948585","#474747"],defaultTheme:{chart:{stroke:null,fill:"white",pageStyle:null,titleGap:20,titlePos:"top",titleFont:"normal normal bold 14pt Tahoma",titleFontColor:"#333"},plotarea:{stroke:null,fill:"white"},axis:{stroke:{color:"#333",width:1},tick:{color:"#666",position:"center",font:"normal normal normal 7pt Tahoma",fontColor:"#333",titleGap:15,titleFont:"normal normal normal 11pt Tahoma",titleFontColor:"#333",titleOrientation:"axis"},majorTick:{width:1,length:6},minorTick:{width:0.8,length:3},microTick:{width:0.5,length:1}},series:{stroke:{width:1.5,color:"#333"},outline:{width:0.1,color:"#ccc"},shadow:null,fill:"#ccc",font:"normal normal normal 8pt Tahoma",fontColor:"#000",labelWiring:{width:1,color:"#ccc"}},marker:{stroke:{width:1.5,color:"#333"},outline:{width:0.1,color:"#ccc"},shadow:null,fill:"#ccc",font:"normal normal normal 8pt Tahoma",fontColor:"#000"}},defineColors:function(_7a5){_7a5=_7a5||{};var c=[],n=_7a5.num||5;if(_7a5.colors){var l=_7a5.colors.length;for(var i=0;i<n;i++){c.push(_7a5.colors[i%l]);}return c;}if(_7a5.hue){var s=_7a5.saturation||100;var st=_7a5.low||30;var end=_7a5.high||90;var l=(end+st)/2;return dojox.color.Palette.generate(dojox.color.fromHsv(_7a5.hue,s,l),"monochromatic").colors;}if(_7a5.generator){return dojox.color.Palette.generate(_7a5.base,_7a5.generator).colors;}return c;},generateGradient:function(_7a6,_7a7,_7a8){var fill=dojo.delegate(_7a6);fill.colors=[{offset:0,color:_7a7},{offset:1,color:_7a8}];return fill;},generateHslColor:function(_7a9,_7aa){_7a9=new dojox.color.Color(_7a9);var hsl=_7a9.toHsl(),_7ab=dojox.color.fromHsl(hsl.h,hsl.s,_7aa);_7ab.a=_7a9.a;return _7ab;},generateHslGradient:function(_7ac,_7ad,_7ae,_7af){_7ac=new dojox.color.Color(_7ac);var hsl=_7ac.toHsl(),_7b0=dojox.color.fromHsl(hsl.h,hsl.s,_7ae),_7b1=dojox.color.fromHsl(hsl.h,hsl.s,_7af);_7b0.a=_7b1.a=_7ac.a;return dojox.charting.Theme.generateGradient(_7ad,_7b0,_7b1);}});}if(!dojo._hasResource["dojox.charting.Series"]){dojo._hasResource["dojox.charting.Series"]=true;dojo.provide("dojox.charting.Series");dojo.declare("dojox.charting.Series",dojox.charting.Element,{constructor:function(_7b2,data,_7b3){dojo.mixin(this,_7b3);if(typeof this.plot!="string"){this.plot="default";}this.update(data);},clear:function(){this.dyn={};},update:function(data){if(dojo.isArray(data)){this.data=data;}else{this.source=data;this.data=this.source.data;if(this.source.setSeriesObject){this.source.setSeriesObject(this);}}this.dirty=true;this.clear();}});}if(!dojo._hasResource["dojox.charting.Chart"]){dojo._hasResource["dojox.charting.Chart"]=true;dojo.provide("dojox.charting.Chart");(function(){var df=dojox.lang.functional,dc=dojox.charting,g=dojox.gfx,_7b4=df.lambda("item.clear()"),_7b5=df.lambda("item.purgeGroup()"),_7b6=df.lambda("item.destroy()"),_7b7=df.lambda("item.dirty = false"),_7b8=df.lambda("item.dirty = true"),_7b9=df.lambda("item.name");dojo.declare("dojox.charting.Chart",null,{constructor:function(node,_7ba){if(!_7ba){_7ba={};}this.margins=_7ba.margins?_7ba.margins:{l:10,t:10,r:10,b:10};this.stroke=_7ba.stroke;this.fill=_7ba.fill;this.delayInMs=_7ba.delayInMs||200;this.title=_7ba.title;this.titleGap=_7ba.titleGap;this.titlePos=_7ba.titlePos;this.titleFont=_7ba.titleFont;this.titleFontColor=_7ba.titleFontColor;this.chartTitle=null;this.theme=null;this.axes={};this.stack=[];this.plots={};this.series=[];this.runs={};this.dirty=true;this.coords=null;this.node=dojo.byId(node);var box=dojo.marginBox(node);this.surface=g.createSurface(this.node,box.w||400,box.h||300);},destroy:function(){dojo.forEach(this.series,_7b6);dojo.forEach(this.stack,_7b6);df.forIn(this.axes,_7b6);if(this.chartTitle&&this.chartTitle.tagName){dojo.destroy(this.chartTitle);}this.surface.destroy();},getCoords:function(){if(!this.coords){this.coords=dojo.coords(this.node,true);}return this.coords;},setTheme:function(_7bb){this.theme=_7bb.clone();this.dirty=true;return this;},addAxis:function(name,_7bc){var axis,_7bd=_7bc&&_7bc.type||"Default";if(typeof _7bd=="string"){if(!dc.axis2d||!dc.axis2d[_7bd]){throw Error("Can't find axis: "+_7bd+" - didn't you forget to dojo"+".require() it?");}axis=new dc.axis2d[_7bd](this,_7bc);}else{axis=new _7bd(this,_7bc);}axis.name=name;axis.dirty=true;if(name in this.axes){this.axes[name].destroy();}this.axes[name]=axis;this.dirty=true;return this;},getAxis:function(name){return this.axes[name];},removeAxis:function(name){if(name in this.axes){this.axes[name].destroy();delete this.axes[name];this.dirty=true;}return this;},addPlot:function(name,_7be){var plot,_7bf=_7be&&_7be.type||"Default";if(typeof _7bf=="string"){if(!dc.plot2d||!dc.plot2d[_7bf]){throw Error("Can't find plot: "+_7bf+" - didn't you forget to dojo"+".require() it?");}plot=new dc.plot2d[_7bf](this,_7be);}else{plot=new _7bf(this,_7be);}plot.name=name;plot.dirty=true;if(name in this.plots){this.stack[this.plots[name]].destroy();this.stack[this.plots[name]]=plot;}else{this.plots[name]=this.stack.length;this.stack.push(plot);}this.dirty=true;return this;},removePlot:function(name){if(name in this.plots){var _7c0=this.plots[name];delete this.plots[name];this.stack[_7c0].destroy();this.stack.splice(_7c0,1);df.forIn(this.plots,function(idx,name,_7c1){if(idx>_7c0){_7c1[name]=idx-1;}});var ns=dojo.filter(this.series,function(run){return run.plot!=name;});if(ns.length<this.series.length){dojo.forEach(this.series,function(run){if(run.plot==name){run.destroy();}});this.runs={};dojo.forEach(ns,function(run,_7c2){this.runs[run.plot]=_7c2;},this);this.series=ns;}this.dirty=true;}return this;},getPlotOrder:function(){return df.map(this.stack,_7b9);},setPlotOrder:function(_7c3){var _7c4={},_7c5=df.filter(_7c3,function(name){if(!(name in this.plots)||(name in _7c4)){return false;}_7c4[name]=1;return true;},this);if(_7c5.length<this.stack.length){df.forEach(this.stack,function(plot){var name=plot.name;if(!(name in _7c4)){_7c5.push(name);}});}var _7c6=df.map(_7c5,function(name){return this.stack[this.plots[name]];},this);df.forEach(_7c6,function(plot,i){this.plots[plot.name]=i;},this);this.stack=_7c6;this.dirty=true;return this;},movePlotToFront:function(name){if(name in this.plots){var _7c7=this.plots[name];if(_7c7){var _7c8=this.getPlotOrder();_7c8.splice(_7c7,1);_7c8.unshift(name);return this.setPlotOrder(_7c8);}}return this;},movePlotToBack:function(name){if(name in this.plots){var _7c9=this.plots[name];if(_7c9<this.stack.length-1){var _7ca=this.getPlotOrder();_7ca.splice(_7c9,1);_7ca.push(name);return this.setPlotOrder(_7ca);}}return this;},addSeries:function(name,data,_7cb){var run=new dc.Series(this,data,_7cb);run.name=name;if(name in this.runs){this.series[this.runs[name]].destroy();this.series[this.runs[name]]=run;}else{this.runs[name]=this.series.length;this.series.push(run);}this.dirty=true;if(!("ymin" in run)&&"min" in run){run.ymin=run.min;}if(!("ymax" in run)&&"max" in run){run.ymax=run.max;}return this;},removeSeries:function(name){if(name in this.runs){var _7cc=this.runs[name];delete this.runs[name];this.series[_7cc].destroy();this.series.splice(_7cc,1);df.forIn(this.runs,function(idx,name,runs){if(idx>_7cc){runs[name]=idx-1;}});this.dirty=true;}return this;},updateSeries:function(name,data){if(name in this.runs){var run=this.series[this.runs[name]];run.update(data);this._invalidateDependentPlots(run.plot,false);this._invalidateDependentPlots(run.plot,true);}return this;},getSeriesOrder:function(_7cd){return df.map(df.filter(this.series,function(run){return run.plot==_7cd;}),_7b9);},setSeriesOrder:function(_7ce){var _7cf,_7d0={},_7d1=df.filter(_7ce,function(name){if(!(name in this.runs)||(name in _7d0)){return false;}var run=this.series[this.runs[name]];if(_7cf){if(run.plot!=_7cf){return false;}}else{_7cf=run.plot;}_7d0[name]=1;return true;},this);df.forEach(this.series,function(run){var name=run.name;if(!(name in _7d0)&&run.plot==_7cf){_7d1.push(name);}});var _7d2=df.map(_7d1,function(name){return this.series[this.runs[name]];},this);this.series=_7d2.concat(df.filter(this.series,function(run){return run.plot!=_7cf;}));df.forEach(this.series,function(run,i){this.runs[run.name]=i;},this);this.dirty=true;return this;},moveSeriesToFront:function(name){if(name in this.runs){var _7d3=this.runs[name],_7d4=this.getSeriesOrder(this.series[_7d3].plot);if(name!=_7d4[0]){_7d4.splice(_7d3,1);_7d4.unshift(name);return this.setSeriesOrder(_7d4);}}return this;},moveSeriesToBack:function(name){if(name in this.runs){var _7d5=this.runs[name],_7d6=this.getSeriesOrder(this.series[_7d5].plot);if(name!=_7d6[_7d6.length-1]){_7d6.splice(_7d5,1);_7d6.push(name);return this.setSeriesOrder(_7d6);}}return this;},resize:function(_7d7,_7d8){var box;switch(arguments.length){case 1:box=dojo.mixin({},_7d7);dojo.marginBox(this.node,box);break;case 2:box={w:_7d7,h:_7d8};dojo.marginBox(this.node,box);break;}box=dojo.marginBox(this.node);this.surface.setDimensions(box.w,box.h);this.dirty=true;this.coords=null;return this.render();},getGeometry:function(){var ret={};df.forIn(this.axes,function(axis){if(axis.initialized()){ret[axis.name]={name:axis.name,vertical:axis.vertical,scaler:axis.scaler,ticks:axis.ticks};}});return ret;},setAxisWindow:function(name,_7d9,_7da,zoom){var axis=this.axes[name];if(axis){axis.setWindow(_7d9,_7da);dojo.forEach(this.stack,function(plot){if(plot.hAxis==name||plot.vAxis==name){plot.zoom=zoom;}});}return this;},setWindow:function(sx,sy,dx,dy,zoom){if(!("plotArea" in this)){this.calculateGeometry();}df.forIn(this.axes,function(axis){var _7db,_7dc,_7dd=axis.getScaler().bounds,s=_7dd.span/(_7dd.upper-_7dd.lower);if(axis.vertical){_7db=sy;_7dc=dy/s/_7db;}else{_7db=sx;_7dc=dx/s/_7db;}axis.setWindow(_7db,_7dc);});dojo.forEach(this.stack,function(plot){plot.zoom=zoom;});return this;},zoomIn:function(name,_7de){var axis=this.axes[name];if(axis){var _7df,_7e0,_7e1=axis.getScaler().bounds;var _7e2=Math.min(_7de[0],_7de[1]);var _7e3=Math.max(_7de[0],_7de[1]);_7e2=_7de[0]<_7e1.lower?_7e1.lower:_7e2;_7e3=_7de[1]>_7e1.upper?_7e1.upper:_7e3;_7df=(_7e1.upper-_7e1.lower)/(_7e3-_7e2);_7e0=_7e2-_7e1.lower;this.setAxisWindow(name,_7df,_7e0);this.render();}},calculateGeometry:function(){if(this.dirty){return this.fullGeometry();}var _7e4=dojo.filter(this.stack,function(plot){return plot.dirty||(plot.hAxis&&this.axes[plot.hAxis].dirty)||(plot.vAxis&&this.axes[plot.vAxis].dirty);},this);_7e5(_7e4,this.plotArea);return this;},fullGeometry:function(){this._makeDirty();dojo.forEach(this.stack,_7b4);if(!this.theme){this.setTheme(new dojox.charting.Theme(dojox.charting._def));}dojo.forEach(this.series,function(run){if(!(run.plot in this.plots)){if(!dc.plot2d||!dc.plot2d.Default){throw Error("Can't find plot: Default - didn't you forget to dojo"+".require() it?");}var plot=new dc.plot2d.Default(this,{});plot.name=run.plot;this.plots[run.plot]=this.stack.length;this.stack.push(plot);}this.stack[this.plots[run.plot]].addSeries(run);},this);dojo.forEach(this.stack,function(plot){if(plot.hAxis){plot.setAxis(this.axes[plot.hAxis]);}if(plot.vAxis){plot.setAxis(this.axes[plot.vAxis]);}},this);var dim=this.dim=this.surface.getDimensions();dim.width=g.normalizedLength(dim.width);dim.height=g.normalizedLength(dim.height);df.forIn(this.axes,_7b4);_7e5(this.stack,dim);var _7e6=this.offsets={l:0,r:0,t:0,b:0};df.forIn(this.axes,function(axis){df.forIn(axis.getOffsets(),function(o,i){_7e6[i]+=o;});});if(this.title){this.titleGap=(this.titleGap==0)?0:this.titleGap||this.theme.chart.titleGap||20;this.titlePos=this.titlePos||this.theme.chart.titlePos||"top";this.titleFont=this.titleFont||this.theme.chart.titleFont;this.titleFontColor=this.titleFontColor||this.theme.chart.titleFontColor||"black";var _7e7=g.normalizedLength(g.splitFontString(this.titleFont).size);_7e6[this.titlePos=="top"?"t":"b"]+=(_7e7+this.titleGap);}df.forIn(this.margins,function(o,i){_7e6[i]+=o;});this.plotArea={width:dim.width-_7e6.l-_7e6.r,height:dim.height-_7e6.t-_7e6.b};df.forIn(this.axes,_7b4);_7e5(this.stack,this.plotArea);return this;},render:function(){if(this.theme){this.theme.clear();}if(this.dirty){return this.fullRender();}this.calculateGeometry();df.forEachRev(this.stack,function(plot){plot.render(this.dim,this.offsets);},this);df.forIn(this.axes,function(axis){axis.render(this.dim,this.offsets);},this);this._makeClean();if(this.surface.render){this.surface.render();}return this;},fullRender:function(){this.fullGeometry();var _7e8=this.offsets,dim=this.dim,rect;dojo.forEach(this.series,_7b5);df.forIn(this.axes,_7b5);dojo.forEach(this.stack,_7b5);if(this.chartTitle&&this.chartTitle.tagName){dojo.destroy(this.chartTitle);}this.surface.clear();this.chartTitle=null;var t=this.theme,fill=t.plotarea&&t.plotarea.fill,_7e9=t.plotarea&&t.plotarea.stroke,rect={x:_7e8.l-1,y:_7e8.t-1,width:dim.width-_7e8.l-_7e8.r+2,height:dim.height-_7e8.t-_7e8.b+2};if(fill){fill=dc.Element.prototype._shapeFill(dc.Element.prototype._plotFill(fill,dim,_7e8),rect);this.surface.createRect(rect).setFill(fill);}if(_7e9){this.surface.createRect({x:_7e8.l,y:_7e8.t,width:dim.width-_7e8.l-_7e8.r+1,height:dim.height-_7e8.t-_7e8.b+1}).setStroke(_7e9);}df.foldr(this.stack,function(z,plot){return plot.render(dim,_7e8),0;},0);fill=this.fill!==undefined?this.fill:(t.chart&&t.chart.fill);_7e9=this.stroke!==undefined?this.stroke:(t.chart&&t.chart.stroke);if(fill=="inherit"){var node=this.node,fill=new dojo.Color(dojo.style(node,"backgroundColor"));while(fill.a==0&&node!=document.documentElement){fill=new dojo.Color(dojo.style(node,"backgroundColor"));node=node.parentNode;}}if(fill){fill=dc.Element.prototype._plotFill(fill,dim,_7e8);if(_7e8.l){rect={width:_7e8.l,height:dim.height+1};this.surface.createRect(rect).setFill(dc.Element.prototype._shapeFill(fill,rect));}if(_7e8.r){rect={x:dim.width-_7e8.r,width:_7e8.r+1,height:dim.height+2};this.surface.createRect(rect).setFill(dc.Element.prototype._shapeFill(fill,rect));}if(_7e8.t){rect={width:dim.width+1,height:_7e8.t};this.surface.createRect(rect).setFill(dc.Element.prototype._shapeFill(fill,rect));}if(_7e8.b){rect={y:dim.height-_7e8.b,width:dim.width+1,height:_7e8.b+2};this.surface.createRect(rect).setFill(dc.Element.prototype._shapeFill(fill,rect));}}if(_7e9){this.surface.createRect({width:dim.width-1,height:dim.height-1}).setStroke(_7e9);}if(this.title){var _7ea=(g.renderer=="canvas"),_7eb=_7ea||!dojo.isIE&&!dojo.isOpera?"html":"gfx",_7ec=g.normalizedLength(g.splitFontString(this.titleFont).size);this.chartTitle=dc.axis2d.common.createText[_7eb](this,this.surface,dim.width/2,this.titlePos=="top"?_7ec+this.margins.t:dim.height-this.margins.b,"middle",this.title,this.titleFont,this.titleFontColor);}df.forIn(this.axes,function(axis){axis.render(dim,_7e8);});this._makeClean();if(this.surface.render){this.surface.render();}return this;},delayedRender:function(){if(!this._delayedRenderHandle){this._delayedRenderHandle=setTimeout(dojo.hitch(this,function(){clearTimeout(this._delayedRenderHandle);this._delayedRenderHandle=null;this.render();}),this.delayInMs);}return this;},connectToPlot:function(name,_7ed,_7ee){return name in this.plots?this.stack[this.plots[name]].connect(_7ed,_7ee):null;},fireEvent:function(_7ef,_7f0,_7f1){if(_7ef in this.runs){var _7f2=this.series[this.runs[_7ef]].plot;if(_7f2 in this.plots){var plot=this.stack[this.plots[_7f2]];if(plot){plot.fireEvent(_7ef,_7f0,_7f1);}}}return this;},_makeClean:function(){dojo.forEach(this.axes,_7b7);dojo.forEach(this.stack,_7b7);dojo.forEach(this.series,_7b7);this.dirty=false;},_makeDirty:function(){dojo.forEach(this.axes,_7b8);dojo.forEach(this.stack,_7b8);dojo.forEach(this.series,_7b8);this.dirty=true;},_invalidateDependentPlots:function(_7f3,_7f4){if(_7f3 in this.plots){var plot=this.stack[this.plots[_7f3]],axis,_7f5=_7f4?"vAxis":"hAxis";if(plot[_7f5]){axis=this.axes[plot[_7f5]];if(axis&&axis.dependOnData()){axis.dirty=true;dojo.forEach(this.stack,function(p){if(p[_7f5]&&p[_7f5]==plot[_7f5]){p.dirty=true;}});}}else{plot.dirty=true;}}}});function _7f6(_7f7){return {min:_7f7.hmin,max:_7f7.hmax};};function _7f8(_7f9){return {min:_7f9.vmin,max:_7f9.vmax};};function _7fa(_7fb,h){_7fb.hmin=h.min;_7fb.hmax=h.max;};function _7fc(_7fd,v){_7fd.vmin=v.min;_7fd.vmax=v.max;};function _7fe(_7ff,_800){if(_7ff&&_800){_7ff.min=Math.min(_7ff.min,_800.min);_7ff.max=Math.max(_7ff.max,_800.max);}return _7ff||_800;};function _7e5(_801,_802){var _803={},axes={};dojo.forEach(_801,function(plot){var _804=_803[plot.name]=plot.getSeriesStats();if(plot.hAxis){axes[plot.hAxis]=_7fe(axes[plot.hAxis],_7f6(_804));}if(plot.vAxis){axes[plot.vAxis]=_7fe(axes[plot.vAxis],_7f8(_804));}});dojo.forEach(_801,function(plot){var _805=_803[plot.name];if(plot.hAxis){_7fa(_805,axes[plot.hAxis]);}if(plot.vAxis){_7fc(_805,axes[plot.vAxis]);}plot.initializeScalers(_802,_805);});};})();}if(!dojo._hasResource["dojox.charting.Chart2D"]){dojo._hasResource["dojox.charting.Chart2D"]=true;dojo.provide("dojox.charting.Chart2D");dojo.deprecated("dojox.charting.Chart2D","Use dojo.charting.Chart instead and require all other components explicitly","2.0");dojox.charting.Chart2D=dojox.charting.Chart;}if(!dojo._hasResource["dojox.charting.themes.PlotKit.base"]){dojo._hasResource["dojox.charting.themes.PlotKit.base"]=true;dojo.provide("dojox.charting.themes.PlotKit.base");(function(){var dc=dojox.charting,pk=dc.themes.PlotKit;pk.base=new dc.Theme({chart:{stroke:null,fill:"yellow"},plotarea:{stroke:null,fill:"yellow"},axis:{stroke:{color:"#fff",width:1},line:{color:"#fff",width:0.5},majorTick:{color:"#fff",width:0.5,length:6},minorTick:{color:"#fff",width:0.5,length:3},tick:{font:"normal normal normal 7pt Helvetica,Arial,sans-serif",fontColor:"#999"}},series:{stroke:{width:2.5,color:"#fff"},fill:"#666",font:"normal normal normal 7.5pt Helvetica,Arial,sans-serif",fontColor:"#666"},marker:{stroke:{width:2},fill:"#333",font:"normal normal normal 7pt Helvetica,Arial,sans-serif",fontColor:"#666"},colors:["red","green","blue"]});pk.base.next=function(_806,_807,_808){var _809=dc.Theme.prototype.next.apply(this,arguments);if(_806=="line"){_809.marker.outline={width:2,color:"#fff"};_809.series.stroke.width=3.5;_809.marker.stroke.width=2;}else{if(_806=="candlestick"){_809.series.stroke.width=1;}else{_809.series.stroke.color="#fff";}}return _809;};})();}if(!dojo._hasResource["dijit.Tooltip"]){dojo._hasResource["dijit.Tooltip"]=true;dojo.provide("dijit.Tooltip");dojo.declare("dijit._MasterTooltip",[dijit._Widget,dijit._Templated],{duration:dijit.defaultDuration,templateString:dojo.cache("dijit","templates/Tooltip.html","<div class=\"dijitTooltip dijitTooltipLeft\" id=\"dojoTooltip\"\r\n\t><div class=\"dijitTooltipContainer dijitTooltipContents\" dojoAttachPoint=\"containerNode\" role='alert'></div\r\n\t><div class=\"dijitTooltipConnector\" dojoAttachPoint=\"connectorNode\"></div\r\n></div>\r\n"),postCreate:function(){dojo.body().appendChild(this.domNode);this.bgIframe=new dijit.BackgroundIframe(this.domNode);this.fadeIn=dojo.fadeIn({node:this.domNode,duration:this.duration,onEnd:dojo.hitch(this,"_onShow")});this.fadeOut=dojo.fadeOut({node:this.domNode,duration:this.duration,onEnd:dojo.hitch(this,"_onHide")});},show:function(_80a,_80b,_80c,rtl){if(this.aroundNode&&this.aroundNode===_80b){return;}this.domNode.width="auto";if(this.fadeOut.status()=="playing"){this._onDeck=arguments;return;}this.containerNode.innerHTML=_80a;var pos=dijit.placeOnScreenAroundElement(this.domNode,_80b,dijit.getPopupAroundAlignment((_80c&&_80c.length)?_80c:dijit.Tooltip.defaultPosition,!rtl),dojo.hitch(this,"orient"));dojo.style(this.domNode,"opacity",0);this.fadeIn.play();this.isShowingNow=true;this.aroundNode=_80b;},orient:function(node,_80d,_80e,_80f,_810){this.connectorNode.style.top="";var _811=_80f.w-this.connectorNode.offsetWidth;node.className="dijitTooltip "+{"BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[_80d+"-"+_80e];this.domNode.style.width="auto";var size=dojo.contentBox(this.domNode);var _812=Math.min((Math.max(_811,1)),size.w);var _813=_812<size.w;this.domNode.style.width=_812+"px";if(_813){this.containerNode.style.overflow="auto";var _814=this.containerNode.scrollWidth;this.containerNode.style.overflow="visible";if(_814>_812){_814=_814+dojo.style(this.domNode,"paddingLeft")+dojo.style(this.domNode,"paddingRight");this.domNode.style.width=_814+"px";}}if(_80e.charAt(0)=="B"&&_80d.charAt(0)=="B"){var mb=dojo.marginBox(node);var _815=this.connectorNode.offsetHeight;if(mb.h>_80f.h){var _816=_80f.h-(_810.h/2)-(_815/2);this.connectorNode.style.top=_816+"px";this.connectorNode.style.bottom="";}else{this.connectorNode.style.bottom=Math.min(Math.max(_810.h/2-_815/2,0),mb.h-_815)+"px";this.connectorNode.style.top="";}}else{this.connectorNode.style.top="";this.connectorNode.style.bottom="";}return Math.max(0,size.w-_811);},_onShow:function(){if(dojo.isIE){this.domNode.style.filter="";}},hide:function(_817){if(this._onDeck&&this._onDeck[1]==_817){this._onDeck=null;}else{if(this.aroundNode===_817){this.fadeIn.stop();this.isShowingNow=false;this.aroundNode=null;this.fadeOut.play();}else{}}},_onHide:function(){this.domNode.style.cssText="";this.containerNode.innerHTML="";if(this._onDeck){this.show.apply(this,this._onDeck);this._onDeck=null;}}});dijit.showTooltip=function(_818,_819,_81a,rtl){if(!dijit._masterTT){dijit._masterTT=new dijit._MasterTooltip();}return dijit._masterTT.show(_818,_819,_81a,rtl);};dijit.hideTooltip=function(_81b){if(!dijit._masterTT){dijit._masterTT=new dijit._MasterTooltip();}return dijit._masterTT.hide(_81b);};dojo.declare("dijit.Tooltip",dijit._Widget,{label:"",showDelay:400,connectId:[],position:[],_setConnectIdAttr:function(_81c){dojo.forEach(this._connections||[],function(_81d){dojo.forEach(_81d,dojo.hitch(this,"disconnect"));},this);var ary=dojo.isArrayLike(_81c)?_81c:(_81c?[_81c]:[]);this._connections=dojo.map(ary,function(id){var node=dojo.byId(id);return node?[this.connect(node,"onmouseenter","_onTargetMouseEnter"),this.connect(node,"onmouseleave","_onTargetMouseLeave"),this.connect(node,"onfocus","_onTargetFocus"),this.connect(node,"onblur","_onTargetBlur")]:[];},this);this._set("connectId",_81c);this._connectIds=ary;},addTarget:function(node){var id=node.id||node;if(dojo.indexOf(this._connectIds,id)==-1){this.set("connectId",this._connectIds.concat(id));}},removeTarget:function(node){var id=node.id||node,idx=dojo.indexOf(this._connectIds,id);if(idx>=0){this._connectIds.splice(idx,1);this.set("connectId",this._connectIds);}},buildRendering:function(){this.inherited(arguments);dojo.addClass(this.domNode,"dijitTooltipData");},startup:function(){this.inherited(arguments);var ids=this.connectId;dojo.forEach(dojo.isArrayLike(ids)?ids:[ids],this.addTarget,this);},_onTargetMouseEnter:function(e){this._onHover(e);},_onTargetMouseLeave:function(e){this._onUnHover(e);},_onTargetFocus:function(e){this._focus=true;this._onHover(e);},_onTargetBlur:function(e){this._focus=false;this._onUnHover(e);},_onHover:function(e){if(!this._showTimer){var _81e=e.target;this._showTimer=setTimeout(dojo.hitch(this,function(){this.open(_81e);}),this.showDelay);}},_onUnHover:function(e){if(this._focus){return;}if(this._showTimer){clearTimeout(this._showTimer);delete this._showTimer;}this.close();},open:function(_81f){if(this._showTimer){clearTimeout(this._showTimer);delete this._showTimer;}dijit.showTooltip(this.label||this.domNode.innerHTML,_81f,this.position,!this.isLeftToRight());this._connectNode=_81f;this.onShow(_81f,this.position);},close:function(){if(this._connectNode){dijit.hideTooltip(this._connectNode);delete this._connectNode;this.onHide();}if(this._showTimer){clearTimeout(this._showTimer);delete this._showTimer;}},onShow:function(_820,_821){},onHide:function(){},uninitialize:function(){this.close();this.inherited(arguments);}});dijit.Tooltip.defaultPosition=["after","before"];}if(!dojo._hasResource["dojox.charting.action2d.Base"]){dojo._hasResource["dojox.charting.action2d.Base"]=true;dojo.provide("dojox.charting.action2d.Base");(function(){var _822=400,_823=dojo.fx.easing.backOut,df=dojox.lang.functional;dojo.declare("dojox.charting.action2d.Base",null,{overOutEvents:{onmouseover:1,onmouseout:1},constructor:function(_824,plot,_825){this.chart=_824;this.plot=plot||"default";this.anim={};if(!_825){_825={};}this.duration=_825.duration?_825.duration:_822;this.easing=_825.easing?_825.easing:_823;},connect:function(){this.handle=this.chart.connectToPlot(this.plot,this,"process");},disconnect:function(){if(this.handle){dojo.disconnect(this.handle);this.handle=null;}},reset:function(){},destroy:function(){this.disconnect();df.forIn(this.anim,function(o){df.forIn(o,function(anim){anim.action.stop(true);});});this.anim={};}});})();}if(!dojo._hasResource["dojox.lang.functional.scan"]){dojo._hasResource["dojox.lang.functional.scan"]=true;dojo.provide("dojox.lang.functional.scan");(function(){var d=dojo,df=dojox.lang.functional,_826={};d.mixin(df,{scanl:function(a,f,z,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);var t,n,i;if(d.isArray(a)){t=new Array((n=a.length)+1);t[0]=z;for(i=0;i<n;z=f.call(o,z,a[i],i,a),t[++i]=z){}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){t=[z];for(i=0;a.hasNext();t.push(z=f.call(o,z,a.next(),i++,a))){}}else{t=[z];for(i in a){if(!(i in _826)){t.push(z=f.call(o,z,a[i],i,a));}}}}return t;},scanl1:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);var t,n,z,_827=true;if(d.isArray(a)){t=new Array(n=a.length);t[0]=z=a[0];for(var i=1;i<n;t[i]=z=f.call(o,z,a[i],i,a),++i){}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){if(a.hasNext()){t=[z=a.next()];for(var i=1;a.hasNext();t.push(z=f.call(o,z,a.next(),i++,a))){}}}else{for(var i in a){if(!(i in _826)){if(_827){t=[z=a[i]];_827=false;}else{t.push(z=f.call(o,z,a[i],i,a));}}}}}return t;},scanr:function(a,f,z,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);var n=a.length,t=new Array(n+1),i=n;t[n]=z;for(;i>0;--i,z=f.call(o,z,a[i],i,a),t[i]=z){}return t;},scanr1:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);var n=a.length,t=new Array(n),z=a[n-1],i=n-1;t[i]=z;for(;i>0;--i,z=f.call(o,z,a[i],i,a),t[i]=z){}return t;}});})();}if(!dojo._hasResource["dojox.charting.action2d.Tooltip"]){dojo._hasResource["dojox.charting.action2d.Tooltip"]=true;dojo.provide("dojox.charting.action2d.Tooltip");(function(){var _828=function(o){var t=o.run&&o.run.data&&o.run.data[o.index];if(t&&typeof t!="number"&&(t.tooltip||t.text)){return t.tooltip||t.text;}if(o.element=="candlestick"){return "<table cellpadding=\"1\" cellspacing=\"0\" border=\"0\" style=\"font-size:0.9em;\">"+"<tr><td>Open:</td><td align=\"right\"><strong>"+o.data.open+"</strong></td></tr>"+"<tr><td>High:</td><td align=\"right\"><strong>"+o.data.high+"</strong></td></tr>"+"<tr><td>Low:</td><td align=\"right\"><strong>"+o.data.low+"</strong></td></tr>"+"<tr><td>Close:</td><td align=\"right\"><strong>"+o.data.close+"</strong></td></tr>"+(o.data.mid!==undefined?"<tr><td>Mid:</td><td align=\"right\"><strong>"+o.data.mid+"</strong></td></tr>":"")+"</table>";}return o.element=="bar"?o.x:o.y;};var df=dojox.lang.functional,m=dojox.gfx.matrix,pi4=Math.PI/4,pi2=Math.PI/2;dojo.declare("dojox.charting.action2d.Tooltip",dojox.charting.action2d.Base,{defaultParams:{text:_828},optionalParams:{},constructor:function(_829,plot,_82a){this.text=_82a&&_82a.text?_82a.text:_828;this.connect();},process:function(o){if(o.type==="onplotreset"||o.type==="onmouseout"){dijit.hideTooltip(this.aroundRect);this.aroundRect=null;if(o.type==="onplotreset"){delete this.angles;}return;}if(!o.shape||o.type!=="onmouseover"){return;}var _82b={type:"rect"},_82c=["after","before"];switch(o.element){case "marker":_82b.x=o.cx;_82b.y=o.cy;_82b.width=_82b.height=1;break;case "circle":_82b.x=o.cx-o.cr;_82b.y=o.cy-o.cr;_82b.width=_82b.height=2*o.cr;break;case "column":_82c=["above","below"];case "bar":_82b=dojo.clone(o.shape.getShape());break;case "candlestick":_82b.x=o.x;_82b.y=o.y;_82b.width=o.width;_82b.height=o.height;break;default:if(!this.angles){if(typeof o.run.data[0]=="number"){this.angles=df.map(df.scanl(o.run.data,"+",0),"* 2 * Math.PI / this",df.foldl(o.run.data,"+",0));}else{this.angles=df.map(df.scanl(o.run.data,"a + b.y",0),"* 2 * Math.PI / this",df.foldl(o.run.data,"a + b.y",0));}}var _82d=m._degToRad(o.plot.opt.startAngle),_82e=(this.angles[o.index]+this.angles[o.index+1])/2+_82d;_82b.x=o.cx+o.cr*Math.cos(_82e);_82b.y=o.cy+o.cr*Math.sin(_82e);_82b.width=_82b.height=1;if(_82e<pi4){}else{if(_82e<pi2+pi4){_82c=["below","above"];}else{if(_82e<Math.PI+pi4){_82c=["before","after"];}else{if(_82e<2*Math.PI-pi4){_82c=["above","below"];}}}}break;}var lt=dojo.coords(this.chart.node,true);_82b.x+=lt.x;_82b.y+=lt.y;_82b.x=Math.round(_82b.x);_82b.y=Math.round(_82b.y);_82b.width=Math.ceil(_82b.width);_82b.height=Math.ceil(_82b.height);this.aroundRect=_82b;var _82f=this.text(o);if(_82f){dijit.showTooltip(_82f,this.aroundRect,_82c);}}});})();}if(!dojo._hasResource["esri.dijit.Popup"]){dojo._hasResource["esri.dijit.Popup"]=true;dojo.provide("esri.dijit.Popup");(function(){var dc=dojox.charting,pk=dc.themes.PlotKit;pk.popup=pk.base.clone();pk.popup.chart.fill=pk.popup.plotarea.fill="#e7eef6";pk.popup.colors=["#284B70","#702828","#5F7143","#F6BC0C","#382C6C","#50224F","#1D7554","#4C4C4C","#0271AE","#706E41","#446A73","#0C3E69","#757575","#B7B7B7","#A3A3A3"];pk.popup.series.stroke.width=1;pk.popup.marker.stroke.width=1;}());dojo.declare("esri.dijit.Popup",[esri.InfoWindowBase,esri.PopupBase],{offsetX:3,offsetY:3,zoomFactor:4,marginLeft:10,marginTop:10,highlight:true,constructor:function(_830,_831){this.initialize();dojo.mixin(this,_830);this.domNode=dojo.byId(_831);var nls=this._nls=dojo.mixin({},esri.bundle.widgets.popup);var _832=this.domNode;dojo.addClass(_832,"esriPopup");var _833="<div class='sizer'>"+"<div class='titlePane'>"+"<div class='spinner hidden' title='"+nls.NLS_searching+"...'></div>"+"<div class='title'></div>"+"<div class='titleButton prev hidden' title='"+nls.NLS_prevFeature+"'></div>"+"<div class='titleButton next hidden' title='"+nls.NLS_nextFeature+"'></div>"+"<div class='titleButton maximize' title='"+nls.NLS_maximize+"'></div>"+"<div class='titleButton close' title='"+nls.NLS_close+"'></div>"+"</div>"+"</div>"+"<div class='sizer content'>"+"<div class='contentPane'>"+"</div>"+"</div>"+"<div class='sizer'>"+"<div class='actionsPane'>"+"<div class='actionList hidden'>"+"<a class='action zoomTo' href='javascript:void(0);'>Zoom to</a>"+"</div>"+"</div>"+"</div>"+"<div class='pointer top hidden'></div>"+"<div class='pointer bottom hidden'></div>"+"<div class='pointer left hidden'></div>"+"<div class='pointer right hidden'></div>"+"<div class='pointer topLeft hidden'></div>"+"<div class='pointer topRight hidden'></div>"+"<div class='pointer bottomLeft hidden'></div>"+"<div class='pointer bottomRight hidden'></div>";dojo.attr(_832,"innerHTML",_833);this._sizers=dojo.query(".sizer",_832);var _834=dojo.query(".titlePane",_832)[0];dojo.setSelectable(_834,false);this._title=dojo.query(".title",_834)[0];this._prevFeatureButton=dojo.query(".prev",_834)[0];this._nextFeatureButton=dojo.query(".next",_834)[0];this._maxButton=dojo.query(".maximize",_834)[0];this._spinner=dojo.query(".spinner",_834)[0];this._contentPane=dojo.query(".contentPane",_832)[0];this._actionList=dojo.query(".actionsPane .actionList",_832)[0];this._eventConnections=[dojo.connect(dojo.query(".close",_834)[0],"onclick",this,this.hide),dojo.connect(this._prevFeatureButton,"onclick",this,this.selectPrevious),dojo.connect(this._nextFeatureButton,"onclick",this,this.selectNext),dojo.connect(this._maxButton,"onclick",this,this._toggleSize),dojo.connect(dojo.query(".zoomTo",this._actionList)[0],"onclick",this,this._zoomToFeature)];if(esri.isTouchEnabled){var _835=esri.setScrollable(this._contentPane);this._eventConnections.push(_835[0],_835[1]);}esri.hide(_832);this.isShowing=false;},setMap:function(map){this.inherited(arguments);if(this.highlight){this.enableHighlight(map);}},unsetMap:function(){this.disableHighlight(this.map);this.inherited(arguments);},setTitle:function(_836){this.destroyDijits(this._title);this.place(_836,this._title);if(this.isShowing){this.startupDijits(this._title);}},setContent:function(_837){this.destroyDijits(this._contentPane);this.place(_837,this._contentPane);if(this.isShowing){this.startupDijits(this._contentPane);}},show:function(_838){if(!_838){esri.show(this.domNode);this.isShowing=true;return;}var map=this.map,_839;if(_838.spatialReference){this._location=_838;_839=map.toScreen(_838);}else{this._location=map.toMap(_838);_839=_838;}var _83a=map._getFrameWidth();if(_83a!==-1){_839.x=_839.x%_83a;if(_839.x<0){_839.x+=_83a;}if(map.width>_83a){var _83b=(map.width-_83a)/2;while(_839.x<_83b){_839.x+=_83a;}}}if(this._maximized){this.restore();}else{this._setPosition(_839);}if(!this.isShowing){esri.show(this.domNode);this.isShowing=true;this.onShow();}},hide:function(){if(this.isShowing){esri.hide(this.domNode);this.isShowing=false;this.onHide();}},resize:function(_83c,_83d){this._sizers.style({width:_83c+"px"});dojo.style(this._contentPane,"maxHeight",_83d+"px");},onShow:function(){this._followMap();this.startupDijits(this._title);this.startupDijits(this._contentPane);this.showHighlight();},onHide:function(){this._unfollowMap();this.hideHighlight();},maximize:function(){var map=this.map;if(!map||this._maximized){return;}this._maximized=true;var max=this._maxButton;dojo.removeClass(max,"maximize");dojo.addClass(max,"restore");dojo.attr(max,"title",this._nls.NLS_restore);var _83e=this.marginLeft,_83f=this.marginTop,_840=map.width-(2*_83e),_841=map.height-(2*_83f),_842=this.domNode;dojo.style(_842,{left:_83e+"px",right:null,top:_83f+"px",bottom:null});this._savedWidth=dojo.style(this._sizers[0],"width");this._savedHeight=dojo.style(this._contentPane,"maxHeight");this._sizers.style({width:_840+"px"});dojo.style(this._contentPane,{maxHeight:(_841-65)+"px",height:(_841-65)+"px"});this._showPointer("");this._unfollowMap();},restore:function(){var map=this.map;if(!map||!this._maximized){return;}this._maximized=false;var max=this._maxButton;dojo.removeClass(max,"restore");dojo.addClass(max,"maximize");dojo.attr(max,"title",this._nls.NLS_maximize);dojo.style(this._contentPane,"height",null);this.resize(this._savedWidth,this._savedHeight);this._savedWidth=this._savedHeight=null;this.show(this._location);this._followMap();},destroy:function(){if(this.map){this.unsetMap();}this.cleanup();if(this.isShowing){this.hide();}this.destroyDijits(this._title);this.destroyDijits(this._content);dojo.forEach(this._eventConnections,dojo.disconnect);dojo.destroy(this.domNode);this._sizers=this._contentPane=this._actionList=this._title=this._prevFeatureButton=this._nextFeatureButton=this._spinner=this._eventConnections=this._pagerScope=this._targetLocation=this._nls=this._maxButton=null;},selectNext:function(){this.select(this.selectedIndex+1);},selectPrevious:function(){this.select(this.selectedIndex-1);},setFeatures:function(){this.inherited(arguments);this._updateUI();},onSetFeatures:function(){},onClearFeatures:function(){this.setTitle("&nbsp;");this.setContent("&nbsp;");this._setPagerCallbacks(this);this._updateUI();this.hideHighlight();},onSelectionChange:function(){var ptr=this.selectedIndex;this._updateUI();if(ptr>=0){this.setContent(this.features[ptr].getContent());this.updateHighlight(this.map,this.features[ptr]);if(this.isShowing){this.showHighlight();}}},onDfdComplete:function(){this._updateUI();},_followMap:function(){this._unfollowMap();var map=this.map;this._handles=[dojo.connect(map,"onPanStart",this,this._onPanStart),dojo.connect(map,"onPan",this,this._onPan),dojo.connect(map,"onZoomStart",this,this._onZoomStart),dojo.connect(map,"onExtentChange",this,this._onExtentChange)];},_unfollowMap:function(){var _843=this._handles;if(_843){dojo.forEach(_843,dojo.disconnect,dojo);this._handles=null;}},_onPanStart:function(){var _844=this.domNode.style;this._panOrigin={left:_844.left,top:_844.top,right:_844.right,bottom:_844.bottom};},_onPan:function(_845,_846){var _847=this._panOrigin,dx=_846.x,dy=_846.y,left=_847.left,top=_847.top,_848=_847.right,_849=_847.bottom;if(left){left=(parseFloat(left)+dx)+"px";}if(top){top=(parseFloat(top)+dy)+"px";}if(_848){_848=(parseFloat(_848)-dx)+"px";}if(_849){_849=(parseFloat(_849)-dy)+"px";}dojo.style(this.domNode,{left:left,top:top,right:_848,bottom:_849});},_onZoomStart:function(){esri.hide(this.domNode);},_onExtentChange:function(_84a,_84b,_84c){if(_84c){esri.show(this.domNode);}this.show(this._targetLocation||this._location);this._targetLocation=null;},_toggleSize:function(){if(this._maximized){this.restore();}else{this.maximize();}},_setPosition:function(_84d){var posX=_84d.x,posY=_84d.y,offX=this.offsetX||0,offY=this.offsetY||0,_84e=0,_84f=dojo.contentBox(this.map.container),_850=_84f.w,_851=_84f.h,_852="Right",_853="top",_854="Left",_855="bottom";if(posX<=_850/2){_852="Right";_854="Left";}else{if(posX<=_850){_852="Left";_854="Right";}}if(posY<=_851/2){_853="bottom";_855="top";}else{if(posY<=_851){_853="top";_855="bottom";}}var _856=_853+_852,_857=_855+_854;this._showPointer(_857);switch(_857){case "topLeft":case "topRight":case "bottomLeft":case "bottomRight":_84e=45;break;}switch(_856){case "topLeft":dojo.style(this.domNode,{left:null,right:(_850-posX+offX)+"px",top:null,bottom:(_851-posY+_84e+offY)+"px"});break;case "topRight":dojo.style(this.domNode,{left:(posX+offX)+"px",right:null,top:null,bottom:(_851-posY+_84e+offY)+"px"});break;case "bottomLeft":dojo.style(this.domNode,{left:null,right:(_850-posX+offX)+"px",top:(posY+_84e+offY)+"px",bottom:null});break;case "bottomRight":dojo.style(this.domNode,{left:(posX+offX)+"px",right:null,top:(posY+_84e+offY)+"px",bottom:null});break;}},_showPointer:function(_858){var _859=["topLeft","topRight","bottomRight","bottomLeft"];dojo.forEach(_859,function(ptr){if(ptr===_858){dojo.query(".pointer."+ptr,this.domNode).removeClass("hidden");}else{dojo.query(".pointer."+ptr,this.domNode).addClass("hidden");}},this);},_setPagerCallbacks:function(_85a,_85b,_85c){if(_85a===this&&(!this._pagerScope||this._pagerScope===this)){return;}if(_85a===this._pagerScope){return;}this._pagerScope=_85a;if(_85a===this){_85b=this.selectPrevious;_85c=this.selectNext;}var _85d=this._eventConnections;dojo.disconnect(_85d[1]);dojo.disconnect(_85d[2]);if(_85b){_85d[1]=dojo.connect(this._prevFeatureButton,"onclick",_85a,_85b);}if(_85c){_85d[2]=dojo.connect(this._nextFeatureButton,"onclick",_85a,_85c);}},_zoomToFeature:function(){var _85e=this.features,ptr=this.selectedIndex,map=this.map;if(_85e){var _85f=_85e[ptr].geometry,_860,_861,_862=0,_863;if(_85f){switch(_85f.type){case "point":_860=_85f;break;case "multipoint":_860=_85f.getPoint(0);_861=_85f.getExtent();break;case "polyline":_860=_85f.getPoint(0,0);_861=_85f.getExtent();if(map._getFrameWidth()!==-1){dojo.forEach(_85f.paths,function(path){var _864={"paths":[path,map.spatialReference]},_865=new esri.geometry.Polyline(_864),_866=_865.getExtent(),_867=Math.abs(_866.ymax-_866.ymin),_868=Math.abs(_866.xmax-_866.xmin),_869=(_868>_867)?_868:_867;if(_869>_862){_862=_869;_863=_866;}});_861=_863;}break;case "polygon":_860=_85f.getPoint(0,0);_861=_85f.getExtent();if(map._getFrameWidth()!==-1){dojo.forEach(_85f.rings,function(ring){var _86a={"rings":[ring,map.spatialReference]},_86b=new esri.geometry.Polygon(_86a),_86c=_86b.getExtent(),_86d=Math.abs(_86c.ymax-_86c.ymin),_86e=Math.abs(_86c.xmax-_86c.xmin),_86f=(_86e>_86d)?_86e:_86d;if(_86f>_862){_862=_86f;_863=_86c;}});_861=_863;}break;}}if(!_860){_860=this._location;}if(!_861||!_861.intersects(this._location)){this._location=_860;}if(_861){map.setExtent(_861,true);}else{var _870=map.getNumLevels(),_871=map.getLevel(),last=_870-1,_872=this.zoomFactor||1;if(_870>0){if(_871===last){return;}var _873=_871+_872;if(_873>last){_873=last;}map._scrollZoomHandler({value:(_873-_871),mapPoint:_860});}else{map._scrollZoomHandler({value:(1/Math.pow(2,_872))*2,mapPoint:_860});}}}},_updateUI:function(){var _874="&nbsp;",ptr=this.selectedIndex,_875=this.features,_876=this.deferreds,prev=this._prevFeatureButton,next=this._nextFeatureButton,_877=this._spinner,_878=this._actionList,nls=this._nls;if(_875&&_875.length>1){_874="("+(ptr+1)+" of "+_875.length+")";if(ptr===0){dojo.addClass(prev,"hidden");}else{dojo.removeClass(prev,"hidden");}if(ptr===_875.length-1){dojo.addClass(next,"hidden");}else{dojo.removeClass(next,"hidden");}}else{dojo.addClass(prev,"hidden");dojo.addClass(next,"hidden");}this.setTitle(_874);if(_876&&_876.length){if(_875){dojo.removeClass(_877,"hidden");}else{this.setContent("<div style='text-align: center;'>"+nls.NLS_searching+"...</div>");}}else{dojo.addClass(_877,"hidden");if(!_875||!_875.length){this.setContent("<div style='text-align: center;'>"+nls.NLS_noInfo+".</div>");}}if(_875&&_875.length){dojo.removeClass(_878,"hidden");}else{dojo.addClass(_878,"hidden");}}});dojo.declare("esri.dijit.PopupTemplate",[esri.PopupInfoTemplate],{constructor:function(json){this.initialize(json);this._nls=dojo.mixin({},esri.bundle.widgets.popup);},getTitle:function(_879){return this.info?this.getComponents(_879).title:"";},getContent:function(_87a){return this.info?new esri.dijit._PopupRenderer({template:this,graphic:_87a,_nls:this._nls},dojo.create("div")).domNode:"";}});dojo.declare("esri.dijit._PopupRenderer",[dijit._Widget,dijit._Templated],{templateString:"<div class='esriViewPopup'>"+"<div class='mainSection'>"+"<div class='header' dojoAttachPoint='_title'></div>"+"<div class='hzLine'></div>"+"<div dojoAttachPoint='_description'></div>"+"<div class='break'></div>"+"</div>"+"<div class='attachmentsSection hidden'>"+"<div>Attachments:</div>"+"<ul dojoAttachPoint='_attachmentsList'>"+"</ul>"+"<div class='break'></div>"+"</div>"+"<div class='mediaSection hidden'>"+"<div class='header' dojoAttachPoint='_mediaTitle'></div>"+"<div class='hzLine'></div>"+"<div class='caption' dojoAttachPoint='_mediaCaption'></div>"+"<div class='gallery' dojoAttachPoint='_gallery'>"+"<div class='mediaHandle prev' dojoAttachPoint='_prevMedia' dojoAttachEvent='onclick: _goToPrevMedia'></div>"+"<div class='mediaHandle next' dojoAttachPoint='_nextMedia' dojoAttachEvent='onclick: _goToNextMedia'></div>"+"<ul class='summary'>"+"<li class='image mediaCount hidden' dojoAttachPoint='_imageCount'>0</li>"+"<li class='image mediaIcon hidden'></li>"+"<li class='chart mediaCount hidden' dojoAttachPoint='_chartCount'>0</li>"+"<li class='chart mediaIcon hidden'></li>"+"</ul>"+"<div class='frame' dojoAttachPoint='_mediaFrame'></div>"+"</div>"+"</div>"+"</div>",startup:function(){this.inherited(arguments);var _87b=this.template,_87c=this.graphic,_87d=_87b.getComponents(_87c),_87e=_87d.title,_87f=_87d.description,_880=_87d.fields,_881=_87d.mediaInfos,_882=this.domNode,nls=this._nls;this._prevMedia.title=nls.NLS_prevMedia;this._nextMedia.title=nls.NLS_nextMedia;dojo.attr(this._title,"innerHTML",_87e);if(!_87e){dojo.addClass(this._title,"hidden");}if(!_87f&&_880){_87f="";dojo.forEach(_880,function(row){_87f+=("<tr valign='top'>");_87f+=("<td class='attrName'>"+row[0]+"</td>");_87f+=("<td class='attrValue'>"+row[1].replace(/^\s*(https?:\/\/[^\s]+)\s*$/i,"<a target='_blank' href='$1' title='$1'>More info</a>")+"</td>");_87f+=("</tr>");});if(_87f){_87f="<table class='attrTable' cellpadding='0px' cellspacing='0px'>"+_87f+"</table>";}}dojo.attr(this._description,"innerHTML",_87f);if(!_87f){dojo.addClass(this._description,"hidden");}dojo.query("a",this._description).forEach(function(node){dojo.attr(node,"target","_blank");});if(_87e&&_87f){dojo.query(".mainSection .hzLine",_882).removeClass("hidden");}else{if(_87e||_87f){dojo.query(".mainSection .hzLine",_882).addClass("hidden");}else{dojo.query(".mainSection",_882).addClass("hidden");}}var dfd=(this._dfd=_87b.getAttachments(_87c));if(dfd){dfd.addBoth(dojo.hitch(this,this._attListHandler,dfd));dojo.attr(this._attachmentsList,"innerHTML","<li>"+nls.NLS_searching+"...</li>");dojo.query(".attachmentsSection",_882).removeClass("hidden");}if(_881&&_881.length){dojo.query(".mediaSection",_882).removeClass("hidden");dojo.setSelectable(this._mediaFrame,false);this._mediaInfos=_881;this._mediaPtr=0;this._updateUI();this._displayMedia();}},destroy:function(){if(this._dfd){this._dfd.cancel();}this._destroyFrame();this.template=this.graphic=this._nls=this._mediaInfos=this._mediaPtr=this._dfd=null;this.inherited(arguments);},_goToPrevMedia:function(){var ptr=this._mediaPtr-1;if(ptr<0){return;}this._mediaPtr--;this._updateUI();this._displayMedia();},_goToNextMedia:function(){var ptr=this._mediaPtr+1;if(ptr===this._mediaInfos.length){return;}this._mediaPtr++;this._updateUI();this._displayMedia();},_updateUI:function(){var _883=this._mediaInfos,_884=_883.length,_885=this.domNode,_886=this._prevMedia,_887=this._nextMedia;if(_884>1){var _888=0,_889=0;dojo.forEach(_883,function(info){if(info.type==="image"){_888++;}else{if(info.type.indexOf("chart")!==-1){_889++;}}});if(_888){dojo.attr(this._imageCount,"innerHTML",_888);dojo.query(".summary .image",_885).removeClass("hidden");}if(_889){dojo.attr(this._chartCount,"innerHTML",_889);dojo.query(".summary .chart",_885).removeClass("hidden");}}else{dojo.query(".summary",_885).addClass("hidden");dojo.addClass(_886,"hidden");dojo.addClass(_887,"hidden");}var ptr=this._mediaPtr;if(ptr===0){dojo.addClass(_886,"hidden");}else{dojo.removeClass(_886,"hidden");}if(ptr===_884-1){dojo.addClass(_887,"hidden");}else{dojo.removeClass(_887,"hidden");}this._destroyFrame();},_displayMedia:function(){var info=this._mediaInfos[this._mediaPtr],_88a=info.title,_88b=info.caption,_88c=dojo.query(".mediaSection .hzLine",this.domNode)[0];dojo.attr(this._mediaTitle,"innerHTML",_88a);dojo[_88a?"removeClass":"addClass"](this._mediaTitle,"hidden");dojo.attr(this._mediaCaption,"innerHTML",_88b);dojo[_88b?"removeClass":"addClass"](this._mediaCaption,"hidden");dojo[(_88a&&_88b)?"removeClass":"addClass"](_88c,"hidden");if(info.type==="image"){this._showImage(info.value);}else{this._showChart(info.type,info.value);}},_showImage:function(_88d){dojo.addClass(this._mediaFrame,"image");var _88e=dojo.style(this._gallery,"height"),html="<img src='"+_88d.sourceURL+"' onload='esri.dijit._PopupRenderer.prototype._imageLoaded(this,"+_88e+");' />";if(_88d.linkURL){html="<a target='_blank' href='"+_88d.linkURL+"'>"+html+"</a>";}dojo.attr(this._mediaFrame,"innerHTML",html);},_showChart:function(type,_88f){dojo.removeClass(this._mediaFrame,"image");var _890=this._chart=new dojox.charting.Chart2D(dojo.create("div",{"class":"chart"},this._mediaFrame),{margins:{l:4,t:4,r:4,b:4}});_890.setTheme(dojo.getObject("dojox.charting.themes."+(_88f.theme||"PlotKit.popup")));switch(type){case "piechart":_890.addPlot("default",{type:"Pie",labels:false});_890.addSeries("Series A",_88f.fields);break;case "linechart":_890.addPlot("default",{type:"Markers"});_890.addAxis("x",{min:0,majorTicks:false,minorTicks:false,majorLabels:false,minorLabels:false});_890.addAxis("y",{includeZero:true,vertical:true,fixUpper:"minor"});dojo.forEach(_88f.fields,function(info,idx){info.x=idx+1;});_890.addSeries("Series A",_88f.fields);break;case "columnchart":_890.addPlot("default",{type:"Columns",gap:3});_890.addAxis("y",{includeZero:true,vertical:true,fixUpper:"minor"});_890.addSeries("Series A",_88f.fields);break;case "barchart":_890.addPlot("default",{type:"Bars",gap:3});_890.addAxis("x",{includeZero:true,fixUpper:"minor",minorLabels:false});_890.addAxis("y",{vertical:true,majorTicks:false,minorTicks:false,majorLabels:false,minorLabels:false});_890.addSeries("Series A",_88f.fields);break;}this._action=new dojox.charting.action2d.Tooltip(_890);_890.render();},_destroyFrame:function(){if(this._chart){this._chart.destroy();this._chart=null;}if(this._action){this._action.destroy();this._action=null;}dojo.attr(this._mediaFrame,"innerHTML","");},_imageLoaded:function(img,_891){var _892=img.height;if(_892<_891){var diff=Math.round((_891-_892)/2);dojo.style(img,"marginTop",diff+"px");}},_attListHandler:function(dfd,_893){if(dfd===this._dfd){this._dfd=null;var html="";if(!(_893 instanceof Error)&&_893&&_893.length){dojo.forEach(_893,function(info){html+=("<li>");html+=("<a href='"+info.url+"' target='_blank'>"+(info.name||"[No name]")+"</a>");html+=("</li>");});}dojo.attr(this._attachmentsList,"innerHTML",html||"<li>"+this._nls.NLS_noAttach+"</li>");}}});}if(!dojo._hasResource["esri.layers.KMLLayer"]){dojo._hasResource["esri.layers.KMLLayer"]=true;dojo.provide("esri.layers.KMLLayer");dojo.declare("esri.layers.KMLLayer",[esri.layers.Layer],{serviceUrl:"http://utility.arcgis.com/sharing/kml",constructor:function(url,_894){if(!url){console.log("KMLLayer:constructor - please provide url for the KML file");}this._outSR=null;if(_894&&_894.outSR){this._outSR=_894.outSR;this._outSR=(this._outSR)?this._outSR.wkid:null;}this._options=_894;if(esri.config.defaults.kmlService){this.serviceUrl=esri.config.defaults.kmlService;}var link=(this.linkInfo=_894&&_894.linkInfo);if(link){this.visible=!!link.visibility;}if(!link||(link&&link.visibility)){this._parseKml();}},getFeature:function(_895){if(!_895){return;}var type=_895.type,id=_895.id,_896,i,len;switch(type){case "esriGeometryPoint":case "esriGeometryPolyline":case "esriGeometryPolygon":var _897=this["_"+type];if(_897){_896=dojo.getObject("_mode._featureMap."+id,false,_897);}break;case "GroundOverlay":var _898=this._groundLyr;if(_898){var _899=_898.getImages();len=_899.length;for(i=0;i<len;i++){if(_899[i].id===id){_896=_899[i];break;}}}break;case "ScreenOverlay":break;case "NetworkLink":dojo.some(this._links,function(link){if(link.linkInfo.id===id){_896=link;return true;}else{return false;}});break;case "Folder":var _89a=this.folders;len=_89a?_89a.length:0;for(i=0;i<len;i++){if(_89a[i].id===id){_896=_89a[i];break;}}break;default:console.log("KMLLayer:getFeature - unknown feature type");break;}return _896;},getLayers:function(){var _89b=[];if(this._groundLyr){_89b.push(this._groundLyr);}if(this._fLayers){_89b=_89b.concat(this._fLayers);}return _89b;},setFolderVisibility:function(_89c,_89d){if(!_89c){return;}_89c.visible=_89d;if(_89d){var _89e=this._getParentFolders(_89c,[]);if(_89e.length>0){_89d=dojo.every(_89e,function(_89f){return _89f.visible;});}}this._setState(_89c,_89d);},_parseKml:function(){var self=this;esri.request({url:this.serviceUrl,content:{url:this.url,model:"simple",folders:"",outSR:this._outSR},callbackParamName:"callback",load:function(_8a0){self._initLayer(_8a0);},error:function(err){self.onError("Error reading kml document. ("+dojo.toJson(err)+")");}});},_initLayer:function(json){this.name=json.name;this.description=json.description;this.snippet=json.snippet;this.visibility=json.visibility;this.featureInfos=json.featureInfos;var i,len;var _8a1=(this._links=json.networkLinks);len=_8a1?_8a1.length:0;var _8a2=this;for(i=0;i<len;i++){var _8a3={linkInfo:_8a1[i]};_8a3=dojo.mixin(_8a3,this._options);if(_8a3.id){_8a3.id=_8a3.id+"_"+i;}if(_8a1[i].viewRefreshMode==="never"){_8a1[i]=new esri.layers.KMLLayer(_8a1[i].href,_8a3);dojo.connect(_8a1[i],"onLoad",function(a){_8a2._map.addLayer(a);});}}var _8a4=json.groundOverlays;if(_8a4&&_8a4.length>0){var _8a3=dojo.mixin({},this._options);if(_8a3.id){_8a3.id=_8a3.id+"_"+"mapImage";}var _8a5=(this._groundLyr=new esri.layers.MapImageLayer(_8a3));len=_8a4.length;for(i=0;i<len;i++){_8a5.addImage(new esri.layers.KMLGroundOverlay(_8a4[i]));}}var _8a6=dojo.getObject("featureCollection.layers",false,json);if(_8a6&&_8a6.length>0){this._fLayers=[];dojo.forEach(_8a6,function(_8a7,i){var _8a8=dojo.getObject("featureSet.features",false,_8a7),_8a9;if(_8a8&&_8a8.length>0){_8a7.layerDefinition.capabilities="Query,Data";var _8aa={outFields:["*"],infoTemplate:_8a7.popupInfo?new esri.dijit.PopupTemplate(_8a7.popupInfo):null,editable:false};_8aa=dojo.mixin(_8aa,this._options);if(_8aa.id){_8aa.id=_8aa.id+"_"+i;}_8a9=new esri.layers.FeatureLayer(_8a7,_8aa);if(_8a9.geometryType){this["_"+_8a9.geometryType]=_8a9;}this._fLayers.push(_8a9);}},this);if(this._fLayers.length===0){delete this._fLayers;}}var _8ab=(this.folders=json.folders),_8ac=[],fldr;if(_8ab){len=_8ab.length;for(i=0;i<len;i++){fldr=(_8ab[i]=new esri.layers.KMLFolder(_8ab[i]));if(fldr.parentFolderId===-1){_8ac.push(fldr);}}}len=_8ac.length;for(i=0;i<len;i++){fldr=_8ac[i];this._setState(fldr,fldr.visible);}this.loaded=true;this.onLoad(this);},_setState:function(_8ad,_8ae){var _8af=_8ad.featureInfos,info,_8b0,i,len=_8af?_8af.length:0,_8b1=_8ae?"show":"hide";for(i=0;i<len;i++){info=_8af[i];_8b0=this.getFeature(info);if(!_8b0){continue;}if(info.type==="Folder"){this._setState(_8b0,_8ae&&_8b0.visible);}else{_8b0[_8b1]();}}},_getParentFolders:function(_8b2,_8b3){var _8b4=_8b2.parentFolderId;if(_8b4!==-1){var _8b5=this.getFeature({type:"Folder",id:_8b4});_8b3.push(_8b5);return this._getParentFolders(_8b5,_8b3);}return _8b3;},_setMap:function(map,_8b6){this._map=map;var div=this._div=dojo.create("div",null,_8b6);dojo.style(div,"position","absolute");if(this._groundLyr){var _8b7=map.spatialReference._isWebMercator();if(_8b7){var _8b8=esri.geometry.geographicToWebMercator;dojo.forEach(this._groundLyr.getImages(),function(_8b9){_8b9.extent=_8b8(_8b9.extent);});}map.addLayer(this._groundLyr,map.layerIds.length);}var _8ba=this._fLayers;if(_8ba&&_8ba.length>0){var _8b7=map.spatialReference._isWebMercator();dojo.forEach(_8ba,function(_8bb){if(_8b7){var _8bc=_8bb.graphics,i,geom,len=_8bc?_8bc.length:0,_8b8=esri.geometry.geographicToWebMercator;for(i=0;i<len;i++){geom=_8bc[i].geometry;if(geom){_8bc[i].setGeometry(_8b8(geom));}}}map.addLayer(_8bb);});}this.onVisibilityChange(this.visible);return div;},_unsetMap:function(map,_8bd){if(this._groundLyr){map.removeLayer(this._groundLyr);}if(this._fLayers){dojo.forEach(this._fLayers,function(_8be){map.removeLayer(_8be);});}var div=this._div;if(div){_8bd.removeChild(div);dojo.destroy(div);}this._map=this._div=null;},onVisibilityChange:function(_8bf){var _8c0=_8bf?"show":"hide";if(_8bf&&this.linkInfo&&!this.loaded){this._parseKml();}else{if(this._groundLyr){this._groundLyr[_8c0]();}if(this._fLayers){dojo.forEach(this._fLayers,function(_8c1){_8c1[_8c0]();});}}}});dojo.declare("esri.layers.KMLGroundOverlay",[esri.layers.MapImage],{constructor:function(json){if(esri._isDefined(this.visibility)){this.visible=!!this.visibility;}}});dojo.declare("esri.layers.KMLFolder",null,{constructor:function(json){dojo.mixin(this,json);if(esri._isDefined(this.visibility)){this.visible=!!this.visibility;}}});}if(!dojo._hasResource["esri.layers.wms"]){dojo._hasResource["esri.layers.wms"]=true;dojo.provide("esri.layers.wms");dojo.declare("esri.layers.WMSLayer",[esri.layers.DynamicMapServiceLayer],{_CRS_TO_EPSG:{84:4326,83:4269,27:4267},_REVERSED_LAT_LONG_RANGES:[[4001,4999],[2044,2045],[2081,2083],[2085,2086],[2093,2093],[2096,2098],[2105,2132],[2169,2170],[2176,2180],[2193,2193],[2200,2200],[2206,2212],[2319,2319],[2320,2462],[2523,2549],[2551,2735],[2738,2758],[2935,2941],[2953,2953],[3006,3030],[3034,3035],[3058,3059],[3068,3068],[3114,3118],[3126,3138],[3300,3301],[3328,3335],[3346,3346],[3350,3352],[3366,3366],[3416,3416],[20004,20032],[20064,20092],[21413,21423],[21473,21483],[21896,21899],[22171,22177],[22181,22187],[22191,22197],[25884,25884],[27205,27232],[27391,27398],[27492,27492],[28402,28432],[28462,28492],[30161,30179],[30800,30800],[31251,31259],[31275,31279],[31281,31290],[31466,31700]],_WEB_MERCATOR:[102100,3857,102113,900913],_WORLD_MERCATOR:[3395,54004],allExtents:[],constructor:function(url,_8c2){this._getCapabilitiesURL=url;this._initLayer=dojo.hitch(this,this._initLayer);this._parseCapabilities=dojo.hitch(this,this._parseCapabilities);this._getCapabilitiesError=dojo.hitch(this,this._getCapabilitiesError);if(_8c2){this.imageFormat=this._getImageFormat(_8c2.format);this.imageTransparency=(_8c2.transparent===false)?false:true;this.visibleLayers=_8c2.visibleLayers?_8c2.visibleLayers:[];if(_8c2.resourceInfo){this._readResourceInfo(_8c2.resourceInfo);}else{this._getCapabilities();}}else{this.imageFormat="image/png";this.imageTransparency=true;this.visibleLayers=[];this._getCapabilities();}this._blankImageURL=dojo.moduleUrl("esri","../../images/pixel.png").uri;},setVisibleLayers:function(_8c3){_8c3=this._checkVisibleLayersList(_8c3);this.visibleLayers=(_8c3)?_8c3:[];this.refresh(true);},setImageFormat:function(_8c4){this.imageFormat=this._getImageFormat(_8c4);this.refresh(true);},setImageTransparency:function(_8c5){this.imageTransparency=_8c5;this.refresh(true);},getImageUrl:function(_8c6,_8c7,_8c8,_8c9){if(!this.visibleLayers||this.visibleLayers.length===0){_8c9(this._blankImageURL);return;}var wkid=_8c6.spatialReference.wkid;if(dojo.some(this._WEB_MERCATOR,function(el){return el==wkid;})){var _8ca=dojo.filter(this.spatialReferences,function(el){return (dojo.some(this._WEB_MERCATOR,function(el2){return el2==el;}));},this);if(_8ca.length==0){_8ca=dojo.filter(this.spatialReferences,function(el){return (dojo.some(this._WORLD_MERCATOR,function(el2){return el2==el;}));},this);}if(_8ca.length>0){wkid=_8ca[0];}else{wkid=this._WEB_MERCATOR[0];}}var list=dojo.filter(this.spatialReferences,function(el){return el!==wkid;});this.spatialReferences=list;this.spatialReferences.unshift(wkid);var xmin=_8c6.xmin;var xmax=_8c6.xmax;var ymin=_8c6.ymin;var ymax=_8c6.ymax;var _8cb={};_8cb.SERVICE="WMS";_8cb.REQUEST="GetMap";_8cb.FORMAT=this.imageFormat;_8cb.TRANSPARENT=this.imageTransparency?"TRUE":"FALSE";_8cb.STYLES="";_8cb.VERSION=this.version;_8cb.LAYERS=this.visibleLayers?this.visibleLayers.toString():null;_8cb.WIDTH=_8c7;_8cb.HEIGHT=_8c8;if(this.maxWidth<_8c7){_8cb.WIDTH=this.maxWidth;}if(this.maxHeight<_8c8){_8cb.HEIGHT=this.maxHeight;}var _8cc=wkid?wkid:NaN;if(!isNaN(_8cc)){if(this.version=="1.3.0"){_8cb.CRS="EPSG:"+_8cc;}else{_8cb.SRS="EPSG:"+_8cc;}}if(this.version=="1.3.0"&&this._useLatLong(_8cc)){_8cb.BBOX=ymin+","+xmin+","+ymax+","+xmax;}else{_8cb.BBOX=xmin+","+ymin+","+xmax+","+ymax;}var _8cd=this.getMapURL;_8cd+=(_8cd.indexOf("?")==-1)?"?":"";for(var key in _8cb){_8cd+=(_8cd.substring(_8cd.length-1,_8cd.length)=="?")?"":"&";_8cd+=key+"="+_8cb[key];}_8c9(_8cd);},_initLayer:function(_8ce,io){this.spatialReference=new esri.SpatialReference(this.extent.spatialReference);this.initialExtent=new esri.geometry.Extent(this.extent);this.fullExtent=new esri.geometry.Extent(this.extent);this.visibleLayers=this._checkVisibleLayersList(this.visibleLayers);this.loaded=true;this.onLoad(this);var _8cf=this._loadCallback;if(_8cf){delete this._loadCallback;_8cf(this);}},_readResourceInfo:function(_8d0){if(!_8d0.extent){console.error("esri.layers.WMSLayer: unable to find the 'extent' property in resourceInfo");return;}if(!_8d0.layerInfos){console.error("esri.layers.WMSLayer: unable to find the 'layerInfos' property in resourceInfo");return;}this.extent=_8d0.extent;this.layerInfos=_8d0.layerInfos;this.description=_8d0.description?_8d0.description:"";this.copyright=_8d0.copyright?_8d0.copyright:"";this.title=_8d0.title?_8d0.title:"";this.getMapURL=_8d0.getMapURL?_8d0.getMapURL:this._getCapabilitiesURL;this.version=_8d0.version?_8d0.version:"1.3.0";this.maxWidth=_8d0.maxWidth?_8d0.maxWidth:5000;this.maxHeight=_8d0.maxHeight?_8d0.maxHeight:5000;this.spatialReferences=_8d0.spatialReferences?_8d0.spatialReferences:[];this._initLayer();},_getCapabilities:function(){var _8d1=this._url.query?this._url.query:{};_8d1.SERVICE="WMS";_8d1.REQUEST="GetCapabilities";var uri=this._url.path+"?";for(var key in _8d1){uri+=(uri.substring(uri.length-1,uri.length)=="?")?"":"&";uri+=key+"="+_8d1[key];}var _8d2=esri.request({url:uri,handleAs:"xml",load:this._parseCapabilities,error:this._getCapabilitiesError},{usePost:false});},_parseCapabilities:function(xml){if(!xml){this.onError("GetCapabilities request for "+this._getCapabilitiesURL+" failed. (Response is null.)");return;}this.version=this._getAttributeValue("WMS_Capabilities","version",xml,null);if(!this.version){this.version=this._getAttributeValue("WMT_MS_Capabilities","version",xml,"1.3.0");}var _8d3=this._getTag("Service",xml);this.title=this._getTagValue("Title",_8d3,"");if(this.title.length==0){this.title=this._getTagValue("Name",_8d3,"");}this.copyright=this._getTagValue("AccessConstraints",_8d3,"");this.description=this._getTagValue("Abstract",_8d3,"");this.maxWidth=parseInt(this._getTagValue("MaxWidth",_8d3,5000));this.maxHeight=parseInt(this._getTagValue("MaxHeight",_8d3,5000));var _8d4=this._getTag("Layer",xml);if(!_8d4){this._getCapabilitiesError({"error":{"message":"Response does not contain any layers."}});return;}var _8d5=this._getLayerInfo(_8d4);if(_8d5){this.layerInfos=_8d5.subLayers;this.extent=_8d5.extent;this.spatialReferences=_8d5.spatialReferences;this.allExtents=_8d5.allExtents;}this.getMapURL=this._getCapabilitiesURL;var _8d6=dojo.query("DCPType",this._getTag("GetMap",xml));if(_8d6&&_8d6.length>0){var _8d7=dojo.query("HTTP",_8d6[0]);if(_8d7&&_8d7.length>0){var _8d8=dojo.query("Get",_8d7[0]);if(_8d8&&_8d8.length>0){var _8d9=this._getAttributeValue("OnlineResource","xlink:href",_8d8[0],null);if(_8d9){if(_8d9.indexOf("&")==(_8d9.length-1)){_8d9=_8d9.substring(0,_8d9.length-1);}this.getMapURL=_8d9;}}}}this.getMapFormats=[];dojo.forEach(dojo.query("Format",this._getTag("GetMap",xml)),function(_8da){if(dojo.isIE){this.getMapFormats.push(_8da.text);}else{this.getMapFormats.push(_8da.textContent);}},this);this._initLayer();},_getCapabilitiesError:function(_8db,io){this.onError("GetCapabilities request for "+this._getCapabilitiesURL+" failed. ("+dojo.toJson(_8db)+")");},_getLayerInfo:function(_8dc){var _8dd;if(_8dc){_8dd=new esri.layers.WMSLayerInfo();_8dd.name="";_8dd.title="";_8dd.description="";dojo.forEach(_8dc.childNodes,function(_8de){if(_8de.nodeName=="Name"){_8dd.name=(dojo.isIE?_8de.text:_8de.textContent)||"";}else{if(_8de.nodeName=="Title"){_8dd.title=(dojo.isIE?_8de.text:_8de.textContent)||"";}else{if(_8de.nodeName=="Abstract"){_8dd.description=(dojo.isIE?_8de.text:_8de.textContent)||"";}}}},this);_8dd.allExtents=[];var _8df=this._getTag("LatLonBoundingBox",_8dc);if(_8df){_8dd.allExtents[0]=this._getExtent(_8df,4326);}var _8e0=this._getTag("EX_GeographicBoundingBox",_8dc);if(_8e0){var _8e1=new esri.geometry.Extent(0,0,0,0,new esri.SpatialReference({wkid:4326}));_8e1.xmin=parseFloat(this._getTagValue("westBoundLongitude",_8e0,0));_8e1.ymin=parseFloat(this._getTagValue("southBoundLatitude",_8e0,0));_8e1.xmax=parseFloat(this._getTagValue("eastBoundLongitude",_8e0,0));_8e1.ymax=parseFloat(this._getTagValue("northBoundLatitude",_8e0,0));_8dd.allExtents[0]=_8e1;}var _8e2=dojo.query("BoundingBox",_8dc);if(_8e2.length===0){_8dd.extent=_8dd.allExtents[0];}else{var _8e3=(this.version=="1.3.0")?"CRS":"SRS";var bb,_8e4,wkid;for(var i=0;i<_8e2.length;i++){bb=_8e2[i];var tag=bb.parentNode.nodeName;if(tag!=="Layer"){continue;}var name="";var _8e5="";dojo.forEach(bb.parentNode.childNodes,function(_8e6){if(_8e6.nodeName=="Name"){name=(dojo.isIE?_8e6.text:_8e6.textContent)||"";}if(_8e6.nodeName=="Title"){_8e5=(dojo.isIE?_8e6.text:_8e6.textContent)||"";}},this);if(name!==_8dd.name||_8e5!==_8dd.title){continue;}_8e4=bb.getAttribute(_8e3);if(_8e4&&_8e4.indexOf("EPSG:")===0){wkid=parseInt(_8e4.substring(5));if(wkid==0){continue;}var _8e1;if(this.version=="1.3.0"){_8e1=this._getExtent(bb,wkid,this._useLatLong(wkid));}else{_8e1=this._getExtent(bb,wkid);}_8dd.allExtents[wkid]=_8e1;if(!_8dd.extent){_8dd.extent=_8e1;}}else{if(_8e4&&_8e4.indexOf("CRS:")===0){wkid=parseInt(_8e4.substring(4));if(wkid==0){continue;}if(this._CRS_TO_EPSG[wkid]){wkid=this._CRS_TO_EPSG[wkid];}_8dd.allExtents[wkid]=this._getExtent(bb,wkid);}else{wkid=parseInt(_8e4);_8dd.allExtents[wkid]=this._getExtent(bb,wkid);}}}if(!_8dd.extent){bb=_8e2[0];_8e4=bb.getAttribute(_8e3)[0];if(_8e4){if(_8e4.indexOf("CRS:")===0){wkid=parseInt(_8e4.substring(4));if(this._CRS_TO_EPSG[wkid]){wkid=this._CRS_TO_EPSG[wkid];}_8dd.extent=_8dd.allExtents[wkid];}else{wkid=parseInt(_8e4);_8dd.extent=_8dd.allExtents[wkid];}}}}if(!_8dd.extent){_8dd.extent=_8dd.allExtents[0];}_8dd.spatialReferences=[];var _8e7=(this.version=="1.3.0")?"CRS":"SRS";dojo.forEach(dojo.query(_8e7,_8dc),function(crs){var _8e8;if(dojo.isIE){_8e8=crs.text;}else{_8e8=crs.textContent;}var arr=_8e8.split(" ");dojo.forEach(arr,function(val){if(val.indexOf(":")>-1){val=parseInt(val.split(":")[1]);}else{val=parseInt(val);}if(val!=84&&val!=0){if(!dojo.some(_8dd.spatialReferences,function(el){return el==val;})){_8dd.spatialReferences.push(val);}}});},this);var _8e9=this._getTag("Style",_8dc);if(_8e9){var _8ea=this._getTag("LegendURL",_8e9);if(_8ea){var _8eb=this._getTag("OnlineResource",_8ea);if(_8eb){_8dd.legendURL=_8eb.getAttribute("xlink:href");}}}var _8ec=dojo.query("Layer",_8dc);var _8ed="||";if(_8ec.length>0){_8dd.subLayers=[];dojo.forEach(_8ec,function(_8ee){var l=this._getLayerInfo(_8ee);if(l.subLayers&&l.subLayers.length>0&&l.name===l.subLayers[0].name){l.name=null;}if(_8ed.indexOf("||"+l.name+"||")==-1){_8dd.subLayers.push(l);if(l.subLayers&&l.subLayers.length>0){dojo.forEach(l.subLayers,function(_8ef){_8ed+=_8ef.name+"||";},this);}}},this);}}return _8dd;},_getImageFormat:function(_8f0){var _8f1=_8f0?_8f0.toLowerCase():"";switch(_8f1){case "jpg":return "image/jpeg";case "bmp":return "image/bmp";case "gif":return "image/gif";case "svg":return "image/svg+xml";default:return "image/png";}},_getExtent:function(_8f2,wkid,_8f3){var _8f4;if(_8f2){_8f4=new esri.geometry.Extent();var minx=parseFloat(_8f2.getAttribute("minx"));var miny=parseFloat(_8f2.getAttribute("miny"));var maxx=parseFloat(_8f2.getAttribute("maxx"));var maxy=parseFloat(_8f2.getAttribute("maxy"));if(_8f3){_8f4.xmin=isNaN(miny)?Number.MIN_VALUE:miny;_8f4.ymin=isNaN(minx)?Number.MIN_VALUE:minx;_8f4.xmax=isNaN(maxy)?Number.MAX_VALUE:maxy;_8f4.ymax=isNaN(maxx)?Number.MAX_VALUE:maxx;}else{_8f4.xmin=isNaN(minx)?Number.MIN_VALUE:minx;_8f4.ymin=isNaN(miny)?Number.MIN_VALUE:miny;_8f4.xmax=isNaN(maxx)?Number.MAX_VALUE:maxx;_8f4.ymax=isNaN(maxy)?Number.MAX_VALUE:maxy;}_8f4.spatialReference=new esri.SpatialReference({wkid:wkid});}return _8f4;},_useLatLong:function(wkid){var _8f5;for(var i=0;i<this._REVERSED_LAT_LONG_RANGES.length;i++){var _8f6=this._REVERSED_LAT_LONG_RANGES[i];if(wkid>=_8f6[0]&&wkid<=_8f6[1]){_8f5=true;break;}}return _8f5;},_getTag:function(_8f7,xml){var tags=dojo.query(_8f7,xml);if(tags&&tags.length>0){return tags[0];}else{return null;}},_getTagValue:function(_8f8,xml,_8f9){var _8fa=dojo.query(_8f8,xml);if(_8fa&&_8fa.length>0){if(dojo.isIE){return _8fa[0].text;}else{return _8fa[0].textContent;}}else{return _8f9;}},_getAttributeValue:function(_8fb,_8fc,xml,_8fd){var _8fe=dojo.query(_8fb,xml);if(_8fe&&_8fe.length>0){return _8fe[0].getAttribute(_8fc);}else{return _8fd;}},_checkVisibleLayersList:function(_8ff){if(_8ff&&_8ff.length>0&&this.layerInfos&&this.layerInfos.length>0){if((typeof _8ff[0])=="number"){var list=[];dojo.forEach(_8ff,function(pos){if(pos<this.layerInfos.length){list.push(this.layerInfos[pos].name);}},this);_8ff=list;}}return _8ff;}});dojo.declare("esri.layers.WMSLayerInfo",null,{name:null,title:null,description:null,extent:null,legendURL:null,subLayers:[],constructor:function(_900){if(_900){this.name=_900.name;this.title=_900.title;this.description=_900.description;this.extent=_900.extent;this.legendURL=_900.legendURL;}}});}if(!dojo._hasResource["esri.virtualearth.VETiledLayer"]){dojo._hasResource["esri.virtualearth.VETiledLayer"]=true;dojo.provide("esri.virtualearth.VETiledLayer");dojo.declare("esri.virtualearth.VETiledLayer",esri.layers.TiledMapServiceLayer,{constructor:function(_901){try{_901=dojo.mixin({bingMapsKey:null,culture:"en-US"},_901||{});this.url="http://serverapi.arcgisonline.com/veadaptor/production/services/imagery/getmetadata";this._url=esri.urlToObject(this.url);this.spatialReference=new esri.SpatialReference({wkid:102100});this.tileInfo=new esri.layers.TileInfo({rows:256,cols:256,dpi:96,origin:{x:-20037508.342787,y:20037508.342787},spatialReference:{wkid:102100},lods:[{level:1,resolution:78271.5169639999,scale:295828763.795777},{level:2,resolution:39135.7584820001,scale:147914381.897889},{level:3,resolution:19567.8792409999,scale:73957190.948944},{level:4,resolution:9783.93962049996,scale:36978595.474472},{level:5,resolution:4891.96981024998,scale:18489297.737236},{level:6,resolution:2445.98490512499,scale:9244648.868618},{level:7,resolution:1222.99245256249,scale:4622324.434309},{level:8,resolution:611.49622628138,scale:2311162.217155},{level:9,resolution:305.748113140558,scale:1155581.108577},{level:10,resolution:152.874056570411,scale:577790.554289},{level:11,resolution:76.4370282850732,scale:288895.277144},{level:12,resolution:38.2185141425366,scale:144447.638572},{level:13,resolution:19.1092570712683,scale:72223.819286},{level:14,resolution:9.55462853563415,scale:36111.909643},{level:15,resolution:4.77731426794937,scale:18055.954822},{level:16,resolution:2.38865713397468,scale:9027.977411},{level:17,resolution:1.19432856685505,scale:4513.988705},{level:18,resolution:0.597164283559817,scale:2256.994353},{level:19,resolution:0.298582141647617,scale:1128.497176}]});this.initialExtent=(this.fullExtent=new esri.geometry.Extent(-20037508.342787,-20037508.34278,20037508.34278,20037508.342787,new esri.SpatialReference({wkid:102100})));dojo.mixin(this,_901);this._initLayer=dojo.hitch(this,this._initLayer);this._errorHandler=dojo.hitch(this,this._errorHandler);this._getTileInfo=dojo.hitch(this,this._getTileInfo);if(this.bingMapsKey){this._getTileInfo();}else{throw new Error(esri.bundle.virtualearth.vetiledlayer.bingMapsKeyNotSpecified);}}catch(e){this.onError(e);throw e;}},_unsetMap:function(map,_902){this.inherited("_unsetMap",arguments);},_getTileInfo:function(){if(this.bingMapsKey){var info=this.resourceInfo;if(!this.loaded&&info){this._initLayer(info);}else{esri.request({url:this._url.path,content:dojo.mixin({},this._url.query,{token:this.bingMapsKey,style:this.mapStyle,culture:this.culture}),callbackParamName:"callback",load:this._initLayer,error:this._errorHandler});}}},_initLayer:function(_903,io){try{this.resourceInfo=dojo.toJson(_903);var _904=_903.imageUri.replace("{","${");this.tileServers=dojo.map(_903.subDomains,function(_905){return dojo.string.substitute(_904,{subdomain:_905});});this._tsLength=this.tileServers.length;this._tsIndex=0;if(!this.loaded){this.loaded=true;this.onLoad(this);var _906=this.loadCallback;if(_906){delete this.loadCallback;_906(this);}}else{this.refresh();}}catch(e){this.onError(e);}},getTileUrl:function(_907,row,col){var _908=this.tileServers[this._tsIndex++%this._tsLength],_909=_908.replace(/\{/g,"${");return dojo.string.substitute(_909,{quadkey:this._getQuadKey(_907,row,col),culture:this.culture,token:this.bingMapsKey});},_getQuadKey:function(_90a,row,col){var _90b="",_90c,mask;for(var i=_90a;i>0;i--){_90c="0";mask=1<<(i-1);if((col&mask)!=0){_90c++;}if((row&mask)!=0){_90c++;_90c++;}_90b=_90b+_90c;}return _90b;},setMapStyle:function(_90d){this.mapStyle=_90d;this._getTileInfo();},setCulture:function(_90e){this.culture=_90e;this._getTileInfo();},setBingMapsKey:function(_90f){this.bingMapsKey=_90f;}});dojo.mixin(esri.virtualearth.VETiledLayer,{MAP_STYLE_AERIAL:"aerial",MAP_STYLE_AERIAL_WITH_LABELS:"aerialWithLabels",MAP_STYLE_ROAD:"road"});}if(!dojo._hasResource["esri.tasks.geometry"]){dojo._hasResource["esri.tasks.geometry"]=true;dojo.provide("esri.tasks.geometry");dojo.declare("esri.tasks.GeometryService",esri.tasks._Task,{constructor:function(url){var _910=dojo.hitch;this._projectHandler=_910(this,this._projectHandler);this._simplifyHandler=_910(this,this._simplifyHandler);this._bufferHandler=_910(this,this._bufferHandler);this._areasAndLengthsHandler=_910(this,this._areasAndLengthsHandler);this._lengthsHandler=_910(this,this._lengthsHandler);this._labelPointsHandler=_910(this,this._labelPointsHandler);this._relationHandler=_910(this,this._relationHandler);this._convexHullHandler=_910(this,this._convexHullHandler);this._unionHandler=_910(this,this._unionHandler);this._autoCompleteHandler=_910(this,this._autoCompleteHandler);this._reshapeHandler=_910(this,this._reshapeHandler);this._cutHandler=_910(this,this._cutHandler);this._intersectHandler=_910(this,this._intersectHandler);this._differenceHandler=_910(this,this._differenceHandler);this._trimExtendHandler=_910(this,this._trimExtendHandler);this._densifyHandler=_910(this,this._densifyHandler);this._generalizeHandler=_910(this,this._densifyHandler);this._offsetHandler=_910(this,this._offsetHandler);this._distanceHandler=_910(this,this._distanceHandler);},_encodeGeometries:function(_911){var gs=[];for(var i=0,il=_911.length;i<il;i++){gs.push(_911[i].toJson());}return {geometryType:esri.geometry.getJsonType(_911[0]),geometries:gs};},_decodeGeometries:function(_912,_913,sr){var _914=esri.geometry.getGeometryType(_913),_915=_912.geometries,fs=[],_916={spatialReference:sr.toJson()},_917=dojo.mixin;dojo.forEach(_915,function(g,i){fs[i]=new _914(_917(g,_916));});return fs;},_toProjectGeometry:function(_918){var sr=_918.spatialReference.toJson();if(_918 instanceof esri.geometry.Extent){return new esri.geometry.Polygon({rings:[[[_918.xmin,_918.ymin],[_918.xmin,_918.ymax],[_918.xmax,_918.ymax],[_918.xmax,_918.ymin],[_918.xmin,_918.ymin]]],spatialReference:sr});}else{return new esri.geometry.Polyline({paths:[[].concat(_918.points)],spatialReference:sr});}},_fromProjectedGeometry:function(_919,_91a,_91b){if(_91a==="esriGeometryEnvelope"){var ring=_919.rings[0];return new esri.geometry.Extent(ring[0][0],ring[0][1],ring[2][0],ring[2][1],_91b);}else{return new esri.geometry.Multipoint({points:_919.paths[0],spatialReference:_91b.toJson()});}},project:function(_91c,_91d,_91e,_91f){var _920=_91c[0];var _921=dojo.mixin({},this._url.query,{f:"json",outSR:_91d.wkid?_91d.wkid:dojo.toJson(_91d.toJson()),inSR:_920.spatialReference.wkid?_920.spatialReference.wkid:dojo.toJson(_920.spatialReference.toJson()),geometries:dojo.toJson(this._encodeGeometries(_91c))}),_922=esri.geometry.getJsonType(_91c[0]),_923=this._projectHandler,_924=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/project",content:_921,callbackParamName:"callback",load:(function(r,i){_923(r,i,_922,_91d,_91e,_91f,dfd);}),error:(function(r){_924(r,_91f,dfd);})});return dfd;},_projectHandler:function(_925,io,_926,_927,_928,_929,dfd){try{var fs=this._decodeGeometries(_925,_926,_927);this._successHandler([fs],"onProjectComplete",_928,dfd);}catch(err){this._errorHandler(err,_929,dfd);}},onProjectComplete:function(){},simplify:function(_92a,_92b,_92c){var _92d=_92a[0].spatialReference;var _92e=dojo.mixin({},this._url.query,{f:"json",sr:_92d.wkid?_92d.wkid:dojo.toJson(_92d.toJson()),geometries:dojo.toJson(this._encodeGeometries(_92a))}),_92f=esri.geometry.getJsonType(_92a[0]),_930=this._simplifyHandler,_931=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/simplify",content:_92e,callbackParamName:"callback",load:(function(r,i){_930(r,i,_92f,_92d,_92b,_92c,dfd);}),error:(function(r){_931(r,_92c,dfd);})});return dfd;},_simplifyHandler:function(_932,io,_933,sr,_934,_935,dfd){try{var fs=this._decodeGeometries(_932,_933,sr);this._successHandler([fs],"onSimplifyComplete",_934,dfd);}catch(err){this._errorHandler(err,_935,dfd);}},onSimplifyComplete:function(){},convexHull:function(_936,_937,_938){var _939=_936[0].spatialReference;var _93a=dojo.mixin({},this._url.query,{f:"json",sr:dojo.toJson(_939.toJson()),geometries:dojo.toJson(this._encodeGeometries(_936))}),_93b=this._convexHullHandler,_93c=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/convexHull",content:_93a,callbackParamName:"callback",load:(function(r,i){_93b(r,i,_939,_937,_938,dfd);}),error:(function(r){_93c(r,_938,dfd);})});return dfd;},_convexHullHandler:function(_93d,io,_93e,_93f,_940,dfd){try{var geom=esri.geometry.fromJson(_93d.geometry).setSpatialReference(_93e);this._successHandler([geom],"onConvexHullComplete",_93f,dfd);}catch(err){this._errorHandler(err,_940,dfd);}},onConvexHullComplete:function(){},union:function(_941,_942,_943){var _944=_941[0].spatialReference;var _945=dojo.mixin({},this._url.query,{f:"json",sr:dojo.toJson(_944.toJson()),geometries:dojo.toJson(this._encodeGeometries(_941))}),_946=this._unionHandler,_947=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/union",content:_945,callbackParamName:"callback",load:(function(r,i){_946(r,i,_944,_942,_943,dfd);}),error:(function(r){_947(r,_943,dfd);})});return dfd;},_unionHandler:function(_948,io,_949,_94a,_94b,dfd){try{var geom=esri.geometry.fromJson(_948.geometry).setSpatialReference(_949);this._successHandler([geom],"onUnionComplete",_94a,dfd);}catch(err){this._errorHandler(err,_94b,dfd);}},onUnionComplete:function(){},autoComplete:function(_94c,_94d,_94e,_94f){var _950=_94c[0].spatialReference;var _951=dojo.mixin({},this._url.query,{f:"json",sr:dojo.toJson(_950.toJson()),polygons:dojo.toJson(this._encodeGeometries(_94c).geometries),polylines:dojo.toJson(this._encodeGeometries(_94d).geometries)}),_952=this._autoCompleteHandler,_953=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/autoComplete",content:_951,callbackParamName:"callback",load:(function(r,i){_952(r,i,_950,_94e,_94f,dfd);}),error:(function(r){_953(r,_94f,dfd);})});return dfd;},_autoCompleteHandler:function(_954,io,_955,_956,_957,dfd){try{var Pgon=esri.geometry.Polygon,_958=_954.geometries,_959=[];for(var i=0,il=_958.length;i<il;i++){_959[i]=new Pgon({spatialReference:_955,rings:_958[i].rings});}this._successHandler([_959],"onAutoCompleteComplete",_956,dfd);}catch(err){this._errorHandler(err,_957,dfd);}},onAutoCompleteComplete:function(){},reshape:function(_95a,_95b,_95c,_95d){var _95e=_95a.spatialReference;var _95f=dojo.mixin({},this._url.query,{f:"json",sr:dojo.toJson(_95e.toJson()),target:dojo.toJson({geometryType:esri.geometry.getJsonType(_95a),geometry:_95a.toJson()}),reshaper:dojo.toJson(_95b.toJson())}),_960=this._reshapeHandler,_961=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/reshape",content:_95f,callbackParamName:"callback",load:(function(r,i){_960(r,i,_95e,_95c,_95d,dfd);}),error:(function(r){_961(r,_95d,dfd);})});return dfd;},_reshapeHandler:function(_962,io,_963,_964,_965,dfd){try{var geom=esri.geometry.fromJson(_962.geometry).setSpatialReference(_963);this._successHandler([geom],"onReshapeComplete",_964,dfd);}catch(err){this._errorHandler(err,_965,dfd);}},onReshapeComplete:function(){},cut:function(_966,_967,_968,_969){var _96a=_966[0].spatialReference;var _96b=dojo.map(_966,function(_96c){return _96c.toJson();});var _96d=dojo.mixin({},this._url.query,{f:"json",sr:dojo.toJson(_96a.toJson()),target:dojo.toJson({geometryType:esri.geometry.getJsonType(_966[0]),geometries:_96b}),cutter:dojo.toJson(_967.toJson())}),_96e=this._cutHandler,_96f=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/cut",content:_96d,callbackParamName:"callback",load:(function(r,i){_96e(r,i,_96a,_968,_969,dfd);}),error:(function(r){_96f(r,_969,dfd);})});return dfd;},_cutHandler:function(_970,io,_971,_972,_973,dfd){try{var _974=_970.geometries;var _975={};_975.cutIndexes=_970.cutIndexes;_975.geometries=[];dojo.forEach(_974,function(geom){_975.geometries.push(esri.geometry.fromJson(geom).setSpatialReference(_971));});this._successHandler([_975],"onCutComplete",_972,dfd);}catch(err){this._errorHandler(err,_973,dfd);}},onCutComplete:function(){},intersect:function(_976,_977,_978,_979){var _97a=_976[0].spatialReference;var _97b=dojo.mixin({},this._url.query,{f:"json",sr:dojo.toJson(_97a.toJson()),geometries:dojo.toJson(this._encodeGeometries(_976)),geometry:dojo.toJson({geometryType:esri.geometry.getJsonType(_977),geometry:_977.toJson()})}),_97c=this._intersectHandler,_97d=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/intersect",content:_97b,callbackParamName:"callback",load:(function(r,i){_97c(r,i,_97a,_978,_979,dfd);}),error:(function(r){_97d(r,_979,dfd);})});return dfd;},_intersectHandler:function(_97e,io,_97f,_980,_981,dfd){try{var _982=_97e.geometries,_983=[];dojo.forEach(_982,function(geom){_983.push(esri.geometry.fromJson(geom).setSpatialReference(_97f));});this._successHandler([_983],"onIntersectComplete",_980,dfd);}catch(err){this._errorHandler(err,_981,dfd);}},onIntersectComplete:function(){},difference:function(_984,_985,_986,_987){var _988=_984[0].spatialReference;var _989=dojo.mixin({},this._url.query,{f:"json",sr:dojo.toJson(_988.toJson()),geometries:dojo.toJson(this._encodeGeometries(_984)),geometry:dojo.toJson({geometryType:esri.geometry.getJsonType(_985),geometry:_985.toJson()})}),_98a=this._differenceHandler,_98b=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/difference",content:_989,callbackParamName:"callback",load:(function(r,i){_98a(r,i,_988,_986,_987,dfd);}),error:(function(r){_98b(r,_987,dfd);})});return dfd;},_differenceHandler:function(_98c,io,_98d,_98e,_98f,dfd){try{var _990=_98c.geometries,_991=[];dojo.forEach(_990,function(geom){_991.push(esri.geometry.fromJson(geom).setSpatialReference(_98d));});this._successHandler([_991],"onDifferenceComplete",_98e,dfd);}catch(err){this._errorHandler(err,_98f,dfd);}},onDifferenceComplete:function(){},buffer:function(_992,_993,_994){var _995=dojo.mixin({},this._url.query,{f:"json"},_992.toJson()),sr=_992.outSpatialReference||_992.geometries[0].spatialReference,_996=this._bufferHandler,_997=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/buffer",content:_995,callbackParamName:"callback",load:(function(r,i){_996(r,i,sr,_993,_994,dfd);}),error:(function(r){_997(r,_994,dfd);})});return dfd;},_bufferHandler:function(_998,io,sr,_999,_99a,dfd){try{var Pgon=esri.geometry.Polygon,_99b=_998.geometries,_99c=[];for(var i=0,il=_99b.length;i<il;i++){_99c[i]=new Pgon({spatialReference:sr,rings:_99b[i].rings});}this._successHandler([_99c],"onBufferComplete",_999,dfd);}catch(err){this._errorHandler(err,_99a,dfd);}},onBufferComplete:function(){},areasAndLengths:function(_99d,_99e,_99f){var _9a0=dojo.mixin({},this._url.query,{f:"json"},_99d.toJson()),_9a1=this._areasAndLengthsHandler,_9a2=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/areasAndLengths",content:_9a0,callbackParamName:"callback",load:(function(r,i){_9a1(r,i,_99e,_99f,dfd);}),error:(function(r){_9a2(r,_99f,dfd);})});return dfd;},_areasAndLengthsHandler:function(_9a3,io,_9a4,_9a5,dfd){try{this._successHandler([_9a3],"onAreasAndLengthsComplete",_9a4,dfd);}catch(err){this._errorHandler(err,_9a5,dfd);}},onAreasAndLengthsComplete:function(){},lengths:function(_9a6,_9a7,_9a8){var _9a9=dojo.mixin({},this._url.query,{f:"json"},_9a6.toJson()),_9aa=this._lengthsHandler,_9ab=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/lengths",content:_9a9,callbackParamName:"callback",load:(function(r,i){_9aa(r,i,_9a7,_9a8,dfd);}),error:(function(r){_9ab(r,_9a8,dfd);})});return dfd;},_lengthsHandler:function(_9ac,io,_9ad,_9ae,dfd){try{this._successHandler([_9ac],"onLengthsComplete",_9ad,dfd);}catch(err){this._errorHandler(err,_9ae,dfd);}},onLengthsComplete:function(){},labelPoints:function(_9af,_9b0,_9b1){var _9b2=dojo.map(_9af,function(geom){return geom.toJson();});var sr=_9af[0].spatialReference,_9b3=dojo.mixin({},this._url.query,{f:"json",sr:sr.wkid?sr.wkid:dojo.toJson(sr.toJson()),polygons:dojo.toJson(_9b2)}),_9b4=this._labelPointsHandler,_9b5=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/labelPoints",content:_9b3,callbackParamName:"callback",load:(function(r,i){_9b4(r,i,_9af,sr,_9b0,_9b1,dfd);}),error:(function(r){_9b5(r,_9b1,dfd);})});return dfd;},_labelPointsHandler:function(_9b6,io,_9b7,sr,_9b8,_9b9,dfd){try{var _9ba=_9b6.labelPoints,_9bb=[];dojo.forEach(_9ba,function(geom){_9bb.push(esri.geometry.fromJson(geom).setSpatialReference(sr));});this._successHandler([_9bb],"onLabelPointsComplete",_9b8,dfd);}catch(err){this._errorHandler(err,_9b9,dfd);}},onLabelPointsComplete:function(){},relation:function(_9bc,_9bd,_9be){var _9bf=dojo.mixin({},this._url.query,{f:"json"},_9bc.toJson()),_9c0=this._relationHandler,_9c1=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/relation",content:_9bf,callbackParamName:"callback",load:(function(r,i){_9c0(r,i,_9bd,_9be,dfd);}),error:(function(r){_9c1(r,_9be,dfd);})});return dfd;},_relationHandler:function(_9c2,io,_9c3,_9c4,dfd){try{var _9c5=_9c2.relations;this._successHandler([_9c5],"onRelationComplete",_9c3,dfd);}catch(err){this._errorHandler(err,_9c4,dfd);}},onRelationComplete:function(){},trimExtend:function(_9c6,_9c7,_9c8){var _9c9=dojo.mixin({},this._url.query,{f:"json"},_9c6.toJson()),_9ca=_9c6.sr,_9cb=this._trimExtendHandler,_9cc=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/trimExtend",content:_9c9,callbackParamName:"callback",load:(function(r,i){_9cb(r,i,_9ca,_9c7,_9c8,dfd);}),error:(function(r){_9cc(r,_9c8,dfd);})});return dfd;},_trimExtendHandler:function(_9cd,io,_9ce,_9cf,_9d0,dfd){try{var _9d1=esri.geometry.Polyline,_9d2=_9cd.geometries,_9d3=[];for(var i=0,il=_9d2.length;i<il;i++){_9d3[i]=new _9d1({spatialReference:_9ce,paths:_9d2[i].paths});}this._successHandler([_9d3],"onTrimExtendComplete",_9cf,dfd);}catch(err){this._errorHandler(err,_9d0,dfd);}},onTrimExtendComplete:function(){},densify:function(_9d4,_9d5,_9d6){var _9d7=dojo.mixin({},this._url.query,{f:"json"},_9d4.toJson()),_9d8=_9d4.geometries[0].spatialReference,_9d9=this._densifyHandler,_9da=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/densify",content:_9d7,callbackParamName:"callback",load:(function(r,i){_9d9(r,i,_9d8,_9d5,_9d6,dfd);}),error:(function(r){_9da(r,_9d6,dfd);})});return dfd;},_densifyHandler:function(_9db,io,_9dc,_9dd,_9de,dfd){try{var _9df=_9db.geometries,_9e0=[];dojo.forEach(_9df,function(geom){_9e0.push(esri.geometry.fromJson(geom).setSpatialReference(_9dc));});this._successHandler([_9e0],"onDensifyComplete",_9dd,dfd);}catch(err){this._errorHandler(err,_9de,dfd);}},onDensifyComplete:function(){},generalize:function(_9e1,_9e2,_9e3){var _9e4=dojo.mixin({},this._url.query,{f:"json"},_9e1.toJson()),_9e5=_9e1.geometries[0].spatialReference,_9e6=this._generalizeHandler,_9e7=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/generalize",content:_9e4,callbackParamName:"callback",load:(function(r,i){_9e6(r,i,_9e5,_9e2,_9e3,dfd);}),error:(function(r){_9e7(r,_9e3,dfd);})});return dfd;},_generalizeHandler:function(_9e8,io,_9e9,_9ea,_9eb,dfd){try{var _9ec=_9e8.geometries,_9ed=[];dojo.forEach(_9ec,function(geom){_9ed.push(esri.geometry.fromJson(geom).setSpatialReference(_9e9));});this._successHandler([_9ed],"onGeneralizeComplete",_9ea,dfd);}catch(err){this._errorHandler(err,_9eb,dfd);}},onGeneralizeComplete:function(){},offset:function(_9ee,_9ef,_9f0){var _9f1=dojo.mixin({},this._url.query,{f:"json"},_9ee.toJson()),_9f2=_9ee.geometries[0].spatialReference,_9f3=this._offsetHandler,_9f4=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/offset",content:_9f1,callbackParamName:"callback",load:(function(r,i){_9f3(r,i,_9f2,_9ef,_9f0,dfd);}),error:(function(r){_9f4(r,_9f0,dfd);})});return dfd;},_offsetHandler:function(_9f5,io,_9f6,_9f7,_9f8,dfd){try{var _9f9=_9f5.geometries,_9fa=[];dojo.forEach(_9f9,function(geom){_9fa.push(esri.geometry.fromJson(geom).setSpatialReference(_9f6));});this._successHandler([_9fa],"onOffsetComplete",_9f7,dfd);}catch(err){this._errorHandler(err,_9f8,dfd);}},onOffsetComplete:function(){},distance:function(_9fb,_9fc,_9fd){var _9fe=dojo.mixin({},this._url.query,{f:"json"},_9fb.toJson()),_9ff=_9fb.geometry1.spatialReference,_a00=this._distanceHandler,_a01=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/distance",content:_9fe,callbackParamName:"callback",load:(function(r,i){_a00(r,i,_9ff,_9fc,_9fd,dfd);}),error:(function(r){_a01(r,_9fd,dfd);})});return dfd;},_distanceHandler:function(_a02,io,_a03,_a04,_a05,dfd){try{_a02=_a02&&_a02.distance;this._successHandler([_a02],"onDistanceComplete",_a04,dfd);}catch(err){this._errorHandler(err,_a05,dfd);}},onDistanceComplete:function(){}});dojo.declare("esri.tasks.TrimExtendParameters",null,{polylines:null,trimExtendTo:null,extendHow:null,toJson:function(){var _a06=dojo.map(this.polylines,function(geom){return geom.toJson();});var json={};json.polylines=dojo.toJson(_a06);json.trimExtendTo=dojo.toJson(this.trimExtendTo.toJson());json.sr=dojo.toJson(this.polylines[0].spatialReference.toJson());json.extendHow=this.extendHow||0;return json;}});dojo.mixin(esri.tasks.TrimExtendParameters,{DEFAULT_CURVE_EXTENSION:0,RELOCATE_ENDS:1,KEEP_END_ATTRIBUTES:2,NO_END_ATTRIBUTES:4,NO_EXTEND_AT_FROM:8,NO_EXTEND_AT_TO:16});dojo.declare("esri.tasks.BufferParameters",null,{geometries:null,outSpatialReference:null,bufferSpatialReference:null,distances:null,unit:null,unionResults:false,toJson:function(){var json={unit:this.unit,unionResults:(""+this.unionResults)},dt=this.distances,_a07=this.outSpatialReference,_a08=this.bufferSpatialReference;var _a09=dojo.map(this.geometries,function(geom){geom=(geom.type==="extent")?this._extentToPolygon(geom):geom;return geom.toJson();},this);var _a0a=this.geometries;if(_a0a&&_a0a.length>0){var _a0b=_a0a[0].type==="extent"?"esriGeometryPolygon":esri.geometry.getJsonType(_a0a[0]);json.geometries=dojo.toJson({geometryType:_a0b,geometries:_a09});json.inSR=_a0a[0].spatialReference.wkid?_a0a[0].spatialReference.wkid:dojo.toJson(_a0a[0].spatialReference.toJson());}if(dt){json.distances=dt.join(",");}if(_a07){json.outSR=_a07.wkid?_a07.wkid:dojo.toJson(_a07.toJson());}if(_a08){json.bufferSR=_a08.wkid?_a08.wkid:dojo.toJson(_a08.toJson());}return json;},_extentToPolygon:function(_a0c){var xmin=_a0c.xmin,ymin=_a0c.ymin,xmax=_a0c.xmax,ymax=_a0c.ymax;return new esri.geometry.Polygon({"rings":[[[xmin,ymin],[xmin,ymax],[xmax,ymax],[xmax,ymin],[xmin,ymin]]],"spatialReference":_a0c.spatialReference.toJson()});}});dojo.mixin(esri.tasks.GeometryService,{UNIT_METER:9001,UNIT_GERMAN_METER:9031,UNIT_FOOT:9002,UNIT_SURVEY_FOOT:9003,UNIT_CLARKE_FOOT:9005,UNIT_FATHOM:9014,UNIT_NAUTICAL_MILE:9030,UNIT_SURVEY_CHAIN:9033,UNIT_SURVEY_LINK:9034,UNIT_SURVEY_MILE:9035,UNIT_KILOMETER:9036,UNIT_CLARKE_YARD:9037,UNIT_CLARKE_CHAIN:9038,UNIT_CLARKE_LINK:9039,UNIT_SEARS_YARD:9040,UNIT_SEARS_FOOT:9041,UNIT_SEARS_CHAIN:9042,UNIT_SEARS_LINK:9043,UNIT_BENOIT_1895A_YARD:9050,UNIT_BENOIT_1895A_FOOT:9051,UNIT_BENOIT_1895A_CHAIN:9052,UNIT_BENOIT_1895A_LINK:9053,UNIT_BENOIT_1895B_YARD:9060,UNIT_BENOIT_1895B_FOOT:9061,UNIT_BENOIT_1895B_CHAIN:9062,UNIT_BENOIT_1895B_LINK:9063,UNIT_INDIAN_FOOT:9080,UNIT_INDIAN_1937_FOOT:9081,UNIT_INDIAN_1962_FOOT:9082,UNIT_INDIAN_1975_FOOT:9083,UNIT_INDIAN_YARD:9084,UNIT_INDIAN_1937_YARD:9085,UNIT_INDIAN_1962_YARD:9086,UNIT_INDIAN_1975_YARD:9087,UNIT_FOOT_1865:9070,UNIT_RADIAN:9101,UNIT_DEGREE:9102,UNIT_ARCMINUTE:9103,UNIT_ARCSECOND:9104,UNIT_GRAD:9105,UNIT_GON:9106,UNIT_MICRORADIAN:9109,UNIT_ARCMINUTE_CENTESIMAL:9112,UNIT_ARCSECOND_CENTESIMAL:9113,UNIT_MIL6400:9114,UNIT_BRITISH_1936_FOOT:9095,UNIT_GOLDCOAST_FOOT:9094,UNIT_INTERNATIONAL_CHAIN:109003,UNIT_INTERNATIONAL_LINK:109004,UNIT_INTERNATIONAL_YARD:109001,UNIT_STATUTE_MILE:9093,UNIT_SURVEY_YARD:109002,UNIT_50KILOMETER_LENGTH:109030,UNIT_150KILOMETER_LENGTH:109031,UNIT_DECIMETER:109005,UNIT_CENTIMETER:109006,UNIT_MILLIMETER:109007,UNIT_INTERNATIONAL_INCH:109008,UNIT_US_SURVEY_INCH:109009,UNIT_INTERNATIONAL_ROD:109010,UNIT_US_SURVEY_ROD:109011,UNIT_US_NAUTICAL_MILE:109012,UNIT_UK_NAUTICAL_MILE:109013,UNIT_SQUARE_INCHES:"esriSquareInches",UNIT_SQUARE_FEET:"esriSquareFeet",UNIT_SQUARE_YARDS:"esriSquareYards",UNIT_ACRES:"esriAcres",UNIT_SQUARE_MILES:"esriSquareMiles",UNIT_SQUARE_MILLIMETERS:"esriSquareMillimeters",UNIT_SQUARE_CENTIMETERS:"esriSquareCentimeters",UNIT_SQUARE_DECIMETERS:"esriSquareDecimeters",UNIT_SQUARE_METERS:"esriSquareMeters",UNIT_ARES:"esriAres",UNIT_HECTARES:"esriHectares",UNIT_SQUARE_KILOMETERS:"esriSquareKilometers"});dojo.declare("esri.tasks.AreasAndLengthsParameters",null,{polygons:null,lengthUnit:null,areaUnit:null,toJson:function(){var _a0d=dojo.map(this.polygons,function(geom){return geom.toJson();});var json={};json.polygons=dojo.toJson(_a0d);var _a0e=this.polygons[0].spatialReference;json.sr=_a0e.wkid?_a0e.wkid:dojo.toJson(_a0e.toJson());if(this.lengthUnit){json.lengthUnit=this.lengthUnit;}if(this.areaUnit){if(dojo.isString(this.areaUnit)){json.areaUnit=dojo.toJson({"areaUnit":this.areaUnit});}else{json.areaUnit=this.areaUnit;}}return json;}});dojo.declare("esri.tasks.LengthsParameters",null,{polylines:null,lengthUnit:null,geodesic:null,toJson:function(){var _a0f=dojo.map(this.polylines,function(geom){return geom.toJson();});var json={};json.polylines=dojo.toJson(_a0f);var _a10=this.polylines[0].spatialReference;json.sr=_a10.wkid?_a10.wkid:dojo.toJson(_a10.toJson());if(this.lengthUnit){json.lengthUnit=this.lengthUnit;}if(this.geodesic){json.geodesic=this.geodesic;}return json;}});dojo.declare("esri.tasks.RelationParameters",null,{geometries1:null,geometries2:null,relation:null,relationParam:null,toJson:function(){var _a11=dojo.map(this.geometries1,function(geom){return geom.toJson();});var _a12=dojo.map(this.geometries2,function(geom){return geom.toJson();});var json={};var _a13=this.geometries1;if(_a13&&_a13.length>0){json.geometries1=dojo.toJson({geometryType:esri.geometry.getJsonType(_a13[0]),geometries:_a11});var _a14=this.geometries1[0].spatialReference;json.sr=_a14.wkid?_a14.wkid:dojo.toJson(_a14.toJson());}var _a15=this.geometries2;if(_a15&&_a15.length>0){json.geometries2=dojo.toJson({geometryType:esri.geometry.getJsonType(_a15[0]),geometries:_a12});}if(this.relation){json.relation=this.relation;}if(this.relationParam){json.relationParam=dojo.toJson(this.relationParam);}return json;}});dojo.mixin(esri.tasks.RelationParameters,{SPATIAL_REL_CROSS:"esriGeometryRelationCross",SPATIAL_REL_DISJOINT:"esriGeometryRelationDisjoint",SPATIAL_REL_IN:"esriGeometryRelationIn",SPATIAL_REL_INTERIORINTERSECTION:"esriGeometryRelationInteriorIntersection",SPATIAL_REL_INTERSECTION:"esriGeometryRelationIntersection",SPATIAL_REL_COINCIDENCE:"esriGeometryRelationLineCoincidence",SPATIAL_REL_LINETOUCH:"esriGeometryRelationLineTouch",SPATIAL_REL_OVERLAP:"esriGeometryRelationOverlap",SPATIAL_REL_POINTTOUCH:"esriGeometryRelationPointTouch",SPATIAL_REL_TOUCH:"esriGeometryRelationTouch",SPATIAL_REL_WITHIN:"esriGeometryRelationWithin",SPATIAL_REL_RELATION:"esriGeometryRelationRelation"});dojo.declare("esri.tasks.DensifyParameters",null,{geometries:null,geodesic:null,lengthUnit:null,maxSegmentLength:null,toJson:function(){var _a16=dojo.map(this.geometries,function(geom){return geom.toJson();});var json={};if(this.geometries&&this.geometries.length>0){json.geometries=dojo.toJson({geometryType:esri.geometry.getJsonType(this.geometries[0]),geometries:_a16});json.sr=dojo.toJson(this.geometries[0].spatialReference.toJson());}if(this.geodesic){json.geodesic=this.geodesic;}if(this.lengthUnit){json.lengthUnit=this.lengthUnit;}if(this.maxSegmentLength){json.maxSegmentLength=this.maxSegmentLength;}return json;}});dojo.declare("esri.tasks.GeneralizeParameters",null,{geometries:null,deviationUnit:null,maxDeviation:null,toJson:function(){var _a17=dojo.map(this.geometries,function(geom){return geom.toJson();});var json={};if(this.geometries&&this.geometries.length>0){json.geometries=dojo.toJson({geometryType:esri.geometry.getJsonType(this.geometries[0]),geometries:_a17});json.sr=dojo.toJson(this.geometries[0].spatialReference.toJson());}if(this.deviationUnit){json.deviationUnit=this.deviationUnit;}if(this.maxDeviation){json.maxDeviation=this.maxDeviation;}return json;}});dojo.declare("esri.tasks.OffsetParameters",null,{geometries:null,bevelRatio:null,offsetDistance:null,offsetHow:null,offsetUnit:null,toJson:function(){var _a18=dojo.map(this.geometries,function(geom){return geom.toJson();});var json={};if(this.geometries&&this.geometries.length>0){json.geometries=dojo.toJson({geometryType:esri.geometry.getJsonType(this.geometries[0]),geometries:_a18});json.sr=dojo.toJson(this.geometries[0].spatialReference.toJson());}if(this.bevelRatio){json.bevelRatio=this.bevelRatio;}if(this.offsetDistance){json.offsetDistance=this.offsetDistance;}if(this.offsetHow){json.offsetHow=this.offsetHow;}if(this.offsetUnit){json.offsetUnit=this.offsetUnit;}return json;}});dojo.mixin(esri.tasks.OffsetParameters,{OFFSET_BEVELLED:"esriGeometryOffsetBevelled",OFFSET_MITERED:"esriGeometryOffsetMitered",OFFSET_ROUNDED:"esriGeometryOffsetRounded"});dojo.declare("esri.tasks.DistanceParameters",null,{geometry1:null,geometry2:null,distanceUnit:null,geodesic:null,toJson:function(){var json={};var _a19=this.geometry1;if(_a19){json.geometry1=dojo.toJson({geometryType:esri.geometry.getJsonType(_a19),geometry:_a19});}var _a1a=this.geometry2;if(_a1a){json.geometry2=dojo.toJson({geometryType:esri.geometry.getJsonType(_a1a),geometry:_a1a});}json.sr=dojo.toJson(this.geometry1.spatialReference.toJson());if(this.distanceUnit){json.distanceUnit=this.distanceUnit;}if(this.geodesic){json.geodesic=this.geodesic;}return json;}});}if(!dojo._hasResource["dojo.DeferredList"]){dojo._hasResource["dojo.DeferredList"]=true;dojo.provide("dojo.DeferredList");dojo.DeferredList=function(list,_a1b,_a1c,_a1d,_a1e){var _a1f=[];dojo.Deferred.call(this);var self=this;if(list.length===0&&!_a1b){this.resolve([0,[]]);}var _a20=0;dojo.forEach(list,function(item,i){item.then(function(_a21){if(_a1b){self.resolve([i,_a21]);}else{_a22(true,_a21);}},function(_a23){if(_a1c){self.reject(_a23);}else{_a22(false,_a23);}if(_a1d){return null;}throw _a23;});function _a22(_a24,_a25){_a1f[i]=[_a24,_a25];_a20++;if(_a20===list.length){self.resolve(_a1f);}};});};dojo.DeferredList.prototype=new dojo.Deferred();dojo.DeferredList.prototype.gatherResults=function(_a26){var d=new dojo.DeferredList(_a26,false,true,false);d.addCallback(function(_a27){var ret=[];dojo.forEach(_a27,function(_a28){ret.push(_a28[1]);});return ret;});return d;};}if(!dojo._hasResource["esri.arcgis.utils"]){dojo._hasResource["esri.arcgis.utils"]=true;dojo.provide("esri.arcgis.utils");(function(){var EAU=esri.arcgis.utils;EAU.arcgisUrl="http://www.arcgis.com/sharing/content/items";EAU.getItem=function(_a29){if(EAU._arcgisUrl&&EAU._arcgisUrl.length>0){EAU.arcgisUrl=EAU._arcgisUrl;}var url=EAU.arcgisUrl+"/"+_a29;var _a2a={},_a2b=new dojo.Deferred();esri.request({url:url,content:{f:"json"},callbackParamName:"callback",load:function(_a2c){_a2a.item=_a2c;esri.request({url:url+"/data",content:{f:"json"},callbackParamName:"callback",load:function(_a2d){_a2a.itemData=_a2d;_a2b.callback(_a2a);},error:function(_a2e){_a2b.errback(_a2e);}});},error:function(_a2f){_a2b.errback(_a2f);}});return _a2b;};EAU.createMap=function(arg1,_a30,_a31){var _a32=new dojo.Deferred();_a31=_a31||{};var _a33=_a31.infoTemplateClass;_a31._clazz=(_a33&&dojo.getObject(_a33))||esri.dijit.PopupTemplate;if(dojo.isString(arg1)){EAU.getItem(arg1).addCallback(function(_a34){EAU._getPopups(_a34,_a31).addCallback(function(_a35){EAU._getLayers(_a35.itemData,_a31).addCallback(dojo.hitch(null,EAU._preCreateMap,_a35,_a30,_a31,_a32));});}).addErrback(dojo.hitch(_a32,_a32.errback));}else{EAU._getPopups(arg1,_a31).addCallback(function(_a36){EAU._getLayers(_a36.itemData,_a31).addCallback(dojo.hitch(null,EAU._preCreateMap,_a36,_a30,_a31,_a32));});}return _a32;};EAU._arcgisUrl=null;EAU._getPopups=function(_a37,_a38){var _a39=new dojo.Deferred();if(_a38.ignorePopups){_a39.callback(_a37);return _a39;}var _a3a=_a37.itemData;var _a3b=[];var _a3c=[];dojo.forEach(_a3a.operationalLayers,function(_a3d){if(_a3d.itemId&&!_a3d.type&&!_a3d.layers&&_a3d.url.indexOf("/MapServer")>-1&&_a3d.url.indexOf("/MapServer/")===-1){_a3c.push(_a3d);_a3b.push(EAU._getItemData(_a3d));}});if(_a3b.length>0){var _a3e=new dojo.DeferredList(_a3b);_a3e.addCallback(function(_a3f){dojo.forEach(_a3c,function(_a40,i){var _a41=_a3b[i].ioArgs.json;if(_a41&&_a41.layers){_a40.layers=_a41.layers;}});_a39.callback(_a37);});}else{_a39.callback(_a37);}return _a39;};EAU._getItemData=function(_a42){var url=EAU.arcgisUrl+"/"+_a42.itemId+"/data";var _a43=esri.request({url:url,content:{f:"json"},callbackParamName:"callback"});return _a43;};EAU._getLayers=function(_a44,_a45){var _a46=[];var _a47=[];var _a48=[];var _a49=new dojo.Deferred();dojo.forEach(_a44.operationalLayers,function(_a4a,_a4b){if(_a4a.featureCollection){dojo.forEach(_a4a.featureCollection.layers,function(_a4c,idx){_a4c.opacity=_a4a.opacity;_a4c.visibility=_a4a.visibility;_a4c.id=(_a4a.id?_a4a.id:("operational"+_a4b))+"_"+idx;_a48.push(_a4c);});}else{_a48.push(_a4a);}});dojo.forEach(_a44.baseMap.baseMapLayers,function(_a4d,_a4e){_a4d.baseMapLayer=true;_a4d.id=_a4d.id?_a4d.id:"base"+_a4e;_a46.push(_a4d);});dojo.forEach(_a48,function(_a4f,_a50){_a4f.id=_a4f.id?_a4f.id:"operational"+_a50;_a46.push(_a4f);});dojo.forEach(_a46,function(_a51,i){if(_a51.url&&!_a51.type){_a51.deferredsPos=_a47.length;_a51.errors=[];_a47.push(EAU._getServiceInfo(_a51.url,_a51.errors));}else{_a51.layerObject=EAU._initLayer(_a51,_a46,_a45);}});var _a52=new dojo.DeferredList(_a47);_a52.addCallback(function(_a53){dojo.forEach(_a46,function(_a54,_a55){if(_a54.url&&!_a54.type){_a54.resourceInfo=_a47[_a54.deferredsPos].ioArgs.json;if(_a55===0||_a46[0].layerObject){_a54.layerObject=EAU._initLayer(_a54,_a46,_a45);}}});var _a56=dojo.filter(_a46,function(lyr){return !lyr.isReference;});var _a57=dojo.filter(_a46,function(lyr){return !!lyr.isReference;});_a46=_a56.concat(_a57);_a49.callback(_a46);});return _a49;};EAU._preCreateMap=function(_a58,_a59,_a5a,_a5b,_a5c){try{var _a5d=_a5a.mapOptions||{};var card=_a58.item;var _a5e=[];dojo.forEach(_a5c,function(_a5f){if(dojo.isArray(_a5f.layerObject)){dojo.forEach(_a5f.layerObject,function(l){_a5e.push(l);});}else{_a5e.push(_a5f.layerObject);}});if(!_a5e[0]){_a5b.errback(new Error(esri.bundle.arcgis.utils.baseLayerError));return;}_a5e=dojo.filter(_a5e,esri._isDefined);if(card){if(card.extent){if(!_a5d.extent){var _a60=new esri.geometry.Extent(card.extent[0][0],card.extent[0][1],card.extent[1][0],card.extent[1][1],new esri.SpatialReference({wkid:4326}));var _a61=_a5e[0].spatialReference;if(_a61.wkid===4326){_a5d.extent=_a60;EAU._createMap(_a5e,_a5c,_a58,_a59,_a5a,_a5b);}else{if(_a61.wkid===102100||_a61.wkid===102113||_a61.wkid===3857){_a5d.extent=esri.geometry.geographicToWebMercator(_a60);EAU._createMap(_a5e,_a5c,_a58,_a59,_a5a,_a5b);}else{if(_a5a.geometryServiceURL||esri.config.defaults.geometryService){var gs;if(_a5a.geometryServiceURL){gs=new esri.tasks.GeometryService(_a5a.geometryServiceURL);}else{gs=esri.config.defaults.geometryService;}gs.project([_a60],_a61,function(_a62){var _a63=_a62[0];_a5d.extent=_a5d.extent||_a63;EAU._createMap(_a5e,_a5c,_a58,_a59,_a5a,_a5b);});}else{_a5b.errback(new Error(esri.bundle.arcgis.utils.geometryServiceError));}}}}else{EAU._createMap(_a5e,_a5c,_a58,_a59,_a5a,_a5b);}}else{EAU._createMap(_a5e,_a5c,_a58,_a59,_a5a,_a5b);}}else{EAU._createMap(_a5e,_a5c,_a58,_a59,_a5a,_a5b);}}catch(err){_a5b.errback(err);}};EAU._createMap=function(_a64,_a65,_a66,_a67,_a68,_a69){var _a6a=_a68.mapOptions,_a6b,_a6c;if(!_a6a.infoWindow){_a6b=new esri.dijit.Popup(null,dojo.create("div"));_a6a.infoWindow=_a6b;}if(!esri._isDefined(_a6a.showInfoWindowOnClick)){_a6a.showInfoWindowOnClick=false;}var map=new esri.Map(_a67,_a6a);dojo.connect(map,"onZoomEnd",EAU._onZoomEnd);if(_a6b){dojo.place(_a6b.domNode,map.root);}var _a6d=Math.floor(_a6a.extent.getWidth()/map.width);dojo.forEach(_a64,function(_a6e){if(_a6e&&_a6e.declaredClass&&_a6e.declaredClass.indexOf("FeatureLayer")!==-1&&!_a6e.isEditable()){_a6e.setMaxAllowableOffset(_a6d);}});if(_a68.ignorePopups){dojo.forEach(_a64,function(_a6f){delete _a6f.infoTemplate;});}if(!(_a68.ignorePopups||_a68.disableClickBehavior)){_a6c=dojo.connect(map,"onClick",EAU._showPopup);}dojo.connect(map,"onLayersAddResult",EAU._onLayersAddResult);map.addLayers(_a64);if(!_a68.ignorePopups){EAU._addSelectionLayers(_a64,_a6d,map,_a68._clazz);}var _a70=[];dojo.forEach(_a65,function(_a71){_a70=_a70.concat(_a71.errors);},this);_a69.callback({map:map,itemInfo:_a66,errors:_a70,clickEventHandle:_a6c,clickEventListener:EAU._showPopup});};EAU._addSelectionLayers=function(_a72,_a73,map,_a74){var _a75=[];dojo.forEach(_a72,function(_a76){var _a77=_a76.__popups;if(_a77&&_a77.length>1&&_a76.version>=10){_a76.__deferredsPos=_a75.length;_a75.push(EAU._getLayersInfo(_a76));}});var _a78=[];if(_a75.length>0){var _a79=new dojo.DeferredList(_a75);_a79.addCallback(function(_a7a){dojo.forEach(_a72,function(_a7b,_a7c){if(_a7b.__popups&&_a7b.__popups.length>0){if(_a7b.__deferredsPos||_a7b.__deferredsPos===0){var _a7d=_a75[_a7b.__deferredsPos].ioArgs.json;_a78=_a78.concat(EAU._createSelectionFeatureLayers(_a7b,_a7d.layers,_a73,_a74));delete _a7b.__deferredsPos;}else{_a78=_a78.concat(EAU._createSelectionFeatureLayers(_a7b,null,_a73,_a74));}}});map.addLayers(_a78);});}else{dojo.forEach(_a72,function(_a7e,_a7f){if(_a7e.__popups&&_a7e.__popups.length>0){_a78=_a78.concat(EAU._createSelectionFeatureLayers(_a7e,null,_a73,_a74));}});map.addLayers(_a78);}};EAU._createSelectionFeatureLayers=function(_a80,_a81,_a82,_a83){var url=_a80.url;var _a84=_a80.__popups;var ids=_a80.__popupIds;var _a85=_a80.__resourceInfo;var _a86=[];dojo.forEach(_a84,function(_a87,_a88){var i,_a89=null;if(_a81){for(i=0;i<_a81.length;i++){if(_a81[i].id===ids[_a88]){_a89=_a81[i];break;}}}var _a8a=new esri.layers.FeatureLayer(url+"/"+ids[_a88],{id:_a80.id+"_"+ids[_a88],outFields:["*"],mode:esri.layers.FeatureLayer.MODE_SELECTION,infoTemplate:_a87&&new _a83(_a87),drawMode:false,visible:_a80.visible,resourceInfo:_a89,maxAllowableOffset:_a82});dojo.connect(_a8a,"onLoad",function(_a8b){EAU._updateLayerScaleInfo(_a85.layers,_a8b);});_a86.push(_a8a);});delete _a80.__popups;delete _a80.__popupIds;delete _a80.__resourceInfo;return _a86;};EAU._getServiceInfo=function(url,_a8c){return esri.request({url:url,content:{f:"json"},callbackParamName:"callback",error:function(_a8d,io){if(_a8d.message){_a8d.message+=" [url:"+url+"]";}else{_a8d.message="[url:"+url+"]";}_a8c.push(_a8d);esri.config.defaults.io.errorHandler(_a8d,io);}});};EAU._getLayersInfo=function(_a8e){return esri.request({url:_a8e.url+"/layers",content:{f:"json"},callbackParamName:"callback",error:function(_a8f,io){}});};EAU._initLayer=function(_a90,_a91,_a92){var _a93,_a94=_a92._clazz;if(_a90.type==="OpenStreetMap"){_a93=new esri.layers.OpenStreetMapLayer({id:_a90.id});}else{if(_a90.type==="WMS"){var _a95=[];var _a96=[];dojo.forEach(_a90.layers,function(_a97){_a96.push(new esri.layers.WMSLayerInfo({name:_a97.name,title:_a97.title,legendURL:_a97.legendURL}));_a95.push(_a97.name);},this);if(_a90.visibleLayers){_a95=_a90.visibleLayers;}var _a98=new esri.geometry.Extent(_a90.extent[0][0],_a90.extent[0][1],_a90.extent[1][0],_a90.extent[1][1],new esri.SpatialReference({wkid:4326}));var _a99={extent:_a98,layerInfos:_a96,version:_a90.version,maxWidth:_a90.maxWidth,maxHeight:_a90.maxHeight,getMapUrl:_a90.mapUrl,spatialReferences:_a90.spatialReferences,title:_a90.title,copyright:_a90.copyright};_a93=new esri.layers.WMSLayer(_a90.url,{id:_a90.id,visibleLayers:_a95,format:"png",transparent:_a90.baseMapLayer?false:true,opacity:_a90.opacity,resourceInfo:_a99});}else{if(_a90.type==="KML"){_a93=new esri.layers.KMLLayer(_a90.url,{id:_a90.id});dojo.connect(_a93,"onLoad",function(){if(_a90.opacity!==null){var _a9a=_a93.getLayers();dojo.forEach(_a9a,function(_a9b){if(_a9b.declaredClass=="esri.layers.FeatureLayer"||_a9b.declaredClass=="esri.layers.MapImageLayer"){_a9b.setOpacity(_a90.opacity);}});}if(_a90.visibleFolders){dojo.forEach(_a93.folders,function(_a9c){if(dojo.indexOf(_a90.visibleFolders,_a9c.id)>-1){_a93.setFolderVisibility(_a9c,true);}else{_a93.setFolderVisibility(_a9c,false);}},this);}});}else{if(_a90.layerDefinition&&!_a90.url){var _a9d=dojo.fromJson(dojo.toJson(_a90));delete _a9d.id;delete _a9d.opacity;delete _a9d.visibility;_a93=new esri.layers.FeatureLayer(_a9d,{id:_a90.id,opacity:_a90.opacity,visible:_a90.visibility,outFields:["*"],infoTemplate:_a9d.popupInfo&&new _a94(_a9d.popupInfo)});}else{if(_a90.type==="BingMapsAerial"||_a90.type==="BingMapsRoad"||_a90.type==="BingMapsHybrid"){var _a9e=esri.virtualearth.VETiledLayer.MAP_STYLE_AERIAL_WITH_LABELS;if(_a90.type==="BingMapsAerial"){_a9e=esri.virtualearth.VETiledLayer.MAP_STYLE_AERIAL;}else{if(_a90.type==="BingMapsRoad"){_a9e=esri.virtualearth.VETiledLayer.MAP_STYLE_ROAD;}}_a93=new esri.virtualearth.VETiledLayer({bingMapsKey:_a92.bingMapsKey,mapStyle:_a9e,id:_a90.id});}else{if(_a90.resourceInfo&&_a90.resourceInfo.mapName){if(_a90.resourceInfo.singleFusedMapCache===true){if(!_a90.baseMapLayer){if(EAU._sameSpatialReferenceAsBasemap(_a90,_a91)){if(EAU._sameTilingSchemeAsBasemap(_a90,_a91)){_a93=EAU._loadAsCached(_a90);}else{_a93=EAU._loadAsDynamic(_a90);}}else{_a93=EAU._loadAsDynamic(_a90);}}else{_a93=EAU._loadAsCached(_a90);}}else{_a93=EAU._loadAsDynamic(_a90);}}else{if(_a90.resourceInfo&&_a90.resourceInfo.pixelSizeX){var _a9f=new esri.layers.ImageServiceParameters();_a9f.bandIds=_a90.bandIds;if(!_a90.bandIds&&_a90.resourceInfo.bandCount&&parseInt(_a90.resourceInfo.bandCount,10)>3){_a9f.bandIds=[0,1,2];}_a93=new esri.layers.ArcGISImageServiceLayer(_a90.url,{resourceInfo:_a90.resourceInfo,opacity:_a90.opacity,visible:_a90.visibility,id:_a90.id,imageServiceParameters:_a9f});}else{if(_a90.resourceInfo&&_a90.resourceInfo.type==="Feature Layer"){_a93=new esri.layers.FeatureLayer(_a90.url,{resourceInfo:_a90.resourceInfo,opacity:_a90.opacity,visible:_a90.visibility,id:_a90.id,mode:esri._isDefined(_a90.mode)?_a90.mode:esri.layers.FeatureLayer.MODE_ONDEMAND,outFields:["*"],infoTemplate:_a90.popupInfo&&new _a94(_a90.popupInfo)});if(_a90.layerDefinition){if(_a90.layerDefinition.drawingInfo&&_a90.layerDefinition.drawingInfo.renderer){var _aa0=esri.renderer.fromJson(_a90.layerDefinition.drawingInfo.renderer);_a93.setRenderer(_aa0);}if(_a90.layerDefinition.definitionExpression){_a93.setDefinitionExpression(_a90.layerDefinition.definitionExpression);}if(_a90.layerDefinition.minScale!==null){_a93.minScale=_a90.layerDefinition.minScale;}if(_a90.layerDefinition.maxScale!==null){_a93.maxScale=_a90.layerDefinition.maxScale;}}}}}}}}}}return _a93;};EAU._loadAsCached=function(_aa1){var _aa2=[];if(!_aa1.displayLevels){_aa2=dojo.map(_aa1.resourceInfo.tileInfo.lods,function(lod){return lod.level;});}var _aa3=new esri.layers.ArcGISTiledMapServiceLayer(_aa1.url,{resourceInfo:_aa1.resourceInfo,opacity:_aa1.opacity,visible:_aa1.visibility,displayLevels:(_aa1.displayLevels)?_aa1.displayLevels:_aa2,id:_aa1.id});EAU._processPopups(_aa3,_aa1);return _aa3;};EAU._loadAsDynamic=function(_aa4){var _aa5=new esri.layers.ImageParameters();_aa5.format="png24";if(_aa4.resourceInfo&&_aa4.resourceInfo.supportedImageFormatTypes&&_aa4.resourceInfo.supportedImageFormatTypes.indexOf("PNG32")>-1){_aa5.format="png32";}var _aa6=new esri.layers.ArcGISDynamicMapServiceLayer(_aa4.url,{resourceInfo:_aa4.resourceInfo,opacity:_aa4.opacity,visible:_aa4.visibility,id:_aa4.id,imageParameters:_aa5});if(!_aa4.visibleLayers){var _aa7="";var _aa8=_aa6.layerInfos;dojo.forEach(_aa8,function(_aa9){if(_aa9.defaultVisibility){_aa7+=(_aa7.length>0?",":"")+_aa9.id;}});_aa4.visibleLayers=_aa7;}var _aaa=EAU._getVisibleFeatureLayers(_aa6.layerInfos,_aa4.visibleLayers);_aa6.setVisibleLayers(_aaa);if(_aa4.layers&&_aa4.layers.length>0){var _aab=[];dojo.forEach(_aa4.layers,function(_aac){if(_aac.layerDefinition&&_aac.layerDefinition.definitionExpression){_aab[_aac.id]=_aac.layerDefinition.definitionExpression;}},this);if(_aab.length>0){_aa6.setLayerDefinitions(_aab);}}EAU._processPopups(_aa6,_aa4);return _aa6;};EAU._processPopups=function(_aad,_aae){var _aaf=_aad.layerInfos;var _ab0=_aae.layers;if(_ab0&&_aaf){var _ab1=[],ids=[];dojo.forEach(_aaf,function(_ab2){var id=_ab2.id,i;if(!_ab2.subLayerIds&&dojo.indexOf(_aad.visibleLayers,id)!==-1){for(i=0;i<_ab0.length;i++){var _ab3=_ab0[i];if(_ab3.id===id){ids.push(id);_ab1.push(_ab3.popupInfo);break;}}}});if(_ab1.length){_aad.__popups=_ab1;_aad.__popupIds=ids;_aad.__resourceInfo=_aae.resourceInfo;}}};EAU._onZoomEnd=function(){var map=this;var _ab4=Math.floor(map.extent.getWidth()/map.width);dojo.forEach(map.graphicsLayerIds,function(id){var _ab5=map.getLayer(id);if(_ab5&&_ab5.declaredClass==="esri.layers.FeatureLayer"&&!_ab5.isEditable()){_ab5.setMaxAllowableOffset(_ab4);}});};EAU._onLayersAddResult=function(_ab6){dojo.forEach(_ab6,function(_ab7){var _ab8=_ab7.layer;if(_ab8.toJson){var json=_ab8.toJson();if(json.featureSet&&_ab8.name.indexOf("Text")>-1){dojo.forEach(json.featureSet.features,function(_ab9,idx){if(_ab9.attributes.TEXT){var _aba=_ab8.graphics[idx];_aba.symbol.setText(_ab9.attributes.TEXT);if(_ab9.symbol.horizontalAlignment){_aba.symbol.align=_ab9.symbol.horizontalAlignment;}_aba.setSymbol(_aba.symbol);_aba.setAttributes(_ab9.attributes);}},this);}}});};EAU._sameSpatialReferenceAsBasemap=function(_abb,_abc){var _abd=[102113,102100,3857];var sp1=_abc[0].layerObject.fullExtent.spatialReference;var sp2=new esri.SpatialReference(_abb.resourceInfo.fullExtent.spatialReference);if(dojo.toJson(sp1.toJson())===dojo.toJson(sp2.toJson())){return true;}else{if(dojo.some(_abd,function(wkid){return wkid===sp2.wkid;})&&dojo.some(_abd,function(wkid){return wkid===sp1.wkid;})){return true;}}return false;};EAU._sameTilingSchemeAsBasemap=function(_abe,_abf){if(!_abf[0].layerObject.tileInfo){return false;}var _ac0=[];dojo.forEach(_abf,function(_ac1){if(_ac1.baseMapLayer){if(_ac1.layerObject.tileInfo){_ac0=_ac0.concat(dojo.map(_ac1.layerObject.tileInfo.lods,function(lod){return lod.scale;}));}}});var _ac2=dojo.some(_abe.resourceInfo.tileInfo.lods,function(lod){return dojo.some(_ac0,function(_ac3){return _ac3===lod.scale;});});return _ac2;};EAU._showPopup=function(evt){var map=this,_ac4=map.infoWindow,_ac5=evt.graphic;if(!map.loaded){return;}_ac4.hide();_ac4.clearFeatures();var _ac6=[];dojo.forEach(map.graphicsLayerIds,function(_ac7){var _ac8=map.getLayer(_ac7);if(_ac8&&_ac8.declaredClass.indexOf("FeatureLayer")!==-1&&_ac8.loaded&&_ac8.visible){_ac8.clearSelection();if(_ac8.infoTemplate&&!_ac8._suspended){_ac6.push(_ac8);}}});_ac5=(_ac5&&_ac5._getEffInfoTemplate())?_ac5:null;if(!_ac6.length&&!_ac5){return;}var _ac9=EAU._calculateClickTolerance(_ac6);var _aca=evt.screenPoint,_acb=map.toMap(new esri.geometry.Point(_aca.x-_ac9,_aca.y+_ac9)),_acc=map.toMap(new esri.geometry.Point(_aca.x+_ac9,_aca.y-_ac9)),_acd=new esri.geometry.Extent(_acb.x,_acb.y,_acc.x,_acc.y,map.spatialReference);var _ace=new esri.tasks.Query();_ace.geometry=_acd;_ace.timeExtent=map.timeExtent;var _acf=dojo.map(_ac6,function(_ad0){var dfd=_ad0.selectFeatures(_ace);dfd.addCallback(function(){var _ad1=_ad0.getSelectedFeatures();return _ad1;});return dfd;});if(_ac5){var dfd=new dojo.Deferred();dfd.callback([_ac5]);_acf.splice(0,0,dfd);}var _ad2=dojo.some(_acf,function(dfd){return dfd.fired===-1;});if(!_ad2){var _ad3=_ac5?1:0;dojo.forEach(_ac6,function(_ad4){_ad3=_ad3+_ad4.getSelectedFeatures().length;});if(!_ad3){return;}}_ac4.setFeatures(_acf);_ac4.show(evt.mapPoint);};EAU._calculateClickTolerance=function(_ad5){var _ad6=6;dojo.forEach(_ad5,function(_ad7){var _ad8=_ad7.renderer;if(_ad8.declaredClass==="esri.renderer.SimpleRenderer"){var _ad9=_ad8.symbol;if(_ad9.xoffset){_ad6=Math.max(_ad6,Math.abs(_ad9.xoffset));}if(_ad9.yoffset){_ad6=Math.max(_ad6,Math.abs(_ad9.yoffset));}}else{if(_ad8.declaredClass==="esri.renderer.UniqueValueRenderer"||_ad8.declaredClass==="esri.renderer.ClassBreaksRenderer"){dojo.forEach(_ad8.infos,function(info){var _ada=info.symbol;if(_ada.xoffset){_ad6=Math.max(_ad6,Math.abs(_ada.xoffset));}if(_ada.yoffset){_ad6=Math.max(_ad6,Math.abs(_ada.yoffset));}});}}});return _ad6;};EAU._getVisibleFeatureLayers=function(_adb,_adc){if(!_adb||!_adc||_adc.length===0){return [];}var _add=","+_adc+",";var _ade=[];var _adf="";var k,_ae0=",";for(k=0;k<_adb.length;k++){if(_adb[k].subLayerIds!==null){if(_add.indexOf(","+_adb[k].id+",")===-1||_ae0.indexOf(","+_adb[k].id+",")>-1){_ae0+=_adb[k].subLayerIds.toString()+",";}}else{if(_add.indexOf(","+_adb[k].id+",")>-1&&_ae0.indexOf(","+_adb[k].id+",")===-1){_ade.push(_adb[k].id);_adf=",";}}}return _ade;};EAU._updateLayerScaleInfo=function(_ae1,_ae2){if(_ae2.version<=10.1&&_ae1){var i,id=parseInt(_ae2.url.substring(_ae2.url.lastIndexOf("/")+1,_ae2.url.length));for(i=_ae1.length-1;i>=0;i--){if(_ae1[i].id==id){if(_ae2.minScale==0&&_ae1[i].minScale>0){_ae2.minScale=_ae1[i].minScale;}else{if(_ae2.minScale>0&&_ae1[i].minScale==0){_ae2.minScale=_ae2.minScale;}else{if(_ae2.minScale>0&&_ae1[i].minScale>0){_ae2.minScale=Math.min(_ae2.minScale,_ae1[i].minScale);}}}_ae2.maxScale=Math.max(_ae2.maxScale,_ae1[i].maxScale);if(_ae1[i].parentLayerId>-1){id=_ae1[i].parentLayerId;}else{break;}}}}};}());}dojo.i18n._preloadLocalizations("esri.arcgis.nls.utils",["ROOT","ar","ca","cs","da","de","de-de","el","en","en-gb","en-us","es","es-es","fi","fi-fi","fr","fr-fr","he","he-il","hu","it","it-it","ja","ja-jp","ko","ko-kr","nb","nl","nl-nl","pl","pt","pt-br","pt-pt","ru","sk","sl","sv","th","tr","xx","zh","zh-cn","zh-tw"]);
