/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

/*
	This is an optimized version of Dojo, built for deployment and not for
	development. To get sources and documentation, please visit:

		http://dojotoolkit.org
*/

window[esri._dojoScopeName||"dojo"]._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","esri.layers.agsimageservice"],["provide","esri.layers.osm"],["provide","esri.tasks._task"],["provide","esri.tasks.query"],["provide","dojo.io.iframe"],["provide","esri.layers.FeatureLayer"],["provide","esri.layers.MapImageLayer"],["provide","esri.PopupBase"],["provide","dojo.Stateful"],["provide","dijit._WidgetBase"],["provide","dojo.window"],["provide","dijit._base.focus"],["provide","dojo.AdapterRegistry"],["provide","dijit._base.place"],["provide","dijit._base.window"],["provide","dijit._base.popup"],["provide","dijit._base.scroll"],["provide","dojo.uacss"],["provide","dijit._base.sniff"],["provide","dijit._base.typematic"],["provide","dijit._base.wai"],["provide","dijit._base"],["provide","dijit._Widget"],["provide","dojo.string"],["provide","dojo.date.stamp"],["provide","dojo.parser"],["provide","dojo.cache"],["provide","dijit._Templated"],["provide","dojo.regexp"],["provide","dojo.number"],["provide","dojo.cldr.supplemental"],["provide","dojo.date.locale"],["provide","dojox.charting.scaler.common"],["provide","dojox.charting.scaler.linear"],["provide","dojox.charting.axis2d.common"],["provide","dojox.charting.Element"],["provide","dojox.charting.axis2d.Base"],["provide","dojox.lang.functional.lambda"],["provide","dojox.lang.functional.array"],["provide","dojox.lang.functional.object"],["provide","dojox.lang.functional"],["provide","dojox.lang.utils"],["provide","dojox.charting.axis2d.Invisible"],["provide","dojo.colors"],["provide","dojox.charting.axis2d.Default"],["provide","dojox.charting.plot2d.common"],["provide","dojox.charting.scaler.primitive"],["provide","dojox.charting.plot2d._PlotEvents"],["provide","dojox.charting.plot2d.Base"],["provide","dojox.lang.functional.reversed"],["provide","dojox.gfx.fx"],["provide","dojox.charting.plot2d.Default"],["provide","dojox.charting.plot2d.Lines"],["provide","dojox.charting.plot2d.Areas"],["provide","dojox.charting.plot2d.Markers"],["provide","dojox.charting.plot2d.MarkersOnly"],["provide","dojox.gfx.gradutils"],["provide","dojox.charting.plot2d.Scatter"],["provide","dojox.lang.functional.sequence"],["provide","dojox.charting.plot2d.Stacked"],["provide","dojox.charting.plot2d.StackedLines"],["provide","dojox.charting.plot2d.StackedAreas"],["provide","dojox.charting.plot2d.Columns"],["provide","dojox.charting.plot2d.StackedColumns"],["provide","dojox.charting.plot2d.ClusteredColumns"],["provide","dojox.charting.plot2d.Bars"],["provide","dojox.charting.plot2d.StackedBars"],["provide","dojox.charting.plot2d.ClusteredBars"],["provide","dojox.charting.plot2d.Grid"],["provide","dojox.charting.plot2d.Pie"],["provide","dojox.charting.plot2d.Bubble"],["provide","dojox.charting.plot2d.Candlesticks"],["provide","dojox.charting.plot2d.OHLC"],["provide","dojo.fx.easing"],["provide","dojox.charting.plot2d.Spider"],["provide","dojox.lang.functional.fold"],["provide","dojox.color._base"],["provide","dojox.color"],["provide","dojox.color.Palette"],["provide","dojox.charting.Theme"],["provide","dojox.charting.Series"],["provide","dojox.charting.Chart"],["provide","dojox.charting.Chart2D"],["provide","dojox.charting.themes.PlotKit.base"],["provide","dijit.Tooltip"],["provide","dojox.charting.action2d.Base"],["provide","dojox.lang.functional.scan"],["provide","dojox.charting.action2d.Tooltip"],["provide","esri.dijit.Popup"],["provide","esri.layers.KMLLayer"],["provide","esri.layers.wms"],["provide","esri.virtualearth.VETiledLayer"],["provide","esri.tasks.geometry"],["provide","dojo.DeferredList"],["provide","esri.arcgis.utils"],["i18n._preloadLocalizations","esri.arcgis.nls.utils",["ROOT","ar","ca","cs","da","de","de-de","el","en","en-gb","en-us","es","es-es","fi","fi-fi","fr","fr-fr","he","he-il","hu","it","it-it","ja","ja-jp","ko","ko-kr","nb","nl","nl-nl","pl","pt","pt-br","pt-pt","ru","sk","sl","sv","th","tr","xx","zh","zh-cn","zh-tw"]]],defineResource:function(_4,_5,_6){if(!_4._hasResource["esri.layers.agsimageservice"]){_4._hasResource["esri.layers.agsimageservice"]=true;_4.provide("esri.layers.agsimageservice");_4.declare("esri.layers.ArcGISImageServiceLayer",esri.layers.DynamicMapServiceLayer,{constructor:function(_7,_8){this._url=esri.urlToObject(_7);var _9=_8&&_8.imageServiceParameters;this.format=_9&&_9.format;this.interpolation=_9?_9.interpolation:null;this.compressionQuality=_9?_9.compressionQuality:null;this.bandIds=_9?_9.bandIds:null;this.mosaicRule=_9?_9.mosaicRule:null;this.renderingRule=_9?_9.renderingRule:null;this._params=_4.mixin({},this._url.query,{f:"image",interpolation:this.interpolation,format:this.format,compressionQuality:this.compressionQuality,bandIds:this.bandIds?this.bandIds.join(","):null},_9?_9.toJson():{});this._initLayer=_4.hitch(this,this._initLayer);this.useMapImage=(_8&&_8.useMapImage)||false;this._loadCallback=_8&&_8.loadCallback;var _a=_8&&_8.resourceInfo;if(_a){this._initLayer(_a);}else{esri.request({url:this._url.path,content:_4.mixin({f:"json"},this._url.query),callbackParamName:"callback",load:this._initLayer,error:esri.config.defaults.io.errorHandler});}},disableClientCaching:false,_initLayer:function(_b,io){_4.mixin(this,_b);this.initialExtent=(this.fullExtent=this.extent=(new esri.geometry.Extent(_b.extent)));this.spatialReference=this.initialExtent.spatialReference;this.pixelSizeX=parseFloat(this.pixelSizeX);this.pixelSizeY=parseFloat(this.pixelSizeY);var i,il,_c=this.minValues,_d=this.maxValues,_e=this.meanValues,_f=this.stdvValues,bs=(this.bands=[]);for(i=0,il=this.bandCount;i<il;i++){bs[i]={min:_c[i],max:_d[i],mean:_e[i],stddev:_f[i]};}var _10=this.timeInfo;this.timeInfo=(_10&&_10.timeExtent)?new esri.layers.TimeInfo(_10):null;var _11=this.fields=[];var _12=_b.fields;if(_12){for(i=0;i<_12.length;i++){_11.push(new esri.layers.Field(_12[i]));}}this.version=_b.currentVersion;if(!this.version){var ver;if("fields" in _b||"objectIdField" in _b||"timeInfo" in _b){ver=10;}else{ver=9.3;}this.version=ver;}this.loaded=true;this.onLoad(this);var _13=this._loadCallback;if(_13){delete this._loadCallback;_13(this);}},getImageUrl:function(_14,_15,_16,_17){var sr=_14.spatialReference.wkid||_4.toJson(_14.spatialReference.toJson());delete this._params._ts;var _18=this._url.path+"/exportImage?";_4.mixin(this._params,{bbox:_14.xmin+","+_14.ymin+","+_14.xmax+","+_14.ymax,imageSR:sr,bboxSR:sr,size:_15+","+_16},this.disableClientCaching?{_ts:new Date().getTime()}:{});var _19=esri._getProxiedUrl(_18+_4.objectToQuery(_4.mixin(this._params,{f:"image"})));if((_19.length>esri.config.defaults.io.postLength)||this.useMapImage){this._jsonRequest=esri.request({url:_18,content:_4.mixin(this._params,{f:"json"}),callbackParamName:"callback",load:function(_1a,io){_17(esri._getProxiedUrl(_1a.href));},error:this._errorHandler});}else{_17(_19);}},setInterpolation:function(_1b,_1c){this.interpolation=(this._params.interpolation=_1b);if(!_1c){this.refresh(true);}},setCompressionQuality:function(_1d,_1e){this.compressionQuality=(this._params.compressionQuality=_1d);if(!_1e){this.refresh(true);}},setBandIds:function(ids,_1f){this.bandIds=ids;this._params.bandIds=ids.join(",");if(!_1f){this.refresh(true);}},setDefaultBandIds:function(_20){this.bandIds=(this._params.bandIds=null);if(!_20){this.refresh(true);}},setDisableClientCaching:function(_21){this.disableClientCaching=_21;},setMosaicRule:function(_22,_23){this.mosaicRule=_22;this._params.mosaicRule=_4.toJson(_22.toJson());if(!_23){this.refresh(true);}},setRenderingRule:function(_24,_25){this.renderingRule=_24;this._params.renderingRule=_4.toJson(_24.toJson());if(!_25){this.refresh(true);}},setImageFormat:function(_26,_27){this.format=(this._params.format=_26);if(!_27){this.refresh(true);}},refresh:function(_28){if(_28){this.inherited(arguments);}else{var dc=this.disableClientCaching;this.disableClientCaching=true;this.inherited(arguments);this.disableClientCaching=dc;}},exportMapImage:function(_29,_2a){var m=esri.config.defaults.map,p=_4.mixin({size:m.width+","+m.height},this._params,_29?_29.toJson(this.normalization):{},{f:"json"});delete p._ts;this._exportMapImage(this._url.path+"/exportImage",p,_2a);}});_4.declare("esri.layers.ImageServiceParameters",null,{extent:null,width:null,height:null,imageSpatialReference:null,format:null,interpolation:null,compressionQuality:null,bandIds:null,timeExtent:null,mosaicRule:null,renderingRule:null,noData:null,toJson:function(_2b){var ext=this.bbox||this.extent;ext=ext&&_2b&&ext._normalize(true);var _2c=ext?(ext.spatialReference.wkid||_4.toJson(ext.spatialReference.toJson())):null,_2d=this.imageSpatialReference,_2e={bbox:ext?(ext.xmin+","+ext.ymin+","+ext.xmax+","+ext.ymax):null,bboxSR:_2c,size:(this.width!==null&&this.height!==null?this.width+","+this.height:null),imageSR:(_2d?(_2d.wkid||_4.toJson(_2d.toJson())):_2c),format:this.format,interpolation:this.interpolation,compressionQuality:this.compressionQuality,bandIds:this.bandIds?this.bandIds.join(","):null,mosaicRule:this.mosaicRule?_4.toJson(this.mosaicRule.toJson()):null,renderingRule:this.renderingRule?_4.toJson(this.renderingRule.toJson()):null,noData:this.noData};var _2f=this.timeExtent;_2e.time=_2f?_2f.toJson().join(","):null;return esri.filter(_2e,function(_30){if(_30!==null){return true;}});}});_4.mixin(esri.layers.ImageServiceParameters,{INTERPOLATION_BILINEAR:"RSP_BilinearInterpolation",INTERPOLATION_CUBICCONVOLUTION:"RSP_CubicConvolution",INTERPOLATION_MAJORITY:"RSP_Majority",INTERPOLATION_NEARESTNEIGHBOR:"RSP_NearestNeighbor"});_4.declare("esri.layers.MosaicRule",null,{method:null,where:null,sortField:null,sortValue:null,ascending:false,lockRasterIds:null,viewpoint:null,objectIds:null,operation:null,toJson:function(){var _31={mosaicMethod:this.method,where:this.where,sortField:this.sortField,sortValue:this.sortValue?_4.toJson(this.sortValue):null,ascending:this.ascending,lockRasterIds:this.lockRasterIds,viewpoint:this.viewpoint?this.viewpoint.toJson():null,fids:this.objectIds,mosaicOperation:this.operation};return esri.filter(_31,function(_32){if(_32!==null){return true;}});}});_4.mixin(esri.layers.MosaicRule,{METHOD_NONE:"esriMosaicNone",METHOD_CENTER:"esriMosaicCenter",METHOD_NADIR:"esriMosaicNadir",METHOD_VIEWPOINT:"esriMosaicViewpoint",METHOD_ATTRIBUTE:"esriMosaicAttribute",METHOD_LOCKRASTER:"esriMosaicLockRaster",METHOD_NORTHWEST:"esriMosaicNorthwest",METHOD_SEAMLINE:"esriMosaicSeamline",OPERATION_FIRST:"MT_FIRST",OPERATION_LAST:"MT_LAST",OPERATION_MIN:"MT_MIN",OPERATION_MAX:"MT_MAX",OPERATION_MEAN:"MT_MEAN",OPERATION_BLEND:"MT_BLEND"});_4.declare("esri.layers.RasterFunction",null,{functionName:null,"arguments":null,variableName:null,toJson:function(){var _33={rasterFunction:this.functionName,rasterFunctionArguments:this["arguments"],variableName:this.variableName};return esri.filter(_33,function(_34){if(_34!==null){return true;}});}});}if(!_4._hasResource["esri.layers.osm"]){_4._hasResource["esri.layers.osm"]=true;_4.provide("esri.layers.osm");_4.declare("esri.layers.OpenStreetMapLayer",esri.layers.TiledMapServiceLayer,{constructor:function(_35){this.spatialReference=new esri.SpatialReference({wkid:102100});this.tileInfo=new esri.layers.TileInfo({rows:256,cols:256,dpi:96,format:"PNG8",compressionQuality:0,origin:{x:-20037508.342787,y:20037508.342787},spatialReference:{wkid:102100},lods:[{level:0,scale:591657527.591555,resolution:156543.033928},{level:1,scale:295828763.795777,resolution:78271.5169639999},{level:2,scale:147914381.897889,resolution:39135.7584820001},{level:3,scale:73957190.948944,resolution:19567.8792409999},{level:4,scale:36978595.474472,resolution:9783.93962049996},{level:5,scale:18489297.737236,resolution:4891.96981024998},{level:6,scale:9244648.868618,resolution:2445.98490512499},{level:7,scale:4622324.434309,resolution:1222.99245256249},{level:8,scale:2311162.217155,resolution:611.49622628138},{level:9,scale:1155581.108577,resolution:305.748113140558},{level:10,scale:577790.554289,resolution:152.874056570411},{level:11,scale:288895.277144,resolution:76.4370282850732},{level:12,scale:144447.638572,resolution:38.2185141425366},{level:13,scale:72223.819286,resolution:19.1092570712683},{level:14,scale:36111.909643,resolution:9.55462853563415},{level:15,scale:18055.954822,resolution:4.77731426794937},{level:16,scale:9027.977411,resolution:2.38865713397468},{level:17,scale:4513.988705,resolution:1.19432856685505},{level:18,scale:2256.994353,resolution:0.597164283559817}]});this.fullExtent=new esri.geometry.Extent({xmin:-20037508.34,ymin:-20037508.34,xmax:20037508.34,ymax:20037508.34,spatialReference:{wkid:102100}});this.initialExtent=new esri.geometry.Extent({xmin:-20037508.34,ymin:-20037508.34,xmax:20037508.34,ymax:20037508.34,spatialReference:{wkid:102100}});this.tileServers=(_35&&_35.tileServers)||["http://a.tile.openstreetmap.org/","http://b.tile.openstreetmap.org/","http://c.tile.openstreetmap.org/"];this.serversLength=this.tileServers.length;this.serverIndex=0;this._displayLevels=_35?_35.displayLevels:null;this.loaded=true;this.onLoad(this);var _36=_35&&_35.loadCallback;if(_36){_36(this);}},getTileUrl:function(_37,row,col){return esri._getProxiedUrl(this.tileServers[this.serverIndex++%this.serversLength]+"/"+_37+"/"+col+"/"+row+".png");}});}if(!_4._hasResource["esri.tasks._task"]){_4._hasResource["esri.tasks._task"]=true;_4.provide("esri.tasks._task");_4.declare("esri.tasks._Task",null,{constructor:function(url){if(url&&_4.isString(url)){this._url=esri.urlToObject(this.url=url);}this.normalization=true;this._errorHandler=_4.hitch(this,this._errorHandler);},_encode:function(_38,_39,_3a){var _3b,_3c,_3d={};for(var i in _38){if(i==="declaredClass"){continue;}_3b=_38[i];_3c=typeof (_3b);if(_3b!==null&&_3b!==undefined&&_3c!=="function"){if(_4.isArray(_3b)){_3d[i]=[];for(var p=0,pl=_3b.length;p<pl;p++){_3d[i][p]=this._encode(_3b[p]);}}else{if(_3c==="object"){if(_3b.toJson){var _3e=_3b.toJson(_3a&&_3a[i]);if(_3b instanceof esri.tasks.FeatureSet){if(_3e.spatialReference){_3e.sr=_3e.spatialReference;delete _3e.spatialReference;}}_3d[i]=_39?_3e:_4.toJson(_3e);}}else{_3d[i]=_3b;}}}}return _3d;},_successHandler:function(_3f,_40,_41,dfd){if(_40){this[_40].apply(this,_3f);}if(_41){_41.apply(null,_3f);}if(dfd){esri._resDfd(dfd,_3f);}},_errorHandler:function(err,_42,dfd){this.onError(err);if(_42){_42(err);}if(dfd){dfd.errback(err);}},setNormalization:function(_43){this.normalization=_43;},onError:function(){}});_4.declare("esri.tasks.FeatureSet",null,{constructor:function(_44){if(_44){_4.mixin(this,_44);var _45=this.features,sr=_44.spatialReference,_46=esri.Graphic,_47=esri.geometry.getGeometryType(_44.geometryType);sr=(this.spatialReference=new esri.SpatialReference(sr));this.geometryType=_44.geometryType;if(_44.fields){this.fields=_44.fields;}_4.forEach(_45,function(_48,i){var _49=_48.geometry&&_48.geometry.spatialReference;_45[i]=new _46(_47?new _47(_48.geometry):null,_48.symbol&&esri.symbol.fromJson(_48.symbol),_48.attributes);if(_45[i].geometry&&!_49){_45[i].geometry.setSpatialReference(sr);}});}else{this.features=[];}},displayFieldName:null,geometryType:null,spatialReference:null,fields:[],features:[],fieldAliases:null,toJson:function(_4a){var _4b={};if(this.displayFieldName){_4b.displayFieldName=this.displayFieldName;}if(this.fields){_4b.fields=this.fields;}if(this.spatialReference){_4b.spatialReference=this.spatialReference.toJson();}else{if(this.features[0].geometry){_4b.spatialReference=this.features[0].geometry.spatialReference.toJson();}}if(this.features[0]){if(this.features[0].geometry){_4b.geometryType=esri.geometry.getJsonType(this.features[0].geometry);}_4b.features=esri._encodeGraphics(this.features,_4a);}return _4b;}});esri.tasks._SpatialRelationship={SPATIAL_REL_INTERSECTS:"esriSpatialRelIntersects",SPATIAL_REL_CONTAINS:"esriSpatialRelContains",SPATIAL_REL_CROSSES:"esriSpatialRelCrosses",SPATIAL_REL_ENVELOPEINTERSECTS:"esriSpatialRelEnvelopeIntersects",SPATIAL_REL_INDEXINTERSECTS:"esriSpatialRelIndexIntersects",SPATIAL_REL_OVERLAPS:"esriSpatialRelOverlaps",SPATIAL_REL_TOUCHES:"esriSpatialRelTouches",SPATIAL_REL_WITHIN:"esriSpatialRelWithin",SPATIAL_REL_RELATION:"esriSpatialRelRelation"};}if(!_4._hasResource["esri.tasks.query"]){_4._hasResource["esri.tasks.query"]=true;_4.provide("esri.tasks.query");_4.declare("esri.tasks.QueryTask",esri.tasks._Task,{constructor:function(url){this._handler=_4.hitch(this,this._handler);this._relationshipQueryHandler=_4.hitch(this,this._relationshipQueryHandler);this._executeForIdsHandler=_4.hitch(this,this._executeForIdsHandler);this._countHandler=_4.hitch(this,this._countHandler);},__msigns:[{n:"execute",c:4,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForIds",c:3,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForCount",c:3,a:[{i:0,p:["geometry"]}],e:2}],onComplete:function(){},onExecuteRelationshipQueryComplete:function(){},onExecuteForIdsComplete:function(){},onExecuteForCountComplete:function(){},execute:function(_4c,_4d,_4e,_4f,_50){var _51=_50.assembly,_52=this._encode(_4.mixin({},this._url.query,{f:"json"},_4c.toJson(_51&&_51[0]))),_53=this._handler,_54=this._errorHandler;return esri.request({url:this._url.path+"/query",content:_52,callbackParamName:"callback",load:function(r,i){_53(r,i,_4d,_4e,_50.dfd);},error:function(r){_54(r,_4e,_50.dfd);},callbackSuffix:_4f});},executeRelationshipQuery:function(_55,_56,_57){var _58=this._encode(_4.mixin({},this._url.query,{f:"json"},_55.toJson())),_59=this._relationshipQueryHandler,_5a=this._errorHandler;var dfd=new _4.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/queryRelatedRecords",content:_58,callbackParamName:"callback",load:function(r,i){_59(r,i,_56,_57,dfd);},error:function(r){_5a(r,_57,dfd);}});return dfd;},executeForIds:function(_5b,_5c,_5d,_5e){var _5f=_5e.assembly,_60=this._encode(_4.mixin({},this._url.query,{f:"json",returnIdsOnly:true},_5b.toJson(_5f&&_5f[0]))),_61=this._executeForIdsHandler,_62=this._errorHandler;return esri.request({url:this._url.path+"/query",content:_60,callbackParamName:"callback",load:function(r,i){_61(r,i,_5c,_5d,_5e.dfd);},error:function(r){_62(r,_5d,_5e.dfd);}});},executeForCount:function(_63,_64,_65,_66){var _67=_66.assembly,_68=this._encode(_4.mixin({},this._url.query,{f:"json",returnIdsOnly:true,returnCountOnly:true},_63.toJson(_67&&_67[0]))),_69=this._countHandler,_6a=this._errorHandler;return esri.request({url:this._url.path+"/query",content:_68,callbackParamName:"callback",load:function(r,i){_69(r,i,_64,_65,_66.dfd);},error:function(r){_6a(r,_65,_66.dfd);}});},_handler:function(_6b,io,_6c,_6d,dfd){try{var _6e=new esri.tasks.FeatureSet(_6b);this._successHandler([_6e],"onComplete",_6c,dfd);}catch(err){this._errorHandler(err,_6d,dfd);}},_relationshipQueryHandler:function(_6f,io,_70,_71,dfd){try{var gt=_6f.geometryType,sr=_6f.spatialReference,_72={};_4.forEach(_6f.relatedRecordGroups,function(gr){var _73={};_73.geometryType=gt;_73.spatialReference=sr;_73.features=gr.relatedRecords;var _74=new esri.tasks.FeatureSet(_73);_72[gr.objectId]=_74;});this._successHandler([_72],"onExecuteRelationshipQueryComplete",_70,dfd);}catch(err){this._errorHandler(err,_71,dfd);}},_executeForIdsHandler:function(_75,io,_76,_77,dfd){try{this._successHandler([_75.objectIds],"onExecuteForIdsComplete",_76,dfd);}catch(err){this._errorHandler(err,_77,dfd);}},_countHandler:function(_78,io,_79,_7a,dfd){try{var _7b,_7c=_78.features,ids=_78.objectIds;if(ids){_7b=ids.length;}else{if(_7c){throw new Error(esri.bundle.tasks.query.invalid);}else{_7b=_78.count;}}this._successHandler([_7b],"onExecuteForCountComplete",_79,dfd);}catch(err){this._errorHandler(err,_7a,dfd);}}});esri._createWrappers("esri.tasks.QueryTask");_4.declare("esri.tasks.Query",null,{constructor:function(){this.spatialRelationship=esri.tasks.Query.SPATIAL_REL_INTERSECTS;},text:null,where:"",geometry:null,objectIds:null,returnGeometry:false,outSpatialReference:null,outFields:null,timeExtent:null,relationParam:null,toJson:function(_7d){var _7e={text:this.text,where:this.where,returnGeometry:this.returnGeometry,spatialRel:this.spatialRelationship,maxAllowableOffset:this.maxAllowableOffset},g=_7d&&_7d["geometry"]||this.geometry,ids=this.objectIds,_7f=this.outFields,_80=this.outSpatialReference;if(g){_7e.geometry=g;_7e.geometryType=esri.geometry.getJsonType(g);_7e.inSR=g.spatialReference.wkid||_4.toJson(g.spatialReference.toJson());}if(ids){_7e.objectIds=ids.join(",");}if(_7f){_7e.outFields=_7f.join(",");}if(_80!==null){_7e.outSR=_80.wkid||_4.toJson(_80.toJson());}else{if(g){_7e.outSR=g.spatialReference.wkid||_4.toJson(g.spatialReference.toJson());}}var _81=this.timeExtent;_7e.time=_81?_81.toJson().join(","):null;var _82=this.relationParam;if(_82&&this.spatialRelationship===esri.tasks.Query.SPATIAL_REL_RELATION){_7e.relationParam=_82;}_7e._ts=this._ts;return _7e;}});_4.mixin(esri.tasks.Query,esri.tasks._SpatialRelationship);_4.declare("esri.tasks.RelationshipQuery",null,{definitionExpression:"",relationshipId:null,returnGeometry:false,objectIds:null,outSpatialReference:null,outFields:null,toJson:function(){var _83={definitionExpression:this.definitionExpression,relationshipId:this.relationshipId,returnGeometry:this.returnGeometry,maxAllowableOffset:this.maxAllowableOffset},_84=this.objectIds,_85=this.outFields,_86=this.outSpatialReference;if(_84){_83.objectIds=_84.join(",");}if(_85){_83.outFields=_85.join(",");}if(_86){_83.outSR=_86.toJson();}_83._ts=this._ts;return _83;}});}if(!_4._hasResource["dojo.io.iframe"]){_4._hasResource["dojo.io.iframe"]=true;_4.provide("dojo.io.iframe");_4.getObject("io",true,_4);_4.io.iframe={create:function(_87,_88,uri){if(window[_87]){return window[_87];}if(window.frames[_87]){return window.frames[_87];}var _89=null;var _8a=uri;if(!_8a){if(_4.config["useXDomain"]&&!_4.config["dojoBlankHtmlUrl"]){console.warn("dojo.io.iframe.create: When using cross-domain Dojo builds,"+" please save dojo/resources/blank.html to your domain and set djConfig.dojoBlankHtmlUrl"+" to the path on your domain to blank.html");}_8a=(_4.config["dojoBlankHtmlUrl"]||_4.moduleUrl("dojo","resources/blank.html"));}var _89=_4.place("<iframe id=\""+_87+"\" name=\""+_87+"\" src=\""+_8a+"\" onload=\""+_88+"\" style=\"position: absolute; left: 1px; top: 1px; height: 1px; width: 1px; visibility: hidden\">",_4.body());window[_87]=_89;return _89;},setSrc:function(_8b,src,_8c){try{if(!_8c){if(_4.isWebKit){_8b.location=src;}else{frames[_8b.name].location=src;}}else{var _8d;if(_4.isIE||_4.isWebKit){_8d=_8b.contentWindow.document;}else{_8d=_8b.contentWindow;}if(!_8d){_8b.location=src;return;}else{_8d.location.replace(src);}}}catch(e){console.log("dojo.io.iframe.setSrc: ",e);}},doc:function(_8e){var doc=_8e.contentDocument||(((_8e.name)&&(_8e.document)&&(_4.doc.getElementsByTagName("iframe")[_8e.name].contentWindow)&&(_4.doc.getElementsByTagName("iframe")[_8e.name].contentWindow.document)))||((_8e.name)&&(_4.doc.frames[_8e.name])&&(_4.doc.frames[_8e.name].document))||null;return doc;},send:function(_8f){if(!this["_frame"]){this._frame=this.create(this._iframeName,_4._scopeName+".io.iframe._iframeOnload();");}var dfd=_4._ioSetArgs(_8f,function(dfd){dfd.canceled=true;dfd.ioArgs._callNext();},function(dfd){var _90=null;try{var _91=dfd.ioArgs;var dii=_4.io.iframe;var ifd=dii.doc(dii._frame);var _92=_91.handleAs;_90=ifd;if(_92!="html"){if(_92=="xml"){if(_4.isIE<9||(_4.isIE&&_4.isQuirks)){_4.query("a",dii._frame.contentWindow.document.documentElement).orphan();var _93=(dii._frame.contentWindow.document).documentElement.innerText;_93=_93.replace(/>\s+</g,"><");_93=_4.trim(_93);var _94={responseText:_93};_90=_4._contentHandlers["xml"](_94);}}else{_90=ifd.getElementsByTagName("textarea")[0].value;if(_92=="json"){_90=_4.fromJson(_90);}else{if(_92=="javascript"){_90=_4.eval(_90);}}}}}catch(e){_90=e;}finally{_91._callNext();}return _90;},function(_95,dfd){dfd.ioArgs._hasError=true;dfd.ioArgs._callNext();return _95;});dfd.ioArgs._callNext=function(){if(!this["_calledNext"]){this._calledNext=true;_4.io.iframe._currentDfd=null;_4.io.iframe._fireNextRequest();}};this._dfdQueue.push(dfd);this._fireNextRequest();_4._ioWatch(dfd,function(dfd){return !dfd.ioArgs["_hasError"];},function(dfd){return (!!dfd.ioArgs["_finished"]);},function(dfd){if(dfd.ioArgs._finished){dfd.callback(dfd);}else{dfd.errback(new Error("Invalid dojo.io.iframe request state"));}});return dfd;},_currentDfd:null,_dfdQueue:[],_iframeName:_4._scopeName+"IoIframe",_fireNextRequest:function(){try{if((this._currentDfd)||(this._dfdQueue.length==0)){return;}do{var dfd=this._currentDfd=this._dfdQueue.shift();}while(dfd&&dfd.canceled&&this._dfdQueue.length);if(!dfd||dfd.canceled){this._currentDfd=null;return;}var _96=dfd.ioArgs;var _97=_96.args;_96._contentToClean=[];var fn=_4.byId(_97["form"]);var _98=_97["content"]||{};if(fn){if(_98){var _99=function(_9a,_9b){_4.create("input",{type:"hidden",name:_9a,value:_9b},fn);_96._contentToClean.push(_9a);};for(var x in _98){var val=_98[x];if(_4.isArray(val)&&val.length>1){var i;for(i=0;i<val.length;i++){_99(x,val[i]);}}else{if(!fn[x]){_99(x,val);}else{fn[x].value=val;}}}}var _9c=fn.getAttributeNode("action");var _9d=fn.getAttributeNode("method");var _9e=fn.getAttributeNode("target");if(_97["url"]){_96._originalAction=_9c?_9c.value:null;if(_9c){_9c.value=_97.url;}else{fn.setAttribute("action",_97.url);}}if(!_9d||!_9d.value){if(_9d){_9d.value=(_97["method"])?_97["method"]:"post";}else{fn.setAttribute("method",(_97["method"])?_97["method"]:"post");}}_96._originalTarget=_9e?_9e.value:null;if(_9e){_9e.value=this._iframeName;}else{fn.setAttribute("target",this._iframeName);}fn.target=this._iframeName;_4._ioNotifyStart(dfd);fn.submit();}else{var _9f=_97.url+(_97.url.indexOf("?")>-1?"&":"?")+_96.query;_4._ioNotifyStart(dfd);this.setSrc(this._frame,_9f,true);}}catch(e){dfd.errback(e);}},_iframeOnload:function(){var dfd=this._currentDfd;if(!dfd){this._fireNextRequest();return;}var _a0=dfd.ioArgs;var _a1=_a0.args;var _a2=_4.byId(_a1.form);if(_a2){var _a3=_a0._contentToClean;for(var i=0;i<_a3.length;i++){var key=_a3[i];for(var j=0;j<_a2.childNodes.length;j++){var _a4=_a2.childNodes[j];if(_a4.name==key){_4.destroy(_a4);break;}}}if(_a0["_originalAction"]){_a2.setAttribute("action",_a0._originalAction);}if(_a0["_originalTarget"]){_a2.setAttribute("target",_a0._originalTarget);_a2.target=_a0._originalTarget;}}_a0._finished=true;}};}if(!_4._hasResource["esri.layers.FeatureLayer"]){_4._hasResource["esri.layers.FeatureLayer"]=true;_4.provide("esri.layers.FeatureLayer");_4.declare("esri.layers.FeatureLayer",esri.layers.GraphicsLayer,{constructor:function(url,_a5){this._outFields=_a5&&_a5.outFields;this._loadCallback=_a5&&_a5.loadCallback;var _a6=_a5&&_a5._usePatch;this._usePatch=(_a6===null||_a6===undefined)?true:_a6;this._trackIdField=_a5&&_a5.trackIdField;this.objectIdField=_a5&&_a5.objectIdField;this._maxOffset=_a5&&_a5.maxAllowableOffset;this._optEditable=_a5&&_a5.editable;this.useMapTime=(_a5&&_a5.hasOwnProperty("useMapTime"))?(!!_a5.useMapTime):true;this._selectedFeatures={};this._selectedFeaturesArr=[];this._newFeatures=[];this._deletedFeatures={};this._ulid=this._getUniqueId();var _a7=this.constructor,_a8=this.mode=(esri._isDefined(_a5&&_a5.mode)?_a5.mode:_a7.MODE_ONDEMAND);switch(_a8){case _a7.MODE_SNAPSHOT:this._mode=new esri.layers._SnapshotMode(this);this._isSnapshot=true;break;case _a7.MODE_ONDEMAND:this._tileWidth=(_a5&&_a5.tileWidth)||512;this._tileHeight=(_a5&&_a5.tileHeight)||512;this._mode=new esri.layers._OnDemandMode(this);break;case _a7.MODE_SELECTION:this._mode=new esri.layers._SelectionMode(this);this._isSelOnly=true;break;}this._initLayer=_4.hitch(this,this._initLayer);this._selectHandler=_4.hitch(this,this._selectHandler);if(_4.isObject(url)&&url.layerDefinition){var _a9=url;this._collection=true;this._editable=true;this.mode=_a7.MODE_SNAPSHOT;this._initLayer(_a9);return this;}this._task=new esri.tasks.QueryTask(this.url);var _aa=this._url.path;this._editable=this._fserver=false;if(_aa.search(/\/FeatureServer\//i)!==-1){this._fserver=true;}var _ab=_a5&&_a5.resourceInfo;if(_ab){this._initLayer(_ab);}else{esri.request({url:_aa,content:_4.mixin({f:"json"},this._url.query),callbackParamName:"callback",load:this._initLayer,error:this._errorHandler});}},_initLayer:function(_ac,io){if(_ac||io){this._json=_ac;if(this._collection){this._mode=new esri.layers._SnapshotMode(this);this._isSnapshot=true;this._featureSet=_ac.featureSet;this._nextId=_ac.nextObjectId;_ac=_ac.layerDefinition;}else{if(_ac.hasOwnProperty("capabilities")){var _ad=(this.capabilities=_ac.capabilities);if(_ad&&_ad.toLowerCase().indexOf("editing")!==-1){this._editable=true;}}else{this._editable=this._fserver;}}if(esri._isDefined(this._optEditable)){this._editable=this._optEditable;delete this._optEditable;}this._json=_4.toJson(this._json);if(this._editable){delete this._maxOffset;}this.minScale=_ac.minScale||0;this.maxScale=_ac.maxScale||0;this.layerId=_ac.id;this.name=_ac.name;this.description=_ac.description;this.copyright=_ac.copyrightText;this.type=_ac.type;this.geometryType=_ac.geometryType;this.displayField=_ac.displayField;this.defaultDefinitionExpression=_ac.definitionExpression;this.fullExtent=new esri.geometry.Extent(_ac.extent);this._isTable=(this.type==="Table");var _ae=this.fields=[];var _af=_ac.fields;for(var i=0;i<_af.length;i++){_ae.push(new esri.layers.Field(_af[i]));}if(!this.objectIdField){this.objectIdField=_ac.objectIdField;if(!this.objectIdField){var _af=_ac.fields;for(var i=0;i<_af.length;i++){var _b0=_af[i];if(_b0.type==="esriFieldTypeOID"){this.objectIdField=_b0.name;break;}}}if(!this.objectIdField){console.debug("esri.layers.FeatureLayer: "+esri.substitute({url:this.url},esri.bundle.layers.FeatureLayer.noOIDField));}}if(!esri._isDefined(this._nextId)){var _b1=this.objectIdField,_b2=-1;if(this._collection&&_b1){var _b3=this._featureSet,_b4=_b3&&_b3.features,i,il,oid,_b5;for(i=0,il=_b4?_b4.length:0;i<il;i++){_b5=_b4[i].attributes;oid=_b5&&_b5[_b1];if(oid>_b2){_b2=oid;}}}this._nextId=(_b2+1);}this.globalIdField=_ac.globalIdField;this.typeIdField=_ac.typeIdField;this.visibilityField=_ac.visibilityField;var _b6=_ac.defaultSymbol;if(_b6){this.defaultSymbol=esri.symbol.fromJson(_b6);}var _b7=this.types=[];var _b8=_ac.types;if(_b8){for(var i=0;i<_b8.length;i++){_b7.push(new esri.layers.FeatureType(_b8[i]));}}var _b9=_ac.templates;var _ba=this.templates=[];if(_b9){for(var i=0;i<_b9.length;i++){_ba.push(new esri.layers.FeatureTemplate(_b9[i]));}}var _bb=_ac.timeInfo;if(_bb){this.timeInfo=new esri.layers.TimeInfo(_bb);this._startTimeField=_bb.startTimeField;this._endTimeField=_bb.endTimeField;if(this._startTimeField&&this._endTimeField){this._twoTimeFields=true;}if(this._trackIdField){_bb.trackIdField=this._trackIdField;}else{this._trackIdField=_bb.trackIdField;}}this.relationships=_ac.relationships;this.hasAttachments=(!this._collection&&_ac.hasAttachments)?true:false;this.htmlPopupType=_ac.htmlPopupType;var _bc=_ac.drawingInfo;if(!this.renderer){if(_bc&&_bc.renderer){var _bd=_bc.renderer;this.setRenderer(esri.renderer.fromJson(_bd));if(_bd.type==="classBreaks"){this.renderer._setMaxInclusiveness(true);}if(!this._collection){var _be=_bd.type,_bd=this.renderer,_bf=[];switch(_be){case "simple":_bf.push(_bd.symbol);break;case "uniqueValue":case "classBreaks":_bf.push(_bd.defaultSymbol);_bf=_bf.concat(_4.map(_bd.infos,function(_c0){return _c0.symbol;}));break;}_bf=_4.filter(_bf,esri._isDefined);var _c1=this._url.path+"/images/",_c2=this._getToken();_4.forEach(_bf,function(sym){var url=sym.url;if(url){if((url.search(/https?\:/)===-1)&&(url.indexOf("data:")===-1)){sym.url=_c1+url;}if(_c2&&sym.url.search(/https?\:/)!==-1){sym.url+=("?token="+_c2);}}});}}else{if(_b6){var _b8=this.types,_bd;if(_b8.length>0){_bd=new esri.renderer.UniqueValueRenderer(this.defaultSymbol,this.typeIdField);_4.forEach(_b8,function(_c3){_bd.addValue(_c3.id,_c3.symbol);});}else{_bd=new esri.renderer.SimpleRenderer(this.defaultSymbol);}this.setRenderer(_bd);}else{if(!this._isTable){var _c4;switch(this.geometryType){case "esriGeometryPoint":case "esriGeometryMultipoint":_c4=new esri.symbol.SimpleMarkerSymbol();break;case "esriGeometryPolyline":_c4=new esri.symbol.SimpleLineSymbol();break;case "esriGeometryPolygon":_c4=new esri.symbol.SimpleFillSymbol();break;}this.setRenderer(_c4?new esri.renderer.SimpleRenderer(_c4):null);}}}}var _c5=(_bc&&_bc.transparency)||0;if(!esri._isDefined(this.opacity)&&_c5>0){this.opacity=1-(_c5/100);}this.version=_ac.currentVersion;if(!this.version){var ver;if("capabilities" in _ac||"drawingInfo" in _ac||"hasAttachments" in _ac||"htmlPopupType" in _ac||"relationships" in _ac||"timeInfo" in _ac||"typeIdField" in _ac||"types" in _ac){ver=10;}else{ver=9.3;}this.version=ver;}if((_4.isIE||_4.isSafari)&&this._editable&&this.version<10.02){this._ts=true;}this.loaded=true;this._fixRendererFields();this._checkFields();if(this._collection){this._fireUpdateStart();var _b3=this._featureSet;delete this._featureSet;this._mode._drawFeatures(new esri.tasks.FeatureSet(_b3));this._fcAdded=true;}this.onLoad(this);var _c6=this._loadCallback;if(_c6){delete this._loadCallback;_c6(this);}}},setRenderer:function(ren){this.inherited("setRenderer",arguments);var _c7=this.renderer;if(_c7){this._ager=(_c7.declaredClass.indexOf("TemporalRenderer")!==-1&&_c7.observationAger&&_c7.observationRenderer);var _c8=_4.filter([_c7,_c7.observationRenderer,_c7.latestObservationRenderer,_c7.trackRenderer],esri._isDefined);var _c9=[];_4.forEach(_c8,function(rnd){_c9.push(rnd.attributeField);_c9.push(rnd.attributeField2);_c9.push(rnd.attributeField3);},this);this._rendererFields=_4.filter(_c9,esri._isDefined);}else{this._ager=false;this._rendererFields=[];}if(this.loaded&&this._rendererFields.length>0){this._fixRendererFields();this._checkFields(this._rendererFields);}if(this.loaded&&this._collection){this._typesDirty=true;}},_setMap:function(map,_ca){this._map=map;this._toggleTime(true);var div=this.inherited("_setMap",arguments);this.clearSelection();var _cb=this.renderer;if(this.timeInfo){if(this._trackIdField||(_cb&&(_cb.latestObservationRenderer||_cb.trackRenderer))){this._trackManager=new esri.layers._TrackManager(this);this._trackManager.initialize(map);}}if(this.minScale!==0||this.maxScale!==0){this._zoomConnect=_4.connect(map,"onZoomEnd",this,this._updateStatus);}var _cc=this._mode;if(_cc){_cc.initialize(map);}return div;},_unsetMap:function(map,_cd){var _ce=this._mode;if(_ce){_ce.destroy();this._mode=null;}if(this._trackManager){this._trackManager.destroy();this._trackManager=null;}_4.disconnect(this._zoomConnect);this._toggleTime(false);this.inherited("_unsetMap",arguments);},refresh:function(){var _cf=this._mode;if(_cf){_cf.refresh();}},isEditable:function(){return this._editable;},setMaxAllowableOffset:function(_d0){if(!this._editable){this._maxOffset=_d0;}return this;},setDefinitionExpression:function(_d1){this._defnExpr=_d1;var _d2=this._mode;if(_d2){_d2.propertyChangeHandler(1);}return this;},getDefinitionExpression:function(){return this._defnExpr;},setTimeDefinition:function(_d3){if(this._isSnapshot){this._timeDefn=_d3;var _d4=this._mode;if(_d4){_d4.propertyChangeHandler(2);}}return this;},getTimeDefinition:function(){return this._timeDefn;},setTimeOffset:function(_d5,_d6){this._timeOffset=_d5;this._timeOffsetUnits=_d6;var _d7=this._mode;if(_d7){_d7.propertyChangeHandler(0);}return this;},setUseMapTime:function(use){this.useMapTime=use;this._toggleTime(!this._suspended);var _d8=this._mode;if(_d8){_d8.propertyChangeHandler(0);}},selectFeatures:function(_d9,_da,_db,_dc){_da=_da||this.constructor.SELECTION_NEW;var _dd=this._getShallowClone(_d9),map=this._map,dfd=esri._fixDfd(new _4.Deferred(esri._dfdCanceller));_dd.outFields=this._getOutFields();_dd.returnGeometry=true;if(map){_dd.outSpatialReference=new esri.SpatialReference(map.spatialReference.toJson());}if(!this._applyQueryFilters(_dd)){var _de={features:[]};this._selectHandler(_de,_da,_db,_dc,dfd);return dfd;}var _df=this._canDoClientSideQuery(_dd);if(_df){var _de={features:this._doQuery(_dd,_df)};this._selectHandler(_de,_da,_db,_dc,dfd);return dfd;}else{if(this._collection){var err=new Error("FeatureLayer::selectFeatures - "+esri.bundle.layers.FeatureLayer.invalidParams);this._resolve([err],null,_dc,dfd,true);return dfd;}var _e0=this;if(this._ts){_dd._ts=(new Date()).getTime();}var _e1=dfd._pendingDfd=this._task.execute(_dd);_e1.addCallbacks(function(_e2){_e0._selectHandler(_e2,_da,_db,_dc,dfd);},function(err){_e0._resolve([err],null,_dc,dfd,true);});return dfd;}},getSelectedFeatures:function(){var _e3=this._selectedFeatures,_e4=[];for(var _e5 in _e3){if(_e3.hasOwnProperty(_e5)){_e4.push(_e3[_e5]);}}return _e4;},clearSelection:function(_e6){var _e7=this._selectedFeatures,_e8=this._mode;for(var _e9 in _e7){if(_e7.hasOwnProperty(_e9)){this._unSelectFeatureIIf(_e9,_e8);_e8._removeFeatureIIf(_e9);}}this._selectedFeatures={};if(this._isSelOnly){_e8._applyTimeFilter(true);}if(!_e6){this.onSelectionClear();}return this;},setSelectionSymbol:function(_ea){this._selectionSymbol=_ea;if(_ea){var _eb=this._selectedFeatures;for(var _ec in _eb){if(_eb.hasOwnProperty(_ec)){_eb[_ec].setSymbol(_ea);}}}return this;},getSelectionSymbol:function(){return this._selectionSymbol;},__msigns:[{n:"applyEdits",c:5,a:[{i:0},{i:1}],e:4,f:1}],applyEdits:function(_ed,_ee,_ef,_f0,_f1,_f2){var _f3=_f2.assembly,dfd=_f2.dfd;this._applyNormalized(_ed,_f3&&_f3[0]);this._applyNormalized(_ee,_f3&&_f3[1]);this.onBeforeApplyEdits(_ed,_ee,_ef);var _f4={},_f5=this.objectIdField,_f6={f:"json"},_f7=false;if(this._collection){var _f8={};_f8.addResults=_ed?_4.map(_ed,function(){_f7=true;return {objectId:this._nextId++,success:true};},this):null;_f8.updateResults=_ee?_4.map(_ee,function(_f9){_f7=true;var oid=_f9.attributes[_f5];_f4[oid]=_f9;return {objectId:oid,success:true};},this):null;_f8.deleteResults=_ef?_4.map(_ef,function(_fa){_f7=true;return {objectId:_fa.attributes[_f5],success:true};},this):null;if(_f7){this._editHandler(_f8,_ed,_f4,_f0,_f1,dfd);}return;}if(_ed&&_ed.length>0){_f6.adds=this._convertFeaturesToJson(_ed);_f7=true;}if(_ee&&_ee.length>0){for(var i=0;i<_ee.length;i++){var _fb=_ee[i];_f4[_fb.attributes[_f5]]=_fb;}_f6.updates=this._convertFeaturesToJson(_ee);_f7=true;}if(_ef&&_ef.length>0){var ids=[];for(var i=0;i<_ef.length;i++){ids.push(_ef[i].attributes[_f5]);}_f6.deletes=ids.join(",");_f7=true;}if(_f7){var _fc=this;return esri.request({url:this._url.path+"/applyEdits",content:_4.mixin(_f6,this._url.query),callbackParamName:"callback",load:function(_fd){_fc._editHandler(_fd,_ed,_f4,_f0,_f1,dfd);},error:function(err){_fc._resolve([err],null,_f1,dfd,true);}},{usePost:true});}},queryFeatures:function(_fe,_ff,_100){return this._query("execute","onQueryFeaturesComplete",_fe,_ff,_100);},queryRelatedFeatures:function(_101,_102,_103){return this._query("executeRelationshipQuery","onQueryRelatedFeaturesComplete",_101,_102,_103);},queryIds:function(_104,_105,_106){return this._query("executeForIds","onQueryIdsComplete",_104,_105,_106);},queryCount:function(_107,_108,_109){return this._query("executeForCount","onQueryCountComplete",_107,_108,_109);},queryAttachmentInfos:function(_10a,_10b,_10c){var url=this._url.path+"/"+_10a+"/attachments",dfd=new _4.Deferred(esri._dfdCanceller),self=this;dfd._pendingDfd=esri.request({url:url,content:_4.mixin({f:"json"},this._url.query),callbackParamName:"callback",load:function(_10d){var _10e=_10d.attachmentInfos;_4.forEach(_10e,function(info){info.url=url+"/"+info.id;info.objectId=_10a;});self._resolve([_10e],"onQueryAttachmentInfosComplete",_10b,dfd);},error:function(err){self._resolve([err],null,_10c,dfd,true);}});return dfd;},addAttachment:function(_10f,_110,_111,_112){return this._sendAttachment("add",_10f,_110,_111,_112);},updateAttachment:function(_113,_114,_115,_116,_117){_115.appendChild(_4.create("input",{type:"hidden",name:"attachmentId",value:_114}));return this._sendAttachment("update",_113,_115,_116,_117);},deleteAttachments:function(_118,_119,_11a,_11b){var url=this._url.path+"/"+_118+"/deleteAttachments",dfd=new _4.Deferred(esri._dfdCanceller),self=this,_11c={f:"json",attachmentIds:_119.join(",")};dfd._pendingDfd=esri.request({url:url,content:_4.mixin(_11c,this._url.query),callbackParamName:"callback",load:_4.hitch(this,function(_11d){var _11e=_11d.deleteAttachmentResults;_11e=_4.map(_11e,function(_11f){var res=new esri.layers.FeatureEditResult(_11f);res.attachmentId=res.objectId;res.objectId=_118;return res;});self._resolve([_11e],"onDeleteAttachmentsComplete",_11a,dfd);}),error:function(err){self._resolve([err],null,_11b,dfd,true);}},{usePost:true});return dfd;},addType:function(_120){if(!this._collection){return false;}var _121=this.types;if(_121){var _122=_4.some(_121,function(type,_123){if(type.id==_120.id){return true;}return false;});if(_122){return false;}else{_121.push(_120);}}else{this.types=[_120];}this._typesDirty=true;return true;},deleteType:function(_124){if(!this._collection){return;}var _125=this.types;if(_125){var _126=-1;_4.some(_125,function(type,_127){if(type.id==_124){_126=_127;return true;}return false;});if(_126>-1){this._typesDirty=true;return _125.splice(_126,1)[0];}}},toJson:function(){var _128=this._json,json=_4.isString(_128)?_4.fromJson(_128):_4.clone(_128);if(!json){return;}json=json.layerDefinition?json:{layerDefinition:json};var _129=json.layerDefinition,_12a=this._collection;if(_12a&&this._typesDirty){_129.types=_4.map(this.types||[],function(type){return type.toJson();});var _12b=this.renderer,_12c=_129.drawingInfo;if(_12c&&_12b&&_12b.declaredClass.indexOf("TemporalRenderer")===-1){_12c.renderer=_12b.toJson();}}var _12d=null;if(!(_12a&&!this._fcAdded)){_12d={geometryType:_129.geometryType,features:this._convertFeaturesToJson(this.graphics,true)};}json.featureSet=_4.mixin({},json.featureSet||{},_12d);if(_12a){json.nextObjectId=this._nextId;}return json;},onSelectionComplete:function(){},onSelectionClear:function(){},onBeforeApplyEdits:function(){},onEditsComplete:function(){},onQueryFeaturesComplete:function(){},onQueryRelatedFeaturesComplete:function(){},onQueryIdsComplete:function(){},onQueryCountComplete:function(){},onQueryAttachmentInfosComplete:function(){},onAddAttachmentComplete:function(){},onUpdateAttachmentComplete:function(){},onDeleteAttachmentsComplete:function(){},_counter:{value:0},_getUniqueId:function(){return this._counter.value++;},_getDesiredStatus:function(){return this.visible&&this._isMapAtVisibleScale();},_isMapAtVisibleScale:function(){var _12e=esri.geometry.getScale(this._map);var _12f=this.minScale,_130=this.maxScale,_131=!_12f,_132=!_130;if(!_131&&_12e<=_12f){_131=true;}if(!_132&&_12e>=_130){_132=true;}return (_131&&_132)?true:false;},_suspend:function(){this.inherited("_suspend",arguments);this._toggleTime(false);var mode=this._mode;if(mode){mode.suspend();}},_resume:function(){this.inherited("_resume",arguments);this._toggleTime(true);var mode=this._mode;if(mode){mode.resume();}},_toggleTime:function(_133){var map=this._map;if(_133&&this.timeInfo&&this.useMapTime&&map){this._mapTimeExtent=map.timeExtent;if(!this._timeConnect){this._timeConnect=_4.connect(map,"onTimeExtentChange",this,this._timeChangeHandler);}}else{this._mapTimeExtent=null;_4.disconnect(this._timeConnect);this._timeConnect=null;}},_timeChangeHandler:function(_134){this._mapTimeExtent=_134;var mode=this._mode;if(mode){mode.propertyChangeHandler(0);}},_getOffsettedTE:function(_135){var _136=this._timeOffset,_137=this._timeOffsetUnits;return (_135&&_136&&_137)?_135.offset(-1*_136,_137):_135;},_getTimeOverlap:function(_138,_139){if(_138&&_139){return _138.intersection(_139);}else{return _138||_139;}},_getTimeFilter:function(_13a){var _13b=this.getTimeDefinition(),_13c=null,_13d;if(_13b||_13c){_13d=this._getTimeOverlap(_13b,_13c);if(!_13d){return [false];}}if(_13a){_13a=_13d?this._getTimeOverlap(_13a,_13d):_13a;if(!_13a){return [false];}}else{_13a=_13d;}return [true,_13a];},_getAttributeFilter:function(_13e){var _13f=this.getDefinitionExpression();if(_13e){_13e=_13f?"("+_13f+") AND ("+_13e+")":_13e;}else{_13e=_13f;}return _13e;},_applyQueryFilters:function(_140){_140.where=this._getAttributeFilter(_140.where);_140.maxAllowableOffset=this._maxOffset;if(this.timeInfo){var _141=this._getTimeFilter(_140.timeExtent);if(!_141[0]){return false;}else{_140.timeExtent=_141[1];}}return true;},_isNew:function(_142){var _143=_4.indexOf(this._newFeatures,_142);return _143===-1?false:true;},_isDeleted:function(_144){var _145=_144.attributes,_146=this.objectIdField,oid=_145[_146];return this._deletedFeatures[oid]?true:false;},_add:function(_147){var _148=this._selectionSymbol,attr=_147.attributes,_149=this.visibilityField;if(_148&&this._isSelOnly){_147.setSymbol(_148);}if(_149&&attr&&attr.hasOwnProperty(_149)){_147[attr[_149]?"show":"hide"]();}return this.add.apply(this,arguments);},_remove:function(){return this.remove.apply(this,arguments);},_canDoClientSideQuery:function(_14a){var _14b=[],map=this._map;if(this._isTable||!map){return;}if(_14a.text||(_14a.where&&_14a.where!==this.getDefinitionExpression())){return;}var _14c=this._isSnapshot,_14d=this._isSelOnly;var _14e=_14a.geometry;if(_14e){if(!_14d&&_14a.spatialRelationship===esri.tasks.Query.SPATIAL_REL_INTERSECTS&&(_14e.type==="extent"&&(_14c||map.extent.contains(_14e)))){_14b.push(1);}else{return;}}var ids=_14a.objectIds;if(ids){if(_14c){_14b.push(2);}else{var len=ids.length,mode=this._mode,_14f=0;for(var i=0;i<len;i++){if(mode._getFeature(ids[i])){_14f++;}}if(_14f===len){_14b.push(2);}else{return;}}}if(this.timeInfo){var _150=_14a.timeExtent,_151=this._mapTimeExtent;if(_14c){if(_150){_14b.push(3);}}else{if(_14d){if(_150){return;}}else{if(_151){if(_4.indexOf(_14b,2)!==-1){if(_150){_14b.push(3);}}else{return;}}else{if(_14b.length>0){if(_150){_14b.push(3);}}else{if(_150){return;}}}}}}return _14b.length>0?_14b:null;},_doQuery:function(_152,_153,_154){var _155=[],mode=this._mode,_156=this.objectIdField;if(_4.indexOf(_153,2)!==-1){_155=[];var ids=_152.objectIds,len=ids.length;for(var i=0;i<len;i++){var obj=mode._getFeature(ids[i]);if(obj){_155.push(obj);}}if(_155.length===0){return [];}}if(_4.indexOf(_153,1)!==-1){var _157=_155.length>0?_155:this.graphics,len=_157.length,_158=_152.geometry._normalize(null,true);_155=[];for(var i=0;i<len;i++){var _159=_157[i],_15a=_159.geometry;if(this.normalization&&_158.length){if(_158[0].intersects(_15a)||_158[1].intersects(_15a)){_155.push(_159);}}else{if(_158.intersects(_15a)){_155.push(_159);}}}if(_155.length===0){return [];}}if(_4.indexOf(_153,3)!==-1){if(this.timeInfo){var _157=_155.length>0?_155:this.graphics,time=_152.timeExtent;var _15b=this._filterByTime(_157,time.startTime,time.endTime);_155=_15b.match;}}if(_154){return _4.map(_155,function(obj){return obj.attributes[_156];},this);}else{return _155;}},_filterByTime:function(_15c,_15d,_15e){var _15f=this._startTimeField,_160=this._endTimeField,_161;if(!this._twoTimeFields){_161=_15f||_160;}var _162=esri._isDefined,yea=[],nay=[];_15d=_15d?_15d.getTime():-Infinity;_15e=_15e?_15e.getTime():Infinity;if(_161){for(var i=0,len=_15c.length;i<len;i++){var _163=_15c[i],_164=_163.attributes;var time=_164[_161];if(time>=_15d&&time<=_15e){yea.push(_163);}else{nay.push(_163);}}}else{for(var i=0,len=_15c.length;i<len;i++){var _163=_15c[i],_164=_163.attributes;var _165=_164[_15f],end=_164[_160];_165=_162(_165)?_165:-Infinity;end=_162(end)?end:Infinity;if((_165>=_15d&&_165<=_15e)||(end>=_15d&&end<=_15e)){yea.push(_163);}else{nay.push(_163);}}}return {match:yea,noMatch:nay};},_resolve:function(args,_166,_167,dfd,_168){if(_166){this[_166].apply(this,args);}if(_167){_167.apply(null,args);}if(dfd){esri._resDfd(dfd,args,_168);}},_getShallowClone:function(_169){var _16a=new esri.tasks.Query();for(var prop in _169){if(_169.hasOwnProperty(prop)){_16a[prop]=_169[prop];}}return _16a;},_query:function(type,_16b,_16c,_16d,_16e){var that=this,dfd=new _4.Deferred(esri._dfdCanceller);var _16f=function(_170,_171){if(!_171&&type==="execute"&&!that._isTable){var _172=_170.features,mode=that._mode,_173=that.objectIdField;for(var il=_172.length,i=il-1;i>=0;i--){var oid=_172[i].attributes[_173];var _174=mode._getFeature(oid);if(_174){_172.splice(i,1,_174);}}}that._resolve([_170],_16b,_16d,dfd);};if(type!=="executeRelationshipQuery"){_16c=this._getShallowClone(_16c);_16c.outFields=this._getOutFields();_16c.returnGeometry=true;var map=this._map;if(map){_16c.outSpatialReference=new esri.SpatialReference(map.spatialReference.toJson());}if(!this._applyQueryFilters(_16c)){var _175;switch(type){case "execute":_175=new esri.tasks.FeatureSet({features:[]});break;case "executeForIds":_175=[];break;case "executeForCount":_175=0;break;}_16f(_175,true);return dfd;}var _176=this._canDoClientSideQuery(_16c);if(_176){var _177=this._doQuery(_16c,_176,(type==="executeForIds"||type==="executeForCount"));var _175;switch(type){case "execute":_175=new esri.tasks.FeatureSet();_175.features=_177;break;case "executeForIds":_175=_177;break;case "executeForCount":_175=_177.length;break;}_16f(_175,true);return dfd;}}if(this._collection){var err=new Error("FeatureLayer::_query - "+esri.bundle.layers.FeatureLayer.invalidParams);this._resolve([err],null,_16e,dfd,true);return dfd;}if(this._ts){_16c._ts=(new Date()).getTime();}var temp=dfd._pendingDfd=this._task[type](_16c);temp.addCallbacks(_16f,function(err){that._resolve([err],null,_16e,dfd,true);});return dfd;},_convertFeaturesToJson:function(_178,_179){var json=[],_17a=this._selectionSymbol,_17b=this.visibilityField;for(var i=0;i<_178.length;i++){var _17c=_178[i],_17d={},_17e=_17c.geometry,attr=_17c.attributes,_17f=_17c.symbol;if(_17e){_17d.geometry=_17e.toJson();}if(_17b){_17d.attributes=attr=_4.mixin({},attr);attr[_17b]=_17c.visible?1:0;}else{if(attr){_17d.attributes=_4.mixin({},attr);}}if(_17f&&(_17f!==_17a)){_17d.symbol=_17f.toJson();}json.push(_17d);}return _179?json:_4.toJson(json);},_selectHandler:function(_180,_181,_182,_183,dfd){var _184,ctor=this.constructor;switch(_181){case ctor.SELECTION_NEW:this.clearSelection(true);_184=true;break;case ctor.SELECTION_ADD:_184=true;break;case ctor.SELECTION_SUBTRACT:_184=false;break;}var _185=_180.features,mode=this._mode,_186=[],_187=this.objectIdField;if(_184){for(var i=0;i<_185.length;i++){var _188=_185[i];var oid=_188.attributes[_187];var _189=mode._addFeatureIIf(oid,_188);_186.push(_189);this._selectFeatureIIf(oid,_189,mode);}}else{for(var i=0;i<_185.length;i++){var _188=_185[i];var oid=_188.attributes[_187];this._unSelectFeatureIIf(oid,mode);var _18a=mode._removeFeatureIIf(oid);_186.push(_18a||_188);}}if(this._isSelOnly){mode._applyTimeFilter(true);}this._resolve([_186,_181],"onSelectionComplete",_182,dfd);},_selectFeatureIIf:function(oid,_18b,mode){var _18c=this._selectedFeatures,_18d=_18c[oid];if(!_18d){mode._incRefCount(oid);_18c[oid]=_18b;if(!this._isTable){this._setSelectSymbol(_18b);}}return _18d||_18b;},_unSelectFeatureIIf:function(oid,mode){var _18e=this._selectedFeatures[oid];if(_18e){mode._decRefCount(oid);delete this._selectedFeatures[oid];if(!this._isTable){this._setUnSelectSymbol(_18e);}}return _18e;},_isSelected:function(_18f){},_setSelectSymbol:function(_190){var _191=this._selectionSymbol;if(_191&&!this._isSelOnly){_190.setSymbol(_191);}},_setUnSelectSymbol:function(_192){var _193=this._selectionSymbol;if(_193&&!this._isSelOnly){if(_193===_192.symbol){_192.setSymbol(null,true);}}},_getOutFields:function(){var _194=_4.filter([this.objectIdField,this.typeIdField,this._startTimeField,this._endTimeField,this._trackIdField].concat(this._rendererFields),function(_195,_196,arr){return !!_195&&(_4.indexOf(arr,_195)===_196);});var _197=_4.clone(this._outFields);if(_197){if(_4.indexOf(_197,"*")!==-1){return _197;}_4.forEach(_194,function(_198){if(_4.indexOf(_197,_198)===-1){_197.push(_198);}});return _197;}else{return _194;}},_checkFields:function(_199){var _19a=_199||this._getOutFields();_4.forEach(_19a,function(_19b){if(_19b==="*"){return;}if(!this._getField(_19b)){console.debug("esri.layers.FeatureLayer: "+esri.substitute({url:this.url,field:_19b},esri.bundle.layers.FeatureLayer.fieldNotFound));}},this);if(!_199&&!this._isTable&&!this._fserver&&!this._collection){var _19c=_4.some(this.fields,function(_19d){return (_19d&&_19d.type==="esriFieldTypeGeometry")?true:false;});if(!_19c){console.debug("esri.layers.FeatureLayer: "+esri.substitute({url:this.url},esri.bundle.layers.FeatureLayer.noGeometryField));}}},_fixRendererFields:function(){var _19e=this.renderer;if(_19e&&this.fields.length>0){var _19f=_4.filter([_19e,_19e.observationRenderer,_19e.latestObservationRenderer,_19e.trackRenderer],esri._isDefined);var _1a0=[];_4.forEach(_19f,function(rnd){var _1a1,_1a2;_1a2=rnd.attributeField;if(_1a2){_1a1=!this._getField(_1a2)&&this._getField(_1a2,true);if(_1a1){rnd.attributeField=_1a1.name;}}_1a2=rnd.attributeField2;if(_1a2){_1a1=!this._getField(_1a2)&&this._getField(_1a2,true);if(_1a1){rnd.attributeField2=_1a1.name;}}_1a2=rnd.attributeField3;if(_1a2){_1a1=!this._getField(_1a2)&&this._getField(_1a2,true);if(_1a1){rnd.attributeField3=_1a1.name;}}_1a0.push(rnd.attributeField);_1a0.push(rnd.attributeField2);_1a0.push(rnd.attributeField3);},this);this._rendererFields=_4.filter(_1a0,esri._isDefined);}},_getField:function(_1a3,_1a4){var _1a5=this.fields;if(_1a5.length===0){return null;}var _1a6;if(_1a4){_1a3=_1a3.toLowerCase();}_4.some(_1a5,function(_1a7){var _1a8=false;if(_1a4){_1a8=(_1a7&&_1a7.name.toLowerCase()===_1a3)?true:false;}else{_1a8=(_1a7&&_1a7.name===_1a3)?true:false;}if(_1a8){_1a6=_1a7;}return _1a8;});return _1a6;},_getDateOpts:function(){if(!this._dtOpts){var _1a9=_4.map(_4.filter(this.fields,function(_1aa){return !!(_1aa&&_1aa.type==="esriFieldTypeDate");}),function(_1ab){return _1ab.name;});this._dtOpts={properties:_1a9};}return this._dtOpts;},_applyNormalized:function(_1ac,_1ad){if(_1ac&&_1ad){_4.forEach(_1ac,function(_1ae,_1af){if(_1ae&&_1ad[_1af]){_1ae.setGeometry(_1ad[_1af]);}});}},_editHandler:function(_1b0,adds,_1b1,_1b2,_1b3,dfd){var _1b4=_1b0.addResults,_1b5=_1b0.updateResults,_1b6=_1b0.deleteResults;var mode=this._mode;var _1b7=this._isTable;if(_1b4){for(var i=0;i<_1b4.length;i++){_1b4[i]=new esri.layers.FeatureEditResult(_1b4[i]);if(_1b7){continue;}var _1b8=_1b4[i];if(_1b8.success){var oid=_1b8.objectId,_1b9=adds[i],gl=_1b9._graphicsLayer;if(gl&&gl!==this){gl.remove(_1b9);}var attr=_1b9.attributes||{},_1ba=this.objectIdField;attr[_1ba]=oid;_1b9.setAttributes(attr);mode.drawFeature(_1b9);}}}if(_1b5){for(var i=0;i<_1b5.length;i++){_1b5[i]=new esri.layers.FeatureEditResult(_1b5[i]);if(_1b7){continue;}var _1b8=_1b5[i];if(_1b8.success){var oid=_1b8.objectId;var _1b9=_1b1[oid];var _1bb=mode._getFeature(oid);if(_1bb){if(_1bb.geometry!==_1b9.geometry){_1bb.setGeometry(esri.geometry.fromJson(_1b9.geometry.toJson()));}this._repaint(_1bb,oid);}}}}if(_1b6){var _1bc=[];for(var i=0;i<_1b6.length;i++){_1b6[i]=new esri.layers.FeatureEditResult(_1b6[i]);if(_1b7){continue;}var _1b8=_1b6[i];if(_1b8.success){var oid=_1b8.objectId;var _1b9=mode._getFeature(oid);if(_1b9){if(this._unSelectFeatureIIf(oid,mode)){_1bc.push(_1b9);}_1b9._count=0;mode._removeFeatureIIf(oid);}}}if(_1bc.length>0){this.onSelectionComplete(_1bc,this.constructor.SELECTION_SUBTRACT);}}this._resolve([_1b4,_1b5,_1b6],"onEditsComplete",_1b2,dfd);},_sendAttachment:function(type,_1bd,_1be,_1bf,_1c0){var _1c1=(type==="add")?"addAttachment":"updateAttachment";var url=this._url.path+"/"+_1bd+"/"+_1c1;_1be.enctype="multipart/form-data";if(_4.isIE<9){_1be.encoding="multipart/form-data";}_1be.method="post";var _1c2=_1be.elements;if(!_4.some(_1c2,function(el){return el.name==="f";})){_1be.appendChild(_4.create("input",{type:"hidden",name:"f",value:"json"}));}if(!_4.some(_1c2,function(el){return el.name==="callback.html";})){_1be.appendChild(_4.create("input",{type:"hidden",name:"callback.html",value:"textarea"}));}var _1c3=this._getToken();if(_1c3&&!_4.some(_1c2,function(el){return el.name==="token";})){_1be.appendChild(_4.create("input",{type:"hidden",name:"token",value:_1c3}));}var dfd=new _4.Deferred(esri._dfdCanceller),self=this,_1c4=function(_1c5){if(!(_1c5 instanceof Error)){_1c5=_4.mixin(new Error(),_1c5);}self._resolve([_1c5],null,_1c0,dfd,true);},_1c6=(esri.config.defaults.io.alwaysUseProxy||!esri._hasSameOrigin(url,window.location.href))?esri._getProxyUrl():null;dfd._pendingDfd=_4.io.iframe.send({url:(_1c6?(_1c6.path+"?"):"")+url+"?callback.html=textarea",form:_1be,handleAs:"json",load:_4.hitch(this,function(_1c7,io){var _1c8=_1c7.error;if(_1c8){_1c4(_1c8);return;}var _1c9=(type==="add")?"addAttachmentResult":"updateAttachmentResult";var _1ca=(type==="add")?"onAddAttachmentComplete":"onUpdateAttachmentComplete";var _1cb=new esri.layers.FeatureEditResult(_1c7[_1c9]);_1cb.attachmentId=_1cb.objectId;_1cb.objectId=_1bd;self._resolve([_1cb],_1ca,_1bf,dfd);}),error:_1c4});return dfd;},_repaint:function(_1cc,oid,_1cd){oid=esri._isDefined(oid)?oid:_1cc.attributes[this.objectIdField];if(!(oid in this._selectedFeatures)||!this._selectionSymbol){_1cc.setSymbol(_1cc.symbol,_1cd);}},_getKind:function(_1ce){var _1cf=this._trackManager;if(_1cf){return _1cf.isLatestObservation(_1ce)?1:0;}return 0;}});_4.mixin(esri.layers.FeatureLayer,{MODE_SNAPSHOT:0,MODE_ONDEMAND:1,MODE_SELECTION:2,SELECTION_NEW:3,SELECTION_ADD:4,SELECTION_SUBTRACT:5,POPUP_NONE:"esriServerHTMLPopupTypeNone",POPUP_HTML_TEXT:"esriServerHTMLPopupTypeAsHTMLText",POPUP_URL:"esriServerHTMLPopupTypeAsURL"});esri._createWrappers("esri.layers.FeatureLayer");_4.declare("esri.layers.FeatureType",null,{constructor:function(json){if(json&&_4.isObject(json)){this.id=json.id;this.name=json.name;var _1d0=json.symbol;if(_1d0){this.symbol=esri.symbol.fromJson(_1d0);}var _1d1=json.domains;var _1d2=this.domains={};for(var _1d3 in _1d1){if(_1d1.hasOwnProperty(_1d3)){var _1d4=_1d1[_1d3];switch(_1d4.type){case "range":_1d2[_1d3]=new esri.layers.RangeDomain(_1d4);break;case "codedValue":_1d2[_1d3]=new esri.layers.CodedValueDomain(_1d4);break;case "inherited":_1d2[_1d3]=new esri.layers.InheritedDomain(_1d4);break;}}}var _1d5=json.templates;if(_1d5){var _1d6=this.templates=[];for(var i=0;i<_1d5.length;i++){_1d6.push(new esri.layers.FeatureTemplate(_1d5[i]));}}}},toJson:function(){var json={id:this.id,name:this.name,symbol:this.symbol&&this.symbol.toJson()};var _1d7=this.domains,_1d8=this.templates,_1d9=esri._sanitize;if(_1d7){var _1da=json.domains={};for(var _1db in _1d7){if(_1d7.hasOwnProperty(_1db)){_1da[_1db]=_1d7[_1db]&&_1d7[_1db].toJson();}}_1d9(_1da);}if(_1d8){json.templates=_4.map(_1d8,function(_1dc){return _1dc.toJson();});}return _1d9(json);}});_4.declare("esri.layers.FeatureTemplate",null,{constructor:function(json){if(json&&_4.isObject(json)){this.name=json.name;this.description=json.description;this.drawingTool=json.drawingTool;var _1dd=json.prototype;this.prototype=new esri.Graphic(_1dd.geometry,null,_1dd.attributes);}},toJson:function(){return esri._sanitize({name:this.name,description:this.description,drawingTool:this.drawingTool,prototype:this.prototype&&this.prototype.toJson()});}});_4.mixin(esri.layers.FeatureTemplate,{TOOL_AUTO_COMPLETE_POLYGON:"esriFeatureEditToolAutoCompletePolygon",TOOL_CIRCLE:"esriFeatureEditToolCircle",TOOL_ELLIPSE:"esriFeatureEditToolEllipse",TOOL_FREEHAND:"esriFeatureEditToolFreehand",TOOL_LINE:"esriFeatureEditToolLine",TOOL_NONE:"esriFeatureEditToolNone",TOOL_POINT:"esriFeatureEditToolPoint",TOOL_POLYGON:"esriFeatureEditToolPolygon",TOOL_RECTANGLE:"esriFeatureEditToolRectangle",TOOL_ARROW:"esriFeatureEditToolArrow",TOOL_TRIANGLE:"esriFeatureEditToolTriangle",TOOL_LEFT_ARROW:"esriFeatureEditToolLeftArrow",TOOL_RIGHT_ARROW:"esriFeatureEditToolRightArrow",TOOL_UP_ARROW:"esriFeatureEditToolUpArrow",TOOL_DOWN_ARROW:"esriFeatureEditToolDownArrow"});_4.declare("esri.layers.FeatureEditResult",null,{constructor:function(json){if(json&&_4.isObject(json)){this.objectId=json.objectId;this.success=json.success;if(!json.success){var err=json.error;this.error=new Error();this.error.code=err.code;this.error.message=err.description;}}}});_4.declare("esri.layers._RenderMode",null,{constructor:function(){this._prefix="jsonp_"+(_4._scopeName||"dojo")+"IoScript";},initialize:function(map){},propertyChangeHandler:function(type){},destroy:function(){},drawFeature:function(_1de){},suspend:function(){},resume:function(){},refresh:function(){},_incRefCount:function(oid){var _1df=this._featureMap[oid];if(_1df){_1df._count++;}},_decRefCount:function(oid){var _1e0=this._featureMap[oid];if(_1e0){_1e0._count--;}},_getFeature:function(oid){return this._featureMap[oid];},_addFeatureIIf:function(oid,_1e1){var fmap=this._featureMap,_1e2=fmap[oid],_1e3=this.featureLayer;if(!_1e2){fmap[oid]=_1e1;_1e3._add(_1e1);_1e1._count=0;}return _1e2||_1e1;},_removeFeatureIIf:function(oid){var _1e4=this._featureMap[oid],_1e5=this.featureLayer;if(_1e4){if(_1e4._count){return;}delete this._featureMap[oid];_1e5._remove(_1e4);}return _1e4;},_clearIIf:function(){var _1e6=this.featureLayer,_1e7=_1e6.graphics,_1e8=_1e6._selectedFeatures,_1e9=_1e6.objectIdField;for(var i=_1e7.length-1;i>=0;i--){var _1ea=_1e7[i];var oid=_1ea.attributes[_1e9];if(oid in _1e8){_1ea._count=1;continue;}_1ea._count=0;this._removeFeatureIIf(oid);}},_isPending:function(id){var dfd=_4.io.script[this._prefix+id];return dfd?true:false;},_cancelPendingRequest:function(dfd,id){dfd=dfd||_4.io.script[this._prefix+id];if(dfd){try{dfd.cancel();_4.io.script._validCheck(dfd);}catch(e){}}},_purgeRequests:function(){_4.io.script._validCheck(null);},_toggleVisibility:function(show){var _1eb=this.featureLayer,_1ec=_1eb.graphics,_1ed=show?"show":"hide";show=show&&_1eb._ager;for(var i=0,len=_1ec.length;i<len;i++){var _1ee=_1ec[i];_1ee[_1ed]();if(show){_1eb._repaint(_1ee);}}},_applyTimeFilter:function(_1ef){var _1f0=this.featureLayer;if(!_1f0.timeInfo||_1f0._suspended){return;}if(!_1ef){_1f0._fireUpdateStart();}var _1f1=_1f0._trackManager;if(_1f1){_1f1.clearTracks();}var defn=_1f0.getTimeDefinition(),_1f2=_1f0._getOffsettedTE(_1f0._mapTimeExtent);if(_1f2){_1f2=_1f0._getTimeOverlap(defn,_1f2);if(_1f2){var _1f3=_1f0._filterByTime(_1f0.graphics,_1f2.startTime,_1f2.endTime);if(_1f1){_1f1.addFeatures(_1f3.match);}_4.forEach(_1f3.match,function(_1f4){var _1f5=_1f4._shape;if(!_1f4.visible){_1f4.show();_1f5=_1f4._shape;_1f5&&_1f5._moveToFront();}if(_1f0._ager&&_1f5){_1f0._repaint(_1f4);}});_4.forEach(_1f3.noMatch,function(_1f6){if(_1f6.visible){_1f6.hide();}});}else{this._toggleVisibility(false);}}else{if(_1f1){_1f1.addFeatures(_1f0.graphics);}this._toggleVisibility(true);}if(_1f1){_1f1.moveLatestToFront();_1f1.drawTracks();}if(!_1ef){_1f0._fireUpdateEnd();}}});_4.declare("esri.layers._SelectionMode",[esri.layers._RenderMode],{constructor:function(_1f7){this.featureLayer=_1f7;this._featureMap={};},initialize:function(map){this.map=map;this._init=true;},propertyChangeHandler:function(type){if(this._init&&type===0){this._applyTimeFilter();}},destroy:function(){this._init=false;},resume:function(){this.propertyChangeHandler(0);}});_4.declare("esri.layers._SnapshotMode",[esri.layers._RenderMode],{constructor:function(_1f8){this.featureLayer=_1f8;this._featureMap={};this._drawFeatures=_4.hitch(this,this._drawFeatures);this._queryErrorHandler=_4.hitch(this,this._queryErrorHandler);},initialize:function(map){this.map=map;var _1f9=this.featureLayer;if(_1f9._collection){this._applyTimeFilter();}else{this._fetchAll();}this._init=true;},propertyChangeHandler:function(type){if(this._init){if(type){this._fetchAll();}else{this._applyTimeFilter();}}},destroy:function(){this._init=false;},drawFeature:function(_1fa){var _1fb=this.featureLayer,_1fc=_1fb.objectIdField,oid=_1fa.attributes[_1fc];if(!_1fb._isDeleted(_1fa)){this._addFeatureIIf(oid,_1fa);this._incRefCount(oid);}},resume:function(){this.propertyChangeHandler(0);},refresh:function(){var _1fd=this.featureLayer;if(_1fd._collection){_1fd._fireUpdateStart();_1fd._refresh(true);_1fd._fireUpdateEnd();}else{this._fetchAll();}},_getRequestId:function(_1fe){var id="_"+_1fe.name+_1fe.layerId+_1fe._ulid;return id.replace(/[^a-zA-Z0-9\_]+/g,"_");},_fetchAll:function(){var _1ff=this.featureLayer;if(_1ff._collection){return;}_1ff._fireUpdateStart();this._clearIIf();this._sendRequest();},_sendRequest:function(){var map=this.map,_200=this.featureLayer,_201=_200.getDefinitionExpression();var _202=new esri.tasks.Query();_202.outFields=_200._getOutFields();_202.where=_201||"1=1";_202.returnGeometry=true;_202.outSpatialReference=new esri.SpatialReference(map.spatialReference.toJson());_202.timeExtent=_200.getTimeDefinition();_202.maxAllowableOffset=_200._maxOffset;if(_200._ts){_202._ts=(new Date()).getTime();}var _203;if(_200._usePatch){_203=this._getRequestId(_200);this._cancelPendingRequest(null,_203);}_200._task.execute(_202,this._drawFeatures,this._queryErrorHandler,_203);},_drawFeatures:function(_204){this._purgeRequests();var _205=_204.features,_206=this.featureLayer,_207=_206.objectIdField;for(var i=0,len=_205.length;i<len;i++){var _208=_205[i];var oid=_208.attributes[_207];if(!_206._isDeleted(_208)){this._addFeatureIIf(oid,_208);this._incRefCount(oid);}}this._applyTimeFilter(true);_206._fireUpdateEnd();},_queryErrorHandler:function(err){this._purgeRequests();var _209=this.featureLayer;_209._errorHandler(err);_209._fireUpdateEnd(err);}});_4.declare("esri.layers._OnDemandMode",[esri.layers._RenderMode],{constructor:function(_20a){this.featureLayer=_20a;this._featureMap={};this._queryErrorHandler=_4.hitch(this,this._queryErrorHandler);},initialize:function(map){this.map=map;this._initialize();this._init=true;},propertyChangeHandler:function(type){if(this._init){if(type<2){this._zoomHandler();}}},destroy:function(){this._disableConnectors();this._init=false;},drawFeature:function(_20b){var _20c=this._gridLayer,geom=_20b.geometry,type=geom.type,_20d=[];switch(type){case "point":_20d=_20c.getCellsInExtent({xmin:geom.x,ymin:geom.y,xmax:geom.x,ymax:geom.y}).cells;break;default:_20d=_20c.getCellsInExtent(geom.getExtent()).cells;break;}var _20e=this._cellMap,_20f=this.featureLayer,_210=_20f.objectIdField;for(var i=0;i<_20d.length;i++){var cell=_20d[i];var oid=_20b.attributes[_210];if(!_20f._isDeleted(_20b)){_20e[cell.row][cell.col].features.push(_20b);this._addFeatureIIf(oid,_20b);this._incRefCount(oid);}}},suspend:function(){if(!this._init){return;}this._disableConnectors();},resume:function(){if(!this._init){return;}this._enableConnectors();this._zoomHandler();},refresh:function(){this._zoomHandler();},_initialize:function(){var map=this.map,_211=this.featureLayer;var _212=_211._wrap&&_211._srInfo;this._gridLayer=new esri.layers._GridLayout(new esri.geometry.Point(_212?_212.valid[0]:map.extent.xmin,map.extent.ymax,map.spatialReference),{width:_211._tileWidth,height:_211._tileHeight},{width:map.width,height:map.height},_212);this._ioQueue=[];if(!_211._suspended){this._zoomHandler();this._enableConnectors();}},_enableConnectors:function(){var map=this.map;this._zoomConnect=_4.connect(map,"onZoomEnd",this,this._zoomHandler);this._panConnect=_4.connect(map,"onPanEnd",this,this._panHandler);},_disableConnectors:function(){_4.disconnect(this._zoomConnect);_4.disconnect(this._panConnect);},_zoomHandler:function(){this._processIOQueue(true);var _213=this.featureLayer;if(_213._suspended){return;}_213._fireUpdateStart();this._clearIIf();var _214=_213._trackManager;if(_214){_214.clearTracks();}this._cellMap={};this._gridLayer.setResolution(this.map.extent);this._sendRequest();},_panHandler:function(){this.featureLayer._fireUpdateStart();this._sendRequest();},_getRequestId:function(_215,cell){var id="_"+_215.name+_215.layerId+_215._ulid+"_"+cell.resolution+"_"+cell.row+"_"+cell.col;return id.replace(/[^a-zA-Z0-9\_]+/g,"_");},_sendRequest:function(){var _216=this.featureLayer,map=this.map,_217=map.extent;var _218=this._gridLayer.getCellsInExtent(_217),_219=_218.cells;if(!_216._editable){var _21a=this._cellMap;_219=_4.filter(_219,function(cell){if(_21a[cell.row]&&_21a[cell.row][cell.col]){return false;}return true;});}var _21b=_216._getOutFields();var _21c=_216.getDefinitionExpression();var time=_216._getOffsettedTE(_216._mapTimeExtent);var _21d=_216._usePatch,_21e=this._ioQueue;this._pending=this._pending||0;for(var i=0;i<_219.length;i++){var cell=_219[i];var _21f=new esri.tasks.Query();_21f.geometry=cell.extent;_21f.outFields=_21b;_21f.where=_21c;_21f.returnGeometry=true;_21f.timeExtent=time;_21f.maxAllowableOffset=_216._maxOffset;if(_216._ts){_21f._ts=(new Date()).getTime();}var _220;if(_21d){_220=this._getRequestId(_216,cell);if(this._isPending(_220)){continue;}}var self=this,func=this._drawFeatures;this._pending++;_21e.push(_216._task.execute(_21f,function(){var _221=cell;return function(_222){func.apply(self,[_222,_221]);};}.call(this),this._queryErrorHandler,_220));}this._removeOldCells(_217);this._endCheck();},_drawFeatures:function(_223,cell){this._finalizeIO();var _224=this.featureLayer,map=this.map,_225=map.extent,_226=cell.extent,row=cell.row,col=cell.col,_227=_224.objectIdField;var _228=_223.features,_229=this._gridLayer;var _22a=this._cellMap;var _22b=_22a[row]&&_22a[row][col];if((cell.resolution!=this._gridLayer._resolution)||(!_229.intersects(_226,_225))){if(_22b){this._removeCell(row,col);}}else{if(_22b){this._updateCell(_22b,_228);}else{cell.features=_228;_22a[row]=_22a[row]||{};_22a[row][col]=cell;for(var i=0,len=_228.length;i<len;i++){var _22c=_228[i];var oid=_22c.attributes[_227];if(!_224._isDeleted(_22c)){this._addFeatureIIf(oid,_22c);this._incRefCount(oid);}}}}this._endCheck();},_queryErrorHandler:function(err){this._finalizeIO();this.featureLayer._errorHandler(err);this._endCheck(true);},_finalizeIO:function(){this._purgeRequests();this._pending--;},_endCheck:function(_22d){if(this._pending===0){this._processIOQueue();var _22e=this.featureLayer,_22f=_22e._trackManager;if(_22f){_22f.clearTracks();_22f.addFeatures(_22e.graphics);if(_22e._ager){_4.forEach(_22e.graphics,function(_230){if(_230._shape){_22e._repaint(_230);}});}_22f.moveLatestToFront();_22f.drawTracks();}this.featureLayer._fireUpdateEnd(_22d&&new Error("FeatureLayer: "+esri.bundle.layers.FeatureLayer.updateError));}},_processIOQueue:function(_231){this._ioQueue=_4.filter(this._ioQueue,function(dfd){var keep=dfd.fired>-1?false:true;return keep;});if(_231){_4.forEach(this._ioQueue,this._cancelPendingRequest);}},_removeOldCells:function(_232){var _233=this._cellMap,_234=this._gridLayer;for(var _235 in _233){if(_233[_235]){var row=_233[_235];var _236=0,_237=0;for(var _238 in row){if(row[_238]){_236++;var _239=row[_238].extent;if(!_234.intersects(_239,_232)){this._removeCell(_235,_238);_237++;}}}if(_237===_236){delete _233[_235];}}}},_updateCell:function(cell,_23a){var _23b=this.featureLayer,_23c=_23b.objectIdField,_23d=_23b._selectedFeatures;cell.features=cell.features||[];for(var i=0,len=_23a.length;i<len;i++){var _23e=_23a[i];var oid=_23e.attributes[_23c];var _23f=this._addFeatureIIf(oid,_23e);if(_23f===_23e){this._incRefCount(oid);cell.features.push(_23f);}else{if(!(oid in _23d)){_23f.setGeometry(_23e.geometry);_23f.setAttributes(_23e.attributes);}}}},_removeCell:function(row,col){var _240=this._cellMap,_241=this.featureLayer,_242=_241.objectIdField;var cell=_240[row]&&_240[row][col];if(cell){delete _240[row][col];var _243=cell.features;for(var i=0;i<_243.length;i++){var _244=_243[i];var oid=_244.attributes[_242];this._decRefCount(oid);if(oid in _241._selectedFeatures){continue;}this._removeFeatureIIf(oid);}}}});_4.declare("esri.layers._GridLayout",null,{constructor:function(_245,_246,_247,_248){this.origin=_245;this.cellWidth=_246.width;this.cellHeight=_246.height;this.mapWidth=_247.width;this.mapHeight=_247.height;this.srInfo=_248;},setResolution:function(_249){this._resolution=(_249.xmax-_249.xmin)/this.mapWidth;if(this.srInfo){var _24a=Math.round((2*this.srInfo.valid[1])/this._resolution),_24b=Math.round(_24a/this.cellWidth);this._frameStats=[_24b,0,_24b-1];}},getCellCoordinates:function(_24c){var res=this._resolution,_24d=this.origin;return {row:Math.floor((_24d.y-_24c.y)/(this.cellHeight*res)),col:Math.floor((_24c.x-_24d.x)/(this.cellWidth*res))};},normalize:function(col){var _24e=this._frameStats;if(_24e){var _24f=_24e[0],m180=_24e[1],p180=_24e[2];if(col<m180){col=col%_24f;col=col<m180?col+_24f:col;}else{if(col>p180){col=col%_24f;}}}return col;},intersects:function(_250,_251){var _252=this.srInfo;if(_252){return _4.some(_251._getParts(_252),function(_253){return _250.intersects(_253.extent);});}else{return _250.intersects(_251);}},getCellExtent:function(row,col){var res=this._resolution,_254=this.origin,_255=this.cellWidth,_256=this.cellHeight;return new esri.geometry.Extent((col*_255*res)+_254.x,_254.y-((row+1)*_256*res),((col+1)*_255*res)+_254.x,_254.y-(row*_256*res),new esri.SpatialReference(_254.spatialReference.toJson()));},getCellsInExtent:function(_257){var _258=this.getCellCoordinates({x:_257.xmin,y:_257.ymax}),_259=this.getCellCoordinates({x:_257.xmax,y:_257.ymin}),_25a=_258.row,_25b=_259.row,_25c=_258.col,_25d=_259.col,_25e=[],i,j,nj;for(i=_25a;i<=_25b;i++){for(j=_25c;j<=_25d;j++){nj=this.normalize(j);_25e.push({row:i,col:nj,extent:this.getCellExtent(i,nj),resolution:this._resolution});}}return {minRow:_25a,maxRow:_25b,minCol:_25c,maxCol:_25d,cells:_25e};}});_4.declare("esri.layers._TrackManager",null,{constructor:function(_25f){this.layer=_25f;this.trackMap={};},initialize:function(map){this.map=map;var _260=this.layer,_261=_260.renderer.trackRenderer;if(_261&&(_260.geometryType==="esriGeometryPoint")){var _262=(this.container=new esri.layers._GraphicsLayer({id:_260.id+"_tracks"}));_262._onPanHandler=function(){};_262._setMap(map,_260._div);_262.setRenderer(_261);}},addFeatures:function(_263){var _264=this.trackMap,_265=this.layer,_266=_265._trackIdField;_4.forEach(_263,function(_267){var _268=_267.attributes,tkid=_268[_266];var ary=(_264[tkid]=(_264[tkid]||[]));ary.push(_267);});var _269=_265._startTimeField,_26a=_265.objectIdField;var _26b=function(a,b){var _26c=a.attributes[_269],_26d=b.attributes[_269];if(_26c===_26d){return (a.attributes[_26a]<b.attributes[_26a])?-1:1;}else{return (_26c<_26d)?-1:1;}};for(var tkid in _264){_264[tkid].sort(_26b);}},drawTracks:function(){var _26e=this.container;if(!_26e){return;}var _26f=this.trackMap,sr=this.map.spatialReference;var _270=function(_271){var _272=_271.geometry;return [_272.x,_272.y];};for(var tkid in _26f){var path=_4.map(_26f[tkid],_270);_26e.add(new esri.Graphic(new esri.geometry.Polyline({paths:[path],spatialReference:sr})));}},moveLatestToFront:function(){_4.forEach(this.getLatestObservations(),function(_273){var _274=_273._shape;_274&&_274._moveToFront();this._repaint(_273,null,true);},this.layer);},getLatestObservations:function(){var _275=[];if(!this.layer.renderer.latestObservationRenderer){return _275;}var _276=this.trackMap;for(var tkid in _276){var ary=_276[tkid];_275.push(ary[ary.length-1]);}return _275;},clearTracks:function(){var _277=this.getLatestObservations();this.trackMap={};var _278=this.container;if(_278){_278.clear();}_4.forEach(_277,function(_279){this._repaint(_279,null,true);},this.layer);},isLatestObservation:function(_27a){var _27b=this.layer._trackIdField;var _27c=this.trackMap[_27a.attributes[_27b]];if(_27c){return (_27c[_27c.length-1]===_27a);}return false;},destroy:function(){var _27d=this.container;if(_27d){_27d.clear();_27d._unsetMap(this.map,this.layer._div);this.container=null;}this.map=null;this.layer=null;this.trackMap=null;}});}if(!_4._hasResource["esri.layers.MapImageLayer"]){_4._hasResource["esri.layers.MapImageLayer"]=true;_4.provide("esri.layers.MapImageLayer");_4.declare("esri.layers.MapImageLayer",[esri.layers.Layer],{"-chains-":{constructor:"manual"},constructor:function(_27e){this.inherited(arguments,[null,_27e]);this._mapImages=[];var _27f=_4.hitch;this._panStart=_27f(this,this._panStart);this._pan=_27f(this,this._pan);this._extentChange=_27f(this,this._extentChange);this._zoom=_27f(this,this._zoom);this.loaded=true;this.onLoad(this);},opacity:1,setOpacity:function(_280){if(this.opacity!=_280){this.onOpacityChange(this.opacity=_280);}},onOpacityChange:function(_281){if(this._div){_4.style(this._div,"opacity",_281);}},_transform:esri._getDOMAccessor("transform"),addImage:function(_282){var _283=this._mapImages.push(_282);_283=_283-1;_282._idx=_283;_282._layer=this;if(this._div){this._createImage(_282,_283);}},removeImage:function(_284){if(_284){var idx=_284._idx,_285=this._mapImages;if(_285[idx]===_284){delete _285[idx];var node=_284._node;if(node){this._clearEvents(node);node.e_idx=node.e_bl=node.e_tr=node.e_l=node.e_t=node.e_w=node.e_h=null;var div=this._div;if(div){div.removeChild(node);_4.destroy(node);}}_284._node=_284._idx=_284._layer=null;}}},removeAllImages:function(){var _286=this._mapImages,i,len=_286.length;for(i=0;i<len;i++){var _287=_286[i];if(_287){this.removeImage(_287);}}this._mapImages=[];},getImages:function(){var _288=this._mapImages,_289=[],i,len=_288.length;for(i=0;i<len;i++){if(_288[i]){_289.push(_288[i]);}}return _289;},_createImage:function(_28a,idx){var node=_4.create("img");_4.style(node,{position:"absolute",left:"0px",top:"0px"});if(_28a.rotation){var _28b="rotate("+(360-_28a.rotation)+"deg)";if(_4.isIE<9){}else{_4.style(node,this._transform,_28b);_4.style(node,"transform",_28b);}}_28a._node=node;node.e_idx=idx;node.e_layer=this;node.e_load=_4.connect(node,"onload",esri.layers.MapImageLayer.prototype._imageLoaded);node.e_error=_4.connect(node,"onerror",esri.layers.MapImageLayer.prototype._imageError);node.e_abort=_4.connect(node,"onabort",esri.layers.MapImageLayer.prototype._imageError);node.src=_28a.href;},_imageLoaded:function(evt){var node=evt.target||evt.currentTarget,self=node.e_layer,_28c=self._mapImages[node.e_idx];self._clearEvents(node);if(!_28c||_28c._node!==node){return;}if(self._map){self._attach(_28c);}},_imageError:function(evt){var node=evt.target||evt.currentTarget,self=node.e_layer,_28d=self._mapImages[node.e_idx];self._clearEvents(node);if(_28d){_28d._node=null;}},_clearEvents:function(node){var _28e=_4.disconnect;_28e(node.e_load);_28e(node.e_error);_28e(node.e_abort);node.e_load=node.e_error=node.e_abort=node.e_layer=null;},_attach:function(_28f){var _290=_28f.extent,_291=_290.spatialReference,_292=this._sr,_293=_291.wkid||4326,div=this._div,node=_28f._node,_294=new esri.geometry.Point({x:_290.xmin,y:_290.ymin}),_295=new esri.geometry.Point({x:_290.xmax,y:_290.ymax});if(_291&&(_293!==_292.wkid)){if(_293===4326&&_292._isWebMercator()){node.e_bl=esri.geometry.geographicToWebMercator(_294);node.e_tr=esri.geometry.geographicToWebMercator(_295);}else{if(_291._isWebMercator()&&_292.wkid===4326){node.e_bl=esri.geometry.webMercatorToGeographic(_294);node.e_tr=esri.geometry.webMercatorToGeographic(_295);}}}else{node.e_bl=_294;node.e_tr=_295;}if(_28f.visible){this._setPos(node,_4.style(div,"left"),_4.style(div,"top"));div.appendChild(node);}},_setPos:function(node,_296,_297){var _298=node.e_bl,_299=node.e_tr,map=this._map;_298=map.toScreen(_298);_299=map.toScreen(_299);var left=_298.x-_296,top=_299.y-_297,_29a=Math.abs(_299.x-_298.x),_29b=Math.abs(_298.y-_299.y);_4.style(node,{left:left+"px",top:top+"px",width:_29a+"px",height:_29b+"px"});node.e_l=left;node.e_t=top;node.e_w=_29a;node.e_h=_29b;},_setMap:function(map,_29c){this._map=map;this._sr=map.spatialReference;var div=this._div=_4.create("div",null,_29c);_4.style(div,"position","absolute");_4.style(div,"opacity",this.opacity);var _29d=this._mapImages,i,len=_29d.length;for(i=0;i<len;i++){var _29e=_29d[i],node=_29e._node;if(!node){this._createImage(_29e,_29e._idx);}}this.onVisibilityChange(this.visible);return div;},_unsetMap:function(map,_29f){this._disconnect();var div=this._div;if(div){var _2a0=this._mapImages,i,len=_2a0.length;for(i=0;i<len;i++){var _2a1=_2a0[i];if(_2a1){var node=_2a1._node;if(node){this._clearEvents(node);node.e_idx=node.e_bl=node.e_tr=node.e_l=node.e_t=node.e_w=node.e_h=null;}_2a1._node=null;}}_29f.removeChild(div);_4.destroy(div);}this._map=this._div=this._sr=null;},onVisibilityChange:function(_2a2){var div=this._div;if(div){if(_2a2){this._redraw();this._connect(this._map);esri.show(div);}else{this._disconnect();esri.hide(div);}}},_connect:function(map){if(!this._connections){var _2a3=_4.connect;this._connections=[_2a3(map,"onPanStart",this._panStart),_2a3(map,"onPan",this._pan),_2a3(map,"onExtentChange",this._extentChange),_2a3(map,"onZoom",this._zoom)];}},_disconnect:function(){if(this._connections){_4.forEach(this._connections,_4.disconnect);this._connections=null;}},_panStart:function(){this._panL=_4.style(this._div,"left");this._panT=_4.style(this._div,"top");},_pan:function(_2a4,_2a5){_4.style(this._div,{left:this._panL+_2a5.x+"px",top:this._panT+_2a5.y+"px"});},_extentChange:function(_2a6,_2a7,_2a8){if(_2a8){this._redraw();}else{if(_2a7){_4.style(this._div,{left:this._panL+_2a7.x+"px",top:this._panT+_2a7.y+"px"});}}},_redraw:function(){var div=this._div,_2a9=_4.style(div,"left"),_2aa=_4.style(div,"top"),i,len=div.childNodes.length,node;for(i=0;i<len;i++){node=div.childNodes[i];this._setPos(node,_2a9,_2aa);}},_zoom:function(_2ab,_2ac,_2ad){var div=this._div,_2ae=_4.style(div,"left"),_2af=_4.style(div,"top"),i,len=div.childNodes.length,node;for(i=0;i<len;i++){node=div.childNodes[i];var _2b0=node.e_w*_2ac,_2b1=node.e_h*_2ac,_2b2=(_2ad.x-_2ae-node.e_l)*(_2b0-node.e_w)/node.e_w,_2b3=(_2ad.y-_2af-node.e_t)*(_2b1-node.e_h)/node.e_h;_2b2=isNaN(_2b2)?0:_2b2;_2b3=isNaN(_2b3)?0:_2b3;_4.style(node,{left:(node.e_l-_2b2)+"px",top:(node.e_t-_2b3)+"px",width:_2b0+"px",height:_2b1+"px"});}}});_4.extend(esri.layers.MapImage,{visible:true,getLayer:function(){return this._layer;},getNode:function(){return this._node;},show:function(){if(!this.visible){this.visible=true;var node=this._node,_2b4=this._layer;if(node){if(_2b4&&_2b4._div){_2b4._setPos(node,_4.style(_2b4._div,"left"),_4.style(_2b4._div,"top"));_2b4._div.appendChild(node);}esri.show(node);}}},hide:function(){if(this.visible){this.visible=false;var node=this._node,_2b5=this._layer;if(node){esri.hide(node);_2b5&&_2b5._div&&_2b5._div.removeChild(node);}}}});}if(!_4._hasResource["esri.PopupBase"]){_4._hasResource["esri.PopupBase"]=true;_4.provide("esri.PopupBase");_4.declare("esri.PopupBase",null,{onSetFeatures:function(){},onClearFeatures:function(){},onSelectionChange:function(){},onDfdComplete:function(){},initialize:function(){this.count=0;this.selectedIndex=-1;},cleanup:function(){this.features=this.deferreds=null;},setFeatures:function(arg){if(!arg||!arg.length){return;}this.clearFeatures();var _2b6,_2b7;if(arg[0] instanceof _4.Deferred){_2b7=arg;}else{_2b6=arg;}if(_2b6){this._updateFeatures(null,_2b6);}else{this.deferreds=_2b7;_2b7=_2b7.slice(0);_4.forEach(_2b7,function(dfd){dfd.addBoth(_4.hitch(this,this._updateFeatures,dfd));},this);}},clearFeatures:function(){this.features=this.deferreds=null;this.count=0;var _2b8=this.selectedIndex;this.selectedIndex=-1;if(_2b8>-1){this.onSelectionChange();}this.onClearFeatures();},getSelectedFeature:function(){var _2b9=this.features;if(_2b9){return _2b9[this.selectedIndex];}},select:function(_2ba){if(_2ba<0||_2ba>=this.count){return;}this.selectedIndex=_2ba;this.onSelectionChange();},enableHighlight:function(map){this._highlighted=map.graphics.add(new esri.Graphic(new esri.geometry.Point(0,0,map.spatialReference)));this._highlighted.hide();var ESYM=esri.symbol;if(!this.markerSymbol){var _2bb=(this.markerSymbol=new ESYM.SimpleMarkerSymbol());_2bb.setStyle(ESYM.SimpleMarkerSymbol.STYLE_TARGET);_2bb._setDim(16,16,7);_2bb.setOutline(new ESYM.CartographicLineSymbol(ESYM.SimpleLineSymbol.STYLE_SOLID,new _4.Color([0,255,255]),2,ESYM.CartographicLineSymbol.CAP_ROUND,ESYM.CartographicLineSymbol.JOIN_ROUND));_2bb.setColor(new _4.Color([0,0,0,0]));}if(!this.lineSymbol){this.lineSymbol=new ESYM.SimpleLineSymbol(ESYM.SimpleLineSymbol.STYLE_SOLID,new _4.Color([0,255,255]),2);}if(!this.fillSymbol){this.fillSymbol=new ESYM.SimpleFillSymbol(ESYM.SimpleFillSymbol.STYLE_NULL,new ESYM.SimpleLineSymbol(ESYM.SimpleLineSymbol.STYLE_SOLID,new _4.Color([0,255,255]),2),new _4.Color([0,0,0,0]));}},disableHighlight:function(map){var _2bc=this._highlighted;if(_2bc){_2bc.hide();map.graphics.remove(_2bc);delete this._highlighted;}this.markerSymbol=this.lineSymbol=this.fillSymbol=null;},showHighlight:function(){if(this._highlighted&&this.features&&this.features[this.selectedIndex]){this._highlighted.show();}},hideHighlight:function(){if(this._highlighted){this._highlighted.hide();}},updateHighlight:function(map,_2bd){var _2be=_2bd.geometry,_2bf=this._highlighted;if(!_2be||!_2bf){return;}_2bf.hide();if(!_2bf.getLayer()&&map){map.graphics.add(_2bf);}_2bf.setGeometry(esri.geometry.fromJson(_2be.toJson()));var _2c0;switch(_2be.type){case "point":case "multipoint":_2c0=this.markerSymbol;_2c0.setOffset(0,0);_2c0.setAngle(0);var lyr=_2bd.getLayer();if(lyr){var _2c1=lyr._getSymbol(_2bd),_2c2,_2c3,xoff=0,yoff=0,_2c4=0;if(_2c1){switch(_2c1.type){case "simplemarkersymbol":_2c2=_2c3=(_2c1.size||0);break;case "picturemarkersymbol":_2c2=(_2c1.width||0);_2c3=(_2c1.height||0);break;}xoff=_2c1.xoffset||0;yoff=_2c1.yoffset||0;_2c4=_2c1.angle||0;}if(_2c2&&_2c3){_2c0._setDim(_2c2+1,_2c3+1,7);}_2c0.setOffset(xoff,yoff);_2c0.setAngle(_2c4);}break;case "polyline":_2c0=this.lineSymbol;break;case "polygon":_2c0=this.fillSymbol;break;}_2bf.setSymbol(_2c0);},_unbind:function(dfd){var _2c5=_4.indexOf(this.deferreds,dfd);if(_2c5===-1){return;}this.deferreds.splice(_2c5,1);if(!this.deferreds.length){this.deferreds=null;return 2;}return 1;},_updateFeatures:function(dfd,_2c6){if(dfd){if(this.deferreds){var res=this._unbind(dfd);if(!res){return;}if(_2c6&&_2c6 instanceof Error){this.onDfdComplete(_2c6);if(res===2){this.onSetFeatures();}return;}if(_2c6&&_2c6.length){if(!this.features){this.features=_2c6;this.count=_2c6.length;this.selectedIndex=0;this.onDfdComplete();if(res===2){this.onSetFeatures();}this.select(0);}else{var _2c7=_4.filter(_2c6,function(_2c8){return _4.indexOf(this.features,_2c8)===-1;},this);this.features=this.features.concat(_2c7);this.count=this.features.length;this.onDfdComplete();if(res===2){this.onSetFeatures();}}}else{this.onDfdComplete();if(res===2){this.onSetFeatures();}}}}else{this.features=_2c6;this.count=_2c6.length;this.selectedIndex=0;this.onSetFeatures();this.select(0);}}});_4.declare("esri.PopupInfoTemplate",[esri.InfoTemplate],{"-chains-":{constructor:"manual"},initialize:function(json){if(!json){return;}this.info=json;this.title=this.getTitle;this.content=this.getContent;var _2c9=(this._fieldLabels={}),_2ca=(this._fieldsMap={});if(json.fieldInfos){_4.forEach(json.fieldInfos,function(_2cb){_2c9[_2cb.fieldName]=_2cb.label;_2ca[_2cb.fieldName]=_2cb;});}},toJson:function(){return _4.fromJson(_4.toJson(this.info));},getTitle:function(){},getContent:function(){},getComponents:function(_2cc){var _2cd=this.info,_2ce=_2cc.getLayer(),_2cf=_4.clone(_2cc.attributes)||{},_2d0=_4.clone(_2cf),_2d1=_2cd.fieldInfos,_2d2="",_2d3="",_2d4,_2d5,_2d6,_2d7=_2ce&&_2ce._getDateOpts&&_2ce._getDateOpts().properties,_2d8={dateFormat:{properties:_2d7,formatter:"DateFormat"+this._dateFormats["shortDateShortTime"]}};if(_2d1){_4.forEach(_2d1,function(_2d9){var _2da=_2d9.fieldName,val=_2d0[_2da];_2d0[_2da]=this._formatValue(val,_2da,_2d8);if(_2d7&&_2d9.format&&_2d9.format.dateFormat){var pos=_4.indexOf(_2d7,_2da);if(pos>-1){_2d7.splice(pos,1);}}},this);}if(_2ce){var _2db=_2ce.types,_2dc=_2ce.typeIdField,_2dd=_2dc&&_2cf[_2dc];for(_2d5 in _2cf){_2d6=_2cf[_2d5];if(esri._isDefined(_2d6)){var _2de=this._getDomainName(_2ce,_2db,_2dd,_2d5,_2d6);if(esri._isDefined(_2de)){_2d0[_2d5]=_2de;}else{if(_2d5===_2dc){var _2df=this._getTypeName(_2ce,_2d6);if(esri._isDefined(_2df)){_2d0[_2d5]=_2df;}}}}}}if(_2cd.title){_2d2=_4.trim(esri.substitute(_2d0,this._fixTokens(_2cd.title),_2d8)||"");}if(_2cd.description){_2d3=_4.trim(esri.substitute(_2d0,this._fixTokens(_2cd.description),_2d8)||"");}if(_2d1){_2d4=[];_4.forEach(_2d1,function(_2e0){_2d5=_2e0.fieldName;if(_2d5&&_2e0.visible){_2d4.push([_2e0.label||_2d5,esri.substitute(_2d0,"${"+_2d5+"}",_2d8)||""]);}});}var _2e1,_2e2;if(_2cd.mediaInfos){_2e1=[];_4.forEach(_2cd.mediaInfos,function(_2e3){_2e2=0;_2d6=_2e3.value;switch(_2e3.type){case "image":var url=_2d6.sourceURL;url=url&&_4.trim(esri.substitute(_2cf,this._fixTokens(url)));_2e2=!!url;break;case "piechart":case "linechart":case "columnchart":case "barchart":_2e2=_4.some(_2d6.fields,function(_2e4){return esri._isDefined(_2cf[_2e4]);});break;default:return;}if(_2e2){_2e3=_4.clone(_2e3);_2d6=_2e3.value;_2e3.title=_2e3.title?_4.trim(esri.substitute(_2d0,this._fixTokens(_2e3.title),_2d8)||""):"";_2e3.caption=_2e3.caption?_4.trim(esri.substitute(_2d0,this._fixTokens(_2e3.caption),_2d8)||""):"";if(_2e3.type==="image"){_2d6.sourceURL=esri.substitute(_2cf,this._fixTokens(_2d6.sourceURL));if(_2d6.linkURL){_2d6.linkURL=_4.trim(esri.substitute(_2cf,this._fixTokens(_2d6.linkURL))||"");}}else{var _2e5=_2cf[_2d6.normalizeField]||0;_2d6.fields=_4.map(_2d6.fields,function(_2e6){var data=_2cf[_2e6];data=(data===undefined)?null:data;if(data&&_2e5){data=data/_2e5;}return {y:data,tooltip:(this._fieldLabels[_2e6]||_2e6)+":<br/>"+this._formatValue(data,_2e6,_2d8)};},this);}_2e1.push(_2e3);}},this);}return {title:_2d2,description:_2d3,fields:(_2d4&&_2d4.length)?_2d4:null,mediaInfos:(_2e1&&_2e1.length)?_2e1:null,formatted:_2d0};},getAttachments:function(_2e7){var _2e8=_2e7.getLayer(),_2e9=_2e7.attributes;if(this.info.showAttachments&&_2e8&&_2e8.hasAttachments&&_2e8.objectIdField){var oid=_2e9&&_2e9[_2e8.objectIdField];if(oid){return _2e8.queryAttachmentInfos(oid);}}},_dateFormats:{"shortDate":"(datePattern: 'M/d/y', selector: 'date')","longMonthDayYear":"(datePattern: 'MMMM d, y', selector: 'date')","dayShortMonthYear":"(datePattern: 'd MMM y', selector: 'date')","longDate":"(datePattern: 'EEEE, MMMM d, y', selector: 'date')","shortDateShortTime":"(datePattern: 'M/d/y', timePattern: 'h:mm a', selector: 'date and time')","shortDateShortTime24":"(datePattern: 'M/d/y', timePattern: 'H:mm', selector: 'date and time')","longMonthYear":"(datePattern: 'MMMM y', selector: 'date')","shortMonthYear":"(datePattern: 'MMM y', selector: 'date')","year":"(datePattern: 'y', selector: 'date')"},_fixTokens:function(_2ea){return _2ea.replace(/(\{[^\{\r\n]+\})/g,"$$$1");},_formatValue:function(val,_2eb,_2ec){var _2ed=this._fieldsMap[_2eb],fmt=_2ed&&_2ed.format;if(!esri._isDefined(val)||!_2ed||!esri._isDefined(fmt)){return val;}var _2ee="",_2ef=[],_2f0=fmt.hasOwnProperty("places")||fmt.hasOwnProperty("digitSeparator"),_2f1=fmt.hasOwnProperty("digitSeparator")?fmt.digitSeparator:true;if(_2f0){_2ee="NumberFormat";_2ef.push("places: "+(esri._isDefined(fmt.places)?Number(fmt.places):"Infinity"));if(_2ef.length){_2ee+=("("+_2ef.join(",")+")");}}else{if(fmt.dateFormat){_2ee="DateFormat"+(this._dateFormats[fmt.dateFormat]||this._dateFormats["shortDateShortTime"]);}else{return val;}}var _2f2=esri.substitute({"myKey":val},"${myKey:"+_2ee+"}",_2ec)||"";if(_2f0&&!_2f1){var _2f3=_4.i18n.getLocalization("dojo.cldr","number");if(_2f3.group){_2f2=_2f2.replace(new RegExp("\\"+_2f3.group,"g"),"");}}return _2f2;},_getDomainName:function(_2f4,_2f5,_2f6,_2f7,_2f8){var _2f9,stop;if(_2f5&&esri._isDefined(_2f6)){_4.some(_2f5,function(_2fa){if(_2fa.id==_2f6){_2f9=_2fa.domains&&_2fa.domains[_2f7];if(_2f9&&_2f9.type==="inherited"){_2f9=this._getLayerDomain(_2f4,_2f7);stop=true;}return true;}return false;},this);}if(!stop&&!_2f9){_2f9=this._getLayerDomain(_2f4,_2f7);}if(_2f9&&_2f9.codedValues){var _2fb;_4.some(_2f9.codedValues,function(_2fc){if(_2fc.code==_2f8){_2fb=_2fc.name;return true;}return false;});return _2fb;}},_getLayerDomain:function(_2fd,_2fe){var _2ff=_2fd.fields;if(_2ff){var _300;_4.some(_2ff,function(_301){if(_301.name===_2fe){_300=_301.domain;return true;}return false;});return _300;}},_getTypeName:function(_302,id){var _303=_302.types;if(_303){var _304;_4.some(_303,function(_305){if(_305.id==id){_304=_305.name;return true;}return false;});return _304;}}});}if(!_4._hasResource["dojo.Stateful"]){_4._hasResource["dojo.Stateful"]=true;_4.provide("dojo.Stateful");_4.declare("dojo.Stateful",null,{postscript:function(_306){if(_306){_4.mixin(this,_306);}},get:function(name){return this[name];},set:function(name,_307){if(typeof name==="object"){for(var x in name){this.set(x,name[x]);}return this;}var _308=this[name];this[name]=_307;if(this._watchCallbacks){this._watchCallbacks(name,_308,_307);}return this;},watch:function(name,_309){var _30a=this._watchCallbacks;if(!_30a){var self=this;_30a=this._watchCallbacks=function(name,_30b,_30c,_30d){var _30e=function(_30f){if(_30f){_30f=_30f.slice();for(var i=0,l=_30f.length;i<l;i++){try{_30f[i].call(self,name,_30b,_30c);}catch(e){console.error(e);}}}};_30e(_30a["_"+name]);if(!_30d){_30e(_30a["*"]);}};}if(!_309&&typeof name==="function"){_309=name;name="*";}else{name="_"+name;}var _310=_30a[name];if(typeof _310!=="object"){_310=_30a[name]=[];}_310.push(_309);return {unwatch:function(){_310.splice(_4.indexOf(_310,_309),1);}};}});}if(!_4._hasResource["dijit._WidgetBase"]){_4._hasResource["dijit._WidgetBase"]=true;_4.provide("dijit._WidgetBase");(function(){_4.declare("dijit._WidgetBase",_4.Stateful,{id:"",lang:"",dir:"","class":"",style:"",title:"",tooltip:"",baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,attributeMap:{id:"",dir:"",lang:"","class":"",style:"",title:""},_blankGif:(_4.config.blankGif||_4.moduleUrl("dojo","resources/blank.gif")).toString(),postscript:function(_311,_312){this.create(_311,_312);},create:function(_313,_314){this.srcNodeRef=_4.byId(_314);this._connects=[];this._subscribes=[];if(this.srcNodeRef&&(typeof this.srcNodeRef.id=="string")){this.id=this.srcNodeRef.id;}if(_313){this.params=_313;_4._mixin(this,_313);}this.postMixInProperties();if(!this.id){this.id=_5.getUniqueId(this.declaredClass.replace(/\./g,"_"));}_5.registry.add(this);this.buildRendering();if(this.domNode){this._applyAttributes();var _315=this.srcNodeRef;if(_315&&_315.parentNode&&this.domNode!==_315){_315.parentNode.replaceChild(this.domNode,_315);}}if(this.domNode){this.domNode.setAttribute("widgetId",this.id);}this.postCreate();if(this.srcNodeRef&&!this.srcNodeRef.parentNode){delete this.srcNodeRef;}this._created=true;},_applyAttributes:function(){var _316=function(attr,_317){if((_317.params&&attr in _317.params)||_317[attr]){_317.set(attr,_317[attr]);}};for(var attr in this.attributeMap){_316(attr,this);}_4.forEach(this._getSetterAttributes(),function(a){if(!(a in this.attributeMap)){_316(a,this);}},this);},_getSetterAttributes:function(){var ctor=this.constructor;if(!ctor._setterAttrs){var r=(ctor._setterAttrs=[]),_318,_319=ctor.prototype;for(var _31a in _319){if(_4.isFunction(_319[_31a])&&(_318=_31a.match(/^_set([a-zA-Z]*)Attr$/))&&_318[1]){r.push(_318[1].charAt(0).toLowerCase()+_318[1].substr(1));}}}return ctor._setterAttrs;},postMixInProperties:function(){},buildRendering:function(){if(!this.domNode){this.domNode=this.srcNodeRef||_4.create("div");}if(this.baseClass){var _31b=this.baseClass.split(" ");if(!this.isLeftToRight()){_31b=_31b.concat(_4.map(_31b,function(name){return name+"Rtl";}));}_4.addClass(this.domNode,_31b);}},postCreate:function(){},startup:function(){this._started=true;},destroyRecursive:function(_31c){this._beingDestroyed=true;this.destroyDescendants(_31c);this.destroy(_31c);},destroy:function(_31d){this._beingDestroyed=true;this.uninitialize();var d=_4,dfe=d.forEach,dun=d.unsubscribe;dfe(this._connects,function(_31e){dfe(_31e,d.disconnect);});dfe(this._subscribes,function(_31f){dun(_31f);});dfe(this._supportingWidgets||[],function(w){if(w.destroyRecursive){w.destroyRecursive();}else{if(w.destroy){w.destroy();}}});this.destroyRendering(_31d);_5.registry.remove(this.id);this._destroyed=true;},destroyRendering:function(_320){if(this.bgIframe){this.bgIframe.destroy(_320);delete this.bgIframe;}if(this.domNode){if(_320){_4.removeAttr(this.domNode,"widgetId");}else{_4.destroy(this.domNode);}delete this.domNode;}if(this.srcNodeRef){if(!_320){_4.destroy(this.srcNodeRef);}delete this.srcNodeRef;}},destroyDescendants:function(_321){_4.forEach(this.getChildren(),function(_322){if(_322.destroyRecursive){_322.destroyRecursive(_321);}});},uninitialize:function(){return false;},_setClassAttr:function(_323){var _324=this[this.attributeMap["class"]||"domNode"];_4.replaceClass(_324,_323,this["class"]);this._set("class",_323);},_setStyleAttr:function(_325){var _326=this[this.attributeMap.style||"domNode"];if(_4.isObject(_325)){_4.style(_326,_325);}else{if(_326.style.cssText){_326.style.cssText+="; "+_325;}else{_326.style.cssText=_325;}}this._set("style",_325);},_attrToDom:function(attr,_327){var _328=this.attributeMap[attr];_4.forEach(_4.isArray(_328)?_328:[_328],function(_329){var _32a=this[_329.node||_329||"domNode"];var type=_329.type||"attribute";switch(type){case "attribute":if(_4.isFunction(_327)){_327=_4.hitch(this,_327);}var _32b=_329.attribute?_329.attribute:(/^on[A-Z][a-zA-Z]*$/.test(attr)?attr.toLowerCase():attr);_4.attr(_32a,_32b,_327);break;case "innerText":_32a.innerHTML="";_32a.appendChild(_4.doc.createTextNode(_327));break;case "innerHTML":_32a.innerHTML=_327;break;case "class":_4.replaceClass(_32a,_327,this[attr]);break;}},this);},get:function(name){var _32c=this._getAttrNames(name);return this[_32c.g]?this[_32c.g]():this[name];},set:function(name,_32d){if(typeof name==="object"){for(var x in name){this.set(x,name[x]);}return this;}var _32e=this._getAttrNames(name);if(this[_32e.s]){var _32f=this[_32e.s].apply(this,Array.prototype.slice.call(arguments,1));}else{if(name in this.attributeMap){this._attrToDom(name,_32d);}this._set(name,_32d);}return _32f||this;},_attrPairNames:{},_getAttrNames:function(name){var apn=this._attrPairNames;if(apn[name]){return apn[name];}var uc=name.charAt(0).toUpperCase()+name.substr(1);return (apn[name]={n:name+"Node",s:"_set"+uc+"Attr",g:"_get"+uc+"Attr"});},_set:function(name,_330){var _331=this[name];this[name]=_330;if(this._watchCallbacks&&this._created&&_330!==_331){this._watchCallbacks(name,_331,_330);}},toString:function(){return "[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]";},getDescendants:function(){return this.containerNode?_4.query("[widgetId]",this.containerNode).map(_5.byNode):[];},getChildren:function(){return this.containerNode?_5.findWidgets(this.containerNode):[];},connect:function(obj,_332,_333){var _334=[_4._connect(obj,_332,this,_333)];this._connects.push(_334);return _334;},disconnect:function(_335){for(var i=0;i<this._connects.length;i++){if(this._connects[i]==_335){_4.forEach(_335,_4.disconnect);this._connects.splice(i,1);return;}}},subscribe:function(_336,_337){var _338=_4.subscribe(_336,this,_337);this._subscribes.push(_338);return _338;},unsubscribe:function(_339){for(var i=0;i<this._subscribes.length;i++){if(this._subscribes[i]==_339){_4.unsubscribe(_339);this._subscribes.splice(i,1);return;}}},isLeftToRight:function(){return this.dir?(this.dir=="ltr"):_4._isBodyLtr();},placeAt:function(_33a,_33b){if(_33a.declaredClass&&_33a.addChild){_33a.addChild(this,_33b);}else{_4.place(this.domNode,_33a,_33b);}return this;}});})();}if(!_4._hasResource["dojo.window"]){_4._hasResource["dojo.window"]=true;_4.provide("dojo.window");_4.getObject("window",true,_4);_4.window.getBox=function(){var _33c=(_4.doc.compatMode=="BackCompat")?_4.body():_4.doc.documentElement;var _33d=_4._docScroll();return {w:_33c.clientWidth,h:_33c.clientHeight,l:_33d.x,t:_33d.y};};_4.window.get=function(doc){if(_4.isIE&&window!==document.parentWindow){doc.parentWindow.execScript("document._parentWindow = window;","Javascript");var win=doc._parentWindow;doc._parentWindow=null;return win;}return doc.parentWindow||doc.defaultView;};_4.window.scrollIntoView=function(node,pos){try{node=_4.byId(node);var doc=node.ownerDocument||_4.doc,body=doc.body||_4.body(),html=doc.documentElement||body.parentNode,isIE=_4.isIE,isWK=_4.isWebKit;if((!(_4.isMoz||isIE||isWK||_4.isOpera)||node==body||node==html)&&(typeof node.scrollIntoView!="undefined")){node.scrollIntoView(false);return;}var _33e=doc.compatMode=="BackCompat",_33f=(isIE>=9&&node.ownerDocument.parentWindow.frameElement)?((html.clientHeight>0&&html.clientWidth>0&&(body.clientHeight==0||body.clientWidth==0||body.clientHeight>html.clientHeight||body.clientWidth>html.clientWidth))?html:body):(_33e?body:html),_340=isWK?body:_33f,_341=_33f.clientWidth,_342=_33f.clientHeight,rtl=!_4._isBodyLtr(),_343=pos||_4.position(node),el=node.parentNode,_344=function(el){return ((isIE<=6||(isIE&&_33e))?false:(_4.style(el,"position").toLowerCase()=="fixed"));};if(_344(node)){return;}while(el){if(el==body){el=_340;}var _345=_4.position(el),_346=_344(el);if(el==_340){_345.w=_341;_345.h=_342;if(_340==html&&isIE&&rtl){_345.x+=_340.offsetWidth-_345.w;}if(_345.x<0||!isIE){_345.x=0;}if(_345.y<0||!isIE){_345.y=0;}}else{var pb=_4._getPadBorderExtents(el);_345.w-=pb.w;_345.h-=pb.h;_345.x+=pb.l;_345.y+=pb.t;var _347=el.clientWidth,_348=_345.w-_347;if(_347>0&&_348>0){_345.w=_347;_345.x+=(rtl&&(isIE||el.clientLeft>pb.l))?_348:0;}_347=el.clientHeight;_348=_345.h-_347;if(_347>0&&_348>0){_345.h=_347;}}if(_346){if(_345.y<0){_345.h+=_345.y;_345.y=0;}if(_345.x<0){_345.w+=_345.x;_345.x=0;}if(_345.y+_345.h>_342){_345.h=_342-_345.y;}if(_345.x+_345.w>_341){_345.w=_341-_345.x;}}var l=_343.x-_345.x,t=_343.y-Math.max(_345.y,0),r=l+_343.w-_345.w,bot=t+_343.h-_345.h;if(r*l>0){var s=Math[l<0?"max":"min"](l,r);if(rtl&&((isIE==8&&!_33e)||isIE>=9)){s=-s;}_343.x+=el.scrollLeft;el.scrollLeft+=s;_343.x-=el.scrollLeft;}if(bot*t>0){_343.y+=el.scrollTop;el.scrollTop+=Math[t<0?"max":"min"](t,bot);_343.y-=el.scrollTop;}el=(el!=_340)&&!_346&&el.parentNode;}}catch(error){console.error("scrollIntoView: "+error);node.scrollIntoView(false);}};}if(!_4._hasResource["dijit._base.focus"]){_4._hasResource["dijit._base.focus"]=true;_4.provide("dijit._base.focus");_4.mixin(_5,{_curFocus:null,_prevFocus:null,isCollapsed:function(){return _5.getBookmark().isCollapsed;},getBookmark:function(){var bm,rg,tg,sel=_4.doc.selection,cf=_5._curFocus;if(_4.global.getSelection){sel=_4.global.getSelection();if(sel){if(sel.isCollapsed){tg=cf?cf.tagName:"";if(tg){tg=tg.toLowerCase();if(tg=="textarea"||(tg=="input"&&(!cf.type||cf.type.toLowerCase()=="text"))){sel={start:cf.selectionStart,end:cf.selectionEnd,node:cf,pRange:true};return {isCollapsed:(sel.end<=sel.start),mark:sel};}}bm={isCollapsed:true};if(sel.rangeCount){bm.mark=sel.getRangeAt(0).cloneRange();}}else{rg=sel.getRangeAt(0);bm={isCollapsed:false,mark:rg.cloneRange()};}}}else{if(sel){tg=cf?cf.tagName:"";tg=tg.toLowerCase();if(cf&&tg&&(tg=="button"||tg=="textarea"||tg=="input")){if(sel.type&&sel.type.toLowerCase()=="none"){return {isCollapsed:true,mark:null};}else{rg=sel.createRange();return {isCollapsed:rg.text&&rg.text.length?false:true,mark:{range:rg,pRange:true}};}}bm={};try{rg=sel.createRange();bm.isCollapsed=!(sel.type=="Text"?rg.htmlText.length:rg.length);}catch(e){bm.isCollapsed=true;return bm;}if(sel.type.toUpperCase()=="CONTROL"){if(rg.length){bm.mark=[];var i=0,len=rg.length;while(i<len){bm.mark.push(rg.item(i++));}}else{bm.isCollapsed=true;bm.mark=null;}}else{bm.mark=rg.getBookmark();}}else{console.warn("No idea how to store the current selection for this browser!");}}return bm;},moveToBookmark:function(_349){var _34a=_4.doc,mark=_349.mark;if(mark){if(_4.global.getSelection){var sel=_4.global.getSelection();if(sel&&sel.removeAllRanges){if(mark.pRange){var r=mark;var n=r.node;n.selectionStart=r.start;n.selectionEnd=r.end;}else{sel.removeAllRanges();sel.addRange(mark);}}else{console.warn("No idea how to restore selection for this browser!");}}else{if(_34a.selection&&mark){var rg;if(mark.pRange){rg=mark.range;}else{if(_4.isArray(mark)){rg=_34a.body.createControlRange();_4.forEach(mark,function(n){rg.addElement(n);});}else{rg=_34a.body.createTextRange();rg.moveToBookmark(mark);}}rg.select();}}}},getFocus:function(menu,_34b){var node=!_5._curFocus||(menu&&_4.isDescendant(_5._curFocus,menu.domNode))?_5._prevFocus:_5._curFocus;return {node:node,bookmark:(node==_5._curFocus)&&_4.withGlobal(_34b||_4.global,_5.getBookmark),openedForWindow:_34b};},focus:function(_34c){if(!_34c){return;}var node="node" in _34c?_34c.node:_34c,_34d=_34c.bookmark,_34e=_34c.openedForWindow,_34f=_34d?_34d.isCollapsed:false;if(node){var _350=(node.tagName.toLowerCase()=="iframe")?node.contentWindow:node;if(_350&&_350.focus){try{_350.focus();}catch(e){}}_5._onFocusNode(node);}if(_34d&&_4.withGlobal(_34e||_4.global,_5.isCollapsed)&&!_34f){if(_34e){_34e.focus();}try{_4.withGlobal(_34e||_4.global,_5.moveToBookmark,null,[_34d]);}catch(e2){}}},_activeStack:[],registerIframe:function(_351){return _5.registerWin(_351.contentWindow,_351);},unregisterIframe:function(_352){_5.unregisterWin(_352);},registerWin:function(_353,_354){var _355=function(evt){_5._justMouseDowned=true;setTimeout(function(){_5._justMouseDowned=false;},0);if(_4.isIE&&evt&&evt.srcElement&&evt.srcElement.parentNode==null){return;}_5._onTouchNode(_354||evt.target||evt.srcElement,"mouse");};var doc=_4.isIE?_353.document.documentElement:_353.document;if(doc){if(_4.isIE){_353.document.body.attachEvent("onmousedown",_355);var _356=function(evt){if(evt.srcElement.tagName.toLowerCase()!="#document"&&_5.isTabNavigable(evt.srcElement)){_5._onFocusNode(_354||evt.srcElement);}else{_5._onTouchNode(_354||evt.srcElement);}};doc.attachEvent("onactivate",_356);var _357=function(evt){_5._onBlurNode(_354||evt.srcElement);};doc.attachEvent("ondeactivate",_357);return function(){_353.document.detachEvent("onmousedown",_355);doc.detachEvent("onactivate",_356);doc.detachEvent("ondeactivate",_357);doc=null;};}else{doc.body.addEventListener("mousedown",_355,true);var _358=function(evt){_5._onFocusNode(_354||evt.target);};doc.addEventListener("focus",_358,true);var _359=function(evt){_5._onBlurNode(_354||evt.target);};doc.addEventListener("blur",_359,true);return function(){doc.body.removeEventListener("mousedown",_355,true);doc.removeEventListener("focus",_358,true);doc.removeEventListener("blur",_359,true);doc=null;};}}},unregisterWin:function(_35a){_35a&&_35a();},_onBlurNode:function(node){_5._prevFocus=_5._curFocus;_5._curFocus=null;if(_5._justMouseDowned){return;}if(_5._clearActiveWidgetsTimer){clearTimeout(_5._clearActiveWidgetsTimer);}_5._clearActiveWidgetsTimer=setTimeout(function(){delete _5._clearActiveWidgetsTimer;_5._setStack([]);_5._prevFocus=null;},100);},_onTouchNode:function(node,by){if(_5._clearActiveWidgetsTimer){clearTimeout(_5._clearActiveWidgetsTimer);delete _5._clearActiveWidgetsTimer;}var _35b=[];try{while(node){var _35c=_4.attr(node,"dijitPopupParent");if(_35c){node=_5.byId(_35c).domNode;}else{if(node.tagName&&node.tagName.toLowerCase()=="body"){if(node===_4.body()){break;}node=_4.window.get(node.ownerDocument).frameElement;}else{var id=node.getAttribute&&node.getAttribute("widgetId"),_35d=id&&_5.byId(id);if(_35d&&!(by=="mouse"&&_35d.get("disabled"))){_35b.unshift(id);}node=node.parentNode;}}}}catch(e){}_5._setStack(_35b,by);},_onFocusNode:function(node){if(!node){return;}if(node.nodeType==9){return;}_5._onTouchNode(node);if(node==_5._curFocus){return;}if(_5._curFocus){_5._prevFocus=_5._curFocus;}_5._curFocus=node;_4.publish("focusNode",[node]);},_setStack:function(_35e,by){var _35f=_5._activeStack;_5._activeStack=_35e;for(var _360=0;_360<Math.min(_35f.length,_35e.length);_360++){if(_35f[_360]!=_35e[_360]){break;}}var _361;for(var i=_35f.length-1;i>=_360;i--){_361=_5.byId(_35f[i]);if(_361){_361._focused=false;_361.set("focused",false);_361._hasBeenBlurred=true;if(_361._onBlur){_361._onBlur(by);}_4.publish("widgetBlur",[_361,by]);}}for(i=_360;i<_35e.length;i++){_361=_5.byId(_35e[i]);if(_361){_361._focused=true;_361.set("focused",true);if(_361._onFocus){_361._onFocus(by);}_4.publish("widgetFocus",[_361,by]);}}}});_4.addOnLoad(function(){var _362=_5.registerWin(window);if(_4.isIE){_4.addOnWindowUnload(function(){_5.unregisterWin(_362);_362=null;});}});}if(!_4._hasResource["dojo.AdapterRegistry"]){_4._hasResource["dojo.AdapterRegistry"]=true;_4.provide("dojo.AdapterRegistry");_4.AdapterRegistry=function(_363){this.pairs=[];this.returnWrappers=_363||false;};_4.extend(_4.AdapterRegistry,{register:function(name,_364,wrap,_365,_366){this.pairs[((_366)?"unshift":"push")]([name,_364,wrap,_365]);},match:function(){for(var i=0;i<this.pairs.length;i++){var pair=this.pairs[i];if(pair[1].apply(this,arguments)){if((pair[3])||(this.returnWrappers)){return pair[2];}else{return pair[2].apply(this,arguments);}}}throw new Error("No match found");},unregister:function(name){for(var i=0;i<this.pairs.length;i++){var pair=this.pairs[i];if(pair[0]==name){this.pairs.splice(i,1);return true;}}return false;}});}if(!_4._hasResource["dijit._base.place"]){_4._hasResource["dijit._base.place"]=true;_4.provide("dijit._base.place");_5.getViewport=function(){return _4.window.getBox();};_5.placeOnScreen=function(node,pos,_367,_368){var _369=_4.map(_367,function(_36a){var c={corner:_36a,pos:{x:pos.x,y:pos.y}};if(_368){c.pos.x+=_36a.charAt(1)=="L"?_368.x:-_368.x;c.pos.y+=_36a.charAt(0)=="T"?_368.y:-_368.y;}return c;});return _5._place(node,_369);};_5._place=function(node,_36b,_36c,_36d){var view=_4.window.getBox();if(!node.parentNode||String(node.parentNode.tagName).toLowerCase()!="body"){_4.body().appendChild(node);}var best=null;_4.some(_36b,function(_36e){var _36f=_36e.corner;var pos=_36e.pos;var _370=0;var _371={w:_36f.charAt(1)=="L"?(view.l+view.w)-pos.x:pos.x-view.l,h:_36f.charAt(1)=="T"?(view.t+view.h)-pos.y:pos.y-view.t};if(_36c){var res=_36c(node,_36e.aroundCorner,_36f,_371,_36d);_370=typeof res=="undefined"?0:res;}var _372=node.style;var _373=_372.display;var _374=_372.visibility;_372.visibility="hidden";_372.display="";var mb=_4.marginBox(node);_372.display=_373;_372.visibility=_374;var _375=Math.max(view.l,_36f.charAt(1)=="L"?pos.x:(pos.x-mb.w)),_376=Math.max(view.t,_36f.charAt(0)=="T"?pos.y:(pos.y-mb.h)),endX=Math.min(view.l+view.w,_36f.charAt(1)=="L"?(_375+mb.w):pos.x),endY=Math.min(view.t+view.h,_36f.charAt(0)=="T"?(_376+mb.h):pos.y),_377=endX-_375,_378=endY-_376;_370+=(mb.w-_377)+(mb.h-_378);if(best==null||_370<best.overflow){best={corner:_36f,aroundCorner:_36e.aroundCorner,x:_375,y:_376,w:_377,h:_378,overflow:_370,spaceAvailable:_371};}return !_370;});if(best.overflow&&_36c){_36c(node,best.aroundCorner,best.corner,best.spaceAvailable,_36d);}var l=_4._isBodyLtr(),s=node.style;s.top=best.y+"px";s[l?"left":"right"]=(l?best.x:view.w-best.x-best.w)+"px";return best;};_5.placeOnScreenAroundNode=function(node,_379,_37a,_37b){_379=_4.byId(_379);var _37c=_4.position(_379,true);return _5._placeOnScreenAroundRect(node,_37c.x,_37c.y,_37c.w,_37c.h,_37a,_37b);};_5.placeOnScreenAroundRectangle=function(node,_37d,_37e,_37f){return _5._placeOnScreenAroundRect(node,_37d.x,_37d.y,_37d.width,_37d.height,_37e,_37f);};_5._placeOnScreenAroundRect=function(node,x,y,_380,_381,_382,_383){var _384=[];for(var _385 in _382){_384.push({aroundCorner:_385,corner:_382[_385],pos:{x:x+(_385.charAt(1)=="L"?0:_380),y:y+(_385.charAt(0)=="T"?0:_381)}});}return _5._place(node,_384,_383,{w:_380,h:_381});};_5.placementRegistry=new _4.AdapterRegistry();_5.placementRegistry.register("node",function(n,x){return typeof x=="object"&&typeof x.offsetWidth!="undefined"&&typeof x.offsetHeight!="undefined";},_5.placeOnScreenAroundNode);_5.placementRegistry.register("rect",function(n,x){return typeof x=="object"&&"x" in x&&"y" in x&&"width" in x&&"height" in x;},_5.placeOnScreenAroundRectangle);_5.placeOnScreenAroundElement=function(node,_386,_387,_388){return _5.placementRegistry.match.apply(_5.placementRegistry,arguments);};_5.getPopupAroundAlignment=function(_389,_38a){var _38b={};_4.forEach(_389,function(pos){switch(pos){case "after":_38b[_38a?"BR":"BL"]=_38a?"BL":"BR";break;case "before":_38b[_38a?"BL":"BR"]=_38a?"BR":"BL";break;case "below-alt":_38a=!_38a;case "below":_38b[_38a?"BL":"BR"]=_38a?"TL":"TR";_38b[_38a?"BR":"BL"]=_38a?"TR":"TL";break;case "above-alt":_38a=!_38a;case "above":default:_38b[_38a?"TL":"TR"]=_38a?"BL":"BR";_38b[_38a?"TR":"TL"]=_38a?"BR":"BL";break;}});return _38b;};}if(!_4._hasResource["dijit._base.window"]){_4._hasResource["dijit._base.window"]=true;_4.provide("dijit._base.window");_5.getDocumentWindow=function(doc){return _4.window.get(doc);};}if(!_4._hasResource["dijit._base.popup"]){_4._hasResource["dijit._base.popup"]=true;_4.provide("dijit._base.popup");_5.popup={_stack:[],_beginZIndex:1000,_idGen:1,_createWrapper:function(_38c){var _38d=_38c.declaredClass?_38c._popupWrapper:(_38c.parentNode&&_4.hasClass(_38c.parentNode,"dijitPopup")),node=_38c.domNode||_38c;if(!_38d){_38d=_4.create("div",{"class":"dijitPopup",style:{display:"none"},role:"presentation"},_4.body());_38d.appendChild(node);var s=node.style;s.display="";s.visibility="";s.position="";s.top="0px";if(_38c.declaredClass){_38c._popupWrapper=_38d;_4.connect(_38c,"destroy",function(){_4.destroy(_38d);delete _38c._popupWrapper;});}}return _38d;},moveOffScreen:function(_38e){var _38f=this._createWrapper(_38e);_4.style(_38f,{visibility:"hidden",top:"-9999px",display:""});},hide:function(_390){var _391=this._createWrapper(_390);_4.style(_391,"display","none");},getTopPopup:function(){var _392=this._stack;for(var pi=_392.length-1;pi>0&&_392[pi].parent===_392[pi-1].widget;pi--){}return _392[pi];},open:function(args){var _393=this._stack,_394=args.popup,_395=args.orient||((args.parent?args.parent.isLeftToRight():_4._isBodyLtr())?{"BL":"TL","BR":"TR","TL":"BL","TR":"BR"}:{"BR":"TR","BL":"TL","TR":"BR","TL":"BL"}),_396=args.around,id=(args.around&&args.around.id)?(args.around.id+"_dropdown"):("popup_"+this._idGen++);while(_393.length&&(!args.parent||!_4.isDescendant(args.parent.domNode,_393[_393.length-1].widget.domNode))){_5.popup.close(_393[_393.length-1].widget);}var _397=this._createWrapper(_394);_4.attr(_397,{id:id,style:{zIndex:this._beginZIndex+_393.length},"class":"dijitPopup "+(_394.baseClass||_394["class"]||"").split(" ")[0]+"Popup",dijitPopupParent:args.parent?args.parent.id:""});if(_4.isIE||_4.isMoz){if(!_394.bgIframe){_394.bgIframe=new _5.BackgroundIframe(_397);}}var best=_396?_5.placeOnScreenAroundElement(_397,_396,_395,_394.orient?_4.hitch(_394,"orient"):null):_5.placeOnScreen(_397,args,_395=="R"?["TR","BR","TL","BL"]:["TL","BL","TR","BR"],args.padding);_397.style.display="";_397.style.visibility="visible";_394.domNode.style.visibility="visible";var _398=[];_398.push(_4.connect(_397,"onkeypress",this,function(evt){if(evt.charOrCode==_4.keys.ESCAPE&&args.onCancel){_4.stopEvent(evt);args.onCancel();}else{if(evt.charOrCode===_4.keys.TAB){_4.stopEvent(evt);var _399=this.getTopPopup();if(_399&&_399.onCancel){_399.onCancel();}}}}));if(_394.onCancel){_398.push(_4.connect(_394,"onCancel",args.onCancel));}_398.push(_4.connect(_394,_394.onExecute?"onExecute":"onChange",this,function(){var _39a=this.getTopPopup();if(_39a&&_39a.onExecute){_39a.onExecute();}}));_393.push({widget:_394,parent:args.parent,onExecute:args.onExecute,onCancel:args.onCancel,onClose:args.onClose,handlers:_398});if(_394.onOpen){_394.onOpen(best);}return best;},close:function(_39b){var _39c=this._stack;while((_39b&&_4.some(_39c,function(elem){return elem.widget==_39b;}))||(!_39b&&_39c.length)){var top=_39c.pop(),_39d=top.widget,_39e=top.onClose;if(_39d.onClose){_39d.onClose();}_4.forEach(top.handlers,_4.disconnect);if(_39d&&_39d.domNode){this.hide(_39d);}if(_39e){_39e();}}}};_5._frames=new function(){var _39f=[];this.pop=function(){var _3a0;if(_39f.length){_3a0=_39f.pop();_3a0.style.display="";}else{if(_4.isIE<9){var burl=_4.config["dojoBlankHtmlUrl"]||(_4.moduleUrl("dojo","resources/blank.html")+"")||"javascript:\"\"";var html="<iframe src='"+burl+"'"+" style='position: absolute; left: 0px; top: 0px;"+"z-index: -1; filter:Alpha(Opacity=\"0\");'>";_3a0=_4.doc.createElement(html);}else{_3a0=_4.create("iframe");_3a0.src="javascript:\"\"";_3a0.className="dijitBackgroundIframe";_4.style(_3a0,"opacity",0.1);}_3a0.tabIndex=-1;_5.setWaiRole(_3a0,"presentation");}return _3a0;};this.push=function(_3a1){_3a1.style.display="none";_39f.push(_3a1);};}();_5.BackgroundIframe=function(node){if(!node.id){throw new Error("no id");}if(_4.isIE||_4.isMoz){var _3a2=(this.iframe=_5._frames.pop());node.appendChild(_3a2);if(_4.isIE<7||_4.isQuirks){this.resize(node);this._conn=_4.connect(node,"onresize",this,function(){this.resize(node);});}else{_4.style(_3a2,{width:"100%",height:"100%"});}}};_4.extend(_5.BackgroundIframe,{resize:function(node){if(this.iframe){_4.style(this.iframe,{width:node.offsetWidth+"px",height:node.offsetHeight+"px"});}},destroy:function(){if(this._conn){_4.disconnect(this._conn);this._conn=null;}if(this.iframe){_5._frames.push(this.iframe);delete this.iframe;}}});}if(!_4._hasResource["dijit._base.scroll"]){_4._hasResource["dijit._base.scroll"]=true;_4.provide("dijit._base.scroll");_5.scrollIntoView=function(node,pos){_4.window.scrollIntoView(node,pos);};}if(!_4._hasResource["dojo.uacss"]){_4._hasResource["dojo.uacss"]=true;_4.provide("dojo.uacss");(function(){var d=_4,html=d.doc.documentElement,ie=d.isIE,_3a3=d.isOpera,maj=Math.floor,ff=d.isFF,_3a4=d.boxModel.replace(/-/,""),_3a5={dj_ie:ie,dj_ie6:maj(ie)==6,dj_ie7:maj(ie)==7,dj_ie8:maj(ie)==8,dj_ie9:maj(ie)==9,dj_quirks:d.isQuirks,dj_iequirks:ie&&d.isQuirks,dj_opera:_3a3,dj_khtml:d.isKhtml,dj_webkit:d.isWebKit,dj_safari:d.isSafari,dj_chrome:d.isChrome,dj_gecko:d.isMozilla,dj_ff3:maj(ff)==3};_3a5["dj_"+_3a4]=true;var _3a6="";for(var clz in _3a5){if(_3a5[clz]){_3a6+=clz+" ";}}html.className=d.trim(html.className+" "+_3a6);_4._loaders.unshift(function(){if(!_4._isBodyLtr()){var _3a7="dj_rtl dijitRtl "+_3a6.replace(/ /g,"-rtl ");html.className=d.trim(html.className+" "+_3a7);}});})();}if(!_4._hasResource["dijit._base.sniff"]){_4._hasResource["dijit._base.sniff"]=true;_4.provide("dijit._base.sniff");}if(!_4._hasResource["dijit._base.typematic"]){_4._hasResource["dijit._base.typematic"]=true;_4.provide("dijit._base.typematic");_5.typematic={_fireEventAndReload:function(){this._timer=null;this._callback(++this._count,this._node,this._evt);this._currentTimeout=Math.max(this._currentTimeout<0?this._initialDelay:(this._subsequentDelay>1?this._subsequentDelay:Math.round(this._currentTimeout*this._subsequentDelay)),this._minDelay);this._timer=setTimeout(_4.hitch(this,"_fireEventAndReload"),this._currentTimeout);},trigger:function(evt,_3a8,node,_3a9,obj,_3aa,_3ab,_3ac){if(obj!=this._obj){this.stop();this._initialDelay=_3ab||500;this._subsequentDelay=_3aa||0.9;this._minDelay=_3ac||10;this._obj=obj;this._evt=evt;this._node=node;this._currentTimeout=-1;this._count=-1;this._callback=_4.hitch(_3a8,_3a9);this._fireEventAndReload();this._evt=_4.mixin({faux:true},evt);}},stop:function(){if(this._timer){clearTimeout(this._timer);this._timer=null;}if(this._obj){this._callback(-1,this._node,this._evt);this._obj=null;}},addKeyListener:function(node,_3ad,_3ae,_3af,_3b0,_3b1,_3b2){if(_3ad.keyCode){_3ad.charOrCode=_3ad.keyCode;_4.deprecated("keyCode attribute parameter for dijit.typematic.addKeyListener is deprecated. Use charOrCode instead.","","2.0");}else{if(_3ad.charCode){_3ad.charOrCode=String.fromCharCode(_3ad.charCode);_4.deprecated("charCode attribute parameter for dijit.typematic.addKeyListener is deprecated. Use charOrCode instead.","","2.0");}}return [_4.connect(node,"onkeypress",this,function(evt){if(evt.charOrCode==_3ad.charOrCode&&(_3ad.ctrlKey===undefined||_3ad.ctrlKey==evt.ctrlKey)&&(_3ad.altKey===undefined||_3ad.altKey==evt.altKey)&&(_3ad.metaKey===undefined||_3ad.metaKey==(evt.metaKey||false))&&(_3ad.shiftKey===undefined||_3ad.shiftKey==evt.shiftKey)){_4.stopEvent(evt);_5.typematic.trigger(evt,_3ae,node,_3af,_3ad,_3b0,_3b1,_3b2);}else{if(_5.typematic._obj==_3ad){_5.typematic.stop();}}}),_4.connect(node,"onkeyup",this,function(evt){if(_5.typematic._obj==_3ad){_5.typematic.stop();}})];},addMouseListener:function(node,_3b3,_3b4,_3b5,_3b6,_3b7){var dc=_4.connect;return [dc(node,"mousedown",this,function(evt){_4.stopEvent(evt);_5.typematic.trigger(evt,_3b3,node,_3b4,node,_3b5,_3b6,_3b7);}),dc(node,"mouseup",this,function(evt){_4.stopEvent(evt);_5.typematic.stop();}),dc(node,"mouseout",this,function(evt){_4.stopEvent(evt);_5.typematic.stop();}),dc(node,"mousemove",this,function(evt){evt.preventDefault();}),dc(node,"dblclick",this,function(evt){_4.stopEvent(evt);if(_4.isIE){_5.typematic.trigger(evt,_3b3,node,_3b4,node,_3b5,_3b6,_3b7);setTimeout(_4.hitch(this,_5.typematic.stop),50);}})];},addListener:function(_3b8,_3b9,_3ba,_3bb,_3bc,_3bd,_3be,_3bf){return this.addKeyListener(_3b9,_3ba,_3bb,_3bc,_3bd,_3be,_3bf).concat(this.addMouseListener(_3b8,_3bb,_3bc,_3bd,_3be,_3bf));}};}if(!_4._hasResource["dijit._base.wai"]){_4._hasResource["dijit._base.wai"]=true;_4.provide("dijit._base.wai");_5.wai={onload:function(){var div=_4.create("div",{id:"a11yTestNode",style:{cssText:"border: 1px solid;"+"border-color:red green;"+"position: absolute;"+"height: 5px;"+"top: -999px;"+"background-image: url(\""+(_4.config.blankGif||_4.moduleUrl("dojo","resources/blank.gif"))+"\");"}},_4.body());var cs=_4.getComputedStyle(div);if(cs){var _3c0=cs.backgroundImage;var _3c1=(cs.borderTopColor==cs.borderRightColor)||(_3c0!=null&&(_3c0=="none"||_3c0=="url(invalid-url:)"));_4[_3c1?"addClass":"removeClass"](_4.body(),"dijit_a11y");if(_4.isIE){div.outerHTML="";}else{_4.body().removeChild(div);}}}};if(_4.isIE||_4.isMoz){_4._loaders.unshift(_5.wai.onload);}_4.mixin(_5,{hasWaiRole:function(elem,role){var _3c2=this.getWaiRole(elem);return role?(_3c2.indexOf(role)>-1):(_3c2.length>0);},getWaiRole:function(elem){return _4.trim((_4.attr(elem,"role")||"").replace("wairole:",""));},setWaiRole:function(elem,role){_4.attr(elem,"role",role);},removeWaiRole:function(elem,role){var _3c3=_4.attr(elem,"role");if(!_3c3){return;}if(role){var t=_4.trim((" "+_3c3+" ").replace(" "+role+" "," "));_4.attr(elem,"role",t);}else{elem.removeAttribute("role");}},hasWaiState:function(elem,_3c4){return elem.hasAttribute?elem.hasAttribute("aria-"+_3c4):!!elem.getAttribute("aria-"+_3c4);},getWaiState:function(elem,_3c5){return elem.getAttribute("aria-"+_3c5)||"";},setWaiState:function(elem,_3c6,_3c7){elem.setAttribute("aria-"+_3c6,_3c7);},removeWaiState:function(elem,_3c8){elem.removeAttribute("aria-"+_3c8);}});}if(!_4._hasResource["dijit._base"]){_4._hasResource["dijit._base"]=true;_4.provide("dijit._base");}if(!_4._hasResource["dijit._Widget"]){_4._hasResource["dijit._Widget"]=true;_4.provide("dijit._Widget");_4.connect(_4,"_connect",function(_3c9,_3ca){if(_3c9&&_4.isFunction(_3c9._onConnect)){_3c9._onConnect(_3ca);}});_5._connectOnUseEventHandler=function(_3cb){};_5._lastKeyDownNode=null;if(_4.isIE){(function(){var _3cc=function(evt){_5._lastKeyDownNode=evt.srcElement;};_4.doc.attachEvent("onkeydown",_3cc);_4.addOnWindowUnload(function(){_4.doc.detachEvent("onkeydown",_3cc);});})();}else{_4.doc.addEventListener("keydown",function(evt){_5._lastKeyDownNode=evt.target;},true);}(function(){_4.declare("dijit._Widget",_5._WidgetBase,{_deferredConnects:{onClick:"",onDblClick:"",onKeyDown:"",onKeyPress:"",onKeyUp:"",onMouseMove:"",onMouseDown:"",onMouseOut:"",onMouseOver:"",onMouseLeave:"",onMouseEnter:"",onMouseUp:""},onClick:_5._connectOnUseEventHandler,onDblClick:_5._connectOnUseEventHandler,onKeyDown:_5._connectOnUseEventHandler,onKeyPress:_5._connectOnUseEventHandler,onKeyUp:_5._connectOnUseEventHandler,onMouseDown:_5._connectOnUseEventHandler,onMouseMove:_5._connectOnUseEventHandler,onMouseOut:_5._connectOnUseEventHandler,onMouseOver:_5._connectOnUseEventHandler,onMouseLeave:_5._connectOnUseEventHandler,onMouseEnter:_5._connectOnUseEventHandler,onMouseUp:_5._connectOnUseEventHandler,create:function(_3cd,_3ce){this._deferredConnects=_4.clone(this._deferredConnects);for(var attr in this.attributeMap){delete this._deferredConnects[attr];}for(attr in this._deferredConnects){if(this[attr]!==_5._connectOnUseEventHandler){delete this._deferredConnects[attr];}}this.inherited(arguments);if(this.domNode){for(attr in this.params){this._onConnect(attr);}}},_onConnect:function(_3cf){if(_3cf in this._deferredConnects){var _3d0=this[this._deferredConnects[_3cf]||"domNode"];this.connect(_3d0,_3cf.toLowerCase(),_3cf);delete this._deferredConnects[_3cf];}},focused:false,isFocusable:function(){return this.focus&&(_4.style(this.domNode,"display")!="none");},onFocus:function(){},onBlur:function(){},_onFocus:function(e){this.onFocus();},_onBlur:function(){this.onBlur();},setAttribute:function(attr,_3d1){_4.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.","","2.0");this.set(attr,_3d1);},attr:function(name,_3d2){if(_4.config.isDebug){var _3d3=arguments.callee._ach||(arguments.callee._ach={}),_3d4=(arguments.callee.caller||"unknown caller").toString();if(!_3d3[_3d4]){_4.deprecated(this.declaredClass+"::attr() is deprecated. Use get() or set() instead, called from "+_3d4,"","2.0");_3d3[_3d4]=true;}}var args=arguments.length;if(args>=2||typeof name==="object"){return this.set.apply(this,arguments);}else{return this.get(name);}},nodesWithKeyClick:["input","button"],connect:function(obj,_3d5,_3d6){var d=_4,dc=d._connect,_3d7=this.inherited(arguments,[obj,_3d5=="ondijitclick"?"onclick":_3d5,_3d6]);if(_3d5=="ondijitclick"){if(d.indexOf(this.nodesWithKeyClick,obj.nodeName.toLowerCase())==-1){var m=d.hitch(this,_3d6);_3d7.push(dc(obj,"onkeydown",this,function(e){if((e.keyCode==d.keys.ENTER||e.keyCode==d.keys.SPACE)&&!e.ctrlKey&&!e.shiftKey&&!e.altKey&&!e.metaKey){_5._lastKeyDownNode=e.target;if(!("openDropDown" in this&&obj==this._buttonNode)){e.preventDefault();}}}),dc(obj,"onkeyup",this,function(e){if((e.keyCode==d.keys.ENTER||e.keyCode==d.keys.SPACE)&&e.target==_5._lastKeyDownNode&&!e.ctrlKey&&!e.shiftKey&&!e.altKey&&!e.metaKey){_5._lastKeyDownNode=null;return m(e);}}));}}return _3d7;},_onShow:function(){this.onShow();},onShow:function(){},onHide:function(){},onClose:function(){return true;}});})();}if(!_4._hasResource["dojo.string"]){_4._hasResource["dojo.string"]=true;_4.provide("dojo.string");_4.getObject("string",true,_4);_4.string.rep=function(str,num){if(num<=0||!str){return "";}var buf=[];for(;;){if(num&1){buf.push(str);}if(!(num>>=1)){break;}str+=str;}return buf.join("");};_4.string.pad=function(text,size,ch,end){if(!ch){ch="0";}var out=String(text),pad=_4.string.rep(ch,Math.ceil((size-out.length)/ch.length));return end?out+pad:pad+out;};_4.string.substitute=function(_3d8,map,_3d9,_3da){_3da=_3da||_4.global;_3d9=_3d9?_4.hitch(_3da,_3d9):function(v){return v;};return _3d8.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,function(_3db,key,_3dc){var _3dd=_4.getObject(key,false,map);if(_3dc){_3dd=_4.getObject(_3dc,false,_3da).call(_3da,_3dd,key);}return _3d9(_3dd,key).toString();});};_4.string.trim=String.prototype.trim?_4.trim:function(str){str=str.replace(/^\s+/,"");for(var i=str.length-1;i>=0;i--){if(/\S/.test(str.charAt(i))){str=str.substring(0,i+1);break;}}return str;};}if(!_4._hasResource["dojo.date.stamp"]){_4._hasResource["dojo.date.stamp"]=true;_4.provide("dojo.date.stamp");_4.getObject("date.stamp",true,_4);_4.date.stamp.fromISOString=function(_3de,_3df){if(!_4.date.stamp._isoRegExp){_4.date.stamp._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/;}var _3e0=_4.date.stamp._isoRegExp.exec(_3de),_3e1=null;if(_3e0){_3e0.shift();if(_3e0[1]){_3e0[1]--;}if(_3e0[6]){_3e0[6]*=1000;}if(_3df){_3df=new Date(_3df);_4.forEach(_4.map(["FullYear","Month","Date","Hours","Minutes","Seconds","Milliseconds"],function(prop){return _3df["get"+prop]();}),function(_3e2,_3e3){_3e0[_3e3]=_3e0[_3e3]||_3e2;});}_3e1=new Date(_3e0[0]||1970,_3e0[1]||0,_3e0[2]||1,_3e0[3]||0,_3e0[4]||0,_3e0[5]||0,_3e0[6]||0);if(_3e0[0]<100){_3e1.setFullYear(_3e0[0]||1970);}var _3e4=0,_3e5=_3e0[7]&&_3e0[7].charAt(0);if(_3e5!="Z"){_3e4=((_3e0[8]||0)*60)+(Number(_3e0[9])||0);if(_3e5!="-"){_3e4*=-1;}}if(_3e5){_3e4-=_3e1.getTimezoneOffset();}if(_3e4){_3e1.setTime(_3e1.getTime()+_3e4*60000);}}return _3e1;};_4.date.stamp.toISOString=function(_3e6,_3e7){var _3e8=function(n){return (n<10)?"0"+n:n;};_3e7=_3e7||{};var _3e9=[],_3ea=_3e7.zulu?"getUTC":"get",date="";if(_3e7.selector!="time"){var year=_3e6[_3ea+"FullYear"]();date=["0000".substr((year+"").length)+year,_3e8(_3e6[_3ea+"Month"]()+1),_3e8(_3e6[_3ea+"Date"]())].join("-");}_3e9.push(date);if(_3e7.selector!="date"){var time=[_3e8(_3e6[_3ea+"Hours"]()),_3e8(_3e6[_3ea+"Minutes"]()),_3e8(_3e6[_3ea+"Seconds"]())].join(":");var _3eb=_3e6[_3ea+"Milliseconds"]();if(_3e7.milliseconds){time+="."+(_3eb<100?"0":"")+_3e8(_3eb);}if(_3e7.zulu){time+="Z";}else{if(_3e7.selector!="time"){var _3ec=_3e6.getTimezoneOffset();var _3ed=Math.abs(_3ec);time+=(_3ec>0?"-":"+")+_3e8(Math.floor(_3ed/60))+":"+_3e8(_3ed%60);}}_3e9.push(time);}return _3e9.join("T");};}if(!_4._hasResource["dojo.parser"]){_4._hasResource["dojo.parser"]=true;_4.provide("dojo.parser");new Date("X");_4.parser=new function(){var d=_4;function _3ee(_3ef){if(d.isString(_3ef)){return "string";}if(typeof _3ef=="number"){return "number";}if(typeof _3ef=="boolean"){return "boolean";}if(d.isFunction(_3ef)){return "function";}if(d.isArray(_3ef)){return "array";}if(_3ef instanceof Date){return "date";}if(_3ef instanceof d._Url){return "url";}return "object";};function _3f0(_3f1,type){switch(type){case "string":return _3f1;case "number":return _3f1.length?Number(_3f1):NaN;case "boolean":return typeof _3f1=="boolean"?_3f1:!(_3f1.toLowerCase()=="false");case "function":if(d.isFunction(_3f1)){_3f1=_3f1.toString();_3f1=d.trim(_3f1.substring(_3f1.indexOf("{")+1,_3f1.length-1));}try{if(_3f1===""||_3f1.search(/[^\w\.]+/i)!=-1){return new Function(_3f1);}else{return d.getObject(_3f1,false)||new Function(_3f1);}}catch(e){return new Function();}case "array":return _3f1?_3f1.split(/\s*,\s*/):[];case "date":switch(_3f1){case "":return new Date("");case "now":return new Date();default:return d.date.stamp.fromISOString(_3f1);}case "url":return d.baseUrl+_3f1;default:return d.fromJson(_3f1);}};var _3f2={},_3f3={};d.connect(d,"extend",function(){_3f3={};});function _3f4(cls,_3f5){for(var name in cls){if(name.charAt(0)=="_"){continue;}if(name in _3f2){continue;}_3f5[name]=_3ee(cls[name]);}return _3f5;};function _3f6(_3f7,_3f8){var c=_3f3[_3f7];if(!c){var cls=d.getObject(_3f7),_3f9=null;if(!cls){return null;}if(!_3f8){_3f9=_3f4(cls.prototype,{});}c={cls:cls,params:_3f9};}else{if(!_3f8&&!c.params){c.params=_3f4(c.cls.prototype,{});}}return c;};this._functionFromScript=function(_3fa,_3fb){var _3fc="";var _3fd="";var _3fe=(_3fa.getAttribute(_3fb+"args")||_3fa.getAttribute("args"));if(_3fe){d.forEach(_3fe.split(/\s*,\s*/),function(part,idx){_3fc+="var "+part+" = arguments["+idx+"]; ";});}var _3ff=_3fa.getAttribute("with");if(_3ff&&_3ff.length){d.forEach(_3ff.split(/\s*,\s*/),function(part){_3fc+="with("+part+"){";_3fd+="}";});}return new Function(_3fc+_3fa.innerHTML+_3fd);};this.instantiate=function(_400,_401,args){var _402=[],_401=_401||{};args=args||{};var _403=(args.scope||d._scopeName)+"Type",_404="data-"+(args.scope||d._scopeName)+"-";d.forEach(_400,function(obj){if(!obj){return;}var node,type,_405,_406,_407,_408;if(obj.node){node=obj.node;type=obj.type;_408=obj.fastpath;_405=obj.clsInfo||(type&&_3f6(type,_408));_406=_405&&_405.cls;_407=obj.scripts;}else{node=obj;type=_403 in _401?_401[_403]:node.getAttribute(_403);_405=type&&_3f6(type);_406=_405&&_405.cls;_407=(_406&&(_406._noScript||_406.prototype._noScript)?[]:d.query("> script[type^='dojo/']",node));}if(!_405){throw new Error("Could not load class '"+type);}var _409={};if(args.defaults){d._mixin(_409,args.defaults);}if(obj.inherited){d._mixin(_409,obj.inherited);}if(_408){var _40a=node.getAttribute(_404+"props");if(_40a&&_40a.length){try{_40a=d.fromJson.call(args.propsThis,"{"+_40a+"}");d._mixin(_409,_40a);}catch(e){throw new Error(e.toString()+" in data-dojo-props='"+_40a+"'");}}var _40b=node.getAttribute(_404+"attach-point");if(_40b){_409.dojoAttachPoint=_40b;}var _40c=node.getAttribute(_404+"attach-event");if(_40c){_409.dojoAttachEvent=_40c;}_4.mixin(_409,_401);}else{var _40d=node.attributes;for(var name in _405.params){var item=name in _401?{value:_401[name],specified:true}:_40d.getNamedItem(name);if(!item||(!item.specified&&(!_4.isIE||name.toLowerCase()!="value"))){continue;}var _40e=item.value;switch(name){case "class":_40e="className" in _401?_401.className:node.className;break;case "style":_40e="style" in _401?_401.style:(node.style&&node.style.cssText);}var _40f=_405.params[name];if(typeof _40e=="string"){_409[name]=_3f0(_40e,_40f);}else{_409[name]=_40e;}}}var _410=[],_411=[];d.forEach(_407,function(_412){node.removeChild(_412);var _413=(_412.getAttribute(_404+"event")||_412.getAttribute("event")),type=_412.getAttribute("type"),nf=d.parser._functionFromScript(_412,_404);if(_413){if(type=="dojo/connect"){_410.push({event:_413,func:nf});}else{_409[_413]=nf;}}else{_411.push(nf);}});var _414=_406.markupFactory||_406.prototype&&_406.prototype.markupFactory;var _415=_414?_414(_409,node,_406):new _406(_409,node);_402.push(_415);var _416=(node.getAttribute(_404+"id")||node.getAttribute("jsId"));if(_416){d.setObject(_416,_415);}d.forEach(_410,function(_417){d.connect(_415,_417.event,null,_417.func);});d.forEach(_411,function(func){func.call(_415);});});if(!_401._started){d.forEach(_402,function(_418){if(!args.noStart&&_418&&_4.isFunction(_418.startup)&&!_418._started&&(!_418.getParent||!_418.getParent())){_418.startup();}});}return _402;};this.parse=function(_419,args){var root;if(!args&&_419&&_419.rootNode){args=_419;root=args.rootNode;}else{root=_419;}root=root?_4.byId(root):_4.body();args=args||{};var _41a=(args.scope||d._scopeName)+"Type",_41b="data-"+(args.scope||d._scopeName)+"-";function scan(_41c,list){var _41d=_4.clone(_41c.inherited);_4.forEach(["dir","lang"],function(name){var val=_41c.node.getAttribute(name);if(val){_41d[name]=val;}});var _41e=_41c.clsInfo&&!_41c.clsInfo.cls.prototype._noScript?_41c.scripts:null;var _41f=(!_41c.clsInfo||!_41c.clsInfo.cls.prototype.stopParser)||(args&&args.template);for(var _420=_41c.node.firstChild;_420;_420=_420.nextSibling){if(_420.nodeType==1){var type,_421=_41f&&_420.getAttribute(_41b+"type");if(_421){type=_421;}else{type=_41f&&_420.getAttribute(_41a);}var _422=_421==type;if(type){var _423={"type":type,fastpath:_422,clsInfo:_3f6(type,_422),node:_420,scripts:[],inherited:_41d};list.push(_423);scan(_423,list);}else{if(_41e&&_420.nodeName.toLowerCase()=="script"){type=_420.getAttribute("type");if(type&&/^dojo\/\w/i.test(type)){_41e.push(_420);}}else{if(_41f){scan({node:_420,inherited:_41d},list);}}}}}};var _424={};if(args&&args.inherited){for(var key in args.inherited){if(args.inherited[key]){_424[key]=args.inherited[key];}}}var list=[];scan({node:root,inherited:_424},list);var _425=args&&args.template?{template:true}:null;return this.instantiate(list,_425,args);};}();(function(){var _426=function(){if(_4.config.parseOnLoad){_4.parser.parse();}};if(_4.getObject("dijit.wai.onload")===_4._loaders[0]){_4._loaders.splice(1,0,_426);}else{_4._loaders.unshift(_426);}})();}if(!_4._hasResource["dojo.cache"]){_4._hasResource["dojo.cache"]=true;_4.provide("dojo.cache");var _427={};_4.cache=function(_428,url,_429){if(typeof _428=="string"){var _42a=_4.moduleUrl(_428,url);}else{_42a=_428;_429=url;}var key=_42a.toString();var val=_429;if(_429!=undefined&&!_4.isString(_429)){val=("value" in _429?_429.value:undefined);}var _42b=_429&&_429.sanitize?true:false;if(typeof val=="string"){val=_427[key]=_42b?_4.cache._sanitize(val):val;}else{if(val===null){delete _427[key];}else{if(!(key in _427)){val=_4._getText(key);_427[key]=_42b?_4.cache._sanitize(val):val;}val=_427[key];}}return val;};_4.cache._sanitize=function(val){if(val){val=val.replace(/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,"");var _42c=val.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);if(_42c){val=_42c[1];}}else{val="";}return val;};}if(!_4._hasResource["dijit._Templated"]){_4._hasResource["dijit._Templated"]=true;_4.provide("dijit._Templated");_4.declare("dijit._Templated",null,{templateString:null,templatePath:null,widgetsInTemplate:false,_skipNodeCache:false,_earlyTemplatedStartup:false,constructor:function(){this._attachPoints=[];this._attachEvents=[];},_stringRepl:function(tmpl){var _42d=this.declaredClass,_42e=this;return _4.string.substitute(tmpl,this,function(_42f,key){if(key.charAt(0)=="!"){_42f=_4.getObject(key.substr(1),false,_42e);}if(typeof _42f=="undefined"){throw new Error(_42d+" template:"+key);}if(_42f==null){return "";}return key.charAt(0)=="!"?_42f:_42f.toString().replace(/"/g,"&quot;");},this);},buildRendering:function(){var _430=_5._Templated.getCachedTemplate(this.templatePath,this.templateString,this._skipNodeCache);var node;if(_4.isString(_430)){node=_4._toDom(this._stringRepl(_430));if(node.nodeType!=1){throw new Error("Invalid template: "+_430);}}else{node=_430.cloneNode(true);}this.domNode=node;this.inherited(arguments);this._attachTemplateNodes(node);if(this.widgetsInTemplate){var cw=(this._startupWidgets=_4.parser.parse(node,{noStart:!this._earlyTemplatedStartup,template:true,inherited:{dir:this.dir,lang:this.lang},propsThis:this,scope:"dojo"}));this._supportingWidgets=_5.findWidgets(node);this._attachTemplateNodes(cw,function(n,p){return n[p];});}this._fillContent(this.srcNodeRef);},_fillContent:function(_431){var dest=this.containerNode;if(_431&&dest){while(_431.hasChildNodes()){dest.appendChild(_431.firstChild);}}},_attachTemplateNodes:function(_432,_433){_433=_433||function(n,p){return n.getAttribute(p);};var _434=_4.isArray(_432)?_432:(_432.all||_432.getElementsByTagName("*"));var x=_4.isArray(_432)?0:-1;for(;x<_434.length;x++){var _435=(x==-1)?_432:_434[x];if(this.widgetsInTemplate&&(_433(_435,"dojoType")||_433(_435,"data-dojo-type"))){continue;}var _436=_433(_435,"dojoAttachPoint")||_433(_435,"data-dojo-attach-point");if(_436){var _437,_438=_436.split(/\s*,\s*/);while((_437=_438.shift())){if(_4.isArray(this[_437])){this[_437].push(_435);}else{this[_437]=_435;}this._attachPoints.push(_437);}}var _439=_433(_435,"dojoAttachEvent")||_433(_435,"data-dojo-attach-event");if(_439){var _43a,_43b=_439.split(/\s*,\s*/);var trim=_4.trim;while((_43a=_43b.shift())){if(_43a){var _43c=null;if(_43a.indexOf(":")!=-1){var _43d=_43a.split(":");_43a=trim(_43d[0]);_43c=trim(_43d[1]);}else{_43a=trim(_43a);}if(!_43c){_43c=_43a;}this._attachEvents.push(this.connect(_435,_43a,_43c));}}}var role=_433(_435,"waiRole");if(role){_5.setWaiRole(_435,role);}var _43e=_433(_435,"waiState");if(_43e){_4.forEach(_43e.split(/\s*,\s*/),function(_43f){if(_43f.indexOf("-")!=-1){var pair=_43f.split("-");_5.setWaiState(_435,pair[0],pair[1]);}});}}},startup:function(){_4.forEach(this._startupWidgets,function(w){if(w&&!w._started&&w.startup){w.startup();}});this.inherited(arguments);},destroyRendering:function(){_4.forEach(this._attachPoints,function(_440){delete this[_440];},this);this._attachPoints=[];_4.forEach(this._attachEvents,this.disconnect,this);this._attachEvents=[];this.inherited(arguments);}});_5._Templated._templateCache={};_5._Templated.getCachedTemplate=function(_441,_442,_443){var _444=_5._Templated._templateCache;var key=_442||_441;var _445=_444[key];if(_445){try{if(!_445.ownerDocument||_445.ownerDocument==_4.doc){return _445;}}catch(e){}_4.destroy(_445);}if(!_442){_442=_4.cache(_441,{sanitize:true});}_442=_4.string.trim(_442);if(_443||_442.match(/\$\{([^\}]+)\}/g)){return (_444[key]=_442);}else{var node=_4._toDom(_442);if(node.nodeType!=1){throw new Error("Invalid template: "+_442);}return (_444[key]=node);}};if(_4.isIE){_4.addOnWindowUnload(function(){var _446=_5._Templated._templateCache;for(var key in _446){var _447=_446[key];if(typeof _447=="object"){_4.destroy(_447);}delete _446[key];}});}_4.extend(_5._Widget,{dojoAttachEvent:"",dojoAttachPoint:"",waiRole:"",waiState:""});}if(!_4._hasResource["dojo.regexp"]){_4._hasResource["dojo.regexp"]=true;_4.provide("dojo.regexp");_4.getObject("regexp",true,_4);_4.regexp.escapeString=function(str,_448){return str.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(ch){if(_448&&_448.indexOf(ch)!=-1){return ch;}return "\\"+ch;});};_4.regexp.buildGroupRE=function(arr,re,_449){if(!(arr instanceof Array)){return re(arr);}var b=[];for(var i=0;i<arr.length;i++){b.push(re(arr[i]));}return _4.regexp.group(b.join("|"),_449);};_4.regexp.group=function(_44a,_44b){return "("+(_44b?"?:":"")+_44a+")";};}if(!_4._hasResource["dojo.number"]){_4._hasResource["dojo.number"]=true;_4.provide("dojo.number");_4.getObject("number",true,_4);_4.number.format=function(_44c,_44d){_44d=_4.mixin({},_44d||{});var _44e=_4.i18n.normalizeLocale(_44d.locale),_44f=_4.i18n.getLocalization("dojo.cldr","number",_44e);_44d.customs=_44f;var _450=_44d.pattern||_44f[(_44d.type||"decimal")+"Format"];if(isNaN(_44c)||Math.abs(_44c)==Infinity){return null;}return _4.number._applyPattern(_44c,_450,_44d);};_4.number._numberPatternRE=/[#0,]*[#0](?:\.0*#*)?/;_4.number._applyPattern=function(_451,_452,_453){_453=_453||{};var _454=_453.customs.group,_455=_453.customs.decimal,_456=_452.split(";"),_457=_456[0];_452=_456[(_451<0)?1:0]||("-"+_457);if(_452.indexOf("%")!=-1){_451*=100;}else{if(_452.indexOf("")!=-1){_451*=1000;}else{if(_452.indexOf("")!=-1){_454=_453.customs.currencyGroup||_454;_455=_453.customs.currencyDecimal||_455;_452=_452.replace(/\u00a4{1,3}/,function(_458){var prop=["symbol","currency","displayName"][_458.length-1];return _453[prop]||_453.currency||"";});}else{if(_452.indexOf("E")!=-1){throw new Error("exponential notation not supported");}}}}var _459=_4.number._numberPatternRE;var _45a=_457.match(_459);if(!_45a){throw new Error("unable to find a number expression in pattern: "+_452);}if(_453.fractional===false){_453.places=0;}return _452.replace(_459,_4.number._formatAbsolute(_451,_45a[0],{decimal:_455,group:_454,places:_453.places,round:_453.round}));};_4.number.round=function(_45b,_45c,_45d){var _45e=10/(_45d||10);return (_45e*+_45b).toFixed(_45c)/_45e;};if((0.9).toFixed()==0){(function(){var _45f=_4.number.round;_4.number.round=function(v,p,m){var d=Math.pow(10,-p||0),a=Math.abs(v);if(!v||a>=d||a*Math.pow(10,p+1)<5){d=0;}return _45f(v,p,m)+(v>0?d:-d);};})();}_4.number._formatAbsolute=function(_460,_461,_462){_462=_462||{};if(_462.places===true){_462.places=0;}if(_462.places===Infinity){_462.places=6;}var _463=_461.split("."),_464=typeof _462.places=="string"&&_462.places.indexOf(","),_465=_462.places;if(_464){_465=_462.places.substring(_464+1);}else{if(!(_465>=0)){_465=(_463[1]||[]).length;}}if(!(_462.round<0)){_460=_4.number.round(_460,_465,_462.round);}var _466=String(Math.abs(_460)).split("."),_467=_466[1]||"";if(_463[1]||_462.places){if(_464){_462.places=_462.places.substring(0,_464);}var pad=_462.places!==undefined?_462.places:(_463[1]&&_463[1].lastIndexOf("0")+1);if(pad>_467.length){_466[1]=_4.string.pad(_467,pad,"0",true);}if(_465<_467.length){_466[1]=_467.substr(0,_465);}}else{if(_466[1]){_466.pop();}}var _468=_463[0].replace(",","");pad=_468.indexOf("0");if(pad!=-1){pad=_468.length-pad;if(pad>_466[0].length){_466[0]=_4.string.pad(_466[0],pad);}if(_468.indexOf("#")==-1){_466[0]=_466[0].substr(_466[0].length-pad);}}var _469=_463[0].lastIndexOf(","),_46a,_46b;if(_469!=-1){_46a=_463[0].length-_469-1;var _46c=_463[0].substr(0,_469);_469=_46c.lastIndexOf(",");if(_469!=-1){_46b=_46c.length-_469-1;}}var _46d=[];for(var _46e=_466[0];_46e;){var off=_46e.length-_46a;_46d.push((off>0)?_46e.substr(off):_46e);_46e=(off>0)?_46e.slice(0,off):"";if(_46b){_46a=_46b;delete _46b;}}_466[0]=_46d.reverse().join(_462.group||",");return _466.join(_462.decimal||".");};_4.number.regexp=function(_46f){return _4.number._parseInfo(_46f).regexp;};_4.number._parseInfo=function(_470){_470=_470||{};var _471=_4.i18n.normalizeLocale(_470.locale),_472=_4.i18n.getLocalization("dojo.cldr","number",_471),_473=_470.pattern||_472[(_470.type||"decimal")+"Format"],_474=_472.group,_475=_472.decimal,_476=1;if(_473.indexOf("%")!=-1){_476/=100;}else{if(_473.indexOf("")!=-1){_476/=1000;}else{var _477=_473.indexOf("")!=-1;if(_477){_474=_472.currencyGroup||_474;_475=_472.currencyDecimal||_475;}}}var _478=_473.split(";");if(_478.length==1){_478.push("-"+_478[0]);}var re=_4.regexp.buildGroupRE(_478,function(_479){_479="(?:"+_4.regexp.escapeString(_479,".")+")";return _479.replace(_4.number._numberPatternRE,function(_47a){var _47b={signed:false,separator:_470.strict?_474:[_474,""],fractional:_470.fractional,decimal:_475,exponent:false},_47c=_47a.split("."),_47d=_470.places;if(_47c.length==1&&_476!=1){_47c[1]="###";}if(_47c.length==1||_47d===0){_47b.fractional=false;}else{if(_47d===undefined){_47d=_470.pattern?_47c[1].lastIndexOf("0")+1:Infinity;}if(_47d&&_470.fractional==undefined){_47b.fractional=true;}if(!_470.places&&(_47d<_47c[1].length)){_47d+=","+_47c[1].length;}_47b.places=_47d;}var _47e=_47c[0].split(",");if(_47e.length>1){_47b.groupSize=_47e.pop().length;if(_47e.length>1){_47b.groupSize2=_47e.pop().length;}}return "("+_4.number._realNumberRegexp(_47b)+")";});},true);if(_477){re=re.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/g,function(_47f,_480,_481,_482){var prop=["symbol","currency","displayName"][_481.length-1],_483=_4.regexp.escapeString(_470[prop]||_470.currency||"");_480=_480?"[\\s\\xa0]":"";_482=_482?"[\\s\\xa0]":"";if(!_470.strict){if(_480){_480+="*";}if(_482){_482+="*";}return "(?:"+_480+_483+_482+")?";}return _480+_483+_482;});}return {regexp:re.replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:_474,decimal:_475,factor:_476};};_4.number.parse=function(_484,_485){var info=_4.number._parseInfo(_485),_486=(new RegExp("^"+info.regexp+"$")).exec(_484);if(!_486){return NaN;}var _487=_486[1];if(!_486[1]){if(!_486[2]){return NaN;}_487=_486[2];info.factor*=-1;}_487=_487.replace(new RegExp("["+info.group+"\\s\\xa0"+"]","g"),"").replace(info.decimal,".");return _487*info.factor;};_4.number._realNumberRegexp=function(_488){_488=_488||{};if(!("places" in _488)){_488.places=Infinity;}if(typeof _488.decimal!="string"){_488.decimal=".";}if(!("fractional" in _488)||/^0/.test(_488.places)){_488.fractional=[true,false];}if(!("exponent" in _488)){_488.exponent=[true,false];}if(!("eSigned" in _488)){_488.eSigned=[true,false];}var _489=_4.number._integerRegexp(_488),_48a=_4.regexp.buildGroupRE(_488.fractional,function(q){var re="";if(q&&(_488.places!==0)){re="\\"+_488.decimal;if(_488.places==Infinity){re="(?:"+re+"\\d+)?";}else{re+="\\d{"+_488.places+"}";}}return re;},true);var _48b=_4.regexp.buildGroupRE(_488.exponent,function(q){if(q){return "([eE]"+_4.number._integerRegexp({signed:_488.eSigned})+")";}return "";});var _48c=_489+_48a;if(_48a){_48c="(?:(?:"+_48c+")|(?:"+_48a+"))";}return _48c+_48b;};_4.number._integerRegexp=function(_48d){_48d=_48d||{};if(!("signed" in _48d)){_48d.signed=[true,false];}if(!("separator" in _48d)){_48d.separator="";}else{if(!("groupSize" in _48d)){_48d.groupSize=3;}}var _48e=_4.regexp.buildGroupRE(_48d.signed,function(q){return q?"[-+]":"";},true);var _48f=_4.regexp.buildGroupRE(_48d.separator,function(sep){if(!sep){return "(?:\\d+)";}sep=_4.regexp.escapeString(sep);if(sep==" "){sep="\\s";}else{if(sep==""){sep="\\s\\xa0";}}var grp=_48d.groupSize,grp2=_48d.groupSize2;if(grp2){var _490="(?:0|[1-9]\\d{0,"+(grp2-1)+"}(?:["+sep+"]\\d{"+grp2+"})*["+sep+"]\\d{"+grp+"})";return ((grp-grp2)>0)?"(?:"+_490+"|(?:0|[1-9]\\d{0,"+(grp-1)+"}))":_490;}return "(?:0|[1-9]\\d{0,"+(grp-1)+"}(?:["+sep+"]\\d{"+grp+"})*)";},true);return _48e+_48f;};}if(!_4._hasResource["dojo.cldr.supplemental"]){_4._hasResource["dojo.cldr.supplemental"]=true;_4.provide("dojo.cldr.supplemental");_4.getObject("cldr.supplemental",true,_4);_4.cldr.supplemental.getFirstDayOfWeek=function(_491){var _492={mv:5,ae:6,af:6,bh:6,dj:6,dz:6,eg:6,er:6,et:6,iq:6,ir:6,jo:6,ke:6,kw:6,ly:6,ma:6,om:6,qa:6,sa:6,sd:6,so:6,sy:6,tn:6,ye:6,ar:0,as:0,az:0,bw:0,ca:0,cn:0,fo:0,ge:0,gl:0,gu:0,hk:0,il:0,"in":0,jm:0,jp:0,kg:0,kr:0,la:0,mh:0,mn:0,mo:0,mp:0,mt:0,nz:0,ph:0,pk:0,sg:0,th:0,tt:0,tw:0,um:0,us:0,uz:0,vi:0,zw:0};var _493=_4.cldr.supplemental._region(_491);var dow=_492[_493];return (dow===undefined)?1:dow;};_4.cldr.supplemental._region=function(_494){_494=_4.i18n.normalizeLocale(_494);var tags=_494.split("-");var _495=tags[1];if(!_495){_495={de:"de",en:"us",es:"es",fi:"fi",fr:"fr",he:"il",hu:"hu",it:"it",ja:"jp",ko:"kr",nl:"nl",pt:"br",sv:"se",zh:"cn"}[tags[0]];}else{if(_495.length==4){_495=tags[2];}}return _495;};_4.cldr.supplemental.getWeekend=function(_496){var _497={"in":0,af:4,dz:4,ir:4,om:4,sa:4,ye:4,ae:5,bh:5,eg:5,il:5,iq:5,jo:5,kw:5,ly:5,ma:5,qa:5,sd:5,sy:5,tn:5};var _498={af:5,dz:5,ir:5,om:5,sa:5,ye:5,ae:6,bh:5,eg:6,il:6,iq:6,jo:6,kw:6,ly:6,ma:6,qa:6,sd:6,sy:6,tn:6};var _499=_4.cldr.supplemental._region(_496);var _49a=_497[_499];var end=_498[_499];if(_49a===undefined){_49a=6;}if(end===undefined){end=0;}return {start:_49a,end:end};};}if(!_4._hasResource["dojo.date.locale"]){_4._hasResource["dojo.date.locale"]=true;_4.provide("dojo.date.locale");_4.getObject("date.locale",true,_4);(function(){function _49b(_49c,_49d,_49e,_49f){return _49f.replace(/([a-z])\1*/ig,function(_4a0){var s,pad,c=_4a0.charAt(0),l=_4a0.length,_4a1=["abbr","wide","narrow"];switch(c){case "G":s=_49d[(l<4)?"eraAbbr":"eraNames"][_49c.getFullYear()<0?0:1];break;case "y":s=_49c.getFullYear();switch(l){case 1:break;case 2:if(!_49e.fullYear){s=String(s);s=s.substr(s.length-2);break;}default:pad=true;}break;case "Q":case "q":s=Math.ceil((_49c.getMonth()+1)/3);pad=true;break;case "M":var m=_49c.getMonth();if(l<3){s=m+1;pad=true;}else{var _4a2=["months","format",_4a1[l-3]].join("-");s=_49d[_4a2][m];}break;case "w":var _4a3=0;s=_4.date.locale._getWeekOfYear(_49c,_4a3);pad=true;break;case "d":s=_49c.getDate();pad=true;break;case "D":s=_4.date.locale._getDayOfYear(_49c);pad=true;break;case "E":var d=_49c.getDay();if(l<3){s=d+1;pad=true;}else{var _4a4=["days","format",_4a1[l-3]].join("-");s=_49d[_4a4][d];}break;case "a":var _4a5=(_49c.getHours()<12)?"am":"pm";s=_49e[_4a5]||_49d["dayPeriods-format-wide-"+_4a5];break;case "h":case "H":case "K":case "k":var h=_49c.getHours();switch(c){case "h":s=(h%12)||12;break;case "H":s=h;break;case "K":s=(h%12);break;case "k":s=h||24;break;}pad=true;break;case "m":s=_49c.getMinutes();pad=true;break;case "s":s=_49c.getSeconds();pad=true;break;case "S":s=Math.round(_49c.getMilliseconds()*Math.pow(10,l-3));pad=true;break;case "v":case "z":s=_4.date.locale._getZone(_49c,true,_49e);if(s){break;}l=4;case "Z":var _4a6=_4.date.locale._getZone(_49c,false,_49e);var tz=[(_4a6<=0?"+":"-"),_4.string.pad(Math.floor(Math.abs(_4a6)/60),2),_4.string.pad(Math.abs(_4a6)%60,2)];if(l==4){tz.splice(0,0,"GMT");tz.splice(3,0,":");}s=tz.join("");break;default:throw new Error("dojo.date.locale.format: invalid pattern char: "+_49f);}if(pad){s=_4.string.pad(s,l);}return s;});};_4.date.locale._getZone=function(_4a7,_4a8,_4a9){if(_4a8){return _4.date.getTimezoneName(_4a7);}else{return _4a7.getTimezoneOffset();}};_4.date.locale.format=function(_4aa,_4ab){_4ab=_4ab||{};var _4ac=_4.i18n.normalizeLocale(_4ab.locale),_4ad=_4ab.formatLength||"short",_4ae=_4.date.locale._getGregorianBundle(_4ac),str=[],_4af=_4.hitch(this,_49b,_4aa,_4ae,_4ab);if(_4ab.selector=="year"){return _4b0(_4ae["dateFormatItem-yyyy"]||"yyyy",_4af);}var _4b1;if(_4ab.selector!="date"){_4b1=_4ab.timePattern||_4ae["timeFormat-"+_4ad];if(_4b1){str.push(_4b0(_4b1,_4af));}}if(_4ab.selector!="time"){_4b1=_4ab.datePattern||_4ae["dateFormat-"+_4ad];if(_4b1){str.push(_4b0(_4b1,_4af));}}return str.length==1?str[0]:_4ae["dateTimeFormat-"+_4ad].replace(/\{(\d+)\}/g,function(_4b2,key){return str[key];});};_4.date.locale.regexp=function(_4b3){return _4.date.locale._parseInfo(_4b3).regexp;};_4.date.locale._parseInfo=function(_4b4){_4b4=_4b4||{};var _4b5=_4.i18n.normalizeLocale(_4b4.locale),_4b6=_4.date.locale._getGregorianBundle(_4b5),_4b7=_4b4.formatLength||"short",_4b8=_4b4.datePattern||_4b6["dateFormat-"+_4b7],_4b9=_4b4.timePattern||_4b6["timeFormat-"+_4b7],_4ba;if(_4b4.selector=="date"){_4ba=_4b8;}else{if(_4b4.selector=="time"){_4ba=_4b9;}else{_4ba=_4b6["dateTimeFormat-"+_4b7].replace(/\{(\d+)\}/g,function(_4bb,key){return [_4b9,_4b8][key];});}}var _4bc=[],re=_4b0(_4ba,_4.hitch(this,_4bd,_4bc,_4b6,_4b4));return {regexp:re,tokens:_4bc,bundle:_4b6};};_4.date.locale.parse=function(_4be,_4bf){var _4c0=/[\u200E\u200F\u202A\u202E]/g,info=_4.date.locale._parseInfo(_4bf),_4c1=info.tokens,_4c2=info.bundle,re=new RegExp("^"+info.regexp.replace(_4c0,"")+"$",info.strict?"":"i"),_4c3=re.exec(_4be&&_4be.replace(_4c0,""));if(!_4c3){return null;}var _4c4=["abbr","wide","narrow"],_4c5=[1970,0,1,0,0,0,0],amPm="",_4c6=_4.every(_4c3,function(v,i){if(!i){return true;}var _4c7=_4c1[i-1];var l=_4c7.length;switch(_4c7.charAt(0)){case "y":if(l!=2&&_4bf.strict){_4c5[0]=v;}else{if(v<100){v=Number(v);var year=""+new Date().getFullYear(),_4c8=year.substring(0,2)*100,_4c9=Math.min(Number(year.substring(2,4))+20,99),num=(v<_4c9)?_4c8+v:_4c8-100+v;_4c5[0]=num;}else{if(_4bf.strict){return false;}_4c5[0]=v;}}break;case "M":if(l>2){var _4ca=_4c2["months-format-"+_4c4[l-3]].concat();if(!_4bf.strict){v=v.replace(".","").toLowerCase();_4ca=_4.map(_4ca,function(s){return s.replace(".","").toLowerCase();});}v=_4.indexOf(_4ca,v);if(v==-1){return false;}}else{v--;}_4c5[1]=v;break;case "E":case "e":var days=_4c2["days-format-"+_4c4[l-3]].concat();if(!_4bf.strict){v=v.toLowerCase();days=_4.map(days,function(d){return d.toLowerCase();});}v=_4.indexOf(days,v);if(v==-1){return false;}break;case "D":_4c5[1]=0;case "d":_4c5[2]=v;break;case "a":var am=_4bf.am||_4c2["dayPeriods-format-wide-am"],pm=_4bf.pm||_4c2["dayPeriods-format-wide-pm"];if(!_4bf.strict){var _4cb=/\./g;v=v.replace(_4cb,"").toLowerCase();am=am.replace(_4cb,"").toLowerCase();pm=pm.replace(_4cb,"").toLowerCase();}if(_4bf.strict&&v!=am&&v!=pm){return false;}amPm=(v==pm)?"p":(v==am)?"a":"";break;case "K":if(v==24){v=0;}case "h":case "H":case "k":if(v>23){return false;}_4c5[3]=v;break;case "m":_4c5[4]=v;break;case "s":_4c5[5]=v;break;case "S":_4c5[6]=v;}return true;});var _4cc=+_4c5[3];if(amPm==="p"&&_4cc<12){_4c5[3]=_4cc+12;}else{if(amPm==="a"&&_4cc==12){_4c5[3]=0;}}var _4cd=new Date(_4c5[0],_4c5[1],_4c5[2],_4c5[3],_4c5[4],_4c5[5],_4c5[6]);if(_4bf.strict){_4cd.setFullYear(_4c5[0]);}var _4ce=_4c1.join(""),_4cf=_4ce.indexOf("d")!=-1,_4d0=_4ce.indexOf("M")!=-1;if(!_4c6||(_4d0&&_4cd.getMonth()>_4c5[1])||(_4cf&&_4cd.getDate()>_4c5[2])){return null;}if((_4d0&&_4cd.getMonth()<_4c5[1])||(_4cf&&_4cd.getDate()<_4c5[2])){_4cd=_4.date.add(_4cd,"hour",1);}return _4cd;};function _4b0(_4d1,_4d2,_4d3,_4d4){var _4d5=function(x){return x;};_4d2=_4d2||_4d5;_4d3=_4d3||_4d5;_4d4=_4d4||_4d5;var _4d6=_4d1.match(/(''|[^'])+/g),_4d7=_4d1.charAt(0)=="'";_4.forEach(_4d6,function(_4d8,i){if(!_4d8){_4d6[i]="";}else{_4d6[i]=(_4d7?_4d3:_4d2)(_4d8.replace(/''/g,"'"));_4d7=!_4d7;}});return _4d4(_4d6.join(""));};function _4bd(_4d9,_4da,_4db,_4dc){_4dc=_4.regexp.escapeString(_4dc);if(!_4db.strict){_4dc=_4dc.replace(" a"," ?a");}return _4dc.replace(/([a-z])\1*/ig,function(_4dd){var s,c=_4dd.charAt(0),l=_4dd.length,p2="",p3="";if(_4db.strict){if(l>1){p2="0"+"{"+(l-1)+"}";}if(l>2){p3="0"+"{"+(l-2)+"}";}}else{p2="0?";p3="0{0,2}";}switch(c){case "y":s="\\d{2,4}";break;case "M":s=(l>2)?"\\S+?":"1[0-2]|"+p2+"[1-9]";break;case "D":s="[12][0-9][0-9]|3[0-5][0-9]|36[0-6]|"+p3+"[1-9][0-9]|"+p2+"[1-9]";break;case "d":s="3[01]|[12]\\d|"+p2+"[1-9]";break;case "w":s="[1-4][0-9]|5[0-3]|"+p2+"[1-9]";break;case "E":s="\\S+";break;case "h":s="1[0-2]|"+p2+"[1-9]";break;case "k":s="1[01]|"+p2+"\\d";break;case "H":s="1\\d|2[0-3]|"+p2+"\\d";break;case "K":s="1\\d|2[0-4]|"+p2+"[1-9]";break;case "m":case "s":s="[0-5]\\d";break;case "S":s="\\d{"+l+"}";break;case "a":var am=_4db.am||_4da["dayPeriods-format-wide-am"],pm=_4db.pm||_4da["dayPeriods-format-wide-pm"];s=am+"|"+pm;if(!_4db.strict){if(am!=am.toLowerCase()){s+="|"+am.toLowerCase();}if(pm!=pm.toLowerCase()){s+="|"+pm.toLowerCase();}if(s.indexOf(".")!=-1){s+="|"+s.replace(/\./g,"");}}s=s.replace(/\./g,"\\.");break;default:s=".*";}if(_4d9){_4d9.push(_4dd);}return "("+s+")";}).replace(/[\xa0 ]/g,"[\\s\\xa0]");};})();(function(){var _4de=[];_4.date.locale.addCustomFormats=function(_4df,_4e0){_4de.push({pkg:_4df,name:_4e0});};_4.date.locale._getGregorianBundle=function(_4e1){var _4e2={};_4.forEach(_4de,function(desc){var _4e3=_4.i18n.getLocalization(desc.pkg,desc.name,_4e1);_4e2=_4.mixin(_4e2,_4e3);},this);return _4e2;};})();_4.date.locale.addCustomFormats("dojo.cldr","gregorian");_4.date.locale.getNames=function(item,type,_4e4,_4e5){var _4e6,_4e7=_4.date.locale._getGregorianBundle(_4e5),_4e8=[item,_4e4,type];if(_4e4=="standAlone"){var key=_4e8.join("-");_4e6=_4e7[key];if(_4e6[0]==1){_4e6=undefined;}}_4e8[1]="format";return (_4e6||_4e7[_4e8.join("-")]).concat();};_4.date.locale.isWeekend=function(_4e9,_4ea){var _4eb=_4.cldr.supplemental.getWeekend(_4ea),day=(_4e9||new Date()).getDay();if(_4eb.end<_4eb.start){_4eb.end+=7;if(day<_4eb.start){day+=7;}}return day>=_4eb.start&&day<=_4eb.end;};_4.date.locale._getDayOfYear=function(_4ec){return _4.date.difference(new Date(_4ec.getFullYear(),0,1,_4ec.getHours()),_4ec)+1;};_4.date.locale._getWeekOfYear=function(_4ed,_4ee){if(arguments.length==1){_4ee=0;}var _4ef=new Date(_4ed.getFullYear(),0,1).getDay(),adj=(_4ef-_4ee+7)%7,week=Math.floor((_4.date.locale._getDayOfYear(_4ed)+adj-1)/7);if(_4ef==_4ee){week++;}return week;};}if(!_4._hasResource["dojox.charting.scaler.common"]){_4._hasResource["dojox.charting.scaler.common"]=true;_4.provide("dojox.charting.scaler.common");(function(){var eq=function(a,b){return Math.abs(a-b)<=0.000001*(Math.abs(a)+Math.abs(b));};_4.mixin(_6.charting.scaler.common,{findString:function(val,text){val=val.toLowerCase();for(var i=0;i<text.length;++i){if(val==text[i]){return true;}}return false;},getNumericLabel:function(_4f0,_4f1,_4f2){var def="";if(_4.number){def=(_4f2.fixed?_4.number.format(_4f0,{places:_4f1<0?-_4f1:0}):_4.number.format(_4f0))||"";}else{def=_4f2.fixed?_4f0.toFixed(_4f1<0?-_4f1:0):_4f0.toString();}if(_4f2.labelFunc){var r=_4f2.labelFunc(def,_4f0,_4f1);if(r){return r;}}if(_4f2.labels){var l=_4f2.labels,lo=0,hi=l.length;while(lo<hi){var mid=Math.floor((lo+hi)/2),val=l[mid].value;if(val<_4f0){lo=mid+1;}else{hi=mid;}}if(lo<l.length&&eq(l[lo].value,_4f0)){return l[lo].text;}--lo;if(lo>=0&&lo<l.length&&eq(l[lo].value,_4f0)){return l[lo].text;}lo+=2;if(lo<l.length&&eq(l[lo].value,_4f0)){return l[lo].text;}}return def;}});})();}if(!_4._hasResource["dojox.charting.scaler.linear"]){_4._hasResource["dojox.charting.scaler.linear"]=true;_4.provide("dojox.charting.scaler.linear");(function(){var _4f3=3,dc=_6.charting,dcs=dc.scaler,dcsc=dcs.common,_4f4=dcsc.findString,_4f5=dcsc.getNumericLabel;var _4f6=function(min,max,_4f7,_4f8,_4f9,_4fa,span){_4f7=_4.delegate(_4f7);if(!_4f8){if(_4f7.fixUpper=="major"){_4f7.fixUpper="minor";}if(_4f7.fixLower=="major"){_4f7.fixLower="minor";}}if(!_4f9){if(_4f7.fixUpper=="minor"){_4f7.fixUpper="micro";}if(_4f7.fixLower=="minor"){_4f7.fixLower="micro";}}if(!_4fa){if(_4f7.fixUpper=="micro"){_4f7.fixUpper="none";}if(_4f7.fixLower=="micro"){_4f7.fixLower="none";}}var _4fb=_4f4(_4f7.fixLower,["major"])?Math.floor(_4f7.min/_4f8)*_4f8:_4f4(_4f7.fixLower,["minor"])?Math.floor(_4f7.min/_4f9)*_4f9:_4f4(_4f7.fixLower,["micro"])?Math.floor(_4f7.min/_4fa)*_4fa:_4f7.min,_4fc=_4f4(_4f7.fixUpper,["major"])?Math.ceil(_4f7.max/_4f8)*_4f8:_4f4(_4f7.fixUpper,["minor"])?Math.ceil(_4f7.max/_4f9)*_4f9:_4f4(_4f7.fixUpper,["micro"])?Math.ceil(_4f7.max/_4fa)*_4fa:_4f7.max;if(_4f7.useMin){min=_4fb;}if(_4f7.useMax){max=_4fc;}var _4fd=(!_4f8||_4f7.useMin&&_4f4(_4f7.fixLower,["major"]))?min:Math.ceil(min/_4f8)*_4f8,_4fe=(!_4f9||_4f7.useMin&&_4f4(_4f7.fixLower,["major","minor"]))?min:Math.ceil(min/_4f9)*_4f9,_4ff=(!_4fa||_4f7.useMin&&_4f4(_4f7.fixLower,["major","minor","micro"]))?min:Math.ceil(min/_4fa)*_4fa,_500=!_4f8?0:(_4f7.useMax&&_4f4(_4f7.fixUpper,["major"])?Math.round((max-_4fd)/_4f8):Math.floor((max-_4fd)/_4f8))+1,_501=!_4f9?0:(_4f7.useMax&&_4f4(_4f7.fixUpper,["major","minor"])?Math.round((max-_4fe)/_4f9):Math.floor((max-_4fe)/_4f9))+1,_502=!_4fa?0:(_4f7.useMax&&_4f4(_4f7.fixUpper,["major","minor","micro"])?Math.round((max-_4ff)/_4fa):Math.floor((max-_4ff)/_4fa))+1,_503=_4f9?Math.round(_4f8/_4f9):0,_504=_4fa?Math.round(_4f9/_4fa):0,_505=_4f8?Math.floor(Math.log(_4f8)/Math.LN10):0,_506=_4f9?Math.floor(Math.log(_4f9)/Math.LN10):0,_507=span/(max-min);if(!isFinite(_507)){_507=1;}return {bounds:{lower:_4fb,upper:_4fc,from:min,to:max,scale:_507,span:span},major:{tick:_4f8,start:_4fd,count:_500,prec:_505},minor:{tick:_4f9,start:_4fe,count:_501,prec:_506},micro:{tick:_4fa,start:_4ff,count:_502,prec:0},minorPerMajor:_503,microPerMinor:_504,scaler:dcs.linear};};_4.mixin(_6.charting.scaler.linear,{buildScaler:function(min,max,span,_508){var h={fixUpper:"none",fixLower:"none",natural:false};if(_508){if("fixUpper" in _508){h.fixUpper=String(_508.fixUpper);}if("fixLower" in _508){h.fixLower=String(_508.fixLower);}if("natural" in _508){h.natural=Boolean(_508.natural);}}if("min" in _508){min=_508.min;}if("max" in _508){max=_508.max;}if(_508.includeZero){if(min>0){min=0;}if(max<0){max=0;}}h.min=min;h.useMin=true;h.max=max;h.useMax=true;if("from" in _508){min=_508.from;h.useMin=false;}if("to" in _508){max=_508.to;h.useMax=false;}if(max<=min){return _4f6(min,max,h,0,0,0,span);}var mag=Math.floor(Math.log(max-min)/Math.LN10),_509=_508&&("majorTickStep" in _508)?_508.majorTickStep:Math.pow(10,mag),_50a=0,_50b=0,_50c;if(_508&&("minorTickStep" in _508)){_50a=_508.minorTickStep;}else{do{_50a=_509/10;if(!h.natural||_50a>0.9){_50c=_4f6(min,max,h,_509,_50a,0,span);if(_50c.bounds.scale*_50c.minor.tick>_4f3){break;}}_50a=_509/5;if(!h.natural||_50a>0.9){_50c=_4f6(min,max,h,_509,_50a,0,span);if(_50c.bounds.scale*_50c.minor.tick>_4f3){break;}}_50a=_509/2;if(!h.natural||_50a>0.9){_50c=_4f6(min,max,h,_509,_50a,0,span);if(_50c.bounds.scale*_50c.minor.tick>_4f3){break;}}return _4f6(min,max,h,_509,0,0,span);}while(false);}if(_508&&("microTickStep" in _508)){_50b=_508.microTickStep;_50c=_4f6(min,max,h,_509,_50a,_50b,span);}else{do{_50b=_50a/10;if(!h.natural||_50b>0.9){_50c=_4f6(min,max,h,_509,_50a,_50b,span);if(_50c.bounds.scale*_50c.micro.tick>_4f3){break;}}_50b=_50a/5;if(!h.natural||_50b>0.9){_50c=_4f6(min,max,h,_509,_50a,_50b,span);if(_50c.bounds.scale*_50c.micro.tick>_4f3){break;}}_50b=_50a/2;if(!h.natural||_50b>0.9){_50c=_4f6(min,max,h,_509,_50a,_50b,span);if(_50c.bounds.scale*_50c.micro.tick>_4f3){break;}}_50b=0;}while(false);}return _50b?_50c:_4f6(min,max,h,_509,_50a,0,span);},buildTicks:function(_50d,_50e){var step,next,tick,_50f=_50d.major.start,_510=_50d.minor.start,_511=_50d.micro.start;if(_50e.microTicks&&_50d.micro.tick){step=_50d.micro.tick,next=_511;}else{if(_50e.minorTicks&&_50d.minor.tick){step=_50d.minor.tick,next=_510;}else{if(_50d.major.tick){step=_50d.major.tick,next=_50f;}else{return null;}}}var _512=1/_50d.bounds.scale;if(_50d.bounds.to<=_50d.bounds.from||isNaN(_512)||!isFinite(_512)||step<=0||isNaN(step)||!isFinite(step)){return null;}var _513=[],_514=[],_515=[];while(next<=_50d.bounds.to+_512){if(Math.abs(_50f-next)<step/2){tick={value:_50f};if(_50e.majorLabels){tick.label=_4f5(_50f,_50d.major.prec,_50e);}_513.push(tick);_50f+=_50d.major.tick;_510+=_50d.minor.tick;_511+=_50d.micro.tick;}else{if(Math.abs(_510-next)<step/2){if(_50e.minorTicks){tick={value:_510};if(_50e.minorLabels&&(_50d.minMinorStep<=_50d.minor.tick*_50d.bounds.scale)){tick.label=_4f5(_510,_50d.minor.prec,_50e);}_514.push(tick);}_510+=_50d.minor.tick;_511+=_50d.micro.tick;}else{if(_50e.microTicks){_515.push({value:_511});}_511+=_50d.micro.tick;}}next+=step;}return {major:_513,minor:_514,micro:_515};},getTransformerFromModel:function(_516){var _517=_516.bounds.from,_518=_516.bounds.scale;return function(x){return (x-_517)*_518;};},getTransformerFromPlot:function(_519){var _51a=_519.bounds.from,_51b=_519.bounds.scale;return function(x){return x/_51b+_51a;};}});})();}if(!_4._hasResource["dojox.charting.axis2d.common"]){_4._hasResource["dojox.charting.axis2d.common"]=true;_4.provide("dojox.charting.axis2d.common");(function(){var g=_6.gfx;var _51c=function(s){s.marginLeft="0px";s.marginTop="0px";s.marginRight="0px";s.marginBottom="0px";s.paddingLeft="0px";s.paddingTop="0px";s.paddingRight="0px";s.paddingBottom="0px";s.borderLeftWidth="0px";s.borderTopWidth="0px";s.borderRightWidth="0px";s.borderBottomWidth="0px";};var _51d=function(n){if(n["getBoundingClientRect"]){var bcr=n.getBoundingClientRect();return bcr.width||(bcr.right-bcr.left);}else{return _4.marginBox(n).w;}};_4.mixin(_6.charting.axis2d.common,{createText:{gfx:function(_51e,_51f,x,y,_520,text,font,_521){return _51f.createText({x:x,y:y,text:text,align:_520}).setFont(font).setFill(_521);},html:function(_522,_523,x,y,_524,text,font,_525,_526){var p=_4.doc.createElement("div"),s=p.style,_527;_51c(s);s.font=font;p.innerHTML=String(text).replace(/\s/g,"&nbsp;");s.color=_525;s.position="absolute";s.left="-10000px";_4.body().appendChild(p);var size=g.normalizedLength(g.splitFontString(font).size);if(!_526){_527=_51d(p);}_4.body().removeChild(p);s.position="relative";if(_526){s.width=_526+"px";switch(_524){case "middle":s.textAlign="center";s.left=(x-_526/2)+"px";break;case "end":s.textAlign="right";s.left=(x-_526)+"px";break;default:s.left=x+"px";s.textAlign="left";break;}}else{switch(_524){case "middle":s.left=Math.floor(x-_527/2)+"px";break;case "end":s.left=Math.floor(x-_527)+"px";break;default:s.left=Math.floor(x)+"px";break;}}s.top=Math.floor(y-size)+"px";s.whiteSpace="nowrap";var wrap=_4.doc.createElement("div"),w=wrap.style;_51c(w);w.width="0px";w.height="0px";wrap.appendChild(p);_522.node.insertBefore(wrap,_522.node.firstChild);return wrap;}}});})();}if(!_4._hasResource["dojox.charting.Element"]){_4._hasResource["dojox.charting.Element"]=true;_4.provide("dojox.charting.Element");_4.declare("dojox.charting.Element",null,{chart:null,group:null,htmlElements:null,dirty:true,constructor:function(_528){this.chart=_528;this.group=null;this.htmlElements=[];this.dirty=true;this.trailingSymbol="...";this._events=[];},createGroup:function(_529){if(!_529){_529=this.chart.surface;}if(!this.group){this.group=_529.createGroup();}return this;},purgeGroup:function(){this.destroyHtmlElements();if(this.group){this.group.clear();this.group.removeShape();this.group=null;}this.dirty=true;if(this._events.length){_4.forEach(this._events,function(item){item.shape.disconnect(item.handle);});this._events=[];}return this;},cleanGroup:function(_52a){this.destroyHtmlElements();if(!_52a){_52a=this.chart.surface;}if(this.group){this.group.clear();}else{this.group=_52a.createGroup();}this.dirty=true;return this;},destroyHtmlElements:function(){if(this.htmlElements.length){_4.forEach(this.htmlElements,_4.destroy);this.htmlElements=[];}},destroy:function(){this.purgeGroup();},getTextWidth:function(s,font){return _6.gfx._base._getTextBox(s,{font:font}).w||0;},getTextWithLimitLength:function(s,font,_52b,_52c){if(!s||s.length<=0){return {text:"",truncated:_52c||false};}if(!_52b||_52b<=0){return {text:s,truncated:_52c||false};}var _52d=2,_52e=0.618,_52f=s.substring(0,1)+this.trailingSymbol,_530=this.getTextWidth(_52f,font);if(_52b<=_530){return {text:_52f,truncated:true};}var _531=this.getTextWidth(s,font);if(_531<=_52b){return {text:s,truncated:_52c||false};}else{var _532=0,end=s.length;while(_532<end){if(end-_532<=_52d){while(this.getTextWidth(s.substring(0,_532)+this.trailingSymbol,font)>_52b){_532-=1;}return {text:(s.substring(0,_532)+this.trailingSymbol),truncated:true};}var _533=_532+Math.round((end-_532)*_52e),_534=this.getTextWidth(s.substring(0,_533),font);if(_534<_52b){_532=_533;end=end;}else{_532=_532;end=_533;}}}},getTextWithLimitCharCount:function(s,font,_535,_536){if(!s||s.length<=0){return {text:"",truncated:_536||false};}if(!_535||_535<=0||s.length<=_535){return {text:s,truncated:_536||false};}return {text:s.substring(0,_535)+this.trailingSymbol,truncated:true};},_plotFill:function(fill,dim,_537){if(!fill||!fill.type||!fill.space){return fill;}var _538=fill.space;switch(fill.type){case "linear":if(_538==="plot"||_538==="shapeX"||_538==="shapeY"){fill=_6.gfx.makeParameters(_6.gfx.defaultLinearGradient,fill);fill.space=_538;if(_538==="plot"||_538==="shapeX"){var span=dim.height-_537.t-_537.b;fill.y1=_537.t+span*fill.y1/100;fill.y2=_537.t+span*fill.y2/100;}if(_538==="plot"||_538==="shapeY"){var span=dim.width-_537.l-_537.r;fill.x1=_537.l+span*fill.x1/100;fill.x2=_537.l+span*fill.x2/100;}}break;case "radial":if(_538==="plot"){fill=_6.gfx.makeParameters(_6.gfx.defaultRadialGradient,fill);fill.space=_538;var _539=dim.width-_537.l-_537.r,_53a=dim.height-_537.t-_537.b;fill.cx=_537.l+_539*fill.cx/100;fill.cy=_537.t+_53a*fill.cy/100;fill.r=fill.r*Math.sqrt(_539*_539+_53a*_53a)/200;}break;case "pattern":if(_538==="plot"||_538==="shapeX"||_538==="shapeY"){fill=_6.gfx.makeParameters(_6.gfx.defaultPattern,fill);fill.space=_538;if(_538==="plot"||_538==="shapeX"){var span=dim.height-_537.t-_537.b;fill.y=_537.t+span*fill.y/100;fill.height=span*fill.height/100;}if(_538==="plot"||_538==="shapeY"){var span=dim.width-_537.l-_537.r;fill.x=_537.l+span*fill.x/100;fill.width=span*fill.width/100;}}break;}return fill;},_shapeFill:function(fill,bbox){if(!fill||!fill.space){return fill;}var _53b=fill.space;switch(fill.type){case "linear":if(_53b==="shape"||_53b==="shapeX"||_53b==="shapeY"){fill=_6.gfx.makeParameters(_6.gfx.defaultLinearGradient,fill);fill.space=_53b;if(_53b==="shape"||_53b==="shapeX"){var span=bbox.width;fill.x1=bbox.x+span*fill.x1/100;fill.x2=bbox.x+span*fill.x2/100;}if(_53b==="shape"||_53b==="shapeY"){var span=bbox.height;fill.y1=bbox.y+span*fill.y1/100;fill.y2=bbox.y+span*fill.y2/100;}}break;case "radial":if(_53b==="shape"){fill=_6.gfx.makeParameters(_6.gfx.defaultRadialGradient,fill);fill.space=_53b;fill.cx=bbox.x+bbox.width/2;fill.cy=bbox.y+bbox.height/2;fill.r=fill.r*bbox.width/200;}break;case "pattern":if(_53b==="shape"||_53b==="shapeX"||_53b==="shapeY"){fill=_6.gfx.makeParameters(_6.gfx.defaultPattern,fill);fill.space=_53b;if(_53b==="shape"||_53b==="shapeX"){var span=bbox.width;fill.x=bbox.x+span*fill.x/100;fill.width=span*fill.width/100;}if(_53b==="shape"||_53b==="shapeY"){var span=bbox.height;fill.y=bbox.y+span*fill.y/100;fill.height=span*fill.height/100;}}break;}return fill;},_pseudoRadialFill:function(fill,_53c,_53d,_53e,end){if(!fill||fill.type!=="radial"||fill.space!=="shape"){return fill;}var _53f=fill.space;fill=_6.gfx.makeParameters(_6.gfx.defaultRadialGradient,fill);fill.space=_53f;if(arguments.length<4){fill.cx=_53c.x;fill.cy=_53c.y;fill.r=fill.r*_53d/100;return fill;}var _540=arguments.length<5?_53e:(end+_53e)/2;return {type:"linear",x1:_53c.x,y1:_53c.y,x2:_53c.x+fill.r*_53d*Math.cos(_540)/100,y2:_53c.y+fill.r*_53d*Math.sin(_540)/100,colors:fill.colors};return fill;}});}if(!_4._hasResource["dojox.charting.axis2d.Base"]){_4._hasResource["dojox.charting.axis2d.Base"]=true;_4.provide("dojox.charting.axis2d.Base");_4.declare("dojox.charting.axis2d.Base",_6.charting.Element,{constructor:function(_541,_542){this.vertical=_542&&_542.vertical;},clear:function(){return this;},initialized:function(){return false;},calculate:function(min,max,span){return this;},getScaler:function(){return null;},getTicks:function(){return null;},getOffsets:function(){return {l:0,r:0,t:0,b:0};},render:function(dim,_543){this.dirty=false;return this;}});}if(!_4._hasResource["dojox.lang.functional.lambda"]){_4._hasResource["dojox.lang.functional.lambda"]=true;_4.provide("dojox.lang.functional.lambda");(function(){var df=_6.lang.functional,_544={};var _545="ab".split(/a*/).length>1?String.prototype.split:function(sep){var r=this.split.call(this,sep),m=sep.exec(this);if(m&&m.index==0){r.unshift("");}return r;};var _546=function(s){var args=[],_547=_545.call(s,/\s*->\s*/m);if(_547.length>1){while(_547.length){s=_547.pop();args=_547.pop().split(/\s*,\s*|\s+/m);if(_547.length){_547.push("(function("+args+"){return ("+s+")})");}}}else{if(s.match(/\b_\b/)){args=["_"];}else{var l=s.match(/^\s*(?:[+*\/%&|\^\.=<>]|!=)/m),r=s.match(/[+\-*\/%&|\^\.=<>!]\s*$/m);if(l||r){if(l){args.push("$1");s="$1"+s;}if(r){args.push("$2");s=s+"$2";}}else{var vars=s.replace(/(?:\b[A-Z]|\.[a-zA-Z_$])[a-zA-Z_$\d]*|[a-zA-Z_$][a-zA-Z_$\d]*:|this|true|false|null|undefined|typeof|instanceof|in|delete|new|void|arguments|decodeURI|decodeURIComponent|encodeURI|encodeURIComponent|escape|eval|isFinite|isNaN|parseFloat|parseInt|unescape|dojo|dijit|dojox|window|document|'(?:[^'\\]|\\.)*'|"(?:[^"\\]|\\.)*"/g,"").match(/([a-z_$][a-z_$\d]*)/gi)||[],t={};_4.forEach(vars,function(v){if(!(v in t)){args.push(v);t[v]=1;}});}}}return {args:args,body:s};};var _548=function(a){return a.length?function(){var i=a.length-1,x=df.lambda(a[i]).apply(this,arguments);for(--i;i>=0;--i){x=df.lambda(a[i]).call(this,x);}return x;}:function(x){return x;};};_4.mixin(df,{rawLambda:function(s){return _546(s);},buildLambda:function(s){s=_546(s);return "function("+s.args.join(",")+"){return ("+s.body+");}";},lambda:function(s){if(typeof s=="function"){return s;}if(s instanceof Array){return _548(s);}if(s in _544){return _544[s];}s=_546(s);return _544[s]=new Function(s.args,"return ("+s.body+");");},clearLambdaCache:function(){_544={};}});})();}if(!_4._hasResource["dojox.lang.functional.array"]){_4._hasResource["dojox.lang.functional.array"]=true;_4.provide("dojox.lang.functional.array");(function(){var d=_4,df=_6.lang.functional,_549={};d.mixin(df,{filter:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);var t=[],v,i,n;if(d.isArray(a)){for(i=0,n=a.length;i<n;++i){v=a[i];if(f.call(o,v,i,a)){t.push(v);}}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){for(i=0;a.hasNext();){v=a.next();if(f.call(o,v,i++,a)){t.push(v);}}}else{for(i in a){if(!(i in _549)){v=a[i];if(f.call(o,v,i,a)){t.push(v);}}}}}return t;},forEach:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);var i,n;if(d.isArray(a)){for(i=0,n=a.length;i<n;f.call(o,a[i],i,a),++i){}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){for(i=0;a.hasNext();f.call(o,a.next(),i++,a)){}}else{for(i in a){if(!(i in _549)){f.call(o,a[i],i,a);}}}}return o;},map:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);var t,n,i;if(d.isArray(a)){t=new Array(n=a.length);for(i=0;i<n;t[i]=f.call(o,a[i],i,a),++i){}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){t=[];for(i=0;a.hasNext();t.push(f.call(o,a.next(),i++,a))){}}else{t=[];for(i in a){if(!(i in _549)){t.push(f.call(o,a[i],i,a));}}}}return t;},every:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);var i,n;if(d.isArray(a)){for(i=0,n=a.length;i<n;++i){if(!f.call(o,a[i],i,a)){return false;}}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){for(i=0;a.hasNext();){if(!f.call(o,a.next(),i++,a)){return false;}}}else{for(i in a){if(!(i in _549)){if(!f.call(o,a[i],i,a)){return false;}}}}}return true;},some:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);var i,n;if(d.isArray(a)){for(i=0,n=a.length;i<n;++i){if(f.call(o,a[i],i,a)){return true;}}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){for(i=0;a.hasNext();){if(f.call(o,a.next(),i++,a)){return true;}}}else{for(i in a){if(!(i in _549)){if(f.call(o,a[i],i,a)){return true;}}}}}return false;}});})();}if(!_4._hasResource["dojox.lang.functional.object"]){_4._hasResource["dojox.lang.functional.object"]=true;_4.provide("dojox.lang.functional.object");(function(){var d=_4,df=_6.lang.functional,_54a={};d.mixin(df,{keys:function(obj){var t=[];for(var i in obj){if(!(i in _54a)){t.push(i);}}return t;},values:function(obj){var t=[];for(var i in obj){if(!(i in _54a)){t.push(obj[i]);}}return t;},filterIn:function(obj,f,o){o=o||d.global;f=df.lambda(f);var t={},v,i;for(i in obj){if(!(i in _54a)){v=obj[i];if(f.call(o,v,i,obj)){t[i]=v;}}}return t;},forIn:function(obj,f,o){o=o||d.global;f=df.lambda(f);for(var i in obj){if(!(i in _54a)){f.call(o,obj[i],i,obj);}}return o;},mapIn:function(obj,f,o){o=o||d.global;f=df.lambda(f);var t={},i;for(i in obj){if(!(i in _54a)){t[i]=f.call(o,obj[i],i,obj);}}return t;}});})();}if(!_4._hasResource["dojox.lang.functional"]){_4._hasResource["dojox.lang.functional"]=true;_4.provide("dojox.lang.functional");}if(!_4._hasResource["dojox.lang.utils"]){_4._hasResource["dojox.lang.utils"]=true;_4.provide("dojox.lang.utils");(function(){var _54b={},du=_6.lang.utils,opts=Object.prototype.toString;var _54c=function(o){if(o){switch(opts.call(o)){case "[object Array]":return o.slice(0);case "[object Object]":return _4.delegate(o);}}return o;};_4.mixin(du,{coerceType:function(_54d,_54e){switch(typeof _54d){case "number":return Number(eval("("+_54e+")"));case "string":return String(_54e);case "boolean":return Boolean(eval("("+_54e+")"));}return eval("("+_54e+")");},updateWithObject:function(_54f,_550,conv){if(!_550){return _54f;}for(var x in _54f){if(x in _550&&!(x in _54b)){var t=_54f[x];if(t&&typeof t=="object"){du.updateWithObject(t,_550[x],conv);}else{_54f[x]=conv?du.coerceType(t,_550[x]):_54c(_550[x]);}}}return _54f;},updateWithPattern:function(_551,_552,_553,conv){if(!_552||!_553){return _551;}for(var x in _553){if(x in _552&&!(x in _54b)){_551[x]=conv?du.coerceType(_553[x],_552[x]):_54c(_552[x]);}}return _551;},merge:function(_554,_555){if(_555){var _556=opts.call(_554),_557=opts.call(_555),t,i,l,m;switch(_557){case "[object Array]":if(_557==_556){t=new Array(Math.max(_554.length,_555.length));for(i=0,l=t.length;i<l;++i){t[i]=du.merge(_554[i],_555[i]);}return t;}return _555.slice(0);case "[object Object]":if(_557==_556&&_554){t=_4.delegate(_554);for(i in _555){if(i in _554){l=_554[i];m=_555[i];if(m!==l){t[i]=du.merge(l,m);}}else{t[i]=_4.clone(_555[i]);}}return t;}return _4.clone(_555);}}return _555;}});})();}if(!_4._hasResource["dojox.charting.axis2d.Invisible"]){_4._hasResource["dojox.charting.axis2d.Invisible"]=true;_4.provide("dojox.charting.axis2d.Invisible");(function(){var dc=_6.charting,df=_6.lang.functional,du=_6.lang.utils,g=_6.gfx,lin=dc.scaler.linear,_558=du.merge,_559=4,_55a=45;_4.declare("dojox.charting.axis2d.Invisible",_6.charting.axis2d.Base,{defaultParams:{vertical:false,fixUpper:"none",fixLower:"none",natural:false,leftBottom:true,includeZero:false,fixed:true,majorLabels:true,minorTicks:true,minorLabels:true,microTicks:false,rotation:0},optionalParams:{min:0,max:1,from:0,to:1,majorTickStep:4,minorTickStep:2,microTickStep:1,labels:[],labelFunc:null,maxLabelSize:0,maxLabelCharCount:0,trailingSymbol:null},constructor:function(_55b,_55c){this.opt=_4.clone(this.defaultParams);du.updateWithObject(this.opt,_55c);du.updateWithPattern(this.opt,_55c,this.optionalParams);},dependOnData:function(){return !("min" in this.opt)||!("max" in this.opt);},clear:function(){delete this.scaler;delete this.ticks;this.dirty=true;return this;},initialized:function(){return "scaler" in this&&!(this.dirty&&this.dependOnData());},setWindow:function(_55d,_55e){this.scale=_55d;this.offset=_55e;return this.clear();},getWindowScale:function(){return "scale" in this?this.scale:1;},getWindowOffset:function(){return "offset" in this?this.offset:0;},_groupLabelWidth:function(_55f,font,_560){if(!_55f.length){return 0;}if(_4.isObject(_55f[0])){_55f=df.map(_55f,function(_561){return _561.text;});}if(_560){_55f=df.map(_55f,function(_562){return _4.trim(_562).length==0?"":_562.substring(0,_560)+this.trailingSymbol;},this);}var s=_55f.join("<br>");return _6.gfx._base._getTextBox(s,{font:font}).w||0;},calculate:function(min,max,span,_563){if(this.initialized()){return this;}var o=this.opt;this.labels="labels" in o?o.labels:_563;this.scaler=lin.buildScaler(min,max,span,o);var tsb=this.scaler.bounds;if("scale" in this){o.from=tsb.lower+this.offset;o.to=(tsb.upper-tsb.lower)/this.scale+o.from;if(!isFinite(o.from)||isNaN(o.from)||!isFinite(o.to)||isNaN(o.to)||o.to-o.from>=tsb.upper-tsb.lower){delete o.from;delete o.to;delete this.scale;delete this.offset;}else{if(o.from<tsb.lower){o.to+=tsb.lower-o.from;o.from=tsb.lower;}else{if(o.to>tsb.upper){o.from+=tsb.upper-o.to;o.to=tsb.upper;}}this.offset=o.from-tsb.lower;}this.scaler=lin.buildScaler(min,max,span,o);tsb=this.scaler.bounds;if(this.scale==1&&this.offset==0){delete this.scale;delete this.offset;}}var ta=this.chart.theme.axis,_564=0,_565=o.rotation%360,_566=o.font||(ta.majorTick&&ta.majorTick.font)||(ta.tick&&ta.tick.font),size=_566?g.normalizedLength(g.splitFontString(_566).size):0,cosr=Math.abs(Math.cos(_565*Math.PI/180)),sinr=Math.abs(Math.sin(_565*Math.PI/180));if(_565<0){_565+=360;}if(size){if(this.vertical?_565!=0&&_565!=180:_565!=90&&_565!=270){if(this.labels){_564=this._groupLabelWidth(this.labels,_566,o.maxLabelCharCount);}else{var _567=Math.ceil(Math.log(Math.max(Math.abs(tsb.from),Math.abs(tsb.to)))/Math.LN10),t=[];if(tsb.from<0||tsb.to<0){t.push("-");}t.push(_4.string.rep("9",_567));var _568=Math.floor(Math.log(tsb.to-tsb.from)/Math.LN10);if(_568>0){t.push(".");t.push(_4.string.rep("9",_568));}_564=_6.gfx._base._getTextBox(t.join(""),{font:_566}).w;}_564=o.maxLabelSize?Math.min(o.maxLabelSize,_564):_564;}else{_564=size;}switch(_565){case 0:case 90:case 180:case 270:break;default:var gap1=Math.sqrt(_564*_564+size*size),gap2=this.vertical?size*cosr+_564*sinr:_564*cosr+size*sinr;_564=Math.min(gap1,gap2);break;}}this.scaler.minMinorStep=_564+_559;this.ticks=lin.buildTicks(this.scaler,o);return this;},getScaler:function(){return this.scaler;},getTicks:function(){return this.ticks;}});})();}if(!_4._hasResource["dojo.colors"]){_4._hasResource["dojo.colors"]=true;_4.provide("dojo.colors");_4.getObject("colors",true,_4);(function(){var _569=function(m1,m2,h){if(h<0){++h;}if(h>1){--h;}var h6=6*h;if(h6<1){return m1+(m2-m1)*h6;}if(2*h<1){return m2;}if(3*h<2){return m1+(m2-m1)*(2/3-h)*6;}return m1;};_4.colorFromRgb=function(_56a,obj){var m=_56a.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(m){var c=m[2].split(/\s*,\s*/),l=c.length,t=m[1],a;if((t=="rgb"&&l==3)||(t=="rgba"&&l==4)){var r=c[0];if(r.charAt(r.length-1)=="%"){a=_4.map(c,function(x){return parseFloat(x)*2.56;});if(l==4){a[3]=c[3];}return _4.colorFromArray(a,obj);}return _4.colorFromArray(c,obj);}if((t=="hsl"&&l==3)||(t=="hsla"&&l==4)){var H=((parseFloat(c[0])%360)+360)%360/360,S=parseFloat(c[1])/100,L=parseFloat(c[2])/100,m2=L<=0.5?L*(S+1):L+S-L*S,m1=2*L-m2;a=[_569(m1,m2,H+1/3)*256,_569(m1,m2,H)*256,_569(m1,m2,H-1/3)*256,1];if(l==4){a[3]=c[3];}return _4.colorFromArray(a,obj);}}return null;};var _56b=function(c,low,high){c=Number(c);return isNaN(c)?high:c<low?low:c>high?high:c;};_4.Color.prototype.sanitize=function(){var t=this;t.r=Math.round(_56b(t.r,0,255));t.g=Math.round(_56b(t.g,0,255));t.b=Math.round(_56b(t.b,0,255));t.a=_56b(t.a,0,1);return this;};})();_4.colors.makeGrey=function(g,a){return _4.colorFromArray([g,g,g,a]);};_4.mixin(_4.Color.named,{aliceblue:[240,248,255],antiquewhite:[250,235,215],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],blanchedalmond:[255,235,205],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],oldlace:[253,245,230],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],thistle:[216,191,216],tomato:[255,99,71],transparent:[0,0,0,0],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],whitesmoke:[245,245,245],yellowgreen:[154,205,50]});}if(!_4._hasResource["dojox.charting.axis2d.Default"]){_4._hasResource["dojox.charting.axis2d.Default"]=true;_4.provide("dojox.charting.axis2d.Default");(function(){var dc=_6.charting,du=_6.lang.utils,g=_6.gfx,lin=dc.scaler.linear,_56c=4,_56d=45;_4.declare("dojox.charting.axis2d.Default",_6.charting.axis2d.Invisible,{defaultParams:{vertical:false,fixUpper:"none",fixLower:"none",natural:false,leftBottom:true,includeZero:false,fixed:true,majorLabels:true,minorTicks:true,minorLabels:true,microTicks:false,rotation:0,htmlLabels:true},optionalParams:{min:0,max:1,from:0,to:1,majorTickStep:4,minorTickStep:2,microTickStep:1,labels:[],labelFunc:null,maxLabelSize:0,maxLabelCharCount:0,trailingSymbol:null,stroke:{},majorTick:{},minorTick:{},microTick:{},tick:{},font:"",fontColor:"",title:"",titleGap:0,titleFont:"",titleFontColor:"",titleOrientation:""},constructor:function(_56e,_56f){this.opt=_4.clone(this.defaultParams);du.updateWithObject(this.opt,_56f);du.updateWithPattern(this.opt,_56f,this.optionalParams);},getOffsets:function(){var s=this.scaler,_570={l:0,r:0,t:0,b:0};if(!s){return _570;}var o=this.opt,_571=0,a,b,c,d,gl=dc.scaler.common.getNumericLabel,_572=0,ma=s.major,mi=s.minor,ta=this.chart.theme.axis,_573=o.font||(ta.majorTick&&ta.majorTick.font)||(ta.tick&&ta.tick.font),_574=o.titleFont||(ta.tick&&ta.tick.titleFont),_575=(o.titleGap==0)?0:o.titleGap||(ta.tick&&ta.tick.titleGap)||15,_576=this.chart.theme.getTick("major",o),_577=this.chart.theme.getTick("minor",o),size=_573?g.normalizedLength(g.splitFontString(_573).size):0,_578=_574?g.normalizedLength(g.splitFontString(_574).size):0,_579=o.rotation%360,_57a=o.leftBottom,cosr=Math.abs(Math.cos(_579*Math.PI/180)),sinr=Math.abs(Math.sin(_579*Math.PI/180));this.trailingSymbol=(o.trailingSymbol===undefined||o.trailingSymbol===null)?this.trailingSymbol:o.trailingSymbol;if(_579<0){_579+=360;}if(size){if(this.labels){_571=this._groupLabelWidth(this.labels,_573,o.maxLabelCharCount);}else{_571=this._groupLabelWidth([gl(ma.start,ma.prec,o),gl(ma.start+ma.count*ma.tick,ma.prec,o),gl(mi.start,mi.prec,o),gl(mi.start+mi.count*mi.tick,mi.prec,o)],_573,o.maxLabelCharCount);}_571=o.maxLabelSize?Math.min(o.maxLabelSize,_571):_571;if(this.vertical){var side=_57a?"l":"r";switch(_579){case 0:case 180:_570[side]=_571;_570.t=_570.b=size/2;break;case 90:case 270:_570[side]=size;_570.t=_570.b=_571/2;break;default:if(_579<=_56d||(180<_579&&_579<=(180+_56d))){_570[side]=size*sinr/2+_571*cosr;_570[_57a?"t":"b"]=size*cosr/2+_571*sinr;_570[_57a?"b":"t"]=size*cosr/2;}else{if(_579>(360-_56d)||(180>_579&&_579>(180-_56d))){_570[side]=size*sinr/2+_571*cosr;_570[_57a?"b":"t"]=size*cosr/2+_571*sinr;_570[_57a?"t":"b"]=size*cosr/2;}else{if(_579<90||(180<_579&&_579<270)){_570[side]=size*sinr+_571*cosr;_570[_57a?"t":"b"]=size*cosr+_571*sinr;}else{_570[side]=size*sinr+_571*cosr;_570[_57a?"b":"t"]=size*cosr+_571*sinr;}}}break;}_570[side]+=_56c+Math.max(_576.length,_577.length)+(o.title?(_578+_575):0);}else{var side=_57a?"b":"t";switch(_579){case 0:case 180:_570[side]=size;_570.l=_570.r=_571/2;break;case 90:case 270:_570[side]=_571;_570.l=_570.r=size/2;break;default:if((90-_56d)<=_579&&_579<=90||(270-_56d)<=_579&&_579<=270){_570[side]=size*sinr/2+_571*cosr;_570[_57a?"r":"l"]=size*cosr/2+_571*sinr;_570[_57a?"l":"r"]=size*cosr/2;}else{if(90<=_579&&_579<=(90+_56d)||270<=_579&&_579<=(270+_56d)){_570[side]=size*sinr/2+_571*cosr;_570[_57a?"l":"r"]=size*cosr/2+_571*sinr;_570[_57a?"r":"l"]=size*cosr/2;}else{if(_579<_56d||(180<_579&&_579<(180-_56d))){_570[side]=size*sinr+_571*cosr;_570[_57a?"r":"l"]=size*cosr+_571*sinr;}else{_570[side]=size*sinr+_571*cosr;_570[_57a?"l":"r"]=size*cosr+_571*sinr;}}}break;}_570[side]+=_56c+Math.max(_576.length,_577.length)+(o.title?(_578+_575):0);}}if(_571){this._cachedLabelWidth=_571;}return _570;},render:function(dim,_57b){if(!this.dirty){return this;}var o=this.opt,ta=this.chart.theme.axis,_57c=o.leftBottom,_57d=o.rotation%360,_57e,stop,_57f,_580=0,_581,_582,_583,_584,_585,_586,_587=o.font||(ta.majorTick&&ta.majorTick.font)||(ta.tick&&ta.tick.font),_588=o.titleFont||(ta.tick&&ta.tick.titleFont),_589=o.fontColor||(ta.majorTick&&ta.majorTick.fontColor)||(ta.tick&&ta.tick.fontColor)||"black",_58a=o.titleFontColor||(ta.tick&&ta.tick.titleFontColor)||"black",_58b=(o.titleGap==0)?0:o.titleGap||(ta.tick&&ta.tick.titleGap)||15,_58c=o.titleOrientation||(ta.tick&&ta.tick.titleOrientation)||"axis",_58d=this.chart.theme.getTick("major",o),_58e=this.chart.theme.getTick("minor",o),_58f=this.chart.theme.getTick("micro",o),_590=Math.max(_58d.length,_58e.length,_58f.length),_591="stroke" in o?o.stroke:ta.stroke,size=_587?g.normalizedLength(g.splitFontString(_587).size):0,cosr=Math.abs(Math.cos(_57d*Math.PI/180)),sinr=Math.abs(Math.sin(_57d*Math.PI/180)),_592=_588?g.normalizedLength(g.splitFontString(_588).size):0;if(_57d<0){_57d+=360;}if(this.vertical){_57e={y:dim.height-_57b.b};stop={y:_57b.t};_57f={y:(dim.height-_57b.b+_57b.t)/2};_581=size*sinr+(this._cachedLabelWidth||0)*cosr+_56c+Math.max(_58d.length,_58e.length)+_592+_58b;_582={x:0,y:-1};_585={x:0,y:0};_583={x:1,y:0};_584={x:_56c,y:0};switch(_57d){case 0:_586="end";_585.y=size*0.4;break;case 90:_586="middle";_585.x=-size;break;case 180:_586="start";_585.y=-size*0.4;break;case 270:_586="middle";break;default:if(_57d<_56d){_586="end";_585.y=size*0.4;}else{if(_57d<90){_586="end";_585.y=size*0.4;}else{if(_57d<(180-_56d)){_586="start";}else{if(_57d<(180+_56d)){_586="start";_585.y=-size*0.4;}else{if(_57d<270){_586="start";_585.x=_57c?0:size*0.4;}else{if(_57d<(360-_56d)){_586="end";_585.x=_57c?0:size*0.4;}else{_586="end";_585.y=size*0.4;}}}}}}}if(_57c){_57e.x=stop.x=_57b.l;_580=(_58c&&_58c=="away")?90:270;_57f.x=_57b.l-_581+(_580==270?_592:0);_583.x=-1;_584.x=-_584.x;}else{_57e.x=stop.x=dim.width-_57b.r;_580=(_58c&&_58c=="axis")?90:270;_57f.x=dim.width-_57b.r+_581-(_580==270?0:_592);switch(_586){case "start":_586="end";break;case "end":_586="start";break;case "middle":_585.x+=size;break;}}}else{_57e={x:_57b.l};stop={x:dim.width-_57b.r};_57f={x:(dim.width-_57b.r+_57b.l)/2};_581=size*cosr+(this._cachedLabelWidth||0)*sinr+_56c+Math.max(_58d.length,_58e.length)+_592+_58b;_582={x:1,y:0};_585={x:0,y:0};_583={x:0,y:1};_584={x:0,y:_56c};switch(_57d){case 0:_586="middle";_585.y=size;break;case 90:_586="start";_585.x=-size*0.4;break;case 180:_586="middle";break;case 270:_586="end";_585.x=size*0.4;break;default:if(_57d<(90-_56d)){_586="start";_585.y=_57c?size:0;}else{if(_57d<(90+_56d)){_586="start";_585.x=-size*0.4;}else{if(_57d<180){_586="start";_585.y=_57c?0:-size;}else{if(_57d<(270-_56d)){_586="end";_585.y=_57c?0:-size;}else{if(_57d<(270+_56d)){_586="end";_585.y=_57c?size*0.4:0;}else{_586="end";_585.y=_57c?size:0;}}}}}}if(_57c){_57e.y=stop.y=dim.height-_57b.b;_580=(_58c&&_58c=="axis")?180:0;_57f.y=dim.height-_57b.b+_581-(_580?_592:0);}else{_57e.y=stop.y=_57b.t;_580=(_58c&&_58c=="away")?180:0;_57f.y=_57b.t-_581+(_580?0:_592);_583.y=-1;_584.y=-_584.y;switch(_586){case "start":_586="end";break;case "end":_586="start";break;case "middle":_585.y-=size;break;}}}this.cleanGroup();try{var s=this.group,c=this.scaler,t=this.ticks,_593,f=lin.getTransformerFromModel(this.scaler),_594=!_580&&!_57d&&this.opt.htmlLabels&&!_4.isIE&&!_4.isOpera?"html":"gfx",dx=_583.x*_58d.length,dy=_583.y*_58d.length;s.createLine({x1:_57e.x,y1:_57e.y,x2:stop.x,y2:stop.y}).setStroke(_591);if(o.title){var _595=dc.axis2d.common.createText[_594](this.chart,s,_57f.x,_57f.y,"middle",o.title,_588,_58a);if(_594=="html"){this.htmlElements.push(_595);}else{_595.setTransform(g.matrix.rotategAt(_580,_57f.x,_57f.y));}}_4.forEach(t.major,function(tick){var _596=f(tick.value),elem,x=_57e.x+_582.x*_596,y=_57e.y+_582.y*_596;s.createLine({x1:x,y1:y,x2:x+dx,y2:y+dy}).setStroke(_58d);if(tick.label){var _597=o.maxLabelCharCount?this.getTextWithLimitCharCount(tick.label,_587,o.maxLabelCharCount):{text:tick.label,truncated:false};_597=o.maxLabelSize?this.getTextWithLimitLength(_597.text,_587,o.maxLabelSize,_597.truncated):_597;elem=dc.axis2d.common.createText[_594](this.chart,s,x+dx+_584.x+(_57d?0:_585.x),y+dy+_584.y+(_57d?0:_585.y),_586,_597.text,_587,_589);_597.truncated&&this.labelTooltip(elem,this.chart,tick.label,_597.text,_587,_594);if(_594=="html"){this.htmlElements.push(elem);}else{if(_57d){elem.setTransform([{dx:_585.x,dy:_585.y},g.matrix.rotategAt(_57d,x+dx+_584.x,y+dy+_584.y)]);}}}},this);dx=_583.x*_58e.length;dy=_583.y*_58e.length;_593=c.minMinorStep<=c.minor.tick*c.bounds.scale;_4.forEach(t.minor,function(tick){var _598=f(tick.value),elem,x=_57e.x+_582.x*_598,y=_57e.y+_582.y*_598;s.createLine({x1:x,y1:y,x2:x+dx,y2:y+dy}).setStroke(_58e);if(_593&&tick.label){var _599=o.maxLabelCharCount?this.getTextWithLimitCharCount(tick.label,_587,o.maxLabelCharCount):{text:tick.label,truncated:false};_599=o.maxLabelSize?this.getTextWithLimitLength(_599.text,_587,o.maxLabelSize,_599.truncated):_599;elem=dc.axis2d.common.createText[_594](this.chart,s,x+dx+_584.x+(_57d?0:_585.x),y+dy+_584.y+(_57d?0:_585.y),_586,_599.text,_587,_589);_599.truncated&&this.labelTooltip(elem,this.chart,tick.label,_599.text,_587,_594);if(_594=="html"){this.htmlElements.push(elem);}else{if(_57d){elem.setTransform([{dx:_585.x,dy:_585.y},g.matrix.rotategAt(_57d,x+dx+_584.x,y+dy+_584.y)]);}}}},this);dx=_583.x*_58f.length;dy=_583.y*_58f.length;_4.forEach(t.micro,function(tick){var _59a=f(tick.value),elem,x=_57e.x+_582.x*_59a,y=_57e.y+_582.y*_59a;s.createLine({x1:x,y1:y,x2:x+dx,y2:y+dy}).setStroke(_58f);},this);}catch(e){}this.dirty=false;return this;},labelTooltip:function(elem,_59b,_59c,_59d,font,_59e){if(!_5||!_5.Tooltip){return;}var _59f={type:"rect"},_5a0=["above","below"],_5a1=_6.gfx._base._getTextBox(_59d,{font:font}).w||0;fontHeight=font?g.normalizedLength(g.splitFontString(font).size):0;if(_59e=="html"){_4.mixin(_59f,_4.coords(elem.firstChild,true));_59f.width=Math.ceil(_5a1);_59f.height=Math.ceil(fontHeight);this._events.push({shape:_4,handle:_4.connect(elem.firstChild,"onmouseover",this,function(e){_5.showTooltip(_59c,_59f,_5a0);})});this._events.push({shape:_4,handle:_4.connect(elem.firstChild,"onmouseout",this,function(e){_5.hideTooltip(_59f);})});}else{var shp=elem.getShape(),lt=_4.coords(_59b.node,true);_59f=_4.mixin(_59f,{x:shp.x-_5a1/2,y:shp.y});_59f.x+=lt.x;_59f.y+=lt.y;_59f.x=Math.round(_59f.x);_59f.y=Math.round(_59f.y);_59f.width=Math.ceil(_5a1);_59f.height=Math.ceil(fontHeight);this._events.push({shape:elem,handle:elem.connect("onmouseenter",this,function(e){_5.showTooltip(_59c,_59f,_5a0);})});this._events.push({shape:elem,handle:elem.connect("onmouseleave",this,function(e){_5.hideTooltip(_59f);})});}}});})();}if(!_4._hasResource["dojox.charting.plot2d.common"]){_4._hasResource["dojox.charting.plot2d.common"]=true;_4.provide("dojox.charting.plot2d.common");(function(){var df=_6.lang.functional,dc=_6.charting.plot2d.common;_4.mixin(_6.charting.plot2d.common,{makeStroke:function(_5a2){if(!_5a2){return _5a2;}if(typeof _5a2=="string"||_5a2 instanceof _4.Color){_5a2={color:_5a2};}return _6.gfx.makeParameters(_6.gfx.defaultStroke,_5a2);},augmentColor:function(_5a3,_5a4){var t=new _4.Color(_5a3),c=new _4.Color(_5a4);c.a=t.a;return c;},augmentStroke:function(_5a5,_5a6){var s=dc.makeStroke(_5a5);if(s){s.color=dc.augmentColor(s.color,_5a6);}return s;},augmentFill:function(fill,_5a7){var fc,c=new _4.Color(_5a7);if(typeof fill=="string"||fill instanceof _4.Color){return dc.augmentColor(fill,_5a7);}return fill;},defaultStats:{vmin:Number.POSITIVE_INFINITY,vmax:Number.NEGATIVE_INFINITY,hmin:Number.POSITIVE_INFINITY,hmax:Number.NEGATIVE_INFINITY},collectSimpleStats:function(_5a8){var _5a9=_4.delegate(dc.defaultStats);for(var i=0;i<_5a8.length;++i){var run=_5a8[i];for(var j=0;j<run.data.length;j++){if(run.data[j]!==null){if(typeof run.data[j]=="number"){var _5aa=_5a9.vmin,_5ab=_5a9.vmax;if(!("ymin" in run)||!("ymax" in run)){_4.forEach(run.data,function(val,i){if(val!==null){var x=i+1,y=val;if(isNaN(y)){y=0;}_5a9.hmin=Math.min(_5a9.hmin,x);_5a9.hmax=Math.max(_5a9.hmax,x);_5a9.vmin=Math.min(_5a9.vmin,y);_5a9.vmax=Math.max(_5a9.vmax,y);}});}if("ymin" in run){_5a9.vmin=Math.min(_5aa,run.ymin);}if("ymax" in run){_5a9.vmax=Math.max(_5ab,run.ymax);}}else{var _5ac=_5a9.hmin,_5ad=_5a9.hmax,_5aa=_5a9.vmin,_5ab=_5a9.vmax;if(!("xmin" in run)||!("xmax" in run)||!("ymin" in run)||!("ymax" in run)){_4.forEach(run.data,function(val,i){if(val!==null){var x="x" in val?val.x:i+1,y=val.y;if(isNaN(x)){x=0;}if(isNaN(y)){y=0;}_5a9.hmin=Math.min(_5a9.hmin,x);_5a9.hmax=Math.max(_5a9.hmax,x);_5a9.vmin=Math.min(_5a9.vmin,y);_5a9.vmax=Math.max(_5a9.vmax,y);}});}if("xmin" in run){_5a9.hmin=Math.min(_5ac,run.xmin);}if("xmax" in run){_5a9.hmax=Math.max(_5ad,run.xmax);}if("ymin" in run){_5a9.vmin=Math.min(_5aa,run.ymin);}if("ymax" in run){_5a9.vmax=Math.max(_5ab,run.ymax);}}break;}}}return _5a9;},calculateBarSize:function(_5ae,opt,_5af){if(!_5af){_5af=1;}var gap=opt.gap,size=(_5ae-2*gap)/_5af;if("minBarSize" in opt){size=Math.max(size,opt.minBarSize);}if("maxBarSize" in opt){size=Math.min(size,opt.maxBarSize);}size=Math.max(size,1);gap=(_5ae-size*_5af)/2;return {size:size,gap:gap};},collectStackedStats:function(_5b0){var _5b1=_4.clone(dc.defaultStats);if(_5b0.length){_5b1.hmin=Math.min(_5b1.hmin,1);_5b1.hmax=df.foldl(_5b0,"seed, run -> Math.max(seed, run.data.length)",_5b1.hmax);for(var i=0;i<_5b1.hmax;++i){var v=_5b0[0].data[i];v=v&&(typeof v=="number"?v:v.y);if(isNaN(v)){v=0;}_5b1.vmin=Math.min(_5b1.vmin,v);for(var j=1;j<_5b0.length;++j){var t=_5b0[j].data[i];t=t&&(typeof t=="number"?t:t.y);if(isNaN(t)){t=0;}v+=t;}_5b1.vmax=Math.max(_5b1.vmax,v);}}return _5b1;},curve:function(a,_5b2){var arr=a.slice(0);if(_5b2=="x"){arr[arr.length]=arr[0];}var p=_4.map(arr,function(item,i){if(i==0){return "M"+item.x+","+item.y;}if(!isNaN(_5b2)){var dx=item.x-arr[i-1].x,dy=arr[i-1].y;return "C"+(item.x-(_5b2-1)*(dx/_5b2))+","+dy+" "+(item.x-(dx/_5b2))+","+item.y+" "+item.x+","+item.y;}else{if(_5b2=="X"||_5b2=="x"||_5b2=="S"){var p0,p1=arr[i-1],p2=arr[i],p3;var bz1x,bz1y,bz2x,bz2y;var f=1/6;if(i==1){if(_5b2=="x"){p0=arr[arr.length-2];}else{p0=p1;}f=1/3;}else{p0=arr[i-2];}if(i==(arr.length-1)){if(_5b2=="x"){p3=arr[1];}else{p3=p2;}f=1/3;}else{p3=arr[i+1];}var p1p2=Math.sqrt((p2.x-p1.x)*(p2.x-p1.x)+(p2.y-p1.y)*(p2.y-p1.y));var p0p2=Math.sqrt((p2.x-p0.x)*(p2.x-p0.x)+(p2.y-p0.y)*(p2.y-p0.y));var p1p3=Math.sqrt((p3.x-p1.x)*(p3.x-p1.x)+(p3.y-p1.y)*(p3.y-p1.y));var _5b3=p0p2*f;var _5b4=p1p3*f;if(_5b3>p1p2/2&&_5b4>p1p2/2){_5b3=p1p2/2;_5b4=p1p2/2;}else{if(_5b3>p1p2/2){_5b3=p1p2/2;_5b4=p1p2/2*p1p3/p0p2;}else{if(_5b4>p1p2/2){_5b4=p1p2/2;_5b3=p1p2/2*p0p2/p1p3;}}}if(_5b2=="S"){if(p0==p1){_5b3=0;}if(p2==p3){_5b4=0;}}bz1x=p1.x+_5b3*(p2.x-p0.x)/p0p2;bz1y=p1.y+_5b3*(p2.y-p0.y)/p0p2;bz2x=p2.x-_5b4*(p3.x-p1.x)/p1p3;bz2y=p2.y-_5b4*(p3.y-p1.y)/p1p3;}}return "C"+(bz1x+","+bz1y+" "+bz2x+","+bz2y+" "+p2.x+","+p2.y);});return p.join(" ");},getLabel:function(_5b5,_5b6,_5b7){if(_4.number){return (_5b6?_4.number.format(_5b5,{places:_5b7}):_4.number.format(_5b5))||"";}return _5b6?_5b5.toFixed(_5b7):_5b5.toString();}});})();}if(!_4._hasResource["dojox.charting.scaler.primitive"]){_4._hasResource["dojox.charting.scaler.primitive"]=true;_4.provide("dojox.charting.scaler.primitive");_6.charting.scaler.primitive={buildScaler:function(min,max,span,_5b8){if(min==max){min-=0.5;max+=0.5;}return {bounds:{lower:min,upper:max,from:min,to:max,scale:span/(max-min),span:span},scaler:_6.charting.scaler.primitive};},buildTicks:function(_5b9,_5ba){return {major:[],minor:[],micro:[]};},getTransformerFromModel:function(_5bb){var _5bc=_5bb.bounds.from,_5bd=_5bb.bounds.scale;return function(x){return (x-_5bc)*_5bd;};},getTransformerFromPlot:function(_5be){var _5bf=_5be.bounds.from,_5c0=_5be.bounds.scale;return function(x){return x/_5c0+_5bf;};}};}if(!_4._hasResource["dojox.charting.plot2d._PlotEvents"]){_4._hasResource["dojox.charting.plot2d._PlotEvents"]=true;_4.provide("dojox.charting.plot2d._PlotEvents");_4.declare("dojox.charting.plot2d._PlotEvents",null,{constructor:function(){this._shapeEvents=[];this._eventSeries={};},destroy:function(){this.resetEvents();this.inherited(arguments);},plotEvent:function(o){},raiseEvent:function(o){this.plotEvent(o);var t=_4.delegate(o);t.originalEvent=o.type;t.originalPlot=o.plot;t.type="onindirect";_4.forEach(this.chart.stack,function(plot){if(plot!==this&&plot.plotEvent){t.plot=plot;plot.plotEvent(t);}},this);},connect:function(_5c1,_5c2){this.dirty=true;return _4.connect(this,"plotEvent",_5c1,_5c2);},events:function(){var ls=this.plotEvent._listeners;if(!ls||!ls.length){return false;}for(var i in ls){if(!(i in Array.prototype)){return true;}}return false;},resetEvents:function(){if(this._shapeEvents.length){_4.forEach(this._shapeEvents,function(item){item.shape.disconnect(item.handle);});this._shapeEvents=[];}this.raiseEvent({type:"onplotreset",plot:this});},_connectSingleEvent:function(o,_5c3){this._shapeEvents.push({shape:o.eventMask,handle:o.eventMask.connect(_5c3,this,function(e){o.type=_5c3;o.event=e;this.raiseEvent(o);o.event=null;})});},_connectEvents:function(o){if(o){o.chart=this.chart;o.plot=this;o.hAxis=this.hAxis||null;o.vAxis=this.vAxis||null;o.eventMask=o.eventMask||o.shape;this._connectSingleEvent(o,"onmouseover");this._connectSingleEvent(o,"onmouseout");this._connectSingleEvent(o,"onclick");}},_reconnectEvents:function(_5c4){var a=this._eventSeries[_5c4];if(a){_4.forEach(a,this._connectEvents,this);}},fireEvent:function(_5c5,_5c6,_5c7,_5c8){var s=this._eventSeries[_5c5];if(s&&s.length&&_5c7<s.length){var o=s[_5c7];o.type=_5c6;o.event=_5c8||null;this.raiseEvent(o);o.event=null;}}});}if(!_4._hasResource["dojox.charting.plot2d.Base"]){_4._hasResource["dojox.charting.plot2d.Base"]=true;_4.provide("dojox.charting.plot2d.Base");_4.declare("dojox.charting.plot2d.Base",[_6.charting.Element,_6.charting.plot2d._PlotEvents],{constructor:function(_5c9,_5ca){this.zoom=null,this.zoomQueue=[];this.lastWindow={vscale:1,hscale:1,xoffset:0,yoffset:0};},clear:function(){this.series=[];this._hAxis=null;this._vAxis=null;this.dirty=true;return this;},setAxis:function(axis){if(axis){this[axis.vertical?"_vAxis":"_hAxis"]=axis;}return this;},addSeries:function(run){this.series.push(run);return this;},getSeriesStats:function(){return _6.charting.plot2d.common.collectSimpleStats(this.series);},calculateAxes:function(dim){this.initializeScalers(dim,this.getSeriesStats());return this;},isDirty:function(){return this.dirty||this._hAxis&&this._hAxis.dirty||this._vAxis&&this._vAxis.dirty;},isDataDirty:function(){return _4.some(this.series,function(item){return item.dirty;});},performZoom:function(dim,_5cb){var vs=this._vAxis.scale||1,hs=this._hAxis.scale||1,_5cc=dim.height-_5cb.b,_5cd=this._hScaler.bounds,_5ce=(_5cd.from-_5cd.lower)*_5cd.scale,_5cf=this._vScaler.bounds,_5d0=(_5cf.from-_5cf.lower)*_5cf.scale;rVScale=vs/this.lastWindow.vscale,rHScale=hs/this.lastWindow.hscale,rXOffset=(this.lastWindow.xoffset-_5ce)/((this.lastWindow.hscale==1)?hs:this.lastWindow.hscale),rYOffset=(_5d0-this.lastWindow.yoffset)/((this.lastWindow.vscale==1)?vs:this.lastWindow.vscale),shape=this.group,anim=_6.gfx.fx.animateTransform(_4.delegate({shape:shape,duration:1200,transform:[{name:"translate",start:[0,0],end:[_5cb.l*(1-rHScale),_5cc*(1-rVScale)]},{name:"scale",start:[1,1],end:[rHScale,rVScale]},{name:"original"},{name:"translate",start:[0,0],end:[rXOffset,rYOffset]}]},this.zoom));_4.mixin(this.lastWindow,{vscale:vs,hscale:hs,xoffset:_5ce,yoffset:_5d0});this.zoomQueue.push(anim);_4.connect(anim,"onEnd",this,function(){this.zoom=null;this.zoomQueue.shift();if(this.zoomQueue.length>0){this.zoomQueue[0].play();}});if(this.zoomQueue.length==1){this.zoomQueue[0].play();}return this;},render:function(dim,_5d1){return this;},getRequiredColors:function(){return this.series.length;},initializeScalers:function(dim,_5d2){if(this._hAxis){if(!this._hAxis.initialized()){this._hAxis.calculate(_5d2.hmin,_5d2.hmax,dim.width);}this._hScaler=this._hAxis.getScaler();}else{this._hScaler=_6.charting.scaler.primitive.buildScaler(_5d2.hmin,_5d2.hmax,dim.width);}if(this._vAxis){if(!this._vAxis.initialized()){this._vAxis.calculate(_5d2.vmin,_5d2.vmax,dim.height);}this._vScaler=this._vAxis.getScaler();}else{this._vScaler=_6.charting.scaler.primitive.buildScaler(_5d2.vmin,_5d2.vmax,dim.height);}return this;}});}if(!_4._hasResource["dojox.lang.functional.reversed"]){_4._hasResource["dojox.lang.functional.reversed"]=true;_4.provide("dojox.lang.functional.reversed");(function(){var d=_4,df=_6.lang.functional;d.mixin(df,{filterRev:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);var t=[],v,i=a.length-1;for(;i>=0;--i){v=a[i];if(f.call(o,v,i,a)){t.push(v);}}return t;},forEachRev:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);for(var i=a.length-1;i>=0;f.call(o,a[i],i,a),--i){}},mapRev:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);var n=a.length,t=new Array(n),i=n-1,j=0;for(;i>=0;t[j++]=f.call(o,a[i],i,a),--i){}return t;},everyRev:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);for(var i=a.length-1;i>=0;--i){if(!f.call(o,a[i],i,a)){return false;}}return true;},someRev:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);for(var i=a.length-1;i>=0;--i){if(f.call(o,a[i],i,a)){return true;}}return false;}});})();}if(!_4._hasResource["dojox.gfx.fx"]){_4._hasResource["dojox.gfx.fx"]=true;_4.provide("dojox.gfx.fx");(function(){var d=_4,g=_6.gfx,m=g.matrix;function _5d3(_5d4,end){this.start=_5d4,this.end=end;};_5d3.prototype.getValue=function(r){return (this.end-this.start)*r+this.start;};function _5d5(_5d6,end,_5d7){this.start=_5d6,this.end=end;this.units=_5d7;};_5d5.prototype.getValue=function(r){return (this.end-this.start)*r+this.start+this.units;};function _5d8(_5d9,end){this.start=_5d9,this.end=end;this.temp=new _4.Color();};_5d8.prototype.getValue=function(r){return d.blendColors(this.start,this.end,r,this.temp);};function _5da(_5db){this.values=_5db;this.length=_5db.length;};_5da.prototype.getValue=function(r){return this.values[Math.min(Math.floor(r*this.length),this.length-1)];};function _5dc(_5dd,def){this.values=_5dd;this.def=def?def:{};};_5dc.prototype.getValue=function(r){var ret=_4.clone(this.def);for(var i in this.values){ret[i]=this.values[i].getValue(r);}return ret;};function _5de(_5df,_5e0){this.stack=_5df;this.original=_5e0;};_5de.prototype.getValue=function(r){var ret=[];_4.forEach(this.stack,function(t){if(t instanceof m.Matrix2D){ret.push(t);return;}if(t.name=="original"&&this.original){ret.push(this.original);return;}if(!(t.name in m)){return;}var f=m[t.name];if(typeof f!="function"){ret.push(f);return;}var val=_4.map(t.start,function(v,i){return (t.end[i]-v)*r+v;}),_5e1=f.apply(m,val);if(_5e1 instanceof m.Matrix2D){ret.push(_5e1);}},this);return ret;};var _5e2=new d.Color(0,0,0,0);function _5e3(prop,obj,name,def){if(prop.values){return new _5da(prop.values);}var _5e4,_5e5,end;if(prop.start){_5e5=g.normalizeColor(prop.start);}else{_5e5=_5e4=obj?(name?obj[name]:obj):def;}if(prop.end){end=g.normalizeColor(prop.end);}else{if(!_5e4){_5e4=obj?(name?obj[name]:obj):def;}end=_5e4;}return new _5d8(_5e5,end);};function _5e6(prop,obj,name,def){if(prop.values){return new _5da(prop.values);}var _5e7,_5e8,end;if(prop.start){_5e8=prop.start;}else{_5e8=_5e7=obj?obj[name]:def;}if(prop.end){end=prop.end;}else{if(typeof _5e7!="number"){_5e7=obj?obj[name]:def;}end=_5e7;}return new _5d3(_5e8,end);};g.fx.animateStroke=function(args){if(!args.easing){args.easing=d._defaultEasing;}var anim=new d.Animation(args),_5e9=args.shape,_5ea;d.connect(anim,"beforeBegin",anim,function(){_5ea=_5e9.getStroke();var prop=args.color,_5eb={},_5ec,_5ed,end;if(prop){_5eb.color=_5e3(prop,_5ea,"color",_5e2);}prop=args.style;if(prop&&prop.values){_5eb.style=new _5da(prop.values);}prop=args.width;if(prop){_5eb.width=_5e6(prop,_5ea,"width",1);}prop=args.cap;if(prop&&prop.values){_5eb.cap=new _5da(prop.values);}prop=args.join;if(prop){if(prop.values){_5eb.join=new _5da(prop.values);}else{_5ed=prop.start?prop.start:(_5ea&&_5ea.join||0);end=prop.end?prop.end:(_5ea&&_5ea.join||0);if(typeof _5ed=="number"&&typeof end=="number"){_5eb.join=new _5d3(_5ed,end);}}}this.curve=new _5dc(_5eb,_5ea);});d.connect(anim,"onAnimate",_5e9,"setStroke");return anim;};g.fx.animateFill=function(args){if(!args.easing){args.easing=d._defaultEasing;}var anim=new d.Animation(args),_5ee=args.shape,fill;d.connect(anim,"beforeBegin",anim,function(){fill=_5ee.getFill();var prop=args.color,_5ef={};if(prop){this.curve=_5e3(prop,fill,"",_5e2);}});d.connect(anim,"onAnimate",_5ee,"setFill");return anim;};g.fx.animateFont=function(args){if(!args.easing){args.easing=d._defaultEasing;}var anim=new d.Animation(args),_5f0=args.shape,font;d.connect(anim,"beforeBegin",anim,function(){font=_5f0.getFont();var prop=args.style,_5f1={},_5f2,_5f3,end;if(prop&&prop.values){_5f1.style=new _5da(prop.values);}prop=args.variant;if(prop&&prop.values){_5f1.variant=new _5da(prop.values);}prop=args.weight;if(prop&&prop.values){_5f1.weight=new _5da(prop.values);}prop=args.family;if(prop&&prop.values){_5f1.family=new _5da(prop.values);}prop=args.size;if(prop&&prop.units){_5f3=parseFloat(prop.start?prop.start:(_5f0.font&&_5f0.font.size||"0"));end=parseFloat(prop.end?prop.end:(_5f0.font&&_5f0.font.size||"0"));_5f1.size=new _5d5(_5f3,end,prop.units);}this.curve=new _5dc(_5f1,font);});d.connect(anim,"onAnimate",_5f0,"setFont");return anim;};g.fx.animateTransform=function(args){if(!args.easing){args.easing=d._defaultEasing;}var anim=new d.Animation(args),_5f4=args.shape,_5f5;d.connect(anim,"beforeBegin",anim,function(){_5f5=_5f4.getTransform();this.curve=new _5de(args.transform,_5f5);});d.connect(anim,"onAnimate",_5f4,"setTransform");return anim;};})();}if(!_4._hasResource["dojox.charting.plot2d.Default"]){_4._hasResource["dojox.charting.plot2d.Default"]=true;_4.provide("dojox.charting.plot2d.Default");(function(){var df=_6.lang.functional,du=_6.lang.utils,dc=_6.charting.plot2d.common,_5f6=df.lambda("item.purgeGroup()");var _5f7=1200;_4.declare("dojox.charting.plot2d.Default",_6.charting.plot2d.Base,{defaultParams:{hAxis:"x",vAxis:"y",lines:true,areas:false,markers:false,tension:"",animate:false},optionalParams:{stroke:{},outline:{},shadow:{},fill:{},font:"",fontColor:"",markerStroke:{},markerOutline:{},markerShadow:{},markerFill:{},markerFont:"",markerFontColor:""},constructor:function(_5f8,_5f9){this.opt=_4.clone(this.defaultParams);du.updateWithObject(this.opt,_5f9);du.updateWithPattern(this.opt,_5f9,this.optionalParams);this.series=[];this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;this.animate=this.opt.animate;},render:function(dim,_5fa){if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_5fa);}this.resetEvents();this.dirty=this.isDirty();if(this.dirty){_4.forEach(this.series,_5f6);this._eventSeries={};this.cleanGroup();this.group.setTransform(null);var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,_5fb,_5fc,_5fd,_5fe=this.events();for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();if(!run.data.length){run.dirty=false;t.skip();continue;}var _5ff=t.next(this.opt.areas?"area":"line",[this.opt,run],true),s=run.group,_600=[],_601=[],rseg=null,_602,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_603=this._eventSeries[run.name]=new Array(run.data.length);for(var j=0;j<run.data.length;j++){if(run.data[j]!=null){if(!rseg){rseg=[];_601.push(j);_600.push(rseg);}rseg.push(run.data[j]);}else{rseg=null;}}for(var seg=0;seg<_600.length;seg++){if(typeof _600[seg][0]=="number"){_602=_4.map(_600[seg],function(v,i){return {x:ht(i+_601[seg]+1)+_5fa.l,y:dim.height-_5fa.b-vt(v)};},this);}else{_602=_4.map(_600[seg],function(v,i){return {x:ht(v.x)+_5fa.l,y:dim.height-_5fa.b-vt(v.y)};},this);}var _604=this.opt.tension?dc.curve(_602,this.opt.tension):"";if(this.opt.areas&&_602.length>1){var fill=_5ff.series.fill;var _605=_4.clone(_602);if(this.opt.tension){var _606="L"+_605[_605.length-1].x+","+(dim.height-_5fa.b)+" L"+_605[0].x+","+(dim.height-_5fa.b)+" L"+_605[0].x+","+_605[0].y;run.dyn.fill=s.createPath(_604+" "+_606).setFill(fill).getFill();}else{_605.push({x:_602[_602.length-1].x,y:dim.height-_5fa.b});_605.push({x:_602[0].x,y:dim.height-_5fa.b});_605.push(_602[0]);run.dyn.fill=s.createPolyline(_605).setFill(fill).getFill();}}if(this.opt.lines||this.opt.markers){_5fb=_5ff.series.stroke;if(_5ff.series.outline){_5fc=run.dyn.outline=dc.makeStroke(_5ff.series.outline);_5fc.width=2*_5fc.width+_5fb.width;}}if(this.opt.markers){run.dyn.marker=_5ff.symbol;}var _607=null,_608=null,_609=null;if(_5fb&&_5ff.series.shadow&&_602.length>1){var _60a=_5ff.series.shadow,_60b=_4.map(_602,function(c){return {x:c.x+_60a.dx,y:c.y+_60a.dy};});if(this.opt.lines){if(this.opt.tension){run.dyn.shadow=s.createPath(dc.curve(_60b,this.opt.tension)).setStroke(_60a).getStroke();}else{run.dyn.shadow=s.createPolyline(_60b).setStroke(_60a).getStroke();}}if(this.opt.markers&&_5ff.marker.shadow){_60a=_5ff.marker.shadow;_609=_4.map(_60b,function(c){return s.createPath("M"+c.x+" "+c.y+" "+_5ff.symbol).setStroke(_60a).setFill(_60a.color);},this);}}if(this.opt.lines&&_602.length>1){if(_5fc){if(this.opt.tension){run.dyn.outline=s.createPath(_604).setStroke(_5fc).getStroke();}else{run.dyn.outline=s.createPolyline(_602).setStroke(_5fc).getStroke();}}if(this.opt.tension){run.dyn.stroke=s.createPath(_604).setStroke(_5fb).getStroke();}else{run.dyn.stroke=s.createPolyline(_602).setStroke(_5fb).getStroke();}}if(this.opt.markers){_607=new Array(_602.length);_608=new Array(_602.length);_5fc=null;if(_5ff.marker.outline){_5fc=dc.makeStroke(_5ff.marker.outline);_5fc.width=2*_5fc.width+(_5ff.marker.stroke?_5ff.marker.stroke.width:0);}_4.forEach(_602,function(c,i){var path="M"+c.x+" "+c.y+" "+_5ff.symbol;if(_5fc){_608[i]=s.createPath(path).setStroke(_5fc);}_607[i]=s.createPath(path).setStroke(_5ff.marker.stroke).setFill(_5ff.marker.fill);},this);run.dyn.markerFill=_5ff.marker.fill;run.dyn.markerStroke=_5ff.marker.stroke;if(_5fe){_4.forEach(_607,function(s,i){var o={element:"marker",index:i+_601[seg],run:run,shape:s,outline:_608[i]||null,shadow:_609&&_609[i]||null,cx:_602[i].x,cy:_602[i].y};if(typeof _600[seg][0]=="number"){o.x=i+_601[seg]+1;o.y=_600[seg][i];}else{o.x=_600[seg][i].x;o.y=_600[seg][i].y;}this._connectEvents(o);_603[i+_601[seg]]=o;},this);}else{delete this._eventSeries[run.name];}}}run.dirty=false;}if(this.animate){var _60c=this.group;_6.gfx.fx.animateTransform(_4.delegate({shape:_60c,duration:_5f7,transform:[{name:"translate",start:[0,dim.height-_5fa.b],end:[0,0]},{name:"scale",start:[1,0],end:[1,1]},{name:"original"}]},this.animate)).play();}this.dirty=false;return this;}});})();}if(!_4._hasResource["dojox.charting.plot2d.Lines"]){_4._hasResource["dojox.charting.plot2d.Lines"]=true;_4.provide("dojox.charting.plot2d.Lines");_4.declare("dojox.charting.plot2d.Lines",_6.charting.plot2d.Default,{constructor:function(){this.opt.lines=true;}});}if(!_4._hasResource["dojox.charting.plot2d.Areas"]){_4._hasResource["dojox.charting.plot2d.Areas"]=true;_4.provide("dojox.charting.plot2d.Areas");_4.declare("dojox.charting.plot2d.Areas",_6.charting.plot2d.Default,{constructor:function(){this.opt.lines=true;this.opt.areas=true;}});}if(!_4._hasResource["dojox.charting.plot2d.Markers"]){_4._hasResource["dojox.charting.plot2d.Markers"]=true;_4.provide("dojox.charting.plot2d.Markers");_4.declare("dojox.charting.plot2d.Markers",_6.charting.plot2d.Default,{constructor:function(){this.opt.markers=true;}});}if(!_4._hasResource["dojox.charting.plot2d.MarkersOnly"]){_4._hasResource["dojox.charting.plot2d.MarkersOnly"]=true;_4.provide("dojox.charting.plot2d.MarkersOnly");_4.declare("dojox.charting.plot2d.MarkersOnly",_6.charting.plot2d.Default,{constructor:function(){this.opt.lines=false;this.opt.markers=true;}});}if(!_4._hasResource["dojox.gfx.gradutils"]){_4._hasResource["dojox.gfx.gradutils"]=true;_4.provide("dojox.gfx.gradutils");(function(){var d=_4,m=_6.gfx.matrix,C=d.Color;function _60d(o,c){if(o<=0){return c[0].color;}var len=c.length;if(o>=1){return c[len-1].color;}for(var i=0;i<len;++i){var stop=c[i];if(stop.offset>=o){if(i){var prev=c[i-1];return d.blendColors(new C(prev.color),new C(stop.color),(o-prev.offset)/(stop.offset-prev.offset));}return stop.color;}}return c[len-1].color;};_6.gfx.gradutils.getColor=function(fill,pt){var o;if(fill){switch(fill.type){case "linear":var _60e=Math.atan2(fill.y2-fill.y1,fill.x2-fill.x1),_60f=m.rotate(-_60e),_610=m.project(fill.x2-fill.x1,fill.y2-fill.y1),p=m.multiplyPoint(_610,pt),pf1=m.multiplyPoint(_610,fill.x1,fill.y1),pf2=m.multiplyPoint(_610,fill.x2,fill.y2),_611=m.multiplyPoint(_60f,pf2.x-pf1.x,pf2.y-pf1.y).x,o=m.multiplyPoint(_60f,p.x-pf1.x,p.y-pf1.y).x/_611;break;case "radial":var dx=pt.x-fill.cx,dy=pt.y-fill.cy,o=Math.sqrt(dx*dx+dy*dy)/fill.r;break;}return _60d(o,fill.colors);}return new C(fill||[0,0,0,0]);};_6.gfx.gradutils.reverse=function(fill){if(fill){switch(fill.type){case "linear":case "radial":fill=_4.delegate(fill);if(fill.colors){var c=fill.colors,l=c.length,i=0,stop,n=fill.colors=new Array(c.length);for(;i<l;++i){stop=c[i];n[i]={offset:1-stop.offset,color:stop.color};}n.sort(function(a,b){return a.offset-b.offset;});}break;}}return fill;};})();}if(!_4._hasResource["dojox.charting.plot2d.Scatter"]){_4._hasResource["dojox.charting.plot2d.Scatter"]=true;_4.provide("dojox.charting.plot2d.Scatter");(function(){var df=_6.lang.functional,du=_6.lang.utils,dc=_6.charting.plot2d.common,_612=df.lambda("item.purgeGroup()");_4.declare("dojox.charting.plot2d.Scatter",_6.charting.plot2d.Base,{defaultParams:{hAxis:"x",vAxis:"y",shadows:null,animate:null},optionalParams:{markerStroke:{},markerOutline:{},markerShadow:{},markerFill:{},markerFont:"",markerFontColor:""},constructor:function(_613,_614){this.opt=_4.clone(this.defaultParams);du.updateWithObject(this.opt,_614);du.updateWithPattern(this.opt,_614,this.optionalParams);this.series=[];this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;this.animate=this.opt.animate;},render:function(dim,_615){if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_615);}this.resetEvents();this.dirty=this.isDirty();if(this.dirty){_4.forEach(this.series,_612);this._eventSeries={};this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,_616=this.events();for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();if(!run.data.length){run.dirty=false;t.skip();continue;}var _617=t.next("marker",[this.opt,run]),s=run.group,_618,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler);if(typeof run.data[0]=="number"){_618=_4.map(run.data,function(v,i){return {x:ht(i+1)+_615.l,y:dim.height-_615.b-vt(v)};},this);}else{_618=_4.map(run.data,function(v,i){return {x:ht(v.x)+_615.l,y:dim.height-_615.b-vt(v.y)};},this);}var _619=new Array(_618.length),_61a=new Array(_618.length),_61b=new Array(_618.length);_4.forEach(_618,function(c,i){var _61c=typeof run.data[i]=="number"?t.post(_617,"marker"):t.addMixin(_617,"marker",run.data[i],true),path="M"+c.x+" "+c.y+" "+_61c.symbol;if(_61c.marker.shadow){_619[i]=s.createPath("M"+(c.x+_61c.marker.shadow.dx)+" "+(c.y+_61c.marker.shadow.dy)+" "+_61c.symbol).setStroke(_61c.marker.shadow).setFill(_61c.marker.shadow.color);if(this.animate){this._animateScatter(_619[i],dim.height-_615.b);}}if(_61c.marker.outline){var _61d=dc.makeStroke(_61c.marker.outline);_61d.width=2*_61d.width+_61c.marker.stroke.width;_61b[i]=s.createPath(path).setStroke(_61d);if(this.animate){this._animateScatter(_61b[i],dim.height-_615.b);}}var _61e=dc.makeStroke(_61c.marker.stroke),fill=this._plotFill(_61c.marker.fill,dim,_615);if(fill&&(fill.type==="linear"||fill.type=="radial")){var _61f=_6.gfx.gradutils.getColor(fill,{x:c.x,y:c.y});if(_61e){_61e.color=_61f;}_61a[i]=s.createPath(path).setStroke(_61e).setFill(_61f);}else{_61a[i]=s.createPath(path).setStroke(_61e).setFill(fill);}if(this.animate){this._animateScatter(_61a[i],dim.height-_615.b);}},this);if(_61a.length){run.dyn.stroke=_61a[_61a.length-1].getStroke();run.dyn.fill=_61a[_61a.length-1].getFill();}if(_616){var _620=new Array(_61a.length);_4.forEach(_61a,function(s,i){var o={element:"marker",index:i,run:run,shape:s,outline:_61b&&_61b[i]||null,shadow:_619&&_619[i]||null,cx:_618[i].x,cy:_618[i].y};if(typeof run.data[0]=="number"){o.x=i+1;o.y=run.data[i];}else{o.x=run.data[i].x;o.y=run.data[i].y;}this._connectEvents(o);_620[i]=o;},this);this._eventSeries[run.name]=_620;}else{delete this._eventSeries[run.name];}run.dirty=false;}this.dirty=false;return this;},_animateScatter:function(_621,_622){_6.gfx.fx.animateTransform(_4.delegate({shape:_621,duration:1200,transform:[{name:"translate",start:[0,_622],end:[0,0]},{name:"scale",start:[0,0],end:[1,1]},{name:"original"}]},this.animate)).play();}});})();}if(!_4._hasResource["dojox.lang.functional.sequence"]){_4._hasResource["dojox.lang.functional.sequence"]=true;_4.provide("dojox.lang.functional.sequence");(function(){var d=_4,df=_6.lang.functional;d.mixin(df,{repeat:function(n,f,z,o){o=o||d.global;f=df.lambda(f);var t=new Array(n),i=1;t[0]=z;for(;i<n;t[i]=z=f.call(o,z),++i){}return t;},until:function(pr,f,z,o){o=o||d.global;f=df.lambda(f);pr=df.lambda(pr);var t=[];for(;!pr.call(o,z);t.push(z),z=f.call(o,z)){}return t;}});})();}if(!_4._hasResource["dojox.charting.plot2d.Stacked"]){_4._hasResource["dojox.charting.plot2d.Stacked"]=true;_4.provide("dojox.charting.plot2d.Stacked");(function(){var df=_6.lang.functional,dc=_6.charting.plot2d.common,_623=df.lambda("item.purgeGroup()");_4.declare("dojox.charting.plot2d.Stacked",_6.charting.plot2d.Default,{getSeriesStats:function(){var _624=dc.collectStackedStats(this.series);this._maxRunLength=_624.hmax;return _624;},render:function(dim,_625){if(this._maxRunLength<=0){return this;}var acc=df.repeat(this._maxRunLength,"-> 0",0);for(var i=0;i<this.series.length;++i){var run=this.series[i];for(var j=0;j<run.data.length;++j){var v=run.data[j];if(v!==null){if(isNaN(v)){v=0;}acc[j]+=v;}}}if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_625);}this.resetEvents();this.dirty=this.isDirty();if(this.dirty){_4.forEach(this.series,_623);this._eventSeries={};this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,_626=this.events(),ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler);for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();var _627=t.next(this.opt.areas?"area":"line",[this.opt,run],true),s=run.group,_628,_629=_4.map(acc,function(v,i){return {x:ht(i+1)+_625.l,y:dim.height-_625.b-vt(v)};},this);var _62a=this.opt.tension?dc.curve(_629,this.opt.tension):"";if(this.opt.areas){var _62b=_4.clone(_629);if(this.opt.tension){var p=dc.curve(_62b,this.opt.tension);p+=" L"+_629[_629.length-1].x+","+(dim.height-_625.b)+" L"+_629[0].x+","+(dim.height-_625.b)+" L"+_629[0].x+","+_629[0].y;run.dyn.fill=s.createPath(p).setFill(_627.series.fill).getFill();}else{_62b.push({x:_629[_629.length-1].x,y:dim.height-_625.b});_62b.push({x:_629[0].x,y:dim.height-_625.b});_62b.push(_629[0]);run.dyn.fill=s.createPolyline(_62b).setFill(_627.series.fill).getFill();}}if(this.opt.lines||this.opt.markers){if(_627.series.outline){_628=dc.makeStroke(_627.series.outline);_628.width=2*_628.width+_627.series.stroke.width;}}if(this.opt.markers){run.dyn.marker=_627.symbol;}var _62c,_62d,_62e;if(_627.series.shadow&&_627.series.stroke){var _62f=_627.series.shadow,_630=_4.map(_629,function(c){return {x:c.x+_62f.dx,y:c.y+_62f.dy};});if(this.opt.lines){if(this.opt.tension){run.dyn.shadow=s.createPath(dc.curve(_630,this.opt.tension)).setStroke(_62f).getStroke();}else{run.dyn.shadow=s.createPolyline(_630).setStroke(_62f).getStroke();}}if(this.opt.markers){_62f=_627.marker.shadow;_62e=_4.map(_630,function(c){return s.createPath("M"+c.x+" "+c.y+" "+_627.symbol).setStroke(_62f).setFill(_62f.color);},this);}}if(this.opt.lines){if(_628){if(this.opt.tension){run.dyn.outline=s.createPath(_62a).setStroke(_628).getStroke();}else{run.dyn.outline=s.createPolyline(_629).setStroke(_628).getStroke();}}if(this.opt.tension){run.dyn.stroke=s.createPath(_62a).setStroke(_627.series.stroke).getStroke();}else{run.dyn.stroke=s.createPolyline(_629).setStroke(_627.series.stroke).getStroke();}}if(this.opt.markers){_62c=new Array(_629.length);_62d=new Array(_629.length);_628=null;if(_627.marker.outline){_628=dc.makeStroke(_627.marker.outline);_628.width=2*_628.width+(_627.marker.stroke?_627.marker.stroke.width:0);}_4.forEach(_629,function(c,i){var path="M"+c.x+" "+c.y+" "+_627.symbol;if(_628){_62d[i]=s.createPath(path).setStroke(_628);}_62c[i]=s.createPath(path).setStroke(_627.marker.stroke).setFill(_627.marker.fill);},this);if(_626){var _631=new Array(_62c.length);_4.forEach(_62c,function(s,i){var o={element:"marker",index:i,run:run,shape:s,outline:_62d[i]||null,shadow:_62e&&_62e[i]||null,cx:_629[i].x,cy:_629[i].y,x:i+1,y:run.data[i]};this._connectEvents(o);_631[i]=o;},this);this._eventSeries[run.name]=_631;}else{delete this._eventSeries[run.name];}}run.dirty=false;for(var j=0;j<run.data.length;++j){var v=run.data[j];if(v!==null){if(isNaN(v)){v=0;}acc[j]-=v;}}}this.dirty=false;return this;}});})();}if(!_4._hasResource["dojox.charting.plot2d.StackedLines"]){_4._hasResource["dojox.charting.plot2d.StackedLines"]=true;_4.provide("dojox.charting.plot2d.StackedLines");_4.declare("dojox.charting.plot2d.StackedLines",_6.charting.plot2d.Stacked,{constructor:function(){this.opt.lines=true;}});}if(!_4._hasResource["dojox.charting.plot2d.StackedAreas"]){_4._hasResource["dojox.charting.plot2d.StackedAreas"]=true;_4.provide("dojox.charting.plot2d.StackedAreas");_4.declare("dojox.charting.plot2d.StackedAreas",_6.charting.plot2d.Stacked,{constructor:function(){this.opt.lines=true;this.opt.areas=true;}});}if(!_4._hasResource["dojox.charting.plot2d.Columns"]){_4._hasResource["dojox.charting.plot2d.Columns"]=true;_4.provide("dojox.charting.plot2d.Columns");(function(){var df=_6.lang.functional,du=_6.lang.utils,dc=_6.charting.plot2d.common,_632=df.lambda("item.purgeGroup()");_4.declare("dojox.charting.plot2d.Columns",_6.charting.plot2d.Base,{defaultParams:{hAxis:"x",vAxis:"y",gap:0,animate:null},optionalParams:{minBarSize:1,maxBarSize:1,stroke:{},outline:{},shadow:{},fill:{},font:"",fontColor:""},constructor:function(_633,_634){this.opt=_4.clone(this.defaultParams);du.updateWithObject(this.opt,_634);du.updateWithPattern(this.opt,_634,this.optionalParams);this.series=[];this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;this.animate=this.opt.animate;},getSeriesStats:function(){var _635=dc.collectSimpleStats(this.series);_635.hmin-=0.5;_635.hmax+=0.5;return _635;},render:function(dim,_636){if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_636);}this.resetEvents();this.dirty=this.isDirty();if(this.dirty){_4.forEach(this.series,_632);this._eventSeries={};this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,f,gap,_637,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_638=Math.max(0,this._vScaler.bounds.lower),_639=vt(_638),_63a=this.events();f=dc.calculateBarSize(this._hScaler.bounds.scale,this.opt);gap=f.gap;_637=f.size;for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();var _63b=t.next("column",[this.opt,run]),s=run.group,_63c=new Array(run.data.length);for(var j=0;j<run.data.length;++j){var _63d=run.data[j];if(_63d!==null){var v=typeof _63d=="number"?_63d:_63d.y,vv=vt(v),_63e=vv-_639,h=Math.abs(_63e),_63f=typeof _63d!="number"?t.addMixin(_63b,"column",_63d,true):t.post(_63b,"column");if(_637>=1&&h>=1){var rect={x:_636.l+ht(j+0.5)+gap,y:dim.height-_636.b-(v>_638?vv:_639),width:_637,height:h};var _640=this._plotFill(_63f.series.fill,dim,_636);_640=this._shapeFill(_640,rect);var _641=s.createRect(rect).setFill(_640).setStroke(_63f.series.stroke);run.dyn.fill=_641.getFill();run.dyn.stroke=_641.getStroke();if(_63a){var o={element:"column",index:j,run:run,shape:_641,x:j+0.5,y:v};this._connectEvents(o);_63c[j]=o;}if(this.animate){this._animateColumn(_641,dim.height-_636.b-_639,h);}}}}this._eventSeries[run.name]=_63c;run.dirty=false;}this.dirty=false;return this;},_animateColumn:function(_642,_643,_644){_6.gfx.fx.animateTransform(_4.delegate({shape:_642,duration:1200,transform:[{name:"translate",start:[0,_643-(_643/_644)],end:[0,0]},{name:"scale",start:[1,1/_644],end:[1,1]},{name:"original"}]},this.animate)).play();}});})();}if(!_4._hasResource["dojox.charting.plot2d.StackedColumns"]){_4._hasResource["dojox.charting.plot2d.StackedColumns"]=true;_4.provide("dojox.charting.plot2d.StackedColumns");(function(){var df=_6.lang.functional,dc=_6.charting.plot2d.common,_645=df.lambda("item.purgeGroup()");_4.declare("dojox.charting.plot2d.StackedColumns",_6.charting.plot2d.Columns,{getSeriesStats:function(){var _646=dc.collectStackedStats(this.series);this._maxRunLength=_646.hmax;_646.hmin-=0.5;_646.hmax+=0.5;return _646;},render:function(dim,_647){if(this._maxRunLength<=0){return this;}var acc=df.repeat(this._maxRunLength,"-> 0",0);for(var i=0;i<this.series.length;++i){var run=this.series[i];for(var j=0;j<run.data.length;++j){var _648=run.data[j];if(_648!==null){var v=typeof _648=="number"?_648:_648.y;if(isNaN(v)){v=0;}acc[j]+=v;}}}if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_647);}this.resetEvents();this.dirty=this.isDirty();if(this.dirty){_4.forEach(this.series,_645);this._eventSeries={};this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,f,gap,_649,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_64a=this.events();f=dc.calculateBarSize(this._hScaler.bounds.scale,this.opt);gap=f.gap;_649=f.size;for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();var _64b=t.next("column",[this.opt,run]),s=run.group,_64c=new Array(acc.length);for(var j=0;j<acc.length;++j){var _648=run.data[j];if(_648!==null){var v=acc[j],_64d=vt(v),_64e=typeof _648!="number"?t.addMixin(_64b,"column",_648,true):t.post(_64b,"column");if(_649>=1&&_64d>=1){var rect={x:_647.l+ht(j+0.5)+gap,y:dim.height-_647.b-vt(v),width:_649,height:_64d};var _64f=this._plotFill(_64e.series.fill,dim,_647);_64f=this._shapeFill(_64f,rect);var _650=s.createRect(rect).setFill(_64f).setStroke(_64e.series.stroke);run.dyn.fill=_650.getFill();run.dyn.stroke=_650.getStroke();if(_64a){var o={element:"column",index:j,run:run,shape:_650,x:j+0.5,y:v};this._connectEvents(o);_64c[j]=o;}if(this.animate){this._animateColumn(_650,dim.height-_647.b,_64d);}}}}this._eventSeries[run.name]=_64c;run.dirty=false;for(var j=0;j<run.data.length;++j){var _648=run.data[j];if(_648!==null){var v=typeof _648=="number"?_648:_648.y;if(isNaN(v)){v=0;}acc[j]-=v;}}}this.dirty=false;return this;}});})();}if(!_4._hasResource["dojox.charting.plot2d.ClusteredColumns"]){_4._hasResource["dojox.charting.plot2d.ClusteredColumns"]=true;_4.provide("dojox.charting.plot2d.ClusteredColumns");(function(){var df=_6.lang.functional,dc=_6.charting.plot2d.common,_651=df.lambda("item.purgeGroup()");_4.declare("dojox.charting.plot2d.ClusteredColumns",_6.charting.plot2d.Columns,{render:function(dim,_652){if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_652);}this.resetEvents();this.dirty=this.isDirty();if(this.dirty){_4.forEach(this.series,_651);this._eventSeries={};this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,f,gap,_653,_654,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_655=Math.max(0,this._vScaler.bounds.lower),_656=vt(_655),_657=this.events();f=dc.calculateBarSize(this._hScaler.bounds.scale,this.opt,this.series.length);gap=f.gap;_653=_654=f.size;for(var i=0;i<this.series.length;++i){var run=this.series[i],_658=_654*i;if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();var _659=t.next("column",[this.opt,run]),s=run.group,_65a=new Array(run.data.length);for(var j=0;j<run.data.length;++j){var _65b=run.data[j];if(_65b!==null){var v=typeof _65b=="number"?_65b:_65b.y,vv=vt(v),_65c=vv-_656,h=Math.abs(_65c),_65d=typeof _65b!="number"?t.addMixin(_659,"column",_65b,true):t.post(_659,"column");if(_653>=1&&h>=1){var rect={x:_652.l+ht(j+0.5)+gap+_658,y:dim.height-_652.b-(v>_655?vv:_656),width:_653,height:h};var _65e=this._plotFill(_65d.series.fill,dim,_652);_65e=this._shapeFill(_65e,rect);var _65f=s.createRect(rect).setFill(_65e).setStroke(_65d.series.stroke);run.dyn.fill=_65f.getFill();run.dyn.stroke=_65f.getStroke();if(_657){var o={element:"column",index:j,run:run,shape:_65f,x:j+0.5,y:v};this._connectEvents(o);_65a[j]=o;}if(this.animate){this._animateColumn(_65f,dim.height-_652.b-_656,h);}}}}this._eventSeries[run.name]=_65a;run.dirty=false;}this.dirty=false;return this;}});})();}if(!_4._hasResource["dojox.charting.plot2d.Bars"]){_4._hasResource["dojox.charting.plot2d.Bars"]=true;_4.provide("dojox.charting.plot2d.Bars");(function(){var df=_6.lang.functional,du=_6.lang.utils,dc=_6.charting.plot2d.common,_660=df.lambda("item.purgeGroup()");_4.declare("dojox.charting.plot2d.Bars",_6.charting.plot2d.Base,{defaultParams:{hAxis:"x",vAxis:"y",gap:0,animate:null},optionalParams:{minBarSize:1,maxBarSize:1,stroke:{},outline:{},shadow:{},fill:{},font:"",fontColor:""},constructor:function(_661,_662){this.opt=_4.clone(this.defaultParams);du.updateWithObject(this.opt,_662);du.updateWithPattern(this.opt,_662,this.optionalParams);this.series=[];this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;this.animate=this.opt.animate;},getSeriesStats:function(){var _663=dc.collectSimpleStats(this.series),t;_663.hmin-=0.5;_663.hmax+=0.5;t=_663.hmin,_663.hmin=_663.vmin,_663.vmin=t;t=_663.hmax,_663.hmax=_663.vmax,_663.vmax=t;return _663;},render:function(dim,_664){if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_664);}this.dirty=this.isDirty();this.resetEvents();if(this.dirty){_4.forEach(this.series,_660);this._eventSeries={};this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,f,gap,_665,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_666=Math.max(0,this._hScaler.bounds.lower),_667=ht(_666),_668=this.events();f=dc.calculateBarSize(this._vScaler.bounds.scale,this.opt);gap=f.gap;_665=f.size;for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();var _669=t.next("bar",[this.opt,run]),s=run.group,_66a=new Array(run.data.length);for(var j=0;j<run.data.length;++j){var _66b=run.data[j];if(_66b!==null){var v=typeof _66b=="number"?_66b:_66b.y,hv=ht(v),_66c=hv-_667,w=Math.abs(_66c),_66d=typeof _66b!="number"?t.addMixin(_669,"bar",_66b,true):t.post(_669,"bar");if(w>=1&&_665>=1){var rect={x:_664.l+(v<_666?hv:_667),y:dim.height-_664.b-vt(j+1.5)+gap,width:w,height:_665};var _66e=this._plotFill(_66d.series.fill,dim,_664);_66e=this._shapeFill(_66e,rect);var _66f=s.createRect(rect).setFill(_66e).setStroke(_66d.series.stroke);run.dyn.fill=_66f.getFill();run.dyn.stroke=_66f.getStroke();if(_668){var o={element:"bar",index:j,run:run,shape:_66f,x:v,y:j+1.5};this._connectEvents(o);_66a[j]=o;}if(this.animate){this._animateBar(_66f,_664.l+_667,-w);}}}}this._eventSeries[run.name]=_66a;run.dirty=false;}this.dirty=false;return this;},_animateBar:function(_670,_671,_672){_6.gfx.fx.animateTransform(_4.delegate({shape:_670,duration:1200,transform:[{name:"translate",start:[_671-(_671/_672),0],end:[0,0]},{name:"scale",start:[1/_672,1],end:[1,1]},{name:"original"}]},this.animate)).play();}});})();}if(!_4._hasResource["dojox.charting.plot2d.StackedBars"]){_4._hasResource["dojox.charting.plot2d.StackedBars"]=true;_4.provide("dojox.charting.plot2d.StackedBars");(function(){var df=_6.lang.functional,dc=_6.charting.plot2d.common,_673=df.lambda("item.purgeGroup()");_4.declare("dojox.charting.plot2d.StackedBars",_6.charting.plot2d.Bars,{getSeriesStats:function(){var _674=dc.collectStackedStats(this.series),t;this._maxRunLength=_674.hmax;_674.hmin-=0.5;_674.hmax+=0.5;t=_674.hmin,_674.hmin=_674.vmin,_674.vmin=t;t=_674.hmax,_674.hmax=_674.vmax,_674.vmax=t;return _674;},render:function(dim,_675){if(this._maxRunLength<=0){return this;}var acc=df.repeat(this._maxRunLength,"-> 0",0);for(var i=0;i<this.series.length;++i){var run=this.series[i];for(var j=0;j<run.data.length;++j){var _676=run.data[j];if(_676!==null){var v=typeof _676=="number"?_676:_676.y;if(isNaN(v)){v=0;}acc[j]+=v;}}}if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_675);}this.resetEvents();this.dirty=this.isDirty();if(this.dirty){_4.forEach(this.series,_673);this._eventSeries={};this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,f,gap,_677,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_678=this.events();f=dc.calculateBarSize(this._vScaler.bounds.scale,this.opt);gap=f.gap;_677=f.size;for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();var _679=t.next("bar",[this.opt,run]),s=run.group,_67a=new Array(acc.length);for(var j=0;j<acc.length;++j){var _676=run.data[j];if(_676!==null){var v=acc[j],_67b=ht(v),_67c=typeof _676!="number"?t.addMixin(_679,"bar",_676,true):t.post(_679,"bar");if(_67b>=1&&_677>=1){var rect={x:_675.l,y:dim.height-_675.b-vt(j+1.5)+gap,width:_67b,height:_677};var _67d=this._plotFill(_67c.series.fill,dim,_675);_67d=this._shapeFill(_67d,rect);var _67e=s.createRect(rect).setFill(_67d).setStroke(_67c.series.stroke);run.dyn.fill=_67e.getFill();run.dyn.stroke=_67e.getStroke();if(_678){var o={element:"bar",index:j,run:run,shape:_67e,x:v,y:j+1.5};this._connectEvents(o);_67a[j]=o;}if(this.animate){this._animateBar(_67e,_675.l,-_67b);}}}}this._eventSeries[run.name]=_67a;run.dirty=false;for(var j=0;j<run.data.length;++j){var _676=run.data[j];if(_676!==null){var v=typeof _676=="number"?_676:_676.y;if(isNaN(v)){v=0;}acc[j]-=v;}}}this.dirty=false;return this;}});})();}if(!_4._hasResource["dojox.charting.plot2d.ClusteredBars"]){_4._hasResource["dojox.charting.plot2d.ClusteredBars"]=true;_4.provide("dojox.charting.plot2d.ClusteredBars");(function(){var df=_6.lang.functional,dc=_6.charting.plot2d.common,_67f=df.lambda("item.purgeGroup()");_4.declare("dojox.charting.plot2d.ClusteredBars",_6.charting.plot2d.Bars,{render:function(dim,_680){if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_680);}this.resetEvents();this.dirty=this.isDirty();if(this.dirty){_4.forEach(this.series,_67f);this._eventSeries={};this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,f,gap,_681,_682,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_683=Math.max(0,this._hScaler.bounds.lower),_684=ht(_683),_685=this.events();f=dc.calculateBarSize(this._vScaler.bounds.scale,this.opt,this.series.length);gap=f.gap;_681=_682=f.size;for(var i=this.series.length-1;i>=0;--i){var run=this.series[i],_686=_682*(this.series.length-i-1);if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();var _687=t.next("bar",[this.opt,run]),s=run.group,_688=new Array(run.data.length);for(var j=0;j<run.data.length;++j){var _689=run.data[j];if(_689!==null){var v=typeof _689=="number"?_689:_689.y,hv=ht(v),_68a=hv-_684,w=Math.abs(_68a),_68b=typeof _689!="number"?t.addMixin(_687,"bar",_689,true):t.post(_687,"bar");if(w>=1&&_681>=1){var rect={x:_680.l+(v<_683?hv:_684),y:dim.height-_680.b-vt(j+1.5)+gap+_686,width:w,height:_681};var _68c=this._plotFill(_68b.series.fill,dim,_680);_68c=this._shapeFill(_68c,rect);var _68d=s.createRect(rect).setFill(_68c).setStroke(_68b.series.stroke);run.dyn.fill=_68d.getFill();run.dyn.stroke=_68d.getStroke();if(_685){var o={element:"bar",index:j,run:run,shape:_68d,x:v,y:j+1.5};this._connectEvents(o);_688[j]=o;}if(this.animate){this._animateBar(_68d,_680.l+_684,-_68a);}}}}this._eventSeries[run.name]=_688;run.dirty=false;}this.dirty=false;return this;}});})();}if(!_4._hasResource["dojox.charting.plot2d.Grid"]){_4._hasResource["dojox.charting.plot2d.Grid"]=true;_4.provide("dojox.charting.plot2d.Grid");(function(){var du=_6.lang.utils,dc=_6.charting.plot2d.common;_4.declare("dojox.charting.plot2d.Grid",_6.charting.Element,{defaultParams:{hAxis:"x",vAxis:"y",hMajorLines:true,hMinorLines:false,vMajorLines:true,vMinorLines:false,hStripes:"none",vStripes:"none",animate:null},optionalParams:{},constructor:function(_68e,_68f){this.opt=_4.clone(this.defaultParams);du.updateWithObject(this.opt,_68f);this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;this.dirty=true;this.animate=this.opt.animate;this.zoom=null,this.zoomQueue=[];this.lastWindow={vscale:1,hscale:1,xoffset:0,yoffset:0};},clear:function(){this._hAxis=null;this._vAxis=null;this.dirty=true;return this;},setAxis:function(axis){if(axis){this[axis.vertical?"_vAxis":"_hAxis"]=axis;}return this;},addSeries:function(run){return this;},getSeriesStats:function(){return _4.delegate(dc.defaultStats);},initializeScalers:function(){return this;},isDirty:function(){return this.dirty||this._hAxis&&this._hAxis.dirty||this._vAxis&&this._vAxis.dirty;},performZoom:function(dim,_690){var vs=this._vAxis.scale||1,hs=this._hAxis.scale||1,_691=dim.height-_690.b,_692=this._hAxis.getScaler().bounds,_693=(_692.from-_692.lower)*_692.scale,_694=this._vAxis.getScaler().bounds,_695=(_694.from-_694.lower)*_694.scale;rVScale=vs/this.lastWindow.vscale,rHScale=hs/this.lastWindow.hscale,rXOffset=(this.lastWindow.xoffset-_693)/((this.lastWindow.hscale==1)?hs:this.lastWindow.hscale),rYOffset=(_695-this.lastWindow.yoffset)/((this.lastWindow.vscale==1)?vs:this.lastWindow.vscale),shape=this.group,anim=_6.gfx.fx.animateTransform(_4.delegate({shape:shape,duration:1200,transform:[{name:"translate",start:[0,0],end:[_690.l*(1-rHScale),_691*(1-rVScale)]},{name:"scale",start:[1,1],end:[rHScale,rVScale]},{name:"original"},{name:"translate",start:[0,0],end:[rXOffset,rYOffset]}]},this.zoom));_4.mixin(this.lastWindow,{vscale:vs,hscale:hs,xoffset:_693,yoffset:_695});this.zoomQueue.push(anim);_4.connect(anim,"onEnd",this,function(){this.zoom=null;this.zoomQueue.shift();if(this.zoomQueue.length>0){this.zoomQueue[0].play();}});if(this.zoomQueue.length==1){this.zoomQueue[0].play();}return this;},getRequiredColors:function(){return 0;},render:function(dim,_696){if(this.zoom){return this.performZoom(dim,_696);}this.dirty=this.isDirty();if(!this.dirty){return this;}this.cleanGroup();var s=this.group,ta=this.chart.theme.axis;try{var _697=this._vAxis.getScaler(),vt=_697.scaler.getTransformerFromModel(_697),_698=this._vAxis.getTicks();if(this.opt.hMinorLines){_4.forEach(_698.minor,function(tick){var y=dim.height-_696.b-vt(tick.value);var _699=s.createLine({x1:_696.l,y1:y,x2:dim.width-_696.r,y2:y}).setStroke(ta.minorTick);if(this.animate){this._animateGrid(_699,"h",_696.l,_696.r+_696.l-dim.width);}},this);}if(this.opt.hMajorLines){_4.forEach(_698.major,function(tick){var y=dim.height-_696.b-vt(tick.value);var _69a=s.createLine({x1:_696.l,y1:y,x2:dim.width-_696.r,y2:y}).setStroke(ta.majorTick);if(this.animate){this._animateGrid(_69a,"h",_696.l,_696.r+_696.l-dim.width);}},this);}}catch(e){}try{var _69b=this._hAxis.getScaler(),ht=_69b.scaler.getTransformerFromModel(_69b),_698=this._hAxis.getTicks();if(_698&&this.opt.vMinorLines){_4.forEach(_698.minor,function(tick){var x=_696.l+ht(tick.value);var _69c=s.createLine({x1:x,y1:_696.t,x2:x,y2:dim.height-_696.b}).setStroke(ta.minorTick);if(this.animate){this._animateGrid(_69c,"v",dim.height-_696.b,dim.height-_696.b-_696.t);}},this);}if(_698&&this.opt.vMajorLines){_4.forEach(_698.major,function(tick){var x=_696.l+ht(tick.value);var _69d=s.createLine({x1:x,y1:_696.t,x2:x,y2:dim.height-_696.b}).setStroke(ta.majorTick);if(this.animate){this._animateGrid(_69d,"v",dim.height-_696.b,dim.height-_696.b-_696.t);}},this);}}catch(e){}this.dirty=false;return this;},_animateGrid:function(_69e,type,_69f,size){var _6a0=type=="h"?[_69f,0]:[0,_69f];var _6a1=type=="h"?[1/size,1]:[1,1/size];_6.gfx.fx.animateTransform(_4.delegate({shape:_69e,duration:1200,transform:[{name:"translate",start:_6a0,end:[0,0]},{name:"scale",start:_6a1,end:[1,1]},{name:"original"}]},this.animate)).play();}});})();}if(!_4._hasResource["dojox.charting.plot2d.Pie"]){_4._hasResource["dojox.charting.plot2d.Pie"]=true;_4.provide("dojox.charting.plot2d.Pie");(function(){var df=_6.lang.functional,du=_6.lang.utils,dc=_6.charting.plot2d.common,da=_6.charting.axis2d.common,g=_6.gfx,m=g.matrix,_6a2=0.2;_4.declare("dojox.charting.plot2d.Pie",[_6.charting.Element,_6.charting.plot2d._PlotEvents],{defaultParams:{labels:true,ticks:false,fixed:true,precision:1,labelOffset:20,labelStyle:"default",htmlLabels:true,radGrad:"native",fanSize:5,startAngle:0},optionalParams:{radius:0,stroke:{},outline:{},shadow:{},fill:{},font:"",fontColor:"",labelWiring:{}},constructor:function(_6a3,_6a4){this.opt=_4.clone(this.defaultParams);du.updateWithObject(this.opt,_6a4);du.updateWithPattern(this.opt,_6a4,this.optionalParams);this.run=null;this.dyn=[];},clear:function(){this.dirty=true;this.dyn=[];this.run=null;return this;},setAxis:function(axis){return this;},addSeries:function(run){this.run=run;return this;},getSeriesStats:function(){return _4.delegate(dc.defaultStats);},initializeScalers:function(){return this;},getRequiredColors:function(){return this.run?this.run.data.length:0;},render:function(dim,_6a5){if(!this.dirty){return this;}this.resetEvents();this.dirty=false;this._eventSeries={};this.cleanGroup();var s=this.group,t=this.chart.theme;if(!this.run||!this.run.data.length){return this;}var rx=(dim.width-_6a5.l-_6a5.r)/2,ry=(dim.height-_6a5.t-_6a5.b)/2,r=Math.min(rx,ry),_6a6="font" in this.opt?this.opt.font:t.axis.font,size=_6a6?g.normalizedLength(g.splitFontString(_6a6).size):0,_6a7="fontColor" in this.opt?this.opt.fontColor:t.axis.fontColor,_6a8=m._degToRad(this.opt.startAngle),_6a9=_6a8,step,_6aa,_6ab,_6ac,_6ad,_6ae,run=this.run.data,_6af=this.events();if(typeof run[0]=="number"){_6aa=df.map(run,"x ? Math.max(x, 0) : 0");if(df.every(_6aa,"<= 0")){return this;}_6ab=df.map(_6aa,"/this",df.foldl(_6aa,"+",0));if(this.opt.labels){_6ac=_4.map(_6ab,function(x){return x>0?this._getLabel(x*100)+"%":"";},this);}}else{_6aa=df.map(run,"x ? Math.max(x.y, 0) : 0");if(df.every(_6aa,"<= 0")){return this;}_6ab=df.map(_6aa,"/this",df.foldl(_6aa,"+",0));if(this.opt.labels){_6ac=_4.map(_6ab,function(x,i){if(x<=0){return "";}var v=run[i];return "text" in v?v.text:this._getLabel(x*100)+"%";},this);}}var _6b0=df.map(run,function(v,i){if(v===null||typeof v=="number"){return t.next("slice",[this.opt,this.run],true);}return t.next("slice",[this.opt,this.run,v],true);},this);if(this.opt.labels){_6ad=df.foldl1(df.map(_6ac,function(_6b1,i){var font=_6b0[i].series.font;return _6.gfx._base._getTextBox(_6b1,{font:font}).w;},this),"Math.max(a, b)")/2;if(this.opt.labelOffset<0){r=Math.min(rx-2*_6ad,ry-size)+this.opt.labelOffset;}_6ae=r-this.opt.labelOffset;}if("radius" in this.opt){r=this.opt.radius;_6ae=r-this.opt.labelOffset;}var _6b2={cx:_6a5.l+rx,cy:_6a5.t+ry,r:r};this.dyn=[];var _6b3=new Array(_6ab.length);_4.some(_6ab,function(_6b4,i){if(_6b4<0){return false;}if(_6b4==0){this.dyn.push({fill:null,stroke:null});return false;}var v=run[i],_6b5=_6b0[i],_6b6;if(_6b4>=1){_6b6=this._plotFill(_6b5.series.fill,dim,_6a5);_6b6=this._shapeFill(_6b6,{x:_6b2.cx-_6b2.r,y:_6b2.cy-_6b2.r,width:2*_6b2.r,height:2*_6b2.r});_6b6=this._pseudoRadialFill(_6b6,{x:_6b2.cx,y:_6b2.cy},_6b2.r);var _6b7=s.createCircle(_6b2).setFill(_6b6).setStroke(_6b5.series.stroke);this.dyn.push({fill:_6b6,stroke:_6b5.series.stroke});if(_6af){var o={element:"slice",index:i,run:this.run,shape:_6b7,x:i,y:typeof v=="number"?v:v.y,cx:_6b2.cx,cy:_6b2.cy,cr:r};this._connectEvents(o);_6b3[i]=o;}return true;}var end=_6a9+_6b4*2*Math.PI;if(i+1==_6ab.length){end=_6a8+2*Math.PI;}var step=end-_6a9,x1=_6b2.cx+r*Math.cos(_6a9),y1=_6b2.cy+r*Math.sin(_6a9),x2=_6b2.cx+r*Math.cos(end),y2=_6b2.cy+r*Math.sin(end);var _6b8=m._degToRad(this.opt.fanSize);if(_6b5.series.fill&&_6b5.series.fill.type==="radial"&&this.opt.radGrad==="fan"&&step>_6b8){var _6b9=s.createGroup(),_6ba=Math.ceil(step/_6b8),_6bb=step/_6ba;_6b6=this._shapeFill(_6b5.series.fill,{x:_6b2.cx-_6b2.r,y:_6b2.cy-_6b2.r,width:2*_6b2.r,height:2*_6b2.r});for(var j=0;j<_6ba;++j){var _6bc=j==0?x1:_6b2.cx+r*Math.cos(_6a9+(j-_6a2)*_6bb),_6bd=j==0?y1:_6b2.cy+r*Math.sin(_6a9+(j-_6a2)*_6bb),_6be=j==_6ba-1?x2:_6b2.cx+r*Math.cos(_6a9+(j+1+_6a2)*_6bb),_6bf=j==_6ba-1?y2:_6b2.cy+r*Math.sin(_6a9+(j+1+_6a2)*_6bb),fan=_6b9.createPath({}).moveTo(_6b2.cx,_6b2.cy).lineTo(_6bc,_6bd).arcTo(r,r,0,_6bb>Math.PI,true,_6be,_6bf).lineTo(_6b2.cx,_6b2.cy).closePath().setFill(this._pseudoRadialFill(_6b6,{x:_6b2.cx,y:_6b2.cy},r,_6a9+(j+0.5)*_6bb,_6a9+(j+0.5)*_6bb));}_6b9.createPath({}).moveTo(_6b2.cx,_6b2.cy).lineTo(x1,y1).arcTo(r,r,0,step>Math.PI,true,x2,y2).lineTo(_6b2.cx,_6b2.cy).closePath().setStroke(_6b5.series.stroke);_6b7=_6b9;}else{_6b7=s.createPath({}).moveTo(_6b2.cx,_6b2.cy).lineTo(x1,y1).arcTo(r,r,0,step>Math.PI,true,x2,y2).lineTo(_6b2.cx,_6b2.cy).closePath().setStroke(_6b5.series.stroke);var _6b6=_6b5.series.fill;if(_6b6&&_6b6.type==="radial"){_6b6=this._shapeFill(_6b6,{x:_6b2.cx-_6b2.r,y:_6b2.cy-_6b2.r,width:2*_6b2.r,height:2*_6b2.r});if(this.opt.radGrad==="linear"){_6b6=this._pseudoRadialFill(_6b6,{x:_6b2.cx,y:_6b2.cy},r,_6a9,end);}}else{if(_6b6&&_6b6.type==="linear"){_6b6=this._plotFill(_6b6,dim,_6a5);_6b6=this._shapeFill(_6b6,_6b7.getBoundingBox());}}_6b7.setFill(_6b6);}this.dyn.push({fill:_6b6,stroke:_6b5.series.stroke});if(_6af){var o={element:"slice",index:i,run:this.run,shape:_6b7,x:i,y:typeof v=="number"?v:v.y,cx:_6b2.cx,cy:_6b2.cy,cr:r};this._connectEvents(o);_6b3[i]=o;}_6a9=end;return false;},this);if(this.opt.labels){if(this.opt.labelStyle=="default"){_6a9=_6a8;_4.some(_6ab,function(_6c0,i){if(_6c0<=0){return false;}var _6c1=_6b0[i];if(_6c0>=1){var v=run[i],elem=da.createText[this.opt.htmlLabels&&_6.gfx.renderer!="vml"?"html":"gfx"](this.chart,s,_6b2.cx,_6b2.cy+size/2,"middle",_6ac[i],_6c1.series.font,_6c1.series.fontColor);if(this.opt.htmlLabels){this.htmlElements.push(elem);}return true;}var end=_6a9+_6c0*2*Math.PI,v=run[i];if(i+1==_6ab.length){end=_6a8+2*Math.PI;}var _6c2=(_6a9+end)/2,x=_6b2.cx+_6ae*Math.cos(_6c2),y=_6b2.cy+_6ae*Math.sin(_6c2)+size/2;var elem=da.createText[this.opt.htmlLabels&&_6.gfx.renderer!="vml"?"html":"gfx"](this.chart,s,x,y,"middle",_6ac[i],_6c1.series.font,_6c1.series.fontColor);if(this.opt.htmlLabels){this.htmlElements.push(elem);}_6a9=end;return false;},this);}else{if(this.opt.labelStyle=="columns"){_6a9=_6a8;var _6c3=[];_4.forEach(_6ab,function(_6c4,i){var end=_6a9+_6c4*2*Math.PI;if(i+1==_6ab.length){end=_6a8+2*Math.PI;}var _6c5=(_6a9+end)/2;_6c3.push({angle:_6c5,left:Math.cos(_6c5)<0,theme:_6b0[i],index:i,omit:end-_6a9<0.001});_6a9=end;});var _6c6=_6.gfx._base._getTextBox("a",{font:_6a6}).h;this._getProperLabelRadius(_6c3,_6c6,_6b2.r*1.1);_4.forEach(_6c3,function(_6c7,i){if(!_6c7.omit){var _6c8=_6b2.cx-_6b2.r*2,_6c9=_6b2.cx+_6b2.r*2,_6ca=_6.gfx._base._getTextBox(_6ac[i],{font:_6a6}).w,x=_6b2.cx+_6c7.labelR*Math.cos(_6c7.angle),y=_6b2.cy+_6c7.labelR*Math.sin(_6c7.angle),_6cb=(_6c7.left)?(_6c8+_6ca):(_6c9-_6ca),_6cc=(_6c7.left)?_6c8:_6cb;var _6cd=s.createPath().moveTo(_6b2.cx+_6b2.r*Math.cos(_6c7.angle),_6b2.cy+_6b2.r*Math.sin(_6c7.angle));if(Math.abs(_6c7.labelR*Math.cos(_6c7.angle))<_6b2.r*2-_6ca){_6cd.lineTo(x,y);}_6cd.lineTo(_6cb,y).setStroke(_6c7.theme.series.labelWiring);var elem=da.createText[this.opt.htmlLabels&&_6.gfx.renderer!="vml"?"html":"gfx"](this.chart,s,_6cc,y,"left",_6ac[i],_6c7.theme.series.font,_6c7.theme.series.fontColor);if(this.opt.htmlLabels){this.htmlElements.push(elem);}}},this);}}}var esi=0;this._eventSeries[this.run.name]=df.map(run,function(v){return v<=0?null:_6b3[esi++];});return this;},_getProperLabelRadius:function(_6ce,_6cf,_6d0){var _6d1={},_6d2={},_6d3=1,_6d4=1;if(_6ce.length==1){_6ce[0].labelR=_6d0;return;}for(var i=0;i<_6ce.length;i++){var _6d5=Math.abs(Math.sin(_6ce[i].angle));if(_6ce[i].left){if(_6d3>_6d5){_6d3=_6d5;_6d1=_6ce[i];}}else{if(_6d4>_6d5){_6d4=_6d5;_6d2=_6ce[i];}}}_6d1.labelR=_6d2.labelR=_6d0;this._caculateLabelR(_6d1,_6ce,_6cf);this._caculateLabelR(_6d2,_6ce,_6cf);},_caculateLabelR:function(_6d6,_6d7,_6d8){var i=_6d6.index,_6d9=_6d7.length,_6da=_6d6.labelR;while(!(_6d7[i%_6d9].left^_6d7[(i+1)%_6d9].left)){if(!_6d7[(i+1)%_6d9].omit){var _6db=(Math.sin(_6d7[i%_6d9].angle)*_6da+((_6d7[i%_6d9].left)?(-_6d8):_6d8))/Math.sin(_6d7[(i+1)%_6d9].angle);_6da=(_6db<_6d6.labelR)?_6d6.labelR:_6db;_6d7[(i+1)%_6d9].labelR=_6da;}i++;}i=_6d6.index,j=(i==0)?_6d9-1:i-1;while(!(_6d7[i].left^_6d7[j].left)){if(!_6d7[j].omit){var _6db=(Math.sin(_6d7[i].angle)*_6da+((_6d7[i].left)?_6d8:(-_6d8)))/Math.sin(_6d7[j].angle);_6da=(_6db<_6d6.labelR)?_6d6.labelR:_6db;_6d7[j].labelR=_6da;}i--;j--;i=(i<0)?i+_6d7.length:i;j=(j<0)?j+_6d7.length:j;}},_getLabel:function(_6dc){return dc.getLabel(_6dc,this.opt.fixed,this.opt.precision);}});})();}if(!_4._hasResource["dojox.charting.plot2d.Bubble"]){_4._hasResource["dojox.charting.plot2d.Bubble"]=true;_4.provide("dojox.charting.plot2d.Bubble");(function(){var df=_6.lang.functional,du=_6.lang.utils,dc=_6.charting.plot2d.common,_6dd=df.lambda("item.purgeGroup()");_4.declare("dojox.charting.plot2d.Bubble",_6.charting.plot2d.Base,{defaultParams:{hAxis:"x",vAxis:"y",animate:null},optionalParams:{stroke:{},outline:{},shadow:{},fill:{},font:"",fontColor:""},constructor:function(_6de,_6df){this.opt=_4.clone(this.defaultParams);du.updateWithObject(this.opt,_6df);du.updateWithPattern(this.opt,_6df,this.optionalParams);this.series=[];this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;this.animate=this.opt.animate;},render:function(dim,_6e0){if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_6e0);}this.resetEvents();this.dirty=this.isDirty();if(this.dirty){_4.forEach(this.series,_6dd);this._eventSeries={};this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_6e1=this.events();for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();if(!run.data.length){run.dirty=false;t.skip();continue;}if(typeof run.data[0]=="number"){console.warn("dojox.charting.plot2d.Bubble: the data in the following series cannot be rendered as a bubble chart; ",run);continue;}var _6e2=t.next("circle",[this.opt,run]),s=run.group,_6e3=_4.map(run.data,function(v,i){return v?{x:ht(v.x)+_6e0.l,y:dim.height-_6e0.b-vt(v.y),radius:this._vScaler.bounds.scale*(v.size/2)}:null;},this);var _6e4=null,_6e5=null,_6e6=null;if(_6e2.series.shadow){_6e6=_4.map(_6e3,function(item){if(item!==null){var _6e7=t.addMixin(_6e2,"circle",item,true),_6e8=_6e7.series.shadow;var _6e9=s.createCircle({cx:item.x+_6e8.dx,cy:item.y+_6e8.dy,r:item.radius}).setStroke(_6e8).setFill(_6e8.color);if(this.animate){this._animateBubble(_6e9,dim.height-_6e0.b,item.radius);}return _6e9;}return null;},this);if(_6e6.length){run.dyn.shadow=_6e6[_6e6.length-1].getStroke();}}if(_6e2.series.outline){_6e5=_4.map(_6e3,function(item){if(item!==null){var _6ea=t.addMixin(_6e2,"circle",item,true),_6eb=dc.makeStroke(_6ea.series.outline);_6eb.width=2*_6eb.width+_6e2.series.stroke.width;var _6ec=s.createCircle({cx:item.x,cy:item.y,r:item.radius}).setStroke(_6eb);if(this.animate){this._animateBubble(_6ec,dim.height-_6e0.b,item.radius);}return _6ec;}return null;},this);if(_6e5.length){run.dyn.outline=_6e5[_6e5.length-1].getStroke();}}_6e4=_4.map(_6e3,function(item){if(item!==null){var _6ed=t.addMixin(_6e2,"circle",item,true),rect={x:item.x-item.radius,y:item.y-item.radius,width:2*item.radius,height:2*item.radius};var _6ee=this._plotFill(_6ed.series.fill,dim,_6e0);_6ee=this._shapeFill(_6ee,rect);var _6ef=s.createCircle({cx:item.x,cy:item.y,r:item.radius}).setFill(_6ee).setStroke(_6ed.series.stroke);if(this.animate){this._animateBubble(_6ef,dim.height-_6e0.b,item.radius);}return _6ef;}return null;},this);if(_6e4.length){run.dyn.fill=_6e4[_6e4.length-1].getFill();run.dyn.stroke=_6e4[_6e4.length-1].getStroke();}if(_6e1){var _6f0=new Array(_6e4.length);_4.forEach(_6e4,function(s,i){if(s!==null){var o={element:"circle",index:i,run:run,shape:s,outline:_6e5&&_6e5[i]||null,shadow:_6e6&&_6e6[i]||null,x:run.data[i].x,y:run.data[i].y,r:run.data[i].size/2,cx:_6e3[i].x,cy:_6e3[i].y,cr:_6e3[i].radius};this._connectEvents(o);_6f0[i]=o;}},this);this._eventSeries[run.name]=_6f0;}else{delete this._eventSeries[run.name];}run.dirty=false;}this.dirty=false;return this;},_animateBubble:function(_6f1,_6f2,size){_6.gfx.fx.animateTransform(_4.delegate({shape:_6f1,duration:1200,transform:[{name:"translate",start:[0,_6f2],end:[0,0]},{name:"scale",start:[0,1/size],end:[1,1]},{name:"original"}]},this.animate)).play();}});})();}if(!_4._hasResource["dojox.charting.plot2d.Candlesticks"]){_4._hasResource["dojox.charting.plot2d.Candlesticks"]=true;_4.provide("dojox.charting.plot2d.Candlesticks");(function(){var df=_6.lang.functional,du=_6.lang.utils,dc=_6.charting.plot2d.common,_6f3=df.lambda("item.purgeGroup()");_4.declare("dojox.charting.plot2d.Candlesticks",_6.charting.plot2d.Base,{defaultParams:{hAxis:"x",vAxis:"y",gap:2,animate:null},optionalParams:{minBarSize:1,maxBarSize:1,stroke:{},outline:{},shadow:{},fill:{},font:"",fontColor:""},constructor:function(_6f4,_6f5){this.opt=_4.clone(this.defaultParams);du.updateWithObject(this.opt,_6f5);du.updateWithPattern(this.opt,_6f5,this.optionalParams);this.series=[];this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;this.animate=this.opt.animate;},collectStats:function(_6f6){var _6f7=_4.delegate(dc.defaultStats);for(var i=0;i<_6f6.length;i++){var run=_6f6[i];if(!run.data.length){continue;}var _6f8=_6f7.vmin,_6f9=_6f7.vmax;if(!("ymin" in run)||!("ymax" in run)){_4.forEach(run.data,function(val,idx){if(val!==null){var x=val.x||idx+1;_6f7.hmin=Math.min(_6f7.hmin,x);_6f7.hmax=Math.max(_6f7.hmax,x);_6f7.vmin=Math.min(_6f7.vmin,val.open,val.close,val.high,val.low);_6f7.vmax=Math.max(_6f7.vmax,val.open,val.close,val.high,val.low);}});}if("ymin" in run){_6f7.vmin=Math.min(_6f8,run.ymin);}if("ymax" in run){_6f7.vmax=Math.max(_6f9,run.ymax);}}return _6f7;},getSeriesStats:function(){var _6fa=this.collectStats(this.series);_6fa.hmin-=0.5;_6fa.hmax+=0.5;return _6fa;},render:function(dim,_6fb){if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_6fb);}this.resetEvents();this.dirty=this.isDirty();if(this.dirty){_4.forEach(this.series,_6f3);this._eventSeries={};this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,f,gap,_6fc,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_6fd=Math.max(0,this._vScaler.bounds.lower),_6fe=vt(_6fd),_6ff=this.events();f=dc.calculateBarSize(this._hScaler.bounds.scale,this.opt);gap=f.gap;_6fc=f.size;for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();var _700=t.next("candlestick",[this.opt,run]),s=run.group,_701=new Array(run.data.length);for(var j=0;j<run.data.length;++j){var v=run.data[j];if(v!==null){var _702=t.addMixin(_700,"candlestick",v,true);var x=ht(v.x||(j+0.5))+_6fb.l+gap,y=dim.height-_6fb.b,open=vt(v.open),_703=vt(v.close),high=vt(v.high),low=vt(v.low);if("mid" in v){var mid=vt(v.mid);}if(low>high){var tmp=high;high=low;low=tmp;}if(_6fc>=1){var _704=open>_703;var line={x1:_6fc/2,x2:_6fc/2,y1:y-high,y2:y-low},rect={x:0,y:y-Math.max(open,_703),width:_6fc,height:Math.max(_704?open-_703:_703-open,1)};shape=s.createGroup();shape.setTransform({dx:x,dy:0});var _705=shape.createGroup();_705.createLine(line).setStroke(_702.series.stroke);_705.createRect(rect).setStroke(_702.series.stroke).setFill(_704?_702.series.fill:"white");if("mid" in v){_705.createLine({x1:(_702.series.stroke.width||1),x2:_6fc-(_702.series.stroke.width||1),y1:y-mid,y2:y-mid}).setStroke(_704?"white":_702.series.stroke);}run.dyn.fill=_702.series.fill;run.dyn.stroke=_702.series.stroke;if(_6ff){var o={element:"candlestick",index:j,run:run,shape:_705,x:x,y:y-Math.max(open,_703),cx:_6fc/2,cy:(y-Math.max(open,_703))+(Math.max(_704?open-_703:_703-open,1)/2),width:_6fc,height:Math.max(_704?open-_703:_703-open,1),data:v};this._connectEvents(o);_701[j]=o;}}if(this.animate){this._animateCandlesticks(shape,y-low,high-low);}}}this._eventSeries[run.name]=_701;run.dirty=false;}this.dirty=false;return this;},_animateCandlesticks:function(_706,_707,_708){_6.gfx.fx.animateTransform(_4.delegate({shape:_706,duration:1200,transform:[{name:"translate",start:[0,_707-(_707/_708)],end:[0,0]},{name:"scale",start:[1,1/_708],end:[1,1]},{name:"original"}]},this.animate)).play();}});})();}if(!_4._hasResource["dojox.charting.plot2d.OHLC"]){_4._hasResource["dojox.charting.plot2d.OHLC"]=true;_4.provide("dojox.charting.plot2d.OHLC");(function(){var df=_6.lang.functional,du=_6.lang.utils,dc=_6.charting.plot2d.common,_709=df.lambda("item.purgeGroup()");_4.declare("dojox.charting.plot2d.OHLC",_6.charting.plot2d.Base,{defaultParams:{hAxis:"x",vAxis:"y",gap:2,animate:null},optionalParams:{minBarSize:1,maxBarSize:1,stroke:{},outline:{},shadow:{},fill:{},font:"",fontColor:""},constructor:function(_70a,_70b){this.opt=_4.clone(this.defaultParams);du.updateWithObject(this.opt,_70b);du.updateWithPattern(this.opt,_70b,this.optionalParams);this.series=[];this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;this.animate=this.opt.animate;},collectStats:function(_70c){var _70d=_4.delegate(dc.defaultStats);for(var i=0;i<_70c.length;i++){var run=_70c[i];if(!run.data.length){continue;}var _70e=_70d.vmin,_70f=_70d.vmax;if(!("ymin" in run)||!("ymax" in run)){_4.forEach(run.data,function(val,idx){if(val!==null){var x=val.x||idx+1;_70d.hmin=Math.min(_70d.hmin,x);_70d.hmax=Math.max(_70d.hmax,x);_70d.vmin=Math.min(_70d.vmin,val.open,val.close,val.high,val.low);_70d.vmax=Math.max(_70d.vmax,val.open,val.close,val.high,val.low);}});}if("ymin" in run){_70d.vmin=Math.min(_70e,run.ymin);}if("ymax" in run){_70d.vmax=Math.max(_70f,run.ymax);}}return _70d;},getSeriesStats:function(){var _710=this.collectStats(this.series);_710.hmin-=0.5;_710.hmax+=0.5;return _710;},render:function(dim,_711){if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_711);}this.resetEvents();this.dirty=this.isDirty();if(this.dirty){_4.forEach(this.series,_709);this._eventSeries={};this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,f,gap,_712,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_713=Math.max(0,this._vScaler.bounds.lower),_714=vt(_713),_715=this.events();f=dc.calculateBarSize(this._hScaler.bounds.scale,this.opt);gap=f.gap;_712=f.size;for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();var _716=t.next("candlestick",[this.opt,run]),s=run.group,_717=new Array(run.data.length);for(var j=0;j<run.data.length;++j){var v=run.data[j];if(v!==null){var _718=t.addMixin(_716,"candlestick",v,true);var x=ht(v.x||(j+0.5))+_711.l+gap,y=dim.height-_711.b,open=vt(v.open),_719=vt(v.close),high=vt(v.high),low=vt(v.low);if(low>high){var tmp=high;high=low;low=tmp;}if(_712>=1){var hl={x1:_712/2,x2:_712/2,y1:y-high,y2:y-low},op={x1:0,x2:((_712/2)+((_718.series.stroke.width||1)/2)),y1:y-open,y2:y-open},cl={x1:((_712/2)-((_718.series.stroke.width||1)/2)),x2:_712,y1:y-_719,y2:y-_719};shape=s.createGroup();shape.setTransform({dx:x,dy:0});var _71a=shape.createGroup();_71a.createLine(hl).setStroke(_718.series.stroke);_71a.createLine(op).setStroke(_718.series.stroke);_71a.createLine(cl).setStroke(_718.series.stroke);run.dyn.stroke=_718.series.stroke;if(_715){var o={element:"candlestick",index:j,run:run,shape:_71a,x:x,y:y-Math.max(open,_719),cx:_712/2,cy:(y-Math.max(open,_719))+(Math.max(open>_719?open-_719:_719-open,1)/2),width:_712,height:Math.max(open>_719?open-_719:_719-open,1),data:v};this._connectEvents(o);_717[j]=o;}}if(this.animate){this._animateOHLC(shape,y-low,high-low);}}}this._eventSeries[run.name]=_717;run.dirty=false;}this.dirty=false;return this;},_animateOHLC:function(_71b,_71c,_71d){_6.gfx.fx.animateTransform(_4.delegate({shape:_71b,duration:1200,transform:[{name:"translate",start:[0,_71c-(_71c/_71d)],end:[0,0]},{name:"scale",start:[1,1/_71d],end:[1,1]},{name:"original"}]},this.animate)).play();}});})();}if(!_4._hasResource["dojo.fx.easing"]){_4._hasResource["dojo.fx.easing"]=true;_4.provide("dojo.fx.easing");_4.getObject("fx.easing",true,_4);_4.fx.easing={linear:function(n){return n;},quadIn:function(n){return Math.pow(n,2);},quadOut:function(n){return n*(n-2)*-1;},quadInOut:function(n){n=n*2;if(n<1){return Math.pow(n,2)/2;}return -1*((--n)*(n-2)-1)/2;},cubicIn:function(n){return Math.pow(n,3);},cubicOut:function(n){return Math.pow(n-1,3)+1;},cubicInOut:function(n){n=n*2;if(n<1){return Math.pow(n,3)/2;}n-=2;return (Math.pow(n,3)+2)/2;},quartIn:function(n){return Math.pow(n,4);},quartOut:function(n){return -1*(Math.pow(n-1,4)-1);},quartInOut:function(n){n=n*2;if(n<1){return Math.pow(n,4)/2;}n-=2;return -1/2*(Math.pow(n,4)-2);},quintIn:function(n){return Math.pow(n,5);},quintOut:function(n){return Math.pow(n-1,5)+1;},quintInOut:function(n){n=n*2;if(n<1){return Math.pow(n,5)/2;}n-=2;return (Math.pow(n,5)+2)/2;},sineIn:function(n){return -1*Math.cos(n*(Math.PI/2))+1;},sineOut:function(n){return Math.sin(n*(Math.PI/2));},sineInOut:function(n){return -1*(Math.cos(Math.PI*n)-1)/2;},expoIn:function(n){return (n==0)?0:Math.pow(2,10*(n-1));},expoOut:function(n){return (n==1)?1:(-1*Math.pow(2,-10*n)+1);},expoInOut:function(n){if(n==0){return 0;}if(n==1){return 1;}n=n*2;if(n<1){return Math.pow(2,10*(n-1))/2;}--n;return (-1*Math.pow(2,-10*n)+2)/2;},circIn:function(n){return -1*(Math.sqrt(1-Math.pow(n,2))-1);},circOut:function(n){n=n-1;return Math.sqrt(1-Math.pow(n,2));},circInOut:function(n){n=n*2;if(n<1){return -1/2*(Math.sqrt(1-Math.pow(n,2))-1);}n-=2;return 1/2*(Math.sqrt(1-Math.pow(n,2))+1);},backIn:function(n){var s=1.70158;return Math.pow(n,2)*((s+1)*n-s);},backOut:function(n){n=n-1;var s=1.70158;return Math.pow(n,2)*((s+1)*n+s)+1;},backInOut:function(n){var s=1.70158*1.525;n=n*2;if(n<1){return (Math.pow(n,2)*((s+1)*n-s))/2;}n-=2;return (Math.pow(n,2)*((s+1)*n+s)+2)/2;},elasticIn:function(n){if(n==0||n==1){return n;}var p=0.3;var s=p/4;n=n-1;return -1*Math.pow(2,10*n)*Math.sin((n-s)*(2*Math.PI)/p);},elasticOut:function(n){if(n==0||n==1){return n;}var p=0.3;var s=p/4;return Math.pow(2,-10*n)*Math.sin((n-s)*(2*Math.PI)/p)+1;},elasticInOut:function(n){if(n==0){return 0;}n=n*2;if(n==2){return 1;}var p=0.3*1.5;var s=p/4;if(n<1){n-=1;return -0.5*(Math.pow(2,10*n)*Math.sin((n-s)*(2*Math.PI)/p));}n-=1;return 0.5*(Math.pow(2,-10*n)*Math.sin((n-s)*(2*Math.PI)/p))+1;},bounceIn:function(n){return (1-_4.fx.easing.bounceOut(1-n));},bounceOut:function(n){var s=7.5625;var p=2.75;var l;if(n<(1/p)){l=s*Math.pow(n,2);}else{if(n<(2/p)){n-=(1.5/p);l=s*Math.pow(n,2)+0.75;}else{if(n<(2.5/p)){n-=(2.25/p);l=s*Math.pow(n,2)+0.9375;}else{n-=(2.625/p);l=s*Math.pow(n,2)+0.984375;}}}return l;},bounceInOut:function(n){if(n<0.5){return _4.fx.easing.bounceIn(n*2)/2;}return (_4.fx.easing.bounceOut(n*2-1)/2)+0.5;}};}if(!_4._hasResource["dojox.charting.plot2d.Spider"]){_4._hasResource["dojox.charting.plot2d.Spider"]=true;_4.provide("dojox.charting.plot2d.Spider");_4.experimental("dojox.charting.plot2d.Spider");(function(){var df=_6.lang.functional,du=_6.lang.utils,dc=_6.charting.plot2d.common,da=_6.charting.axis2d.common,g=_6.gfx,m=g.matrix,_71e=0.2;_4.declare("dojox.charting.plot2d.Spider",[_6.charting.Element,_6.charting.plot2d._PlotEvents],{defaultParams:{labels:true,ticks:false,fixed:true,precision:1,labelOffset:-10,labelStyle:"default",htmlLabels:true,startAngle:-90,divisions:3,axisColor:"",axisWidth:0,spiderColor:"",spiderWidth:0,seriesWidth:0,seriesFillAlpha:0.2,spiderOrigin:0.16,markerSize:3,spiderType:"polygon",animationType:_4.fx.easing.backOut,axisTickFont:"",axisTickFontColor:"",axisFont:"",axisFontColor:""},optionalParams:{radius:0,font:"",fontColor:""},constructor:function(_71f,_720){this.opt=_4.clone(this.defaultParams);du.updateWithObject(this.opt,_720);du.updateWithPattern(this.opt,_720,this.optionalParams);this.series=[];this.dyn=[];this.datas={};this.labelKey=[];this.oldSeriePoints={};this.animations={};},clear:function(){this.dirty=true;this.dyn=[];this.series=[];this.datas={};this.labelKey=[];this.oldSeriePoints={};this.animations={};return this;},setAxis:function(axis){return this;},addSeries:function(run){var _721=false;this.series.push(run);for(var key in run.data){var val=run.data[key],data=this.datas[key];if(data){data.vlist.push(val);data.min=Math.min(data.min,val);data.max=Math.max(data.max,val);}else{this.datas[key]={min:val,max:val,vlist:[val]};}}if(this.labelKey.length<=0){for(var key in run.data){this.labelKey.push(key);}}return this;},getSeriesStats:function(){return _6.charting.plot2d.common.collectSimpleStats(this.series);},calculateAxes:function(dim){this.initializeScalers(dim,this.getSeriesStats());return this;},getRequiredColors:function(){return this.series.length;},initializeScalers:function(dim,_722){if(this._hAxis){if(!this._hAxis.initialized()){this._hAxis.calculate(_722.hmin,_722.hmax,dim.width);}this._hScaler=this._hAxis.getScaler();}else{this._hScaler=_6.charting.scaler.primitive.buildScaler(_722.hmin,_722.hmax,dim.width);}if(this._vAxis){if(!this._vAxis.initialized()){this._vAxis.calculate(_722.vmin,_722.vmax,dim.height);}this._vScaler=this._vAxis.getScaler();}else{this._vScaler=_6.charting.scaler.primitive.buildScaler(_722.vmin,_722.vmax,dim.height);}return this;},render:function(dim,_723){if(!this.dirty){return this;}this.dirty=false;this.cleanGroup();var s=this.group,t=this.chart.theme;this.resetEvents();if(!this.series||!this.series.length){return this;}var o=this.opt,ta=t.axis,rx=(dim.width-_723.l-_723.r)/2,ry=(dim.height-_723.t-_723.b)/2,r=Math.min(rx,ry),_724=o.font||(ta.majorTick&&ta.majorTick.font)||(ta.tick&&ta.tick.font)||"normal normal normal 7pt Tahoma",_725=o.axisFont||(ta.tick&&ta.tick.titleFont)||"normal normal normal 11pt Tahoma",_726=o.axisTickFontColor||(ta.majorTick&&ta.majorTick.fontColor)||(ta.tick&&ta.tick.fontColor)||"silver",_727=o.axisFontColor||(ta.tick&&ta.tick.titleFontColor)||"black",_728=o.axisColor||(ta.tick&&ta.tick.axisColor)||"silver",_729=o.spiderColor||(ta.tick&&ta.tick.spiderColor)||"silver",_72a=o.axisWidth||(ta.stroke&&ta.stroke.width)||2,_72b=o.spiderWidth||(ta.stroke&&ta.stroke.width)||2,_72c=o.seriesWidth||(ta.stroke&&ta.stroke.width)||2,_72d=g.normalizedLength(g.splitFontString(_725).size),_72e=m._degToRad(o.startAngle),_72f=_72e,step,_730,_731,_732,_733,_734,_735,_736,_737,_738,_739,ro=o.spiderOrigin,dv=o.divisions>=3?o.divisions:3,ms=o.markerSize,spt=o.spiderType,at=o.animationType,_73a=o.labelOffset<-10?o.labelOffset:-10,_73b=0.2;if(o.labels){_732=_4.map(this.series,function(s){return s.name;},this);_733=df.foldl1(df.map(_732,function(_73c,i){var font=t.series.font;return _6.gfx._base._getTextBox(_73c,{font:font}).w;},this),"Math.max(a, b)")/2;r=Math.min(rx-2*_733,ry-_72d)+_73a;_734=r-_73a;}if("radius" in o){r=o.radius;_734=r-_73a;}r/=(1+_73b);var _73d={cx:_723.l+rx,cy:_723.t+ry,r:r};for(var i=this.series.length-1;i>=0;i--){var _73e=this.series[i];if(!this.dirty&&!_73e.dirty){t.skip();continue;}_73e.cleanGroup();var run=_73e.data;if(run!==null){var len=this._getObjectLength(run);if(!_735||_735.length<=0){_735=[],_736=[],_739=[];this._buildPoints(_735,len,_73d,r,_72f,true);this._buildPoints(_736,len,_73d,r*ro,_72f,true);this._buildPoints(_739,len,_73d,_734,_72f);if(dv>2){_737=[],_738=[];for(var j=0;j<dv-2;j++){_737[j]=[];this._buildPoints(_737[j],len,_73d,r*(ro+(1-ro)*(j+1)/(dv-1)),_72f,true);_738[j]=r*(ro+(1-ro)*(j+1)/(dv-1));}}}}}var _73f=s.createGroup(),_740={color:_728,width:_72a},_741={color:_729,width:_72b};for(var j=_735.length-1;j>=0;--j){var _742=_735[j],st={x:_742.x+(_742.x-_73d.cx)*_73b,y:_742.y+(_742.y-_73d.cy)*_73b},nd={x:_742.x+(_742.x-_73d.cx)*_73b/2,y:_742.y+(_742.y-_73d.cy)*_73b/2};_73f.createLine({x1:_73d.cx,y1:_73d.cy,x2:st.x,y2:st.y}).setStroke(_740);this._drawArrow(_73f,st,nd,_740);}var _743=s.createGroup();for(var j=_739.length-1;j>=0;--j){var _742=_739[j],_744=_6.gfx._base._getTextBox(this.labelKey[j],{font:_725}).w||0,_745=this.opt.htmlLabels&&_6.gfx.renderer!="vml"?"html":"gfx";elem=da.createText[_745](this.chart,_743,(!_4._isBodyLtr()&&_745=="html")?(_742.x+_744-dim.width):_742.x,_742.y,"middle",this.labelKey[j],_725,_727);if(this.opt.htmlLabels){this.htmlElements.push(elem);}}var _746=s.createGroup();if(spt=="polygon"){_746.createPolyline(_735).setStroke(_741);_746.createPolyline(_736).setStroke(_741);if(_737.length>0){for(var j=_737.length-1;j>=0;--j){_746.createPolyline(_737[j]).setStroke(_741);}}}else{var _747=this._getObjectLength(this.datas);_746.createCircle({cx:_73d.cx,cy:_73d.cy,r:r}).setStroke(_741);_746.createCircle({cx:_73d.cx,cy:_73d.cy,r:r*ro}).setStroke(_741);if(_738.length>0){for(var j=_738.length-1;j>=0;--j){_746.createCircle({cx:_73d.cx,cy:_73d.cy,r:_738[j]}).setStroke(_741);}}}var _748=s.createGroup(),len=this._getObjectLength(this.datas),k=0;for(var key in this.datas){var data=this.datas[key],min=data.min,max=data.max,_749=max-min,end=_72f+2*Math.PI*k/len;for(var i=0;i<dv;i++){var text=min+_749*i/(dv-1),_742=this._getCoordinate(_73d,r*(ro+(1-ro)*i/(dv-1)),end);text=this._getLabel(text);var _744=_6.gfx._base._getTextBox(text,{font:_724}).w||0,_745=this.opt.htmlLabels&&_6.gfx.renderer!="vml"?"html":"gfx";if(this.opt.htmlLabels){this.htmlElements.push(da.createText[_745](this.chart,_748,(!_4._isBodyLtr()&&_745=="html")?(_742.x+_744-dim.width):_742.x,_742.y,"start",text,_724,_726));}}k++;}this.chart.seriesShapes={};var _74a=[];for(var i=this.series.length-1;i>=0;i--){var _73e=this.series[i],run=_73e.data;if(run!==null){var _74b=[],k=0,_74c=[];for(var key in run){var data=this.datas[key],min=data.min,max=data.max,_749=max-min,_74d=run[key],end=_72f+2*Math.PI*k/len,_742=this._getCoordinate(_73d,r*(ro+(1-ro)*(_74d-min)/_749),end);_74b.push(_742);_74c.push({sname:_73e.name,key:key,data:_74d});k++;}_74b[_74b.length]=_74b[0];_74c[_74c.length]=_74c[0];var _74e=this._getBoundary(_74b),_74f=t.next("spider",[o,_73e]),ts=_73e.group,f=g.normalizeColor(_74f.series.fill),sk={color:_74f.series.fill,width:_72c};f.a=o.seriesFillAlpha;_73e.dyn={fill:f,stroke:sk};var osps=this.oldSeriePoints[_73e.name];var cs=this._createSeriesEntry(ts,(osps||_736),_74b,f,sk,r,ro,ms,at);this.chart.seriesShapes[_73e.name]=cs;this.oldSeriePoints[_73e.name]=_74b;var po={element:"spider_poly",index:i,id:"spider_poly_"+_73e.name,run:_73e,plot:this,shape:cs.poly,parent:ts,brect:_74e,cx:_73d.cx,cy:_73d.cy,cr:r,f:f,s:s};this._connectEvents(po);var so={element:"spider_plot",index:i,id:"spider_plot_"+_73e.name,run:_73e,plot:this,shape:_73e.group};this._connectEvents(so);_4.forEach(cs.circles,function(c,i){var _750=c.getShape(),co={element:"spider_circle",index:i,id:"spider_circle_"+_73e.name+i,run:_73e,plot:this,shape:c,parent:ts,tdata:_74c[i],cx:_74b[i].x,cy:_74b[i].y,f:f,s:s};this._connectEvents(co);},this);}}return this;},_createSeriesEntry:function(ts,osps,sps,f,sk,r,ro,ms,at){var _751=ts.createPolyline(osps).setFill(f).setStroke(sk),_752=[];for(var j=0;j<osps.length;j++){var _753=osps[j],cr=ms;var _754=ts.createCircle({cx:_753.x,cy:_753.y,r:cr}).setFill(f).setStroke(sk);_752.push(_754);}var _755=_4.map(sps,function(np,j){var sp=osps[j],anim=new _4._Animation({duration:1000,easing:at,curve:[sp.y,np.y]});var spl=_751,sc=_752[j];_4.connect(anim,"onAnimate",function(y){var _756=spl.getShape();_756.points[j].y=y;spl.setShape(_756);var _757=sc.getShape();_757.cy=y;sc.setShape(_757);});return anim;});var _758=_4.map(sps,function(np,j){var sp=osps[j],anim=new _4._Animation({duration:1000,easing:at,curve:[sp.x,np.x]});var spl=_751,sc=_752[j];_4.connect(anim,"onAnimate",function(x){var _759=spl.getShape();_759.points[j].x=x;spl.setShape(_759);var _75a=sc.getShape();_75a.cx=x;sc.setShape(_75a);});return anim;});var _75b=_4.fx.combine(_755.concat(_758));_75b.play();return {group:ts,poly:_751,circles:_752};},plotEvent:function(o){var _75c=o.id?o.id:"default",a;if(_75c in this.animations){a=this.animations[_75c];a.anim&&a.anim.stop(true);}else{a=this.animations[_75c]={};}if(o.element=="spider_poly"){if(!a.color){var _75d=o.shape.getFill();if(!_75d||!(_75d instanceof _4.Color)){return;}a.color={start:_75d,end:_75e(_75d)};}var _75f=a.color.start,end=a.color.end;if(o.type=="onmouseout"){var t=_75f;_75f=end;end=t;}a.anim=_6.gfx.fx.animateFill({shape:o.shape,duration:800,easing:_4.fx.easing.backOut,color:{start:_75f,end:end}});a.anim.play();}else{if(o.element=="spider_circle"){var init,_760,_761=1.5;if(o.type=="onmouseover"){init=_6.gfx.matrix.identity;_760=_761;var _762={type:"rect"};_762.x=o.cx;_762.y=o.cy;_762.width=_762.height=1;var lt=_4.coords(this.chart.node,true);_762.x+=lt.x;_762.y+=lt.y;_762.x=Math.round(_762.x);_762.y=Math.round(_762.y);_762.width=Math.ceil(_762.width);_762.height=Math.ceil(_762.height);this.aroundRect=_762;var _763=["after","before"];if(_5&&_5.Tooltip){_5.showTooltip(o.tdata.sname+"<br/>"+o.tdata.key+"<br/>"+o.tdata.data,this.aroundRect,_763);}}else{init=_6.gfx.matrix.scaleAt(_761,o.cx,o.cy);_760=1/_761;if(_5&&_5.Tooltip){this.aroundRect&&_5.hideTooltip(this.aroundRect);}}var cs=o.shape.getShape(),init=m.scaleAt(_761,cs.cx,cs.cy),_764={shape:o.shape,duration:200,easing:_4.fx.easing.backOut,transform:[{name:"scaleAt",start:[1,cs.cx,cs.cy],end:[_760,cs.cx,cs.cy]},init]};a.anim=_6.gfx.fx.animateTransform(_764);a.anim.play();}else{if(o.element=="spider_plot"){if(o.type=="onmouseover"&&!_4.isIE){o.shape.moveToFront();}}}}},_getBoundary:function(_765){var xmax=_765[0].x,xmin=_765[0].x,ymax=_765[0].y,ymin=_765[0].y;for(var i=0;i<_765.length;i++){var _766=_765[i];xmax=Math.max(_766.x,xmax);ymax=Math.max(_766.y,ymax);xmin=Math.min(_766.x,xmin);ymin=Math.min(_766.y,ymin);}return {x:xmin,y:ymin,width:xmax-xmin,height:ymax-ymin};},_drawArrow:function(s,_767,end,_768){var len=Math.sqrt(Math.pow(end.x-_767.x,2)+Math.pow(end.y-_767.y,2)),sin=(end.y-_767.y)/len,cos=(end.x-_767.x)/len,_769={x:end.x+(len/3)*(-sin),y:end.y+(len/3)*cos},_76a={x:end.x+(len/3)*sin,y:end.y+(len/3)*(-cos)};s.createPolyline([_767,_769,_76a]).setFill(_768.color).setStroke(_768);},_buildPoints:function(_76b,_76c,_76d,_76e,_76f,_770){for(var i=0;i<_76c;i++){var end=_76f+2*Math.PI*i/_76c;_76b.push(this._getCoordinate(_76d,_76e,end));}if(_770){_76b.push(this._getCoordinate(_76d,_76e,_76f+2*Math.PI));}},_getCoordinate:function(_771,_772,_773){return {x:_771.cx+_772*Math.cos(_773),y:_771.cy+_772*Math.sin(_773)};},_getObjectLength:function(obj){var _774=0;if(_4.isObject(obj)){for(var key in obj){_774++;}}return _774;},_getLabel:function(_775){return dc.getLabel(_775,this.opt.fixed,this.opt.precision);}});function _75e(_776){var a=new _6.color.Color(_776),x=a.toHsl();if(x.s==0){x.l=x.l<50?100:0;}else{x.s=100;if(x.l<50){x.l=75;}else{if(x.l>75){x.l=50;}else{x.l=x.l-50>75-x.l?50:75;}}}var _776=_6.color.fromHsl(x);_776.a=0.7;return _776;};})();}if(!_4._hasResource["dojox.lang.functional.fold"]){_4._hasResource["dojox.lang.functional.fold"]=true;_4.provide("dojox.lang.functional.fold");(function(){var d=_4,df=_6.lang.functional,_777={};d.mixin(df,{foldl:function(a,f,z,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);var i,n;if(d.isArray(a)){for(i=0,n=a.length;i<n;z=f.call(o,z,a[i],i,a),++i){}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){for(i=0;a.hasNext();z=f.call(o,z,a.next(),i++,a)){}}else{for(i in a){if(!(i in _777)){z=f.call(o,z,a[i],i,a);}}}}return z;},foldl1:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);var z,i,n;if(d.isArray(a)){z=a[0];for(i=1,n=a.length;i<n;z=f.call(o,z,a[i],i,a),++i){}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){if(a.hasNext()){z=a.next();for(i=1;a.hasNext();z=f.call(o,z,a.next(),i++,a)){}}}else{var _778=true;for(i in a){if(!(i in _777)){if(_778){z=a[i];_778=false;}else{z=f.call(o,z,a[i],i,a);}}}}}return z;},foldr:function(a,f,z,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);for(var i=a.length;i>0;--i,z=f.call(o,z,a[i],i,a)){}return z;},foldr1:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);var n=a.length,z=a[n-1],i=n-1;for(;i>0;--i,z=f.call(o,z,a[i],i,a)){}return z;},reduce:function(a,f,z){return arguments.length<3?df.foldl1(a,f):df.foldl(a,f,z);},reduceRight:function(a,f,z){return arguments.length<3?df.foldr1(a,f):df.foldr(a,f,z);},unfold:function(pr,f,g,z,o){o=o||d.global;f=df.lambda(f);g=df.lambda(g);pr=df.lambda(pr);var t=[];for(;!pr.call(o,z);t.push(f.call(o,z)),z=g.call(o,z)){}return t;}});})();}if(!_4._hasResource["dojox.color._base"]){_4._hasResource["dojox.color._base"]=true;_4.provide("dojox.color._base");_6.color.Color=_4.Color;_6.color.blend=_4.blendColors;_6.color.fromRgb=_4.colorFromRgb;_6.color.fromHex=_4.colorFromHex;_6.color.fromArray=_4.colorFromArray;_6.color.fromString=_4.colorFromString;_6.color.greyscale=_4.colors.makeGrey;_4.mixin(_6.color,{fromCmy:function(cyan,_779,_77a){if(_4.isArray(cyan)){_779=cyan[1],_77a=cyan[2],cyan=cyan[0];}else{if(_4.isObject(cyan)){_779=cyan.m,_77a=cyan.y,cyan=cyan.c;}}cyan/=100,_779/=100,_77a/=100;var r=1-cyan,g=1-_779,b=1-_77a;return new _6.color.Color({r:Math.round(r*255),g:Math.round(g*255),b:Math.round(b*255)});},fromCmyk:function(cyan,_77b,_77c,_77d){if(_4.isArray(cyan)){_77b=cyan[1],_77c=cyan[2],_77d=cyan[3],cyan=cyan[0];}else{if(_4.isObject(cyan)){_77b=cyan.m,_77c=cyan.y,_77d=cyan.b,cyan=cyan.c;}}cyan/=100,_77b/=100,_77c/=100,_77d/=100;var r,g,b;r=1-Math.min(1,cyan*(1-_77d)+_77d);g=1-Math.min(1,_77b*(1-_77d)+_77d);b=1-Math.min(1,_77c*(1-_77d)+_77d);return new _6.color.Color({r:Math.round(r*255),g:Math.round(g*255),b:Math.round(b*255)});},fromHsl:function(hue,_77e,_77f){if(_4.isArray(hue)){_77e=hue[1],_77f=hue[2],hue=hue[0];}else{if(_4.isObject(hue)){_77e=hue.s,_77f=hue.l,hue=hue.h;}}_77e/=100;_77f/=100;while(hue<0){hue+=360;}while(hue>=360){hue-=360;}var r,g,b;if(hue<120){r=(120-hue)/60,g=hue/60,b=0;}else{if(hue<240){r=0,g=(240-hue)/60,b=(hue-120)/60;}else{r=(hue-240)/60,g=0,b=(360-hue)/60;}}r=2*_77e*Math.min(r,1)+(1-_77e);g=2*_77e*Math.min(g,1)+(1-_77e);b=2*_77e*Math.min(b,1)+(1-_77e);if(_77f<0.5){r*=_77f,g*=_77f,b*=_77f;}else{r=(1-_77f)*r+2*_77f-1;g=(1-_77f)*g+2*_77f-1;b=(1-_77f)*b+2*_77f-1;}return new _6.color.Color({r:Math.round(r*255),g:Math.round(g*255),b:Math.round(b*255)});},fromHsv:function(hue,_780,_781){if(_4.isArray(hue)){_780=hue[1],_781=hue[2],hue=hue[0];}else{if(_4.isObject(hue)){_780=hue.s,_781=hue.v,hue=hue.h;}}if(hue==360){hue=0;}_780/=100;_781/=100;var r,g,b;if(_780==0){r=_781,b=_781,g=_781;}else{var _782=hue/60,i=Math.floor(_782),f=_782-i;var p=_781*(1-_780);var q=_781*(1-(_780*f));var t=_781*(1-(_780*(1-f)));switch(i){case 0:r=_781,g=t,b=p;break;case 1:r=q,g=_781,b=p;break;case 2:r=p,g=_781,b=t;break;case 3:r=p,g=q,b=_781;break;case 4:r=t,g=p,b=_781;break;case 5:r=_781,g=p,b=q;break;}}return new _6.color.Color({r:Math.round(r*255),g:Math.round(g*255),b:Math.round(b*255)});}});_4.extend(_6.color.Color,{toCmy:function(){var cyan=1-(this.r/255),_783=1-(this.g/255),_784=1-(this.b/255);return {c:Math.round(cyan*100),m:Math.round(_783*100),y:Math.round(_784*100)};},toCmyk:function(){var cyan,_785,_786,_787;var r=this.r/255,g=this.g/255,b=this.b/255;_787=Math.min(1-r,1-g,1-b);cyan=(1-r-_787)/(1-_787);_785=(1-g-_787)/(1-_787);_786=(1-b-_787)/(1-_787);return {c:Math.round(cyan*100),m:Math.round(_785*100),y:Math.round(_786*100),b:Math.round(_787*100)};},toHsl:function(){var r=this.r/255,g=this.g/255,b=this.b/255;var min=Math.min(r,b,g),max=Math.max(r,g,b);var _788=max-min;var h=0,s=0,l=(min+max)/2;if(l>0&&l<1){s=_788/((l<0.5)?(2*l):(2-2*l));}if(_788>0){if(max==r&&max!=g){h+=(g-b)/_788;}if(max==g&&max!=b){h+=(2+(b-r)/_788);}if(max==b&&max!=r){h+=(4+(r-g)/_788);}h*=60;}return {h:h,s:Math.round(s*100),l:Math.round(l*100)};},toHsv:function(){var r=this.r/255,g=this.g/255,b=this.b/255;var min=Math.min(r,b,g),max=Math.max(r,g,b);var _789=max-min;var h=null,s=(max==0)?0:(_789/max);if(s==0){h=0;}else{if(r==max){h=60*(g-b)/_789;}else{if(g==max){h=120+60*(b-r)/_789;}else{h=240+60*(r-g)/_789;}}if(h<0){h+=360;}}return {h:h,s:Math.round(s*100),v:Math.round(max*100)};}});}if(!_4._hasResource["dojox.color"]){_4._hasResource["dojox.color"]=true;_4.provide("dojox.color");}if(!_4._hasResource["dojox.color.Palette"]){_4._hasResource["dojox.color.Palette"]=true;_4.provide("dojox.color.Palette");(function(){var dxc=_6.color;dxc.Palette=function(base){this.colors=[];if(base instanceof _6.color.Palette){this.colors=base.colors.slice(0);}else{if(base instanceof _6.color.Color){this.colors=[null,null,base,null,null];}else{if(_4.isArray(base)){this.colors=_4.map(base.slice(0),function(item){if(_4.isString(item)){return new _6.color.Color(item);}return item;});}else{if(_4.isString(base)){this.colors=[null,null,new _6.color.Color(base),null,null];}}}}};function _78a(p,_78b,val){var ret=new _6.color.Palette();ret.colors=[];_4.forEach(p.colors,function(item){var r=(_78b=="dr")?item.r+val:item.r,g=(_78b=="dg")?item.g+val:item.g,b=(_78b=="db")?item.b+val:item.b,a=(_78b=="da")?item.a+val:item.a;ret.colors.push(new _6.color.Color({r:Math.min(255,Math.max(0,r)),g:Math.min(255,Math.max(0,g)),b:Math.min(255,Math.max(0,b)),a:Math.min(1,Math.max(0,a))}));});return ret;};function tCMY(p,_78c,val){var ret=new _6.color.Palette();ret.colors=[];_4.forEach(p.colors,function(item){var o=item.toCmy(),c=(_78c=="dc")?o.c+val:o.c,m=(_78c=="dm")?o.m+val:o.m,y=(_78c=="dy")?o.y+val:o.y;ret.colors.push(_6.color.fromCmy(Math.min(100,Math.max(0,c)),Math.min(100,Math.max(0,m)),Math.min(100,Math.max(0,y))));});return ret;};function _78d(p,_78e,val){var ret=new _6.color.Palette();ret.colors=[];_4.forEach(p.colors,function(item){var o=item.toCmyk(),c=(_78e=="dc")?o.c+val:o.c,m=(_78e=="dm")?o.m+val:o.m,y=(_78e=="dy")?o.y+val:o.y,k=(_78e=="dk")?o.b+val:o.b;ret.colors.push(_6.color.fromCmyk(Math.min(100,Math.max(0,c)),Math.min(100,Math.max(0,m)),Math.min(100,Math.max(0,y)),Math.min(100,Math.max(0,k))));});return ret;};function tHSL(p,_78f,val){var ret=new _6.color.Palette();ret.colors=[];_4.forEach(p.colors,function(item){var o=item.toHsl(),h=(_78f=="dh")?o.h+val:o.h,s=(_78f=="ds")?o.s+val:o.s,l=(_78f=="dl")?o.l+val:o.l;ret.colors.push(_6.color.fromHsl(h%360,Math.min(100,Math.max(0,s)),Math.min(100,Math.max(0,l))));});return ret;};function tHSV(p,_790,val){var ret=new _6.color.Palette();ret.colors=[];_4.forEach(p.colors,function(item){var o=item.toHsv(),h=(_790=="dh")?o.h+val:o.h,s=(_790=="ds")?o.s+val:o.s,v=(_790=="dv")?o.v+val:o.v;ret.colors.push(_6.color.fromHsv(h%360,Math.min(100,Math.max(0,s)),Math.min(100,Math.max(0,v))));});return ret;};function _791(val,low,high){return high-((high-val)*((high-low)/high));};_4.extend(dxc.Palette,{transform:function(_792){var fn=_78a;if(_792.use){var use=_792.use.toLowerCase();if(use.indexOf("hs")==0){if(use.charAt(2)=="l"){fn=tHSL;}else{fn=tHSV;}}else{if(use.indexOf("cmy")==0){if(use.charAt(3)=="k"){fn=_78d;}else{fn=tCMY;}}}}else{if("dc" in _792||"dm" in _792||"dy" in _792){if("dk" in _792){fn=_78d;}else{fn=tCMY;}}else{if("dh" in _792||"ds" in _792){if("dv" in _792){fn=tHSV;}else{fn=tHSL;}}}}var _793=this;for(var p in _792){if(p=="use"){continue;}_793=fn(_793,p,_792[p]);}return _793;},clone:function(){return new dxc.Palette(this);}});_4.mixin(dxc.Palette,{generators:{analogous:function(args){var high=args.high||60,low=args.low||18,base=_4.isString(args.base)?new _6.color.Color(args.base):args.base,hsv=base.toHsv();var h=[(hsv.h+low+360)%360,(hsv.h+Math.round(low/2)+360)%360,hsv.h,(hsv.h-Math.round(high/2)+360)%360,(hsv.h-high+360)%360];var s1=Math.max(10,(hsv.s<=95)?hsv.s+5:(100-(hsv.s-95))),s2=(hsv.s>1)?hsv.s-1:21-hsv.s,v1=(hsv.v>=92)?hsv.v-9:Math.max(hsv.v+9,20),v2=(hsv.v<=90)?Math.max(hsv.v+5,20):(95+Math.ceil((hsv.v-90)/2)),s=[s1,s2,hsv.s,s1,s1],v=[v1,v2,hsv.v,v1,v2];return new dxc.Palette(_4.map(h,function(hue,i){return _6.color.fromHsv(hue,s[i],v[i]);}));},monochromatic:function(args){var base=_4.isString(args.base)?new _6.color.Color(args.base):args.base,hsv=base.toHsv();var s1=(hsv.s-30>9)?hsv.s-30:hsv.s+30,s2=hsv.s,v1=_791(hsv.v,20,100),v2=(hsv.v-20>20)?hsv.v-20:hsv.v+60,v3=(hsv.v-50>20)?hsv.v-50:hsv.v+30;return new dxc.Palette([_6.color.fromHsv(hsv.h,s1,v1),_6.color.fromHsv(hsv.h,s2,v3),base,_6.color.fromHsv(hsv.h,s1,v3),_6.color.fromHsv(hsv.h,s2,v2)]);},triadic:function(args){var base=_4.isString(args.base)?new _6.color.Color(args.base):args.base,hsv=base.toHsv();var h1=(hsv.h+57+360)%360,h2=(hsv.h-157+360)%360,s1=(hsv.s>20)?hsv.s-10:hsv.s+10,s2=(hsv.s>90)?hsv.s-10:hsv.s+10,s3=(hsv.s>95)?hsv.s-5:hsv.s+5,v1=(hsv.v-20>20)?hsv.v-20:hsv.v+20,v2=(hsv.v-30>20)?hsv.v-30:hsv.v+30,v3=(hsv.v-30>70)?hsv.v-30:hsv.v+30;return new dxc.Palette([_6.color.fromHsv(h1,s1,hsv.v),_6.color.fromHsv(hsv.h,s2,v2),base,_6.color.fromHsv(h2,s2,v1),_6.color.fromHsv(h2,s3,v3)]);},complementary:function(args){var base=_4.isString(args.base)?new _6.color.Color(args.base):args.base,hsv=base.toHsv();var h1=((hsv.h*2)+137<360)?(hsv.h*2)+137:Math.floor(hsv.h/2)-137,s1=Math.max(hsv.s-10,0),s2=_791(hsv.s,10,100),s3=Math.min(100,hsv.s+20),v1=Math.min(100,hsv.v+30),v2=(hsv.v>20)?hsv.v-30:hsv.v+30;return new dxc.Palette([_6.color.fromHsv(hsv.h,s1,v1),_6.color.fromHsv(hsv.h,s2,v2),base,_6.color.fromHsv(h1,s3,v2),_6.color.fromHsv(h1,hsv.s,hsv.v)]);},splitComplementary:function(args){var base=_4.isString(args.base)?new _6.color.Color(args.base):args.base,_794=args.da||30,hsv=base.toHsv();var _795=((hsv.h*2)+137<360)?(hsv.h*2)+137:Math.floor(hsv.h/2)-137,h1=(_795-_794+360)%360,h2=(_795+_794)%360,s1=Math.max(hsv.s-10,0),s2=_791(hsv.s,10,100),s3=Math.min(100,hsv.s+20),v1=Math.min(100,hsv.v+30),v2=(hsv.v>20)?hsv.v-30:hsv.v+30;return new dxc.Palette([_6.color.fromHsv(h1,s1,v1),_6.color.fromHsv(h1,s2,v2),base,_6.color.fromHsv(h2,s3,v2),_6.color.fromHsv(h2,hsv.s,hsv.v)]);},compound:function(args){var base=_4.isString(args.base)?new _6.color.Color(args.base):args.base,hsv=base.toHsv();var h1=((hsv.h*2)+18<360)?(hsv.h*2)+18:Math.floor(hsv.h/2)-18,h2=((hsv.h*2)+120<360)?(hsv.h*2)+120:Math.floor(hsv.h/2)-120,h3=((hsv.h*2)+99<360)?(hsv.h*2)+99:Math.floor(hsv.h/2)-99,s1=(hsv.s-40>10)?hsv.s-40:hsv.s+40,s2=(hsv.s-10>80)?hsv.s-10:hsv.s+10,s3=(hsv.s-25>10)?hsv.s-25:hsv.s+25,v1=(hsv.v-40>10)?hsv.v-40:hsv.v+40,v2=(hsv.v-20>80)?hsv.v-20:hsv.v+20,v3=Math.max(hsv.v,20);return new dxc.Palette([_6.color.fromHsv(h1,s1,v1),_6.color.fromHsv(h1,s2,v2),base,_6.color.fromHsv(h2,s3,v3),_6.color.fromHsv(h3,s2,v2)]);},shades:function(args){var base=_4.isString(args.base)?new _6.color.Color(args.base):args.base,hsv=base.toHsv();var s=(hsv.s==100&&hsv.v==0)?0:hsv.s,v1=(hsv.v-50>20)?hsv.v-50:hsv.v+30,v2=(hsv.v-25>=20)?hsv.v-25:hsv.v+55,v3=(hsv.v-75>=20)?hsv.v-75:hsv.v+5,v4=Math.max(hsv.v-10,20);return new dxc.Palette([new _6.color.fromHsv(hsv.h,s,v1),new _6.color.fromHsv(hsv.h,s,v2),base,new _6.color.fromHsv(hsv.h,s,v3),new _6.color.fromHsv(hsv.h,s,v4)]);}},generate:function(base,type){if(_4.isFunction(type)){return type({base:base});}else{if(dxc.Palette.generators[type]){return dxc.Palette.generators[type]({base:base});}}throw new Error("dojox.color.Palette.generate: the specified generator ('"+type+"') does not exist.");}});})();}if(!_4._hasResource["dojox.charting.Theme"]){_4._hasResource["dojox.charting.Theme"]=true;_4.provide("dojox.charting.Theme");_4.declare("dojox.charting.Theme",null,{shapeSpaces:{shape:1,shapeX:1,shapeY:1},constructor:function(_796){_796=_796||{};var def=_6.charting.Theme.defaultTheme;_4.forEach(["chart","plotarea","axis","series","marker"],function(name){this[name]=_4.delegate(def[name],_796[name]);},this);if(_796.seriesThemes&&_796.seriesThemes.length){this.colors=null;this.seriesThemes=_796.seriesThemes.slice(0);}else{this.seriesThemes=null;this.colors=(_796.colors||_6.charting.Theme.defaultColors).slice(0);}this.markerThemes=null;if(_796.markerThemes&&_796.markerThemes.length){this.markerThemes=_796.markerThemes.slice(0);}this.markers=_796.markers?_4.clone(_796.markers):_4.delegate(_6.charting.Theme.defaultMarkers);this.noGradConv=_796.noGradConv;this.noRadialConv=_796.noRadialConv;if(_796.reverseFills){this.reverseFills();}this._current=0;this._buildMarkerArray();},clone:function(){var _797=new _6.charting.Theme({chart:this.chart,plotarea:this.plotarea,axis:this.axis,series:this.series,marker:this.marker,colors:this.colors,markers:this.markers,seriesThemes:this.seriesThemes,markerThemes:this.markerThemes,noGradConv:this.noGradConv,noRadialConv:this.noRadialConv});_4.forEach(["clone","clear","next","skip","addMixin","post","getTick"],function(name){if(this.hasOwnProperty(name)){_797[name]=this[name];}},this);return _797;},clear:function(){this._current=0;},next:function(_798,_799,_79a){var _79b=_6.lang.utils.merge,_79c,_79d;if(this.colors){_79c=_4.delegate(this.series);_79d=_4.delegate(this.marker);var _79e=new _4.Color(this.colors[this._current%this.colors.length]),old;if(_79c.stroke&&_79c.stroke.color){_79c.stroke=_4.delegate(_79c.stroke);old=new _4.Color(_79c.stroke.color);_79c.stroke.color=new _4.Color(_79e);_79c.stroke.color.a=old.a;}else{_79c.stroke={color:_79e};}if(_79d.stroke&&_79d.stroke.color){_79d.stroke=_4.delegate(_79d.stroke);old=new _4.Color(_79d.stroke.color);_79d.stroke.color=new _4.Color(_79e);_79d.stroke.color.a=old.a;}else{_79d.stroke={color:_79e};}if(!_79c.fill||_79c.fill.type){_79c.fill=_79e;}else{old=new _4.Color(_79c.fill);_79c.fill=new _4.Color(_79e);_79c.fill.a=old.a;}if(!_79d.fill||_79d.fill.type){_79d.fill=_79e;}else{old=new _4.Color(_79d.fill);_79d.fill=new _4.Color(_79e);_79d.fill.a=old.a;}}else{_79c=this.seriesThemes?_79b(this.series,this.seriesThemes[this._current%this.seriesThemes.length]):this.series;_79d=this.markerThemes?_79b(this.marker,this.markerThemes[this._current%this.markerThemes.length]):_79c;}var _79f=_79d&&_79d.symbol||this._markers[this._current%this._markers.length];var _7a0={series:_79c,marker:_79d,symbol:_79f};++this._current;if(_799){_7a0=this.addMixin(_7a0,_798,_799);}if(_79a){_7a0=this.post(_7a0,_798);}return _7a0;},skip:function(){++this._current;},addMixin:function(_7a1,_7a2,_7a3,_7a4){if(_4.isArray(_7a3)){_4.forEach(_7a3,function(m){_7a1=this.addMixin(_7a1,_7a2,m);},this);}else{var t={};if("color" in _7a3){if(_7a2=="line"||_7a2=="area"){_4.setObject("series.stroke.color",_7a3.color,t);_4.setObject("marker.stroke.color",_7a3.color,t);}else{_4.setObject("series.fill",_7a3.color,t);}}_4.forEach(["stroke","outline","shadow","fill","font","fontColor","labelWiring"],function(name){var _7a5="marker"+name.charAt(0).toUpperCase()+name.substr(1),b=_7a5 in _7a3;if(name in _7a3){_4.setObject("series."+name,_7a3[name],t);if(!b){_4.setObject("marker."+name,_7a3[name],t);}}if(b){_4.setObject("marker."+name,_7a3[_7a5],t);}});if("marker" in _7a3){t.symbol=_7a3.marker;}_7a1=_6.lang.utils.merge(_7a1,t);}if(_7a4){_7a1=this.post(_7a1,_7a2);}return _7a1;},post:function(_7a6,_7a7){var fill=_7a6.series.fill,t;if(!this.noGradConv&&this.shapeSpaces[fill.space]&&fill.type=="linear"){if(_7a7=="bar"){t={x1:fill.y1,y1:fill.x1,x2:fill.y2,y2:fill.x2};}else{if(!this.noRadialConv&&fill.space=="shape"&&(_7a7=="slice"||_7a7=="circle")){t={type:"radial",cx:0,cy:0,r:100};}}if(t){return _6.lang.utils.merge(_7a6,{series:{fill:t}});}}return _7a6;},getTick:function(name,_7a8){var tick=this.axis.tick,_7a9=name+"Tick";merge=_6.lang.utils.merge;if(tick){if(this.axis[_7a9]){tick=merge(tick,this.axis[_7a9]);}}else{tick=this.axis[_7a9];}if(_7a8){if(tick){if(_7a8[_7a9]){tick=merge(tick,_7a8[_7a9]);}}else{tick=_7a8[_7a9];}}return tick;},inspectObjects:function(f){_4.forEach(["chart","plotarea","axis","series","marker"],function(name){f(this[name]);},this);if(this.seriesThemes){_4.forEach(this.seriesThemes,f);}if(this.markerThemes){_4.forEach(this.markerThemes,f);}},reverseFills:function(){this.inspectObjects(function(o){if(o&&o.fill){o.fill=_6.gfx.gradutils.reverse(o.fill);}});},addMarker:function(name,_7aa){this.markers[name]=_7aa;this._buildMarkerArray();},setMarkers:function(obj){this.markers=obj;this._buildMarkerArray();},_buildMarkerArray:function(){this._markers=[];for(var p in this.markers){this._markers.push(this.markers[p]);}}});_4.mixin(_6.charting.Theme,{defaultMarkers:{CIRCLE:"m-3,0 c0,-4 6,-4 6,0 m-6,0 c0,4 6,4 6,0",SQUARE:"m-3,-3 l0,6 6,0 0,-6 z",DIAMOND:"m0,-3 l3,3 -3,3 -3,-3 z",CROSS:"m0,-3 l0,6 m-3,-3 l6,0",X:"m-3,-3 l6,6 m0,-6 l-6,6",TRIANGLE:"m-3,3 l3,-6 3,6 z",TRIANGLE_INVERTED:"m-3,-3 l3,6 3,-6 z"},defaultColors:["#54544c","#858e94","#6e767a","#948585","#474747"],defaultTheme:{chart:{stroke:null,fill:"white",pageStyle:null,titleGap:20,titlePos:"top",titleFont:"normal normal bold 14pt Tahoma",titleFontColor:"#333"},plotarea:{stroke:null,fill:"white"},axis:{stroke:{color:"#333",width:1},tick:{color:"#666",position:"center",font:"normal normal normal 7pt Tahoma",fontColor:"#333",titleGap:15,titleFont:"normal normal normal 11pt Tahoma",titleFontColor:"#333",titleOrientation:"axis"},majorTick:{width:1,length:6},minorTick:{width:0.8,length:3},microTick:{width:0.5,length:1}},series:{stroke:{width:1.5,color:"#333"},outline:{width:0.1,color:"#ccc"},shadow:null,fill:"#ccc",font:"normal normal normal 8pt Tahoma",fontColor:"#000",labelWiring:{width:1,color:"#ccc"}},marker:{stroke:{width:1.5,color:"#333"},outline:{width:0.1,color:"#ccc"},shadow:null,fill:"#ccc",font:"normal normal normal 8pt Tahoma",fontColor:"#000"}},defineColors:function(_7ab){_7ab=_7ab||{};var c=[],n=_7ab.num||5;if(_7ab.colors){var l=_7ab.colors.length;for(var i=0;i<n;i++){c.push(_7ab.colors[i%l]);}return c;}if(_7ab.hue){var s=_7ab.saturation||100;var st=_7ab.low||30;var end=_7ab.high||90;var l=(end+st)/2;return _6.color.Palette.generate(_6.color.fromHsv(_7ab.hue,s,l),"monochromatic").colors;}if(_7ab.generator){return _6.color.Palette.generate(_7ab.base,_7ab.generator).colors;}return c;},generateGradient:function(_7ac,_7ad,_7ae){var fill=_4.delegate(_7ac);fill.colors=[{offset:0,color:_7ad},{offset:1,color:_7ae}];return fill;},generateHslColor:function(_7af,_7b0){_7af=new _6.color.Color(_7af);var hsl=_7af.toHsl(),_7b1=_6.color.fromHsl(hsl.h,hsl.s,_7b0);_7b1.a=_7af.a;return _7b1;},generateHslGradient:function(_7b2,_7b3,_7b4,_7b5){_7b2=new _6.color.Color(_7b2);var hsl=_7b2.toHsl(),_7b6=_6.color.fromHsl(hsl.h,hsl.s,_7b4),_7b7=_6.color.fromHsl(hsl.h,hsl.s,_7b5);_7b6.a=_7b7.a=_7b2.a;return _6.charting.Theme.generateGradient(_7b3,_7b6,_7b7);}});}if(!_4._hasResource["dojox.charting.Series"]){_4._hasResource["dojox.charting.Series"]=true;_4.provide("dojox.charting.Series");_4.declare("dojox.charting.Series",_6.charting.Element,{constructor:function(_7b8,data,_7b9){_4.mixin(this,_7b9);if(typeof this.plot!="string"){this.plot="default";}this.update(data);},clear:function(){this.dyn={};},update:function(data){if(_4.isArray(data)){this.data=data;}else{this.source=data;this.data=this.source.data;if(this.source.setSeriesObject){this.source.setSeriesObject(this);}}this.dirty=true;this.clear();}});}if(!_4._hasResource["dojox.charting.Chart"]){_4._hasResource["dojox.charting.Chart"]=true;_4.provide("dojox.charting.Chart");(function(){var df=_6.lang.functional,dc=_6.charting,g=_6.gfx,_7ba=df.lambda("item.clear()"),_7bb=df.lambda("item.purgeGroup()"),_7bc=df.lambda("item.destroy()"),_7bd=df.lambda("item.dirty = false"),_7be=df.lambda("item.dirty = true"),_7bf=df.lambda("item.name");_4.declare("dojox.charting.Chart",null,{constructor:function(node,_7c0){if(!_7c0){_7c0={};}this.margins=_7c0.margins?_7c0.margins:{l:10,t:10,r:10,b:10};this.stroke=_7c0.stroke;this.fill=_7c0.fill;this.delayInMs=_7c0.delayInMs||200;this.title=_7c0.title;this.titleGap=_7c0.titleGap;this.titlePos=_7c0.titlePos;this.titleFont=_7c0.titleFont;this.titleFontColor=_7c0.titleFontColor;this.chartTitle=null;this.theme=null;this.axes={};this.stack=[];this.plots={};this.series=[];this.runs={};this.dirty=true;this.coords=null;this.node=_4.byId(node);var box=_4.marginBox(node);this.surface=g.createSurface(this.node,box.w||400,box.h||300);},destroy:function(){_4.forEach(this.series,_7bc);_4.forEach(this.stack,_7bc);df.forIn(this.axes,_7bc);if(this.chartTitle&&this.chartTitle.tagName){_4.destroy(this.chartTitle);}this.surface.destroy();},getCoords:function(){if(!this.coords){this.coords=_4.coords(this.node,true);}return this.coords;},setTheme:function(_7c1){this.theme=_7c1.clone();this.dirty=true;return this;},addAxis:function(name,_7c2){var axis,_7c3=_7c2&&_7c2.type||"Default";if(typeof _7c3=="string"){if(!dc.axis2d||!dc.axis2d[_7c3]){throw Error("Can't find axis: "+_7c3+" - didn't you forget to dojo"+".require() it?");}axis=new dc.axis2d[_7c3](this,_7c2);}else{axis=new _7c3(this,_7c2);}axis.name=name;axis.dirty=true;if(name in this.axes){this.axes[name].destroy();}this.axes[name]=axis;this.dirty=true;return this;},getAxis:function(name){return this.axes[name];},removeAxis:function(name){if(name in this.axes){this.axes[name].destroy();delete this.axes[name];this.dirty=true;}return this;},addPlot:function(name,_7c4){var plot,_7c5=_7c4&&_7c4.type||"Default";if(typeof _7c5=="string"){if(!dc.plot2d||!dc.plot2d[_7c5]){throw Error("Can't find plot: "+_7c5+" - didn't you forget to dojo"+".require() it?");}plot=new dc.plot2d[_7c5](this,_7c4);}else{plot=new _7c5(this,_7c4);}plot.name=name;plot.dirty=true;if(name in this.plots){this.stack[this.plots[name]].destroy();this.stack[this.plots[name]]=plot;}else{this.plots[name]=this.stack.length;this.stack.push(plot);}this.dirty=true;return this;},removePlot:function(name){if(name in this.plots){var _7c6=this.plots[name];delete this.plots[name];this.stack[_7c6].destroy();this.stack.splice(_7c6,1);df.forIn(this.plots,function(idx,name,_7c7){if(idx>_7c6){_7c7[name]=idx-1;}});var ns=_4.filter(this.series,function(run){return run.plot!=name;});if(ns.length<this.series.length){_4.forEach(this.series,function(run){if(run.plot==name){run.destroy();}});this.runs={};_4.forEach(ns,function(run,_7c8){this.runs[run.plot]=_7c8;},this);this.series=ns;}this.dirty=true;}return this;},getPlotOrder:function(){return df.map(this.stack,_7bf);},setPlotOrder:function(_7c9){var _7ca={},_7cb=df.filter(_7c9,function(name){if(!(name in this.plots)||(name in _7ca)){return false;}_7ca[name]=1;return true;},this);if(_7cb.length<this.stack.length){df.forEach(this.stack,function(plot){var name=plot.name;if(!(name in _7ca)){_7cb.push(name);}});}var _7cc=df.map(_7cb,function(name){return this.stack[this.plots[name]];},this);df.forEach(_7cc,function(plot,i){this.plots[plot.name]=i;},this);this.stack=_7cc;this.dirty=true;return this;},movePlotToFront:function(name){if(name in this.plots){var _7cd=this.plots[name];if(_7cd){var _7ce=this.getPlotOrder();_7ce.splice(_7cd,1);_7ce.unshift(name);return this.setPlotOrder(_7ce);}}return this;},movePlotToBack:function(name){if(name in this.plots){var _7cf=this.plots[name];if(_7cf<this.stack.length-1){var _7d0=this.getPlotOrder();_7d0.splice(_7cf,1);_7d0.push(name);return this.setPlotOrder(_7d0);}}return this;},addSeries:function(name,data,_7d1){var run=new dc.Series(this,data,_7d1);run.name=name;if(name in this.runs){this.series[this.runs[name]].destroy();this.series[this.runs[name]]=run;}else{this.runs[name]=this.series.length;this.series.push(run);}this.dirty=true;if(!("ymin" in run)&&"min" in run){run.ymin=run.min;}if(!("ymax" in run)&&"max" in run){run.ymax=run.max;}return this;},removeSeries:function(name){if(name in this.runs){var _7d2=this.runs[name];delete this.runs[name];this.series[_7d2].destroy();this.series.splice(_7d2,1);df.forIn(this.runs,function(idx,name,runs){if(idx>_7d2){runs[name]=idx-1;}});this.dirty=true;}return this;},updateSeries:function(name,data){if(name in this.runs){var run=this.series[this.runs[name]];run.update(data);this._invalidateDependentPlots(run.plot,false);this._invalidateDependentPlots(run.plot,true);}return this;},getSeriesOrder:function(_7d3){return df.map(df.filter(this.series,function(run){return run.plot==_7d3;}),_7bf);},setSeriesOrder:function(_7d4){var _7d5,_7d6={},_7d7=df.filter(_7d4,function(name){if(!(name in this.runs)||(name in _7d6)){return false;}var run=this.series[this.runs[name]];if(_7d5){if(run.plot!=_7d5){return false;}}else{_7d5=run.plot;}_7d6[name]=1;return true;},this);df.forEach(this.series,function(run){var name=run.name;if(!(name in _7d6)&&run.plot==_7d5){_7d7.push(name);}});var _7d8=df.map(_7d7,function(name){return this.series[this.runs[name]];},this);this.series=_7d8.concat(df.filter(this.series,function(run){return run.plot!=_7d5;}));df.forEach(this.series,function(run,i){this.runs[run.name]=i;},this);this.dirty=true;return this;},moveSeriesToFront:function(name){if(name in this.runs){var _7d9=this.runs[name],_7da=this.getSeriesOrder(this.series[_7d9].plot);if(name!=_7da[0]){_7da.splice(_7d9,1);_7da.unshift(name);return this.setSeriesOrder(_7da);}}return this;},moveSeriesToBack:function(name){if(name in this.runs){var _7db=this.runs[name],_7dc=this.getSeriesOrder(this.series[_7db].plot);if(name!=_7dc[_7dc.length-1]){_7dc.splice(_7db,1);_7dc.push(name);return this.setSeriesOrder(_7dc);}}return this;},resize:function(_7dd,_7de){var box;switch(arguments.length){case 1:box=_4.mixin({},_7dd);_4.marginBox(this.node,box);break;case 2:box={w:_7dd,h:_7de};_4.marginBox(this.node,box);break;}box=_4.marginBox(this.node);this.surface.setDimensions(box.w,box.h);this.dirty=true;this.coords=null;return this.render();},getGeometry:function(){var ret={};df.forIn(this.axes,function(axis){if(axis.initialized()){ret[axis.name]={name:axis.name,vertical:axis.vertical,scaler:axis.scaler,ticks:axis.ticks};}});return ret;},setAxisWindow:function(name,_7df,_7e0,zoom){var axis=this.axes[name];if(axis){axis.setWindow(_7df,_7e0);_4.forEach(this.stack,function(plot){if(plot.hAxis==name||plot.vAxis==name){plot.zoom=zoom;}});}return this;},setWindow:function(sx,sy,dx,dy,zoom){if(!("plotArea" in this)){this.calculateGeometry();}df.forIn(this.axes,function(axis){var _7e1,_7e2,_7e3=axis.getScaler().bounds,s=_7e3.span/(_7e3.upper-_7e3.lower);if(axis.vertical){_7e1=sy;_7e2=dy/s/_7e1;}else{_7e1=sx;_7e2=dx/s/_7e1;}axis.setWindow(_7e1,_7e2);});_4.forEach(this.stack,function(plot){plot.zoom=zoom;});return this;},zoomIn:function(name,_7e4){var axis=this.axes[name];if(axis){var _7e5,_7e6,_7e7=axis.getScaler().bounds;var _7e8=Math.min(_7e4[0],_7e4[1]);var _7e9=Math.max(_7e4[0],_7e4[1]);_7e8=_7e4[0]<_7e7.lower?_7e7.lower:_7e8;_7e9=_7e4[1]>_7e7.upper?_7e7.upper:_7e9;_7e5=(_7e7.upper-_7e7.lower)/(_7e9-_7e8);_7e6=_7e8-_7e7.lower;this.setAxisWindow(name,_7e5,_7e6);this.render();}},calculateGeometry:function(){if(this.dirty){return this.fullGeometry();}var _7ea=_4.filter(this.stack,function(plot){return plot.dirty||(plot.hAxis&&this.axes[plot.hAxis].dirty)||(plot.vAxis&&this.axes[plot.vAxis].dirty);},this);_7eb(_7ea,this.plotArea);return this;},fullGeometry:function(){this._makeDirty();_4.forEach(this.stack,_7ba);if(!this.theme){this.setTheme(new _6.charting.Theme(_6.charting._def));}_4.forEach(this.series,function(run){if(!(run.plot in this.plots)){if(!dc.plot2d||!dc.plot2d.Default){throw Error("Can't find plot: Default - didn't you forget to dojo"+".require() it?");}var plot=new dc.plot2d.Default(this,{});plot.name=run.plot;this.plots[run.plot]=this.stack.length;this.stack.push(plot);}this.stack[this.plots[run.plot]].addSeries(run);},this);_4.forEach(this.stack,function(plot){if(plot.hAxis){plot.setAxis(this.axes[plot.hAxis]);}if(plot.vAxis){plot.setAxis(this.axes[plot.vAxis]);}},this);var dim=this.dim=this.surface.getDimensions();dim.width=g.normalizedLength(dim.width);dim.height=g.normalizedLength(dim.height);df.forIn(this.axes,_7ba);_7eb(this.stack,dim);var _7ec=this.offsets={l:0,r:0,t:0,b:0};df.forIn(this.axes,function(axis){df.forIn(axis.getOffsets(),function(o,i){_7ec[i]+=o;});});if(this.title){this.titleGap=(this.titleGap==0)?0:this.titleGap||this.theme.chart.titleGap||20;this.titlePos=this.titlePos||this.theme.chart.titlePos||"top";this.titleFont=this.titleFont||this.theme.chart.titleFont;this.titleFontColor=this.titleFontColor||this.theme.chart.titleFontColor||"black";var _7ed=g.normalizedLength(g.splitFontString(this.titleFont).size);_7ec[this.titlePos=="top"?"t":"b"]+=(_7ed+this.titleGap);}df.forIn(this.margins,function(o,i){_7ec[i]+=o;});this.plotArea={width:dim.width-_7ec.l-_7ec.r,height:dim.height-_7ec.t-_7ec.b};df.forIn(this.axes,_7ba);_7eb(this.stack,this.plotArea);return this;},render:function(){if(this.theme){this.theme.clear();}if(this.dirty){return this.fullRender();}this.calculateGeometry();df.forEachRev(this.stack,function(plot){plot.render(this.dim,this.offsets);},this);df.forIn(this.axes,function(axis){axis.render(this.dim,this.offsets);},this);this._makeClean();if(this.surface.render){this.surface.render();}return this;},fullRender:function(){this.fullGeometry();var _7ee=this.offsets,dim=this.dim,rect;_4.forEach(this.series,_7bb);df.forIn(this.axes,_7bb);_4.forEach(this.stack,_7bb);if(this.chartTitle&&this.chartTitle.tagName){_4.destroy(this.chartTitle);}this.surface.clear();this.chartTitle=null;var t=this.theme,fill=t.plotarea&&t.plotarea.fill,_7ef=t.plotarea&&t.plotarea.stroke,rect={x:_7ee.l-1,y:_7ee.t-1,width:dim.width-_7ee.l-_7ee.r+2,height:dim.height-_7ee.t-_7ee.b+2};if(fill){fill=dc.Element.prototype._shapeFill(dc.Element.prototype._plotFill(fill,dim,_7ee),rect);this.surface.createRect(rect).setFill(fill);}if(_7ef){this.surface.createRect({x:_7ee.l,y:_7ee.t,width:dim.width-_7ee.l-_7ee.r+1,height:dim.height-_7ee.t-_7ee.b+1}).setStroke(_7ef);}df.foldr(this.stack,function(z,plot){return plot.render(dim,_7ee),0;},0);fill=this.fill!==undefined?this.fill:(t.chart&&t.chart.fill);_7ef=this.stroke!==undefined?this.stroke:(t.chart&&t.chart.stroke);if(fill=="inherit"){var node=this.node,fill=new _4.Color(_4.style(node,"backgroundColor"));while(fill.a==0&&node!=document.documentElement){fill=new _4.Color(_4.style(node,"backgroundColor"));node=node.parentNode;}}if(fill){fill=dc.Element.prototype._plotFill(fill,dim,_7ee);if(_7ee.l){rect={width:_7ee.l,height:dim.height+1};this.surface.createRect(rect).setFill(dc.Element.prototype._shapeFill(fill,rect));}if(_7ee.r){rect={x:dim.width-_7ee.r,width:_7ee.r+1,height:dim.height+2};this.surface.createRect(rect).setFill(dc.Element.prototype._shapeFill(fill,rect));}if(_7ee.t){rect={width:dim.width+1,height:_7ee.t};this.surface.createRect(rect).setFill(dc.Element.prototype._shapeFill(fill,rect));}if(_7ee.b){rect={y:dim.height-_7ee.b,width:dim.width+1,height:_7ee.b+2};this.surface.createRect(rect).setFill(dc.Element.prototype._shapeFill(fill,rect));}}if(_7ef){this.surface.createRect({width:dim.width-1,height:dim.height-1}).setStroke(_7ef);}if(this.title){var _7f0=(g.renderer=="canvas"),_7f1=_7f0||!_4.isIE&&!_4.isOpera?"html":"gfx",_7f2=g.normalizedLength(g.splitFontString(this.titleFont).size);this.chartTitle=dc.axis2d.common.createText[_7f1](this,this.surface,dim.width/2,this.titlePos=="top"?_7f2+this.margins.t:dim.height-this.margins.b,"middle",this.title,this.titleFont,this.titleFontColor);}df.forIn(this.axes,function(axis){axis.render(dim,_7ee);});this._makeClean();if(this.surface.render){this.surface.render();}return this;},delayedRender:function(){if(!this._delayedRenderHandle){this._delayedRenderHandle=setTimeout(_4.hitch(this,function(){clearTimeout(this._delayedRenderHandle);this._delayedRenderHandle=null;this.render();}),this.delayInMs);}return this;},connectToPlot:function(name,_7f3,_7f4){return name in this.plots?this.stack[this.plots[name]].connect(_7f3,_7f4):null;},fireEvent:function(_7f5,_7f6,_7f7){if(_7f5 in this.runs){var _7f8=this.series[this.runs[_7f5]].plot;if(_7f8 in this.plots){var plot=this.stack[this.plots[_7f8]];if(plot){plot.fireEvent(_7f5,_7f6,_7f7);}}}return this;},_makeClean:function(){_4.forEach(this.axes,_7bd);_4.forEach(this.stack,_7bd);_4.forEach(this.series,_7bd);this.dirty=false;},_makeDirty:function(){_4.forEach(this.axes,_7be);_4.forEach(this.stack,_7be);_4.forEach(this.series,_7be);this.dirty=true;},_invalidateDependentPlots:function(_7f9,_7fa){if(_7f9 in this.plots){var plot=this.stack[this.plots[_7f9]],axis,_7fb=_7fa?"vAxis":"hAxis";if(plot[_7fb]){axis=this.axes[plot[_7fb]];if(axis&&axis.dependOnData()){axis.dirty=true;_4.forEach(this.stack,function(p){if(p[_7fb]&&p[_7fb]==plot[_7fb]){p.dirty=true;}});}}else{plot.dirty=true;}}}});function _7fc(_7fd){return {min:_7fd.hmin,max:_7fd.hmax};};function _7fe(_7ff){return {min:_7ff.vmin,max:_7ff.vmax};};function _800(_801,h){_801.hmin=h.min;_801.hmax=h.max;};function _802(_803,v){_803.vmin=v.min;_803.vmax=v.max;};function _804(_805,_806){if(_805&&_806){_805.min=Math.min(_805.min,_806.min);_805.max=Math.max(_805.max,_806.max);}return _805||_806;};function _7eb(_807,_808){var _809={},axes={};_4.forEach(_807,function(plot){var _80a=_809[plot.name]=plot.getSeriesStats();if(plot.hAxis){axes[plot.hAxis]=_804(axes[plot.hAxis],_7fc(_80a));}if(plot.vAxis){axes[plot.vAxis]=_804(axes[plot.vAxis],_7fe(_80a));}});_4.forEach(_807,function(plot){var _80b=_809[plot.name];if(plot.hAxis){_800(_80b,axes[plot.hAxis]);}if(plot.vAxis){_802(_80b,axes[plot.vAxis]);}plot.initializeScalers(_808,_80b);});};})();}if(!_4._hasResource["dojox.charting.Chart2D"]){_4._hasResource["dojox.charting.Chart2D"]=true;_4.provide("dojox.charting.Chart2D");_4.deprecated("dojox.charting.Chart2D","Use dojo.charting.Chart instead and require all other components explicitly","2.0");_6.charting.Chart2D=_6.charting.Chart;}if(!_4._hasResource["dojox.charting.themes.PlotKit.base"]){_4._hasResource["dojox.charting.themes.PlotKit.base"]=true;_4.provide("dojox.charting.themes.PlotKit.base");(function(){var dc=_6.charting,pk=dc.themes.PlotKit;pk.base=new dc.Theme({chart:{stroke:null,fill:"yellow"},plotarea:{stroke:null,fill:"yellow"},axis:{stroke:{color:"#fff",width:1},line:{color:"#fff",width:0.5},majorTick:{color:"#fff",width:0.5,length:6},minorTick:{color:"#fff",width:0.5,length:3},tick:{font:"normal normal normal 7pt Helvetica,Arial,sans-serif",fontColor:"#999"}},series:{stroke:{width:2.5,color:"#fff"},fill:"#666",font:"normal normal normal 7.5pt Helvetica,Arial,sans-serif",fontColor:"#666"},marker:{stroke:{width:2},fill:"#333",font:"normal normal normal 7pt Helvetica,Arial,sans-serif",fontColor:"#666"},colors:["red","green","blue"]});pk.base.next=function(_80c,_80d,_80e){var _80f=dc.Theme.prototype.next.apply(this,arguments);if(_80c=="line"){_80f.marker.outline={width:2,color:"#fff"};_80f.series.stroke.width=3.5;_80f.marker.stroke.width=2;}else{if(_80c=="candlestick"){_80f.series.stroke.width=1;}else{_80f.series.stroke.color="#fff";}}return _80f;};})();}if(!_4._hasResource["dijit.Tooltip"]){_4._hasResource["dijit.Tooltip"]=true;_4.provide("dijit.Tooltip");_4.declare("dijit._MasterTooltip",[_5._Widget,_5._Templated],{duration:_5.defaultDuration,templateString:_4.cache("dijit","templates/Tooltip.html","<div class=\"dijitTooltip dijitTooltipLeft\" id=\"dojoTooltip\"\r\n\t><div class=\"dijitTooltipContainer dijitTooltipContents\" dojoAttachPoint=\"containerNode\" role='alert'></div\r\n\t><div class=\"dijitTooltipConnector\" dojoAttachPoint=\"connectorNode\"></div\r\n></div>\r\n"),postCreate:function(){_4.body().appendChild(this.domNode);this.bgIframe=new _5.BackgroundIframe(this.domNode);this.fadeIn=_4.fadeIn({node:this.domNode,duration:this.duration,onEnd:_4.hitch(this,"_onShow")});this.fadeOut=_4.fadeOut({node:this.domNode,duration:this.duration,onEnd:_4.hitch(this,"_onHide")});},show:function(_810,_811,_812,rtl){if(this.aroundNode&&this.aroundNode===_811){return;}this.domNode.width="auto";if(this.fadeOut.status()=="playing"){this._onDeck=arguments;return;}this.containerNode.innerHTML=_810;var pos=_5.placeOnScreenAroundElement(this.domNode,_811,_5.getPopupAroundAlignment((_812&&_812.length)?_812:_5.Tooltip.defaultPosition,!rtl),_4.hitch(this,"orient"));_4.style(this.domNode,"opacity",0);this.fadeIn.play();this.isShowingNow=true;this.aroundNode=_811;},orient:function(node,_813,_814,_815,_816){this.connectorNode.style.top="";var _817=_815.w-this.connectorNode.offsetWidth;node.className="dijitTooltip "+{"BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[_813+"-"+_814];this.domNode.style.width="auto";var size=_4.contentBox(this.domNode);var _818=Math.min((Math.max(_817,1)),size.w);var _819=_818<size.w;this.domNode.style.width=_818+"px";if(_819){this.containerNode.style.overflow="auto";var _81a=this.containerNode.scrollWidth;this.containerNode.style.overflow="visible";if(_81a>_818){_81a=_81a+_4.style(this.domNode,"paddingLeft")+_4.style(this.domNode,"paddingRight");this.domNode.style.width=_81a+"px";}}if(_814.charAt(0)=="B"&&_813.charAt(0)=="B"){var mb=_4.marginBox(node);var _81b=this.connectorNode.offsetHeight;if(mb.h>_815.h){var _81c=_815.h-(_816.h/2)-(_81b/2);this.connectorNode.style.top=_81c+"px";this.connectorNode.style.bottom="";}else{this.connectorNode.style.bottom=Math.min(Math.max(_816.h/2-_81b/2,0),mb.h-_81b)+"px";this.connectorNode.style.top="";}}else{this.connectorNode.style.top="";this.connectorNode.style.bottom="";}return Math.max(0,size.w-_817);},_onShow:function(){if(_4.isIE){this.domNode.style.filter="";}},hide:function(_81d){if(this._onDeck&&this._onDeck[1]==_81d){this._onDeck=null;}else{if(this.aroundNode===_81d){this.fadeIn.stop();this.isShowingNow=false;this.aroundNode=null;this.fadeOut.play();}else{}}},_onHide:function(){this.domNode.style.cssText="";this.containerNode.innerHTML="";if(this._onDeck){this.show.apply(this,this._onDeck);this._onDeck=null;}}});_5.showTooltip=function(_81e,_81f,_820,rtl){if(!_5._masterTT){_5._masterTT=new _5._MasterTooltip();}return _5._masterTT.show(_81e,_81f,_820,rtl);};_5.hideTooltip=function(_821){if(!_5._masterTT){_5._masterTT=new _5._MasterTooltip();}return _5._masterTT.hide(_821);};_4.declare("dijit.Tooltip",_5._Widget,{label:"",showDelay:400,connectId:[],position:[],_setConnectIdAttr:function(_822){_4.forEach(this._connections||[],function(_823){_4.forEach(_823,_4.hitch(this,"disconnect"));},this);var ary=_4.isArrayLike(_822)?_822:(_822?[_822]:[]);this._connections=_4.map(ary,function(id){var node=_4.byId(id);return node?[this.connect(node,"onmouseenter","_onTargetMouseEnter"),this.connect(node,"onmouseleave","_onTargetMouseLeave"),this.connect(node,"onfocus","_onTargetFocus"),this.connect(node,"onblur","_onTargetBlur")]:[];},this);this._set("connectId",_822);this._connectIds=ary;},addTarget:function(node){var id=node.id||node;if(_4.indexOf(this._connectIds,id)==-1){this.set("connectId",this._connectIds.concat(id));}},removeTarget:function(node){var id=node.id||node,idx=_4.indexOf(this._connectIds,id);if(idx>=0){this._connectIds.splice(idx,1);this.set("connectId",this._connectIds);}},buildRendering:function(){this.inherited(arguments);_4.addClass(this.domNode,"dijitTooltipData");},startup:function(){this.inherited(arguments);var ids=this.connectId;_4.forEach(_4.isArrayLike(ids)?ids:[ids],this.addTarget,this);},_onTargetMouseEnter:function(e){this._onHover(e);},_onTargetMouseLeave:function(e){this._onUnHover(e);},_onTargetFocus:function(e){this._focus=true;this._onHover(e);},_onTargetBlur:function(e){this._focus=false;this._onUnHover(e);},_onHover:function(e){if(!this._showTimer){var _824=e.target;this._showTimer=setTimeout(_4.hitch(this,function(){this.open(_824);}),this.showDelay);}},_onUnHover:function(e){if(this._focus){return;}if(this._showTimer){clearTimeout(this._showTimer);delete this._showTimer;}this.close();},open:function(_825){if(this._showTimer){clearTimeout(this._showTimer);delete this._showTimer;}_5.showTooltip(this.label||this.domNode.innerHTML,_825,this.position,!this.isLeftToRight());this._connectNode=_825;this.onShow(_825,this.position);},close:function(){if(this._connectNode){_5.hideTooltip(this._connectNode);delete this._connectNode;this.onHide();}if(this._showTimer){clearTimeout(this._showTimer);delete this._showTimer;}},onShow:function(_826,_827){},onHide:function(){},uninitialize:function(){this.close();this.inherited(arguments);}});_5.Tooltip.defaultPosition=["after","before"];}if(!_4._hasResource["dojox.charting.action2d.Base"]){_4._hasResource["dojox.charting.action2d.Base"]=true;_4.provide("dojox.charting.action2d.Base");(function(){var _828=400,_829=_4.fx.easing.backOut,df=_6.lang.functional;_4.declare("dojox.charting.action2d.Base",null,{overOutEvents:{onmouseover:1,onmouseout:1},constructor:function(_82a,plot,_82b){this.chart=_82a;this.plot=plot||"default";this.anim={};if(!_82b){_82b={};}this.duration=_82b.duration?_82b.duration:_828;this.easing=_82b.easing?_82b.easing:_829;},connect:function(){this.handle=this.chart.connectToPlot(this.plot,this,"process");},disconnect:function(){if(this.handle){_4.disconnect(this.handle);this.handle=null;}},reset:function(){},destroy:function(){this.disconnect();df.forIn(this.anim,function(o){df.forIn(o,function(anim){anim.action.stop(true);});});this.anim={};}});})();}if(!_4._hasResource["dojox.lang.functional.scan"]){_4._hasResource["dojox.lang.functional.scan"]=true;_4.provide("dojox.lang.functional.scan");(function(){var d=_4,df=_6.lang.functional,_82c={};d.mixin(df,{scanl:function(a,f,z,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);var t,n,i;if(d.isArray(a)){t=new Array((n=a.length)+1);t[0]=z;for(i=0;i<n;z=f.call(o,z,a[i],i,a),t[++i]=z){}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){t=[z];for(i=0;a.hasNext();t.push(z=f.call(o,z,a.next(),i++,a))){}}else{t=[z];for(i in a){if(!(i in _82c)){t.push(z=f.call(o,z,a[i],i,a));}}}}return t;},scanl1:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);var t,n,z,_82d=true;if(d.isArray(a)){t=new Array(n=a.length);t[0]=z=a[0];for(var i=1;i<n;t[i]=z=f.call(o,z,a[i],i,a),++i){}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){if(a.hasNext()){t=[z=a.next()];for(var i=1;a.hasNext();t.push(z=f.call(o,z,a.next(),i++,a))){}}}else{for(var i in a){if(!(i in _82c)){if(_82d){t=[z=a[i]];_82d=false;}else{t.push(z=f.call(o,z,a[i],i,a));}}}}}return t;},scanr:function(a,f,z,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);var n=a.length,t=new Array(n+1),i=n;t[n]=z;for(;i>0;--i,z=f.call(o,z,a[i],i,a),t[i]=z){}return t;},scanr1:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);var n=a.length,t=new Array(n),z=a[n-1],i=n-1;t[i]=z;for(;i>0;--i,z=f.call(o,z,a[i],i,a),t[i]=z){}return t;}});})();}if(!_4._hasResource["dojox.charting.action2d.Tooltip"]){_4._hasResource["dojox.charting.action2d.Tooltip"]=true;_4.provide("dojox.charting.action2d.Tooltip");(function(){var _82e=function(o){var t=o.run&&o.run.data&&o.run.data[o.index];if(t&&typeof t!="number"&&(t.tooltip||t.text)){return t.tooltip||t.text;}if(o.element=="candlestick"){return "<table cellpadding=\"1\" cellspacing=\"0\" border=\"0\" style=\"font-size:0.9em;\">"+"<tr><td>Open:</td><td align=\"right\"><strong>"+o.data.open+"</strong></td></tr>"+"<tr><td>High:</td><td align=\"right\"><strong>"+o.data.high+"</strong></td></tr>"+"<tr><td>Low:</td><td align=\"right\"><strong>"+o.data.low+"</strong></td></tr>"+"<tr><td>Close:</td><td align=\"right\"><strong>"+o.data.close+"</strong></td></tr>"+(o.data.mid!==undefined?"<tr><td>Mid:</td><td align=\"right\"><strong>"+o.data.mid+"</strong></td></tr>":"")+"</table>";}return o.element=="bar"?o.x:o.y;};var df=_6.lang.functional,m=_6.gfx.matrix,pi4=Math.PI/4,pi2=Math.PI/2;_4.declare("dojox.charting.action2d.Tooltip",_6.charting.action2d.Base,{defaultParams:{text:_82e},optionalParams:{},constructor:function(_82f,plot,_830){this.text=_830&&_830.text?_830.text:_82e;this.connect();},process:function(o){if(o.type==="onplotreset"||o.type==="onmouseout"){_5.hideTooltip(this.aroundRect);this.aroundRect=null;if(o.type==="onplotreset"){delete this.angles;}return;}if(!o.shape||o.type!=="onmouseover"){return;}var _831={type:"rect"},_832=["after","before"];switch(o.element){case "marker":_831.x=o.cx;_831.y=o.cy;_831.width=_831.height=1;break;case "circle":_831.x=o.cx-o.cr;_831.y=o.cy-o.cr;_831.width=_831.height=2*o.cr;break;case "column":_832=["above","below"];case "bar":_831=_4.clone(o.shape.getShape());break;case "candlestick":_831.x=o.x;_831.y=o.y;_831.width=o.width;_831.height=o.height;break;default:if(!this.angles){if(typeof o.run.data[0]=="number"){this.angles=df.map(df.scanl(o.run.data,"+",0),"* 2 * Math.PI / this",df.foldl(o.run.data,"+",0));}else{this.angles=df.map(df.scanl(o.run.data,"a + b.y",0),"* 2 * Math.PI / this",df.foldl(o.run.data,"a + b.y",0));}}var _833=m._degToRad(o.plot.opt.startAngle),_834=(this.angles[o.index]+this.angles[o.index+1])/2+_833;_831.x=o.cx+o.cr*Math.cos(_834);_831.y=o.cy+o.cr*Math.sin(_834);_831.width=_831.height=1;if(_834<pi4){}else{if(_834<pi2+pi4){_832=["below","above"];}else{if(_834<Math.PI+pi4){_832=["before","after"];}else{if(_834<2*Math.PI-pi4){_832=["above","below"];}}}}break;}var lt=_4.coords(this.chart.node,true);_831.x+=lt.x;_831.y+=lt.y;_831.x=Math.round(_831.x);_831.y=Math.round(_831.y);_831.width=Math.ceil(_831.width);_831.height=Math.ceil(_831.height);this.aroundRect=_831;var _835=this.text(o);if(_835){_5.showTooltip(_835,this.aroundRect,_832);}}});})();}if(!_4._hasResource["esri.dijit.Popup"]){_4._hasResource["esri.dijit.Popup"]=true;_4.provide("esri.dijit.Popup");(function(){var dc=_6.charting,pk=dc.themes.PlotKit;pk.popup=pk.base.clone();pk.popup.chart.fill=pk.popup.plotarea.fill="#e7eef6";pk.popup.colors=["#284B70","#702828","#5F7143","#F6BC0C","#382C6C","#50224F","#1D7554","#4C4C4C","#0271AE","#706E41","#446A73","#0C3E69","#757575","#B7B7B7","#A3A3A3"];pk.popup.series.stroke.width=1;pk.popup.marker.stroke.width=1;}());_4.declare("esri.dijit.Popup",[esri.InfoWindowBase,esri.PopupBase],{offsetX:3,offsetY:3,zoomFactor:4,marginLeft:10,marginTop:10,highlight:true,constructor:function(_836,_837){this.initialize();_4.mixin(this,_836);this.domNode=_4.byId(_837);var nls=this._nls=_4.mixin({},esri.bundle.widgets.popup);var _838=this.domNode;_4.addClass(_838,"esriPopup");var _839="<div class='sizer'>"+"<div class='titlePane'>"+"<div class='spinner hidden' title='"+nls.NLS_searching+"...'></div>"+"<div class='title'></div>"+"<div class='titleButton prev hidden' title='"+nls.NLS_prevFeature+"'></div>"+"<div class='titleButton next hidden' title='"+nls.NLS_nextFeature+"'></div>"+"<div class='titleButton maximize' title='"+nls.NLS_maximize+"'></div>"+"<div class='titleButton close' title='"+nls.NLS_close+"'></div>"+"</div>"+"</div>"+"<div class='sizer content'>"+"<div class='contentPane'>"+"</div>"+"</div>"+"<div class='sizer'>"+"<div class='actionsPane'>"+"<div class='actionList hidden'>"+"<a class='action zoomTo' href='javascript:void(0);'>Zoom to</a>"+"</div>"+"</div>"+"</div>"+"<div class='pointer top hidden'></div>"+"<div class='pointer bottom hidden'></div>"+"<div class='pointer left hidden'></div>"+"<div class='pointer right hidden'></div>"+"<div class='pointer topLeft hidden'></div>"+"<div class='pointer topRight hidden'></div>"+"<div class='pointer bottomLeft hidden'></div>"+"<div class='pointer bottomRight hidden'></div>";_4.attr(_838,"innerHTML",_839);this._sizers=_4.query(".sizer",_838);var _83a=_4.query(".titlePane",_838)[0];_4.setSelectable(_83a,false);this._title=_4.query(".title",_83a)[0];this._prevFeatureButton=_4.query(".prev",_83a)[0];this._nextFeatureButton=_4.query(".next",_83a)[0];this._maxButton=_4.query(".maximize",_83a)[0];this._spinner=_4.query(".spinner",_83a)[0];this._contentPane=_4.query(".contentPane",_838)[0];this._actionList=_4.query(".actionsPane .actionList",_838)[0];this._eventConnections=[_4.connect(_4.query(".close",_83a)[0],"onclick",this,this.hide),_4.connect(this._prevFeatureButton,"onclick",this,this.selectPrevious),_4.connect(this._nextFeatureButton,"onclick",this,this.selectNext),_4.connect(this._maxButton,"onclick",this,this._toggleSize),_4.connect(_4.query(".zoomTo",this._actionList)[0],"onclick",this,this._zoomToFeature)];if(esri.isTouchEnabled){var _83b=esri.setScrollable(this._contentPane);this._eventConnections.push(_83b[0],_83b[1]);}esri.hide(_838);this.isShowing=false;},setMap:function(map){this.inherited(arguments);if(this.highlight){this.enableHighlight(map);}},unsetMap:function(){this.disableHighlight(this.map);this.inherited(arguments);},setTitle:function(_83c){this.destroyDijits(this._title);this.place(_83c,this._title);if(this.isShowing){this.startupDijits(this._title);}},setContent:function(_83d){this.destroyDijits(this._contentPane);this.place(_83d,this._contentPane);if(this.isShowing){this.startupDijits(this._contentPane);}},show:function(_83e){if(!_83e){esri.show(this.domNode);this.isShowing=true;return;}var map=this.map,_83f;if(_83e.spatialReference){this._location=_83e;_83f=map.toScreen(_83e);}else{this._location=map.toMap(_83e);_83f=_83e;}var _840=map._getFrameWidth();if(_840!==-1){_83f.x=_83f.x%_840;if(_83f.x<0){_83f.x+=_840;}if(map.width>_840){var _841=(map.width-_840)/2;while(_83f.x<_841){_83f.x+=_840;}}}if(this._maximized){this.restore();}else{this._setPosition(_83f);}if(!this.isShowing){esri.show(this.domNode);this.isShowing=true;this.onShow();}},hide:function(){if(this.isShowing){esri.hide(this.domNode);this.isShowing=false;this.onHide();}},resize:function(_842,_843){this._sizers.style({width:_842+"px"});_4.style(this._contentPane,"maxHeight",_843+"px");},onShow:function(){this._followMap();this.startupDijits(this._title);this.startupDijits(this._contentPane);this.showHighlight();},onHide:function(){this._unfollowMap();this.hideHighlight();},maximize:function(){var map=this.map;if(!map||this._maximized){return;}this._maximized=true;var max=this._maxButton;_4.removeClass(max,"maximize");_4.addClass(max,"restore");_4.attr(max,"title",this._nls.NLS_restore);var _844=this.marginLeft,_845=this.marginTop,_846=map.width-(2*_844),_847=map.height-(2*_845),_848=this.domNode;_4.style(_848,{left:_844+"px",right:null,top:_845+"px",bottom:null});this._savedWidth=_4.style(this._sizers[0],"width");this._savedHeight=_4.style(this._contentPane,"maxHeight");this._sizers.style({width:_846+"px"});_4.style(this._contentPane,{maxHeight:(_847-65)+"px",height:(_847-65)+"px"});this._showPointer("");this._unfollowMap();},restore:function(){var map=this.map;if(!map||!this._maximized){return;}this._maximized=false;var max=this._maxButton;_4.removeClass(max,"restore");_4.addClass(max,"maximize");_4.attr(max,"title",this._nls.NLS_maximize);_4.style(this._contentPane,"height",null);this.resize(this._savedWidth,this._savedHeight);this._savedWidth=this._savedHeight=null;this.show(this._location);this._followMap();},destroy:function(){if(this.map){this.unsetMap();}this.cleanup();if(this.isShowing){this.hide();}this.destroyDijits(this._title);this.destroyDijits(this._content);_4.forEach(this._eventConnections,_4.disconnect);_4.destroy(this.domNode);this._sizers=this._contentPane=this._actionList=this._title=this._prevFeatureButton=this._nextFeatureButton=this._spinner=this._eventConnections=this._pagerScope=this._targetLocation=this._nls=this._maxButton=null;},selectNext:function(){this.select(this.selectedIndex+1);},selectPrevious:function(){this.select(this.selectedIndex-1);},setFeatures:function(){this.inherited(arguments);this._updateUI();},onSetFeatures:function(){},onClearFeatures:function(){this.setTitle("&nbsp;");this.setContent("&nbsp;");this._setPagerCallbacks(this);this._updateUI();this.hideHighlight();},onSelectionChange:function(){var ptr=this.selectedIndex;this._updateUI();if(ptr>=0){this.setContent(this.features[ptr].getContent());this.updateHighlight(this.map,this.features[ptr]);if(this.isShowing){this.showHighlight();}}},onDfdComplete:function(){this._updateUI();},_followMap:function(){this._unfollowMap();var map=this.map;this._handles=[_4.connect(map,"onPanStart",this,this._onPanStart),_4.connect(map,"onPan",this,this._onPan),_4.connect(map,"onZoomStart",this,this._onZoomStart),_4.connect(map,"onExtentChange",this,this._onExtentChange)];},_unfollowMap:function(){var _849=this._handles;if(_849){_4.forEach(_849,_4.disconnect,_4);this._handles=null;}},_onPanStart:function(){var _84a=this.domNode.style;this._panOrigin={left:_84a.left,top:_84a.top,right:_84a.right,bottom:_84a.bottom};},_onPan:function(_84b,_84c){var _84d=this._panOrigin,dx=_84c.x,dy=_84c.y,left=_84d.left,top=_84d.top,_84e=_84d.right,_84f=_84d.bottom;if(left){left=(parseFloat(left)+dx)+"px";}if(top){top=(parseFloat(top)+dy)+"px";}if(_84e){_84e=(parseFloat(_84e)-dx)+"px";}if(_84f){_84f=(parseFloat(_84f)-dy)+"px";}_4.style(this.domNode,{left:left,top:top,right:_84e,bottom:_84f});},_onZoomStart:function(){esri.hide(this.domNode);},_onExtentChange:function(_850,_851,_852){if(_852){esri.show(this.domNode);}this.show(this._targetLocation||this._location);this._targetLocation=null;},_toggleSize:function(){if(this._maximized){this.restore();}else{this.maximize();}},_setPosition:function(_853){var posX=_853.x,posY=_853.y,offX=this.offsetX||0,offY=this.offsetY||0,_854=0,_855=_4.contentBox(this.map.container),_856=_855.w,_857=_855.h,_858="Right",_859="top",_85a="Left",_85b="bottom";if(posX<=_856/2){_858="Right";_85a="Left";}else{if(posX<=_856){_858="Left";_85a="Right";}}if(posY<=_857/2){_859="bottom";_85b="top";}else{if(posY<=_857){_859="top";_85b="bottom";}}var _85c=_859+_858,_85d=_85b+_85a;this._showPointer(_85d);switch(_85d){case "topLeft":case "topRight":case "bottomLeft":case "bottomRight":_854=45;break;}switch(_85c){case "topLeft":_4.style(this.domNode,{left:null,right:(_856-posX+offX)+"px",top:null,bottom:(_857-posY+_854+offY)+"px"});break;case "topRight":_4.style(this.domNode,{left:(posX+offX)+"px",right:null,top:null,bottom:(_857-posY+_854+offY)+"px"});break;case "bottomLeft":_4.style(this.domNode,{left:null,right:(_856-posX+offX)+"px",top:(posY+_854+offY)+"px",bottom:null});break;case "bottomRight":_4.style(this.domNode,{left:(posX+offX)+"px",right:null,top:(posY+_854+offY)+"px",bottom:null});break;}},_showPointer:function(_85e){var _85f=["topLeft","topRight","bottomRight","bottomLeft"];_4.forEach(_85f,function(ptr){if(ptr===_85e){_4.query(".pointer."+ptr,this.domNode).removeClass("hidden");}else{_4.query(".pointer."+ptr,this.domNode).addClass("hidden");}},this);},_setPagerCallbacks:function(_860,_861,_862){if(_860===this&&(!this._pagerScope||this._pagerScope===this)){return;}if(_860===this._pagerScope){return;}this._pagerScope=_860;if(_860===this){_861=this.selectPrevious;_862=this.selectNext;}var _863=this._eventConnections;_4.disconnect(_863[1]);_4.disconnect(_863[2]);if(_861){_863[1]=_4.connect(this._prevFeatureButton,"onclick",_860,_861);}if(_862){_863[2]=_4.connect(this._nextFeatureButton,"onclick",_860,_862);}},_zoomToFeature:function(){var _864=this.features,ptr=this.selectedIndex,map=this.map;if(_864){var _865=_864[ptr].geometry,_866,_867,_868=0,_869;if(_865){switch(_865.type){case "point":_866=_865;break;case "multipoint":_866=_865.getPoint(0);_867=_865.getExtent();break;case "polyline":_866=_865.getPoint(0,0);_867=_865.getExtent();if(map._getFrameWidth()!==-1){_4.forEach(_865.paths,function(path){var _86a={"paths":[path,map.spatialReference]},_86b=new esri.geometry.Polyline(_86a),_86c=_86b.getExtent(),_86d=Math.abs(_86c.ymax-_86c.ymin),_86e=Math.abs(_86c.xmax-_86c.xmin),_86f=(_86e>_86d)?_86e:_86d;if(_86f>_868){_868=_86f;_869=_86c;}});_867=_869;}break;case "polygon":_866=_865.getPoint(0,0);_867=_865.getExtent();if(map._getFrameWidth()!==-1){_4.forEach(_865.rings,function(ring){var _870={"rings":[ring,map.spatialReference]},_871=new esri.geometry.Polygon(_870),_872=_871.getExtent(),_873=Math.abs(_872.ymax-_872.ymin),_874=Math.abs(_872.xmax-_872.xmin),_875=(_874>_873)?_874:_873;if(_875>_868){_868=_875;_869=_872;}});_867=_869;}break;}}if(!_866){_866=this._location;}if(!_867||!_867.intersects(this._location)){this._location=_866;}if(_867){map.setExtent(_867,true);}else{var _876=map.getNumLevels(),_877=map.getLevel(),last=_876-1,_878=this.zoomFactor||1;if(_876>0){if(_877===last){return;}var _879=_877+_878;if(_879>last){_879=last;}map._scrollZoomHandler({value:(_879-_877),mapPoint:_866});}else{map._scrollZoomHandler({value:(1/Math.pow(2,_878))*2,mapPoint:_866});}}}},_updateUI:function(){var _87a="&nbsp;",ptr=this.selectedIndex,_87b=this.features,_87c=this.deferreds,prev=this._prevFeatureButton,next=this._nextFeatureButton,_87d=this._spinner,_87e=this._actionList,nls=this._nls;if(_87b&&_87b.length>1){_87a="("+(ptr+1)+" of "+_87b.length+")";if(ptr===0){_4.addClass(prev,"hidden");}else{_4.removeClass(prev,"hidden");}if(ptr===_87b.length-1){_4.addClass(next,"hidden");}else{_4.removeClass(next,"hidden");}}else{_4.addClass(prev,"hidden");_4.addClass(next,"hidden");}this.setTitle(_87a);if(_87c&&_87c.length){if(_87b){_4.removeClass(_87d,"hidden");}else{this.setContent("<div style='text-align: center;'>"+nls.NLS_searching+"...</div>");}}else{_4.addClass(_87d,"hidden");if(!_87b||!_87b.length){this.setContent("<div style='text-align: center;'>"+nls.NLS_noInfo+".</div>");}}if(_87b&&_87b.length){_4.removeClass(_87e,"hidden");}else{_4.addClass(_87e,"hidden");}}});_4.declare("esri.dijit.PopupTemplate",[esri.PopupInfoTemplate],{constructor:function(json){this.initialize(json);this._nls=_4.mixin({},esri.bundle.widgets.popup);},getTitle:function(_87f){return this.info?this.getComponents(_87f).title:"";},getContent:function(_880){return this.info?new esri.dijit._PopupRenderer({template:this,graphic:_880,_nls:this._nls},_4.create("div")).domNode:"";}});_4.declare("esri.dijit._PopupRenderer",[_5._Widget,_5._Templated],{templateString:"<div class='esriViewPopup'>"+"<div class='mainSection'>"+"<div class='header' dojoAttachPoint='_title'></div>"+"<div class='hzLine'></div>"+"<div dojoAttachPoint='_description'></div>"+"<div class='break'></div>"+"</div>"+"<div class='attachmentsSection hidden'>"+"<div>Attachments:</div>"+"<ul dojoAttachPoint='_attachmentsList'>"+"</ul>"+"<div class='break'></div>"+"</div>"+"<div class='mediaSection hidden'>"+"<div class='header' dojoAttachPoint='_mediaTitle'></div>"+"<div class='hzLine'></div>"+"<div class='caption' dojoAttachPoint='_mediaCaption'></div>"+"<div class='gallery' dojoAttachPoint='_gallery'>"+"<div class='mediaHandle prev' dojoAttachPoint='_prevMedia' dojoAttachEvent='onclick: _goToPrevMedia'></div>"+"<div class='mediaHandle next' dojoAttachPoint='_nextMedia' dojoAttachEvent='onclick: _goToNextMedia'></div>"+"<ul class='summary'>"+"<li class='image mediaCount hidden' dojoAttachPoint='_imageCount'>0</li>"+"<li class='image mediaIcon hidden'></li>"+"<li class='chart mediaCount hidden' dojoAttachPoint='_chartCount'>0</li>"+"<li class='chart mediaIcon hidden'></li>"+"</ul>"+"<div class='frame' dojoAttachPoint='_mediaFrame'></div>"+"</div>"+"</div>"+"</div>",startup:function(){this.inherited(arguments);var _881=this.template,_882=this.graphic,_883=_881.getComponents(_882),_884=_883.title,_885=_883.description,_886=_883.fields,_887=_883.mediaInfos,_888=this.domNode,nls=this._nls;this._prevMedia.title=nls.NLS_prevMedia;this._nextMedia.title=nls.NLS_nextMedia;_4.attr(this._title,"innerHTML",_884);if(!_884){_4.addClass(this._title,"hidden");}if(!_885&&_886){_885="";_4.forEach(_886,function(row){_885+=("<tr valign='top'>");_885+=("<td class='attrName'>"+row[0]+"</td>");_885+=("<td class='attrValue'>"+row[1].replace(/^\s*(https?:\/\/[^\s]+)\s*$/i,"<a target='_blank' href='$1' title='$1'>More info</a>")+"</td>");_885+=("</tr>");});if(_885){_885="<table class='attrTable' cellpadding='0px' cellspacing='0px'>"+_885+"</table>";}}_4.attr(this._description,"innerHTML",_885);if(!_885){_4.addClass(this._description,"hidden");}_4.query("a",this._description).forEach(function(node){_4.attr(node,"target","_blank");});if(_884&&_885){_4.query(".mainSection .hzLine",_888).removeClass("hidden");}else{if(_884||_885){_4.query(".mainSection .hzLine",_888).addClass("hidden");}else{_4.query(".mainSection",_888).addClass("hidden");}}var dfd=(this._dfd=_881.getAttachments(_882));if(dfd){dfd.addBoth(_4.hitch(this,this._attListHandler,dfd));_4.attr(this._attachmentsList,"innerHTML","<li>"+nls.NLS_searching+"...</li>");_4.query(".attachmentsSection",_888).removeClass("hidden");}if(_887&&_887.length){_4.query(".mediaSection",_888).removeClass("hidden");_4.setSelectable(this._mediaFrame,false);this._mediaInfos=_887;this._mediaPtr=0;this._updateUI();this._displayMedia();}},destroy:function(){if(this._dfd){this._dfd.cancel();}this._destroyFrame();this.template=this.graphic=this._nls=this._mediaInfos=this._mediaPtr=this._dfd=null;this.inherited(arguments);},_goToPrevMedia:function(){var ptr=this._mediaPtr-1;if(ptr<0){return;}this._mediaPtr--;this._updateUI();this._displayMedia();},_goToNextMedia:function(){var ptr=this._mediaPtr+1;if(ptr===this._mediaInfos.length){return;}this._mediaPtr++;this._updateUI();this._displayMedia();},_updateUI:function(){var _889=this._mediaInfos,_88a=_889.length,_88b=this.domNode,_88c=this._prevMedia,_88d=this._nextMedia;if(_88a>1){var _88e=0,_88f=0;_4.forEach(_889,function(info){if(info.type==="image"){_88e++;}else{if(info.type.indexOf("chart")!==-1){_88f++;}}});if(_88e){_4.attr(this._imageCount,"innerHTML",_88e);_4.query(".summary .image",_88b).removeClass("hidden");}if(_88f){_4.attr(this._chartCount,"innerHTML",_88f);_4.query(".summary .chart",_88b).removeClass("hidden");}}else{_4.query(".summary",_88b).addClass("hidden");_4.addClass(_88c,"hidden");_4.addClass(_88d,"hidden");}var ptr=this._mediaPtr;if(ptr===0){_4.addClass(_88c,"hidden");}else{_4.removeClass(_88c,"hidden");}if(ptr===_88a-1){_4.addClass(_88d,"hidden");}else{_4.removeClass(_88d,"hidden");}this._destroyFrame();},_displayMedia:function(){var info=this._mediaInfos[this._mediaPtr],_890=info.title,_891=info.caption,_892=_4.query(".mediaSection .hzLine",this.domNode)[0];_4.attr(this._mediaTitle,"innerHTML",_890);_4[_890?"removeClass":"addClass"](this._mediaTitle,"hidden");_4.attr(this._mediaCaption,"innerHTML",_891);_4[_891?"removeClass":"addClass"](this._mediaCaption,"hidden");_4[(_890&&_891)?"removeClass":"addClass"](_892,"hidden");if(info.type==="image"){this._showImage(info.value);}else{this._showChart(info.type,info.value);}},_showImage:function(_893){_4.addClass(this._mediaFrame,"image");var _894=_4.style(this._gallery,"height"),html="<img src='"+_893.sourceURL+"' onload='esri.dijit._PopupRenderer.prototype._imageLoaded(this,"+_894+");' />";if(_893.linkURL){html="<a target='_blank' href='"+_893.linkURL+"'>"+html+"</a>";}_4.attr(this._mediaFrame,"innerHTML",html);},_showChart:function(type,_895){_4.removeClass(this._mediaFrame,"image");var _896=this._chart=new _6.charting.Chart2D(_4.create("div",{"class":"chart"},this._mediaFrame),{margins:{l:4,t:4,r:4,b:4}});_896.setTheme(_4.getObject("dojox.charting.themes."+(_895.theme||"PlotKit.popup")));switch(type){case "piechart":_896.addPlot("default",{type:"Pie",labels:false});_896.addSeries("Series A",_895.fields);break;case "linechart":_896.addPlot("default",{type:"Markers"});_896.addAxis("x",{min:0,majorTicks:false,minorTicks:false,majorLabels:false,minorLabels:false});_896.addAxis("y",{includeZero:true,vertical:true,fixUpper:"minor"});_4.forEach(_895.fields,function(info,idx){info.x=idx+1;});_896.addSeries("Series A",_895.fields);break;case "columnchart":_896.addPlot("default",{type:"Columns",gap:3});_896.addAxis("y",{includeZero:true,vertical:true,fixUpper:"minor"});_896.addSeries("Series A",_895.fields);break;case "barchart":_896.addPlot("default",{type:"Bars",gap:3});_896.addAxis("x",{includeZero:true,fixUpper:"minor",minorLabels:false});_896.addAxis("y",{vertical:true,majorTicks:false,minorTicks:false,majorLabels:false,minorLabels:false});_896.addSeries("Series A",_895.fields);break;}this._action=new _6.charting.action2d.Tooltip(_896);_896.render();},_destroyFrame:function(){if(this._chart){this._chart.destroy();this._chart=null;}if(this._action){this._action.destroy();this._action=null;}_4.attr(this._mediaFrame,"innerHTML","");},_imageLoaded:function(img,_897){var _898=img.height;if(_898<_897){var diff=Math.round((_897-_898)/2);_4.style(img,"marginTop",diff+"px");}},_attListHandler:function(dfd,_899){if(dfd===this._dfd){this._dfd=null;var html="";if(!(_899 instanceof Error)&&_899&&_899.length){_4.forEach(_899,function(info){html+=("<li>");html+=("<a href='"+info.url+"' target='_blank'>"+(info.name||"[No name]")+"</a>");html+=("</li>");});}_4.attr(this._attachmentsList,"innerHTML",html||"<li>"+this._nls.NLS_noAttach+"</li>");}}});}if(!_4._hasResource["esri.layers.KMLLayer"]){_4._hasResource["esri.layers.KMLLayer"]=true;_4.provide("esri.layers.KMLLayer");_4.declare("esri.layers.KMLLayer",[esri.layers.Layer],{serviceUrl:"http://utility.arcgis.com/sharing/kml",constructor:function(url,_89a){if(!url){console.log("KMLLayer:constructor - please provide url for the KML file");}this._outSR=null;if(_89a&&_89a.outSR){this._outSR=_89a.outSR;this._outSR=(this._outSR)?this._outSR.wkid:null;}this._options=_89a;if(esri.config.defaults.kmlService){this.serviceUrl=esri.config.defaults.kmlService;}var link=(this.linkInfo=_89a&&_89a.linkInfo);if(link){this.visible=!!link.visibility;}if(!link||(link&&link.visibility)){this._parseKml();}},getFeature:function(_89b){if(!_89b){return;}var type=_89b.type,id=_89b.id,_89c,i,len;switch(type){case "esriGeometryPoint":case "esriGeometryPolyline":case "esriGeometryPolygon":var _89d=this["_"+type];if(_89d){_89c=_4.getObject("_mode._featureMap."+id,false,_89d);}break;case "GroundOverlay":var _89e=this._groundLyr;if(_89e){var _89f=_89e.getImages();len=_89f.length;for(i=0;i<len;i++){if(_89f[i].id===id){_89c=_89f[i];break;}}}break;case "ScreenOverlay":break;case "NetworkLink":_4.some(this._links,function(link){if(link.linkInfo.id===id){_89c=link;return true;}else{return false;}});break;case "Folder":var _8a0=this.folders;len=_8a0?_8a0.length:0;for(i=0;i<len;i++){if(_8a0[i].id===id){_89c=_8a0[i];break;}}break;default:console.log("KMLLayer:getFeature - unknown feature type");break;}return _89c;},getLayers:function(){var _8a1=[];if(this._groundLyr){_8a1.push(this._groundLyr);}if(this._fLayers){_8a1=_8a1.concat(this._fLayers);}return _8a1;},setFolderVisibility:function(_8a2,_8a3){if(!_8a2){return;}_8a2.visible=_8a3;if(_8a3){var _8a4=this._getParentFolders(_8a2,[]);if(_8a4.length>0){_8a3=_4.every(_8a4,function(_8a5){return _8a5.visible;});}}this._setState(_8a2,_8a3);},_parseKml:function(){var self=this;esri.request({url:this.serviceUrl,content:{url:this.url,model:"simple",folders:"",outSR:this._outSR},callbackParamName:"callback",load:function(_8a6){self._initLayer(_8a6);},error:function(err){self.onError("Error reading kml document. ("+_4.toJson(err)+")");}});},_initLayer:function(json){this.name=json.name;this.description=json.description;this.snippet=json.snippet;this.visibility=json.visibility;this.featureInfos=json.featureInfos;var i,len;var _8a7=(this._links=json.networkLinks);len=_8a7?_8a7.length:0;var _8a8=this;for(i=0;i<len;i++){var _8a9={linkInfo:_8a7[i]};_8a9=_4.mixin(_8a9,this._options);if(_8a9.id){_8a9.id=_8a9.id+"_"+i;}if(_8a7[i].viewRefreshMode==="never"){_8a7[i]=new esri.layers.KMLLayer(_8a7[i].href,_8a9);_4.connect(_8a7[i],"onLoad",function(a){_8a8._map.addLayer(a);});}}var _8aa=json.groundOverlays;if(_8aa&&_8aa.length>0){var _8a9=_4.mixin({},this._options);if(_8a9.id){_8a9.id=_8a9.id+"_"+"mapImage";}var _8ab=(this._groundLyr=new esri.layers.MapImageLayer(_8a9));len=_8aa.length;for(i=0;i<len;i++){_8ab.addImage(new esri.layers.KMLGroundOverlay(_8aa[i]));}}var _8ac=_4.getObject("featureCollection.layers",false,json);if(_8ac&&_8ac.length>0){this._fLayers=[];_4.forEach(_8ac,function(_8ad,i){var _8ae=_4.getObject("featureSet.features",false,_8ad),_8af;if(_8ae&&_8ae.length>0){_8ad.layerDefinition.capabilities="Query,Data";var _8b0={outFields:["*"],infoTemplate:_8ad.popupInfo?new esri.dijit.PopupTemplate(_8ad.popupInfo):null,editable:false};_8b0=_4.mixin(_8b0,this._options);if(_8b0.id){_8b0.id=_8b0.id+"_"+i;}_8af=new esri.layers.FeatureLayer(_8ad,_8b0);if(_8af.geometryType){this["_"+_8af.geometryType]=_8af;}this._fLayers.push(_8af);}},this);if(this._fLayers.length===0){delete this._fLayers;}}var _8b1=(this.folders=json.folders),_8b2=[],fldr;if(_8b1){len=_8b1.length;for(i=0;i<len;i++){fldr=(_8b1[i]=new esri.layers.KMLFolder(_8b1[i]));if(fldr.parentFolderId===-1){_8b2.push(fldr);}}}len=_8b2.length;for(i=0;i<len;i++){fldr=_8b2[i];this._setState(fldr,fldr.visible);}this.loaded=true;this.onLoad(this);},_setState:function(_8b3,_8b4){var _8b5=_8b3.featureInfos,info,_8b6,i,len=_8b5?_8b5.length:0,_8b7=_8b4?"show":"hide";for(i=0;i<len;i++){info=_8b5[i];_8b6=this.getFeature(info);if(!_8b6){continue;}if(info.type==="Folder"){this._setState(_8b6,_8b4&&_8b6.visible);}else{_8b6[_8b7]();}}},_getParentFolders:function(_8b8,_8b9){var _8ba=_8b8.parentFolderId;if(_8ba!==-1){var _8bb=this.getFeature({type:"Folder",id:_8ba});_8b9.push(_8bb);return this._getParentFolders(_8bb,_8b9);}return _8b9;},_setMap:function(map,_8bc){this._map=map;var div=this._div=_4.create("div",null,_8bc);_4.style(div,"position","absolute");if(this._groundLyr){var _8bd=map.spatialReference._isWebMercator();if(_8bd){var _8be=esri.geometry.geographicToWebMercator;_4.forEach(this._groundLyr.getImages(),function(_8bf){_8bf.extent=_8be(_8bf.extent);});}map.addLayer(this._groundLyr,map.layerIds.length);}var _8c0=this._fLayers;if(_8c0&&_8c0.length>0){var _8bd=map.spatialReference._isWebMercator();_4.forEach(_8c0,function(_8c1){if(_8bd){var _8c2=_8c1.graphics,i,geom,len=_8c2?_8c2.length:0,_8be=esri.geometry.geographicToWebMercator;for(i=0;i<len;i++){geom=_8c2[i].geometry;if(geom){_8c2[i].setGeometry(_8be(geom));}}}map.addLayer(_8c1);});}this.onVisibilityChange(this.visible);return div;},_unsetMap:function(map,_8c3){if(this._groundLyr){map.removeLayer(this._groundLyr);}if(this._fLayers){_4.forEach(this._fLayers,function(_8c4){map.removeLayer(_8c4);});}var div=this._div;if(div){_8c3.removeChild(div);_4.destroy(div);}this._map=this._div=null;},onVisibilityChange:function(_8c5){var _8c6=_8c5?"show":"hide";if(_8c5&&this.linkInfo&&!this.loaded){this._parseKml();}else{if(this._groundLyr){this._groundLyr[_8c6]();}if(this._fLayers){_4.forEach(this._fLayers,function(_8c7){_8c7[_8c6]();});}}}});_4.declare("esri.layers.KMLGroundOverlay",[esri.layers.MapImage],{constructor:function(json){if(esri._isDefined(this.visibility)){this.visible=!!this.visibility;}}});_4.declare("esri.layers.KMLFolder",null,{constructor:function(json){_4.mixin(this,json);if(esri._isDefined(this.visibility)){this.visible=!!this.visibility;}}});}if(!_4._hasResource["esri.layers.wms"]){_4._hasResource["esri.layers.wms"]=true;_4.provide("esri.layers.wms");_4.declare("esri.layers.WMSLayer",[esri.layers.DynamicMapServiceLayer],{_CRS_TO_EPSG:{84:4326,83:4269,27:4267},_REVERSED_LAT_LONG_RANGES:[[4001,4999],[2044,2045],[2081,2083],[2085,2086],[2093,2093],[2096,2098],[2105,2132],[2169,2170],[2176,2180],[2193,2193],[2200,2200],[2206,2212],[2319,2319],[2320,2462],[2523,2549],[2551,2735],[2738,2758],[2935,2941],[2953,2953],[3006,3030],[3034,3035],[3058,3059],[3068,3068],[3114,3118],[3126,3138],[3300,3301],[3328,3335],[3346,3346],[3350,3352],[3366,3366],[3416,3416],[20004,20032],[20064,20092],[21413,21423],[21473,21483],[21896,21899],[22171,22177],[22181,22187],[22191,22197],[25884,25884],[27205,27232],[27391,27398],[27492,27492],[28402,28432],[28462,28492],[30161,30179],[30800,30800],[31251,31259],[31275,31279],[31281,31290],[31466,31700]],_WEB_MERCATOR:[102100,3857,102113,900913],_WORLD_MERCATOR:[3395,54004],allExtents:[],constructor:function(url,_8c8){this._getCapabilitiesURL=url;this._initLayer=_4.hitch(this,this._initLayer);this._parseCapabilities=_4.hitch(this,this._parseCapabilities);this._getCapabilitiesError=_4.hitch(this,this._getCapabilitiesError);if(_8c8){this.imageFormat=this._getImageFormat(_8c8.format);this.imageTransparency=(_8c8.transparent===false)?false:true;this.visibleLayers=_8c8.visibleLayers?_8c8.visibleLayers:[];if(_8c8.resourceInfo){this._readResourceInfo(_8c8.resourceInfo);}else{this._getCapabilities();}}else{this.imageFormat="image/png";this.imageTransparency=true;this.visibleLayers=[];this._getCapabilities();}this._blankImageURL=_4.moduleUrl("esri","../../images/pixel.png").uri;},setVisibleLayers:function(_8c9){_8c9=this._checkVisibleLayersList(_8c9);this.visibleLayers=(_8c9)?_8c9:[];this.refresh(true);},setImageFormat:function(_8ca){this.imageFormat=this._getImageFormat(_8ca);this.refresh(true);},setImageTransparency:function(_8cb){this.imageTransparency=_8cb;this.refresh(true);},getImageUrl:function(_8cc,_8cd,_8ce,_8cf){if(!this.visibleLayers||this.visibleLayers.length===0){_8cf(this._blankImageURL);return;}var wkid=_8cc.spatialReference.wkid;if(_4.some(this._WEB_MERCATOR,function(el){return el==wkid;})){var _8d0=_4.filter(this.spatialReferences,function(el){return (_4.some(this._WEB_MERCATOR,function(el2){return el2==el;}));},this);if(_8d0.length==0){_8d0=_4.filter(this.spatialReferences,function(el){return (_4.some(this._WORLD_MERCATOR,function(el2){return el2==el;}));},this);}if(_8d0.length>0){wkid=_8d0[0];}else{wkid=this._WEB_MERCATOR[0];}}var list=_4.filter(this.spatialReferences,function(el){return el!==wkid;});this.spatialReferences=list;this.spatialReferences.unshift(wkid);var xmin=_8cc.xmin;var xmax=_8cc.xmax;var ymin=_8cc.ymin;var ymax=_8cc.ymax;var _8d1={};_8d1.SERVICE="WMS";_8d1.REQUEST="GetMap";_8d1.FORMAT=this.imageFormat;_8d1.TRANSPARENT=this.imageTransparency?"TRUE":"FALSE";_8d1.STYLES="";_8d1.VERSION=this.version;_8d1.LAYERS=this.visibleLayers?this.visibleLayers.toString():null;_8d1.WIDTH=_8cd;_8d1.HEIGHT=_8ce;if(this.maxWidth<_8cd){_8d1.WIDTH=this.maxWidth;}if(this.maxHeight<_8ce){_8d1.HEIGHT=this.maxHeight;}var _8d2=wkid?wkid:NaN;if(!isNaN(_8d2)){if(this.version=="1.3.0"){_8d1.CRS="EPSG:"+_8d2;}else{_8d1.SRS="EPSG:"+_8d2;}}if(this.version=="1.3.0"&&this._useLatLong(_8d2)){_8d1.BBOX=ymin+","+xmin+","+ymax+","+xmax;}else{_8d1.BBOX=xmin+","+ymin+","+xmax+","+ymax;}var _8d3=this.getMapURL;_8d3+=(_8d3.indexOf("?")==-1)?"?":"";for(var key in _8d1){_8d3+=(_8d3.substring(_8d3.length-1,_8d3.length)=="?")?"":"&";_8d3+=key+"="+_8d1[key];}_8cf(_8d3);},_initLayer:function(_8d4,io){this.spatialReference=new esri.SpatialReference(this.extent.spatialReference);this.initialExtent=new esri.geometry.Extent(this.extent);this.fullExtent=new esri.geometry.Extent(this.extent);this.visibleLayers=this._checkVisibleLayersList(this.visibleLayers);this.loaded=true;this.onLoad(this);var _8d5=this._loadCallback;if(_8d5){delete this._loadCallback;_8d5(this);}},_readResourceInfo:function(_8d6){if(!_8d6.extent){console.error("esri.layers.WMSLayer: unable to find the 'extent' property in resourceInfo");return;}if(!_8d6.layerInfos){console.error("esri.layers.WMSLayer: unable to find the 'layerInfos' property in resourceInfo");return;}this.extent=_8d6.extent;this.layerInfos=_8d6.layerInfos;this.description=_8d6.description?_8d6.description:"";this.copyright=_8d6.copyright?_8d6.copyright:"";this.title=_8d6.title?_8d6.title:"";this.getMapURL=_8d6.getMapURL?_8d6.getMapURL:this._getCapabilitiesURL;this.version=_8d6.version?_8d6.version:"1.3.0";this.maxWidth=_8d6.maxWidth?_8d6.maxWidth:5000;this.maxHeight=_8d6.maxHeight?_8d6.maxHeight:5000;this.spatialReferences=_8d6.spatialReferences?_8d6.spatialReferences:[];this._initLayer();},_getCapabilities:function(){var _8d7=this._url.query?this._url.query:{};_8d7.SERVICE="WMS";_8d7.REQUEST="GetCapabilities";var uri=this._url.path+"?";for(var key in _8d7){uri+=(uri.substring(uri.length-1,uri.length)=="?")?"":"&";uri+=key+"="+_8d7[key];}var _8d8=esri.request({url:uri,handleAs:"xml",load:this._parseCapabilities,error:this._getCapabilitiesError},{usePost:false});},_parseCapabilities:function(xml){if(!xml){this.onError("GetCapabilities request for "+this._getCapabilitiesURL+" failed. (Response is null.)");return;}this.version=this._getAttributeValue("WMS_Capabilities","version",xml,null);if(!this.version){this.version=this._getAttributeValue("WMT_MS_Capabilities","version",xml,"1.3.0");}var _8d9=this._getTag("Service",xml);this.title=this._getTagValue("Title",_8d9,"");if(this.title.length==0){this.title=this._getTagValue("Name",_8d9,"");}this.copyright=this._getTagValue("AccessConstraints",_8d9,"");this.description=this._getTagValue("Abstract",_8d9,"");this.maxWidth=parseInt(this._getTagValue("MaxWidth",_8d9,5000));this.maxHeight=parseInt(this._getTagValue("MaxHeight",_8d9,5000));var _8da=this._getTag("Layer",xml);if(!_8da){this._getCapabilitiesError({"error":{"message":"Response does not contain any layers."}});return;}var _8db=this._getLayerInfo(_8da);if(_8db){this.layerInfos=_8db.subLayers;this.extent=_8db.extent;this.spatialReferences=_8db.spatialReferences;this.allExtents=_8db.allExtents;}this.getMapURL=this._getCapabilitiesURL;var _8dc=_4.query("DCPType",this._getTag("GetMap",xml));if(_8dc&&_8dc.length>0){var _8dd=_4.query("HTTP",_8dc[0]);if(_8dd&&_8dd.length>0){var _8de=_4.query("Get",_8dd[0]);if(_8de&&_8de.length>0){var _8df=this._getAttributeValue("OnlineResource","xlink:href",_8de[0],null);if(_8df){if(_8df.indexOf("&")==(_8df.length-1)){_8df=_8df.substring(0,_8df.length-1);}this.getMapURL=_8df;}}}}this.getMapFormats=[];_4.forEach(_4.query("Format",this._getTag("GetMap",xml)),function(_8e0){if(_4.isIE){this.getMapFormats.push(_8e0.text);}else{this.getMapFormats.push(_8e0.textContent);}},this);this._initLayer();},_getCapabilitiesError:function(_8e1,io){this.onError("GetCapabilities request for "+this._getCapabilitiesURL+" failed. ("+_4.toJson(_8e1)+")");},_getLayerInfo:function(_8e2){var _8e3;if(_8e2){_8e3=new esri.layers.WMSLayerInfo();_8e3.name="";_8e3.title="";_8e3.description="";_4.forEach(_8e2.childNodes,function(_8e4){if(_8e4.nodeName=="Name"){_8e3.name=(_4.isIE?_8e4.text:_8e4.textContent)||"";}else{if(_8e4.nodeName=="Title"){_8e3.title=(_4.isIE?_8e4.text:_8e4.textContent)||"";}else{if(_8e4.nodeName=="Abstract"){_8e3.description=(_4.isIE?_8e4.text:_8e4.textContent)||"";}}}},this);_8e3.allExtents=[];var _8e5=this._getTag("LatLonBoundingBox",_8e2);if(_8e5){_8e3.allExtents[0]=this._getExtent(_8e5,4326);}var _8e6=this._getTag("EX_GeographicBoundingBox",_8e2);if(_8e6){var _8e7=new esri.geometry.Extent(0,0,0,0,new esri.SpatialReference({wkid:4326}));_8e7.xmin=parseFloat(this._getTagValue("westBoundLongitude",_8e6,0));_8e7.ymin=parseFloat(this._getTagValue("southBoundLatitude",_8e6,0));_8e7.xmax=parseFloat(this._getTagValue("eastBoundLongitude",_8e6,0));_8e7.ymax=parseFloat(this._getTagValue("northBoundLatitude",_8e6,0));_8e3.allExtents[0]=_8e7;}var _8e8=_4.query("BoundingBox",_8e2);if(_8e8.length===0){_8e3.extent=_8e3.allExtents[0];}else{var _8e9=(this.version=="1.3.0")?"CRS":"SRS";var bb,_8ea,wkid;for(var i=0;i<_8e8.length;i++){bb=_8e8[i];var tag=bb.parentNode.nodeName;if(tag!=="Layer"){continue;}var name="";var _8eb="";_4.forEach(bb.parentNode.childNodes,function(_8ec){if(_8ec.nodeName=="Name"){name=(_4.isIE?_8ec.text:_8ec.textContent)||"";}if(_8ec.nodeName=="Title"){_8eb=(_4.isIE?_8ec.text:_8ec.textContent)||"";}},this);if(name!==_8e3.name||_8eb!==_8e3.title){continue;}_8ea=bb.getAttribute(_8e9);if(_8ea&&_8ea.indexOf("EPSG:")===0){wkid=parseInt(_8ea.substring(5));if(wkid==0){continue;}var _8e7;if(this.version=="1.3.0"){_8e7=this._getExtent(bb,wkid,this._useLatLong(wkid));}else{_8e7=this._getExtent(bb,wkid);}_8e3.allExtents[wkid]=_8e7;if(!_8e3.extent){_8e3.extent=_8e7;}}else{if(_8ea&&_8ea.indexOf("CRS:")===0){wkid=parseInt(_8ea.substring(4));if(wkid==0){continue;}if(this._CRS_TO_EPSG[wkid]){wkid=this._CRS_TO_EPSG[wkid];}_8e3.allExtents[wkid]=this._getExtent(bb,wkid);}else{wkid=parseInt(_8ea);_8e3.allExtents[wkid]=this._getExtent(bb,wkid);}}}if(!_8e3.extent){bb=_8e8[0];_8ea=bb.getAttribute(_8e9)[0];if(_8ea){if(_8ea.indexOf("CRS:")===0){wkid=parseInt(_8ea.substring(4));if(this._CRS_TO_EPSG[wkid]){wkid=this._CRS_TO_EPSG[wkid];}_8e3.extent=_8e3.allExtents[wkid];}else{wkid=parseInt(_8ea);_8e3.extent=_8e3.allExtents[wkid];}}}}if(!_8e3.extent){_8e3.extent=_8e3.allExtents[0];}_8e3.spatialReferences=[];var _8ed=(this.version=="1.3.0")?"CRS":"SRS";_4.forEach(_4.query(_8ed,_8e2),function(crs){var _8ee;if(_4.isIE){_8ee=crs.text;}else{_8ee=crs.textContent;}var arr=_8ee.split(" ");_4.forEach(arr,function(val){if(val.indexOf(":")>-1){val=parseInt(val.split(":")[1]);}else{val=parseInt(val);}if(val!=84&&val!=0){if(!_4.some(_8e3.spatialReferences,function(el){return el==val;})){_8e3.spatialReferences.push(val);}}});},this);var _8ef=this._getTag("Style",_8e2);if(_8ef){var _8f0=this._getTag("LegendURL",_8ef);if(_8f0){var _8f1=this._getTag("OnlineResource",_8f0);if(_8f1){_8e3.legendURL=_8f1.getAttribute("xlink:href");}}}var _8f2=_4.query("Layer",_8e2);var _8f3="||";if(_8f2.length>0){_8e3.subLayers=[];_4.forEach(_8f2,function(_8f4){var l=this._getLayerInfo(_8f4);if(l.subLayers&&l.subLayers.length>0&&l.name===l.subLayers[0].name){l.name=null;}if(_8f3.indexOf("||"+l.name+"||")==-1){_8e3.subLayers.push(l);if(l.subLayers&&l.subLayers.length>0){_4.forEach(l.subLayers,function(_8f5){_8f3+=_8f5.name+"||";},this);}}},this);}}return _8e3;},_getImageFormat:function(_8f6){var _8f7=_8f6?_8f6.toLowerCase():"";switch(_8f7){case "jpg":return "image/jpeg";case "bmp":return "image/bmp";case "gif":return "image/gif";case "svg":return "image/svg+xml";default:return "image/png";}},_getExtent:function(_8f8,wkid,_8f9){var _8fa;if(_8f8){_8fa=new esri.geometry.Extent();var minx=parseFloat(_8f8.getAttribute("minx"));var miny=parseFloat(_8f8.getAttribute("miny"));var maxx=parseFloat(_8f8.getAttribute("maxx"));var maxy=parseFloat(_8f8.getAttribute("maxy"));if(_8f9){_8fa.xmin=isNaN(miny)?Number.MIN_VALUE:miny;_8fa.ymin=isNaN(minx)?Number.MIN_VALUE:minx;_8fa.xmax=isNaN(maxy)?Number.MAX_VALUE:maxy;_8fa.ymax=isNaN(maxx)?Number.MAX_VALUE:maxx;}else{_8fa.xmin=isNaN(minx)?Number.MIN_VALUE:minx;_8fa.ymin=isNaN(miny)?Number.MIN_VALUE:miny;_8fa.xmax=isNaN(maxx)?Number.MAX_VALUE:maxx;_8fa.ymax=isNaN(maxy)?Number.MAX_VALUE:maxy;}_8fa.spatialReference=new esri.SpatialReference({wkid:wkid});}return _8fa;},_useLatLong:function(wkid){var _8fb;for(var i=0;i<this._REVERSED_LAT_LONG_RANGES.length;i++){var _8fc=this._REVERSED_LAT_LONG_RANGES[i];if(wkid>=_8fc[0]&&wkid<=_8fc[1]){_8fb=true;break;}}return _8fb;},_getTag:function(_8fd,xml){var tags=_4.query(_8fd,xml);if(tags&&tags.length>0){return tags[0];}else{return null;}},_getTagValue:function(_8fe,xml,_8ff){var _900=_4.query(_8fe,xml);if(_900&&_900.length>0){if(_4.isIE){return _900[0].text;}else{return _900[0].textContent;}}else{return _8ff;}},_getAttributeValue:function(_901,_902,xml,_903){var _904=_4.query(_901,xml);if(_904&&_904.length>0){return _904[0].getAttribute(_902);}else{return _903;}},_checkVisibleLayersList:function(_905){if(_905&&_905.length>0&&this.layerInfos&&this.layerInfos.length>0){if((typeof _905[0])=="number"){var list=[];_4.forEach(_905,function(pos){if(pos<this.layerInfos.length){list.push(this.layerInfos[pos].name);}},this);_905=list;}}return _905;}});_4.declare("esri.layers.WMSLayerInfo",null,{name:null,title:null,description:null,extent:null,legendURL:null,subLayers:[],constructor:function(_906){if(_906){this.name=_906.name;this.title=_906.title;this.description=_906.description;this.extent=_906.extent;this.legendURL=_906.legendURL;}}});}if(!_4._hasResource["esri.virtualearth.VETiledLayer"]){_4._hasResource["esri.virtualearth.VETiledLayer"]=true;_4.provide("esri.virtualearth.VETiledLayer");_4.declare("esri.virtualearth.VETiledLayer",esri.layers.TiledMapServiceLayer,{constructor:function(_907){try{_907=_4.mixin({bingMapsKey:null,culture:"en-US"},_907||{});this.url="http://serverapi.arcgisonline.com/veadaptor/production/services/imagery/getmetadata";this._url=esri.urlToObject(this.url);this.spatialReference=new esri.SpatialReference({wkid:102100});this.tileInfo=new esri.layers.TileInfo({rows:256,cols:256,dpi:96,origin:{x:-20037508.342787,y:20037508.342787},spatialReference:{wkid:102100},lods:[{level:1,resolution:78271.5169639999,scale:295828763.795777},{level:2,resolution:39135.7584820001,scale:147914381.897889},{level:3,resolution:19567.8792409999,scale:73957190.948944},{level:4,resolution:9783.93962049996,scale:36978595.474472},{level:5,resolution:4891.96981024998,scale:18489297.737236},{level:6,resolution:2445.98490512499,scale:9244648.868618},{level:7,resolution:1222.99245256249,scale:4622324.434309},{level:8,resolution:611.49622628138,scale:2311162.217155},{level:9,resolution:305.748113140558,scale:1155581.108577},{level:10,resolution:152.874056570411,scale:577790.554289},{level:11,resolution:76.4370282850732,scale:288895.277144},{level:12,resolution:38.2185141425366,scale:144447.638572},{level:13,resolution:19.1092570712683,scale:72223.819286},{level:14,resolution:9.55462853563415,scale:36111.909643},{level:15,resolution:4.77731426794937,scale:18055.954822},{level:16,resolution:2.38865713397468,scale:9027.977411},{level:17,resolution:1.19432856685505,scale:4513.988705},{level:18,resolution:0.597164283559817,scale:2256.994353},{level:19,resolution:0.298582141647617,scale:1128.497176}]});this.initialExtent=(this.fullExtent=new esri.geometry.Extent(-20037508.342787,-20037508.34278,20037508.34278,20037508.342787,new esri.SpatialReference({wkid:102100})));_4.mixin(this,_907);this._initLayer=_4.hitch(this,this._initLayer);this._errorHandler=_4.hitch(this,this._errorHandler);this._getTileInfo=_4.hitch(this,this._getTileInfo);if(this.bingMapsKey){this._getTileInfo();}else{throw new Error(esri.bundle.virtualearth.vetiledlayer.bingMapsKeyNotSpecified);}}catch(e){this.onError(e);throw e;}},_unsetMap:function(map,_908){this.inherited("_unsetMap",arguments);},_getTileInfo:function(){if(this.bingMapsKey){var info=this.resourceInfo;if(!this.loaded&&info){this._initLayer(info);}else{esri.request({url:this._url.path,content:_4.mixin({},this._url.query,{token:this.bingMapsKey,style:this.mapStyle,culture:this.culture}),callbackParamName:"callback",load:this._initLayer,error:this._errorHandler});}}},_initLayer:function(_909,io){try{this.resourceInfo=_4.toJson(_909);var _90a=_909.imageUri.replace("{","${");this.tileServers=_4.map(_909.subDomains,function(_90b){return _4.string.substitute(_90a,{subdomain:_90b});});this._tsLength=this.tileServers.length;this._tsIndex=0;if(!this.loaded){this.loaded=true;this.onLoad(this);var _90c=this.loadCallback;if(_90c){delete this.loadCallback;_90c(this);}}else{this.refresh();}}catch(e){this.onError(e);}},getTileUrl:function(_90d,row,col){var _90e=this.tileServers[this._tsIndex++%this._tsLength],_90f=_90e.replace(/\{/g,"${");return _4.string.substitute(_90f,{quadkey:this._getQuadKey(_90d,row,col),culture:this.culture,token:this.bingMapsKey});},_getQuadKey:function(_910,row,col){var _911="",_912,mask;for(var i=_910;i>0;i--){_912="0";mask=1<<(i-1);if((col&mask)!=0){_912++;}if((row&mask)!=0){_912++;_912++;}_911=_911+_912;}return _911;},setMapStyle:function(_913){this.mapStyle=_913;this._getTileInfo();},setCulture:function(_914){this.culture=_914;this._getTileInfo();},setBingMapsKey:function(_915){this.bingMapsKey=_915;}});_4.mixin(esri.virtualearth.VETiledLayer,{MAP_STYLE_AERIAL:"aerial",MAP_STYLE_AERIAL_WITH_LABELS:"aerialWithLabels",MAP_STYLE_ROAD:"road"});}if(!_4._hasResource["esri.tasks.geometry"]){_4._hasResource["esri.tasks.geometry"]=true;_4.provide("esri.tasks.geometry");_4.declare("esri.tasks.GeometryService",esri.tasks._Task,{constructor:function(url){var _916=_4.hitch;this._projectHandler=_916(this,this._projectHandler);this._simplifyHandler=_916(this,this._simplifyHandler);this._bufferHandler=_916(this,this._bufferHandler);this._areasAndLengthsHandler=_916(this,this._areasAndLengthsHandler);this._lengthsHandler=_916(this,this._lengthsHandler);this._labelPointsHandler=_916(this,this._labelPointsHandler);this._relationHandler=_916(this,this._relationHandler);this._convexHullHandler=_916(this,this._convexHullHandler);this._unionHandler=_916(this,this._unionHandler);this._autoCompleteHandler=_916(this,this._autoCompleteHandler);this._reshapeHandler=_916(this,this._reshapeHandler);this._cutHandler=_916(this,this._cutHandler);this._intersectHandler=_916(this,this._intersectHandler);this._differenceHandler=_916(this,this._differenceHandler);this._trimExtendHandler=_916(this,this._trimExtendHandler);this._densifyHandler=_916(this,this._densifyHandler);this._generalizeHandler=_916(this,this._densifyHandler);this._offsetHandler=_916(this,this._offsetHandler);this._distanceHandler=_916(this,this._distanceHandler);},_encodeGeometries:function(_917){var gs=[];for(var i=0,il=_917.length;i<il;i++){gs.push(_917[i].toJson());}return {geometryType:esri.geometry.getJsonType(_917[0]),geometries:gs};},_decodeGeometries:function(_918,_919,sr){var _91a=esri.geometry.getGeometryType(_919),_91b=_918.geometries,fs=[],_91c={spatialReference:sr.toJson()},_91d=_4.mixin;_4.forEach(_91b,function(g,i){fs[i]=new _91a(_91d(g,_91c));});return fs;},_toProjectGeometry:function(_91e){var sr=_91e.spatialReference.toJson();if(_91e instanceof esri.geometry.Extent){return new esri.geometry.Polygon({rings:[[[_91e.xmin,_91e.ymin],[_91e.xmin,_91e.ymax],[_91e.xmax,_91e.ymax],[_91e.xmax,_91e.ymin],[_91e.xmin,_91e.ymin]]],spatialReference:sr});}else{return new esri.geometry.Polyline({paths:[[].concat(_91e.points)],spatialReference:sr});}},_fromProjectedGeometry:function(_91f,_920,_921){if(_920==="esriGeometryEnvelope"){var ring=_91f.rings[0];return new esri.geometry.Extent(ring[0][0],ring[0][1],ring[2][0],ring[2][1],_921);}else{return new esri.geometry.Multipoint({points:_91f.paths[0],spatialReference:_921.toJson()});}},project:function(_922,_923,_924,_925){var _926=_922[0];var _927=_4.mixin({},this._url.query,{f:"json",outSR:_923.wkid?_923.wkid:_4.toJson(_923.toJson()),inSR:_926.spatialReference.wkid?_926.spatialReference.wkid:_4.toJson(_926.spatialReference.toJson()),geometries:_4.toJson(this._encodeGeometries(_922))}),_928=esri.geometry.getJsonType(_922[0]),_929=this._projectHandler,_92a=this._errorHandler,dfd=new _4.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/project",content:_927,callbackParamName:"callback",load:(function(r,i){_929(r,i,_928,_923,_924,_925,dfd);}),error:(function(r){_92a(r,_925,dfd);})});return dfd;},_projectHandler:function(_92b,io,_92c,_92d,_92e,_92f,dfd){try{var fs=this._decodeGeometries(_92b,_92c,_92d);this._successHandler([fs],"onProjectComplete",_92e,dfd);}catch(err){this._errorHandler(err,_92f,dfd);}},onProjectComplete:function(){},simplify:function(_930,_931,_932){var _933=_930[0].spatialReference;var _934=_4.mixin({},this._url.query,{f:"json",sr:_933.wkid?_933.wkid:_4.toJson(_933.toJson()),geometries:_4.toJson(this._encodeGeometries(_930))}),_935=esri.geometry.getJsonType(_930[0]),_936=this._simplifyHandler,_937=this._errorHandler,dfd=new _4.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/simplify",content:_934,callbackParamName:"callback",load:(function(r,i){_936(r,i,_935,_933,_931,_932,dfd);}),error:(function(r){_937(r,_932,dfd);})});return dfd;},_simplifyHandler:function(_938,io,_939,sr,_93a,_93b,dfd){try{var fs=this._decodeGeometries(_938,_939,sr);this._successHandler([fs],"onSimplifyComplete",_93a,dfd);}catch(err){this._errorHandler(err,_93b,dfd);}},onSimplifyComplete:function(){},convexHull:function(_93c,_93d,_93e){var _93f=_93c[0].spatialReference;var _940=_4.mixin({},this._url.query,{f:"json",sr:_4.toJson(_93f.toJson()),geometries:_4.toJson(this._encodeGeometries(_93c))}),_941=this._convexHullHandler,_942=this._errorHandler,dfd=new _4.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/convexHull",content:_940,callbackParamName:"callback",load:(function(r,i){_941(r,i,_93f,_93d,_93e,dfd);}),error:(function(r){_942(r,_93e,dfd);})});return dfd;},_convexHullHandler:function(_943,io,_944,_945,_946,dfd){try{var geom=esri.geometry.fromJson(_943.geometry).setSpatialReference(_944);this._successHandler([geom],"onConvexHullComplete",_945,dfd);}catch(err){this._errorHandler(err,_946,dfd);}},onConvexHullComplete:function(){},union:function(_947,_948,_949){var _94a=_947[0].spatialReference;var _94b=_4.mixin({},this._url.query,{f:"json",sr:_4.toJson(_94a.toJson()),geometries:_4.toJson(this._encodeGeometries(_947))}),_94c=this._unionHandler,_94d=this._errorHandler,dfd=new _4.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/union",content:_94b,callbackParamName:"callback",load:(function(r,i){_94c(r,i,_94a,_948,_949,dfd);}),error:(function(r){_94d(r,_949,dfd);})});return dfd;},_unionHandler:function(_94e,io,_94f,_950,_951,dfd){try{var geom=esri.geometry.fromJson(_94e.geometry).setSpatialReference(_94f);this._successHandler([geom],"onUnionComplete",_950,dfd);}catch(err){this._errorHandler(err,_951,dfd);}},onUnionComplete:function(){},autoComplete:function(_952,_953,_954,_955){var _956=_952[0].spatialReference;var _957=_4.mixin({},this._url.query,{f:"json",sr:_4.toJson(_956.toJson()),polygons:_4.toJson(this._encodeGeometries(_952).geometries),polylines:_4.toJson(this._encodeGeometries(_953).geometries)}),_958=this._autoCompleteHandler,_959=this._errorHandler,dfd=new _4.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/autoComplete",content:_957,callbackParamName:"callback",load:(function(r,i){_958(r,i,_956,_954,_955,dfd);}),error:(function(r){_959(r,_955,dfd);})});return dfd;},_autoCompleteHandler:function(_95a,io,_95b,_95c,_95d,dfd){try{var Pgon=esri.geometry.Polygon,_95e=_95a.geometries,_95f=[];for(var i=0,il=_95e.length;i<il;i++){_95f[i]=new Pgon({spatialReference:_95b,rings:_95e[i].rings});}this._successHandler([_95f],"onAutoCompleteComplete",_95c,dfd);}catch(err){this._errorHandler(err,_95d,dfd);}},onAutoCompleteComplete:function(){},reshape:function(_960,_961,_962,_963){var _964=_960.spatialReference;var _965=_4.mixin({},this._url.query,{f:"json",sr:_4.toJson(_964.toJson()),target:_4.toJson({geometryType:esri.geometry.getJsonType(_960),geometry:_960.toJson()}),reshaper:_4.toJson(_961.toJson())}),_966=this._reshapeHandler,_967=this._errorHandler,dfd=new _4.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/reshape",content:_965,callbackParamName:"callback",load:(function(r,i){_966(r,i,_964,_962,_963,dfd);}),error:(function(r){_967(r,_963,dfd);})});return dfd;},_reshapeHandler:function(_968,io,_969,_96a,_96b,dfd){try{var geom=esri.geometry.fromJson(_968.geometry).setSpatialReference(_969);this._successHandler([geom],"onReshapeComplete",_96a,dfd);}catch(err){this._errorHandler(err,_96b,dfd);}},onReshapeComplete:function(){},cut:function(_96c,_96d,_96e,_96f){var _970=_96c[0].spatialReference;var _971=_4.map(_96c,function(_972){return _972.toJson();});var _973=_4.mixin({},this._url.query,{f:"json",sr:_4.toJson(_970.toJson()),target:_4.toJson({geometryType:esri.geometry.getJsonType(_96c[0]),geometries:_971}),cutter:_4.toJson(_96d.toJson())}),_974=this._cutHandler,_975=this._errorHandler,dfd=new _4.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/cut",content:_973,callbackParamName:"callback",load:(function(r,i){_974(r,i,_970,_96e,_96f,dfd);}),error:(function(r){_975(r,_96f,dfd);})});return dfd;},_cutHandler:function(_976,io,_977,_978,_979,dfd){try{var _97a=_976.geometries;var _97b={};_97b.cutIndexes=_976.cutIndexes;_97b.geometries=[];_4.forEach(_97a,function(geom){_97b.geometries.push(esri.geometry.fromJson(geom).setSpatialReference(_977));});this._successHandler([_97b],"onCutComplete",_978,dfd);}catch(err){this._errorHandler(err,_979,dfd);}},onCutComplete:function(){},intersect:function(_97c,_97d,_97e,_97f){var _980=_97c[0].spatialReference;var _981=_4.mixin({},this._url.query,{f:"json",sr:_4.toJson(_980.toJson()),geometries:_4.toJson(this._encodeGeometries(_97c)),geometry:_4.toJson({geometryType:esri.geometry.getJsonType(_97d),geometry:_97d.toJson()})}),_982=this._intersectHandler,_983=this._errorHandler,dfd=new _4.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/intersect",content:_981,callbackParamName:"callback",load:(function(r,i){_982(r,i,_980,_97e,_97f,dfd);}),error:(function(r){_983(r,_97f,dfd);})});return dfd;},_intersectHandler:function(_984,io,_985,_986,_987,dfd){try{var _988=_984.geometries,_989=[];_4.forEach(_988,function(geom){_989.push(esri.geometry.fromJson(geom).setSpatialReference(_985));});this._successHandler([_989],"onIntersectComplete",_986,dfd);}catch(err){this._errorHandler(err,_987,dfd);}},onIntersectComplete:function(){},difference:function(_98a,_98b,_98c,_98d){var _98e=_98a[0].spatialReference;var _98f=_4.mixin({},this._url.query,{f:"json",sr:_4.toJson(_98e.toJson()),geometries:_4.toJson(this._encodeGeometries(_98a)),geometry:_4.toJson({geometryType:esri.geometry.getJsonType(_98b),geometry:_98b.toJson()})}),_990=this._differenceHandler,_991=this._errorHandler,dfd=new _4.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/difference",content:_98f,callbackParamName:"callback",load:(function(r,i){_990(r,i,_98e,_98c,_98d,dfd);}),error:(function(r){_991(r,_98d,dfd);})});return dfd;},_differenceHandler:function(_992,io,_993,_994,_995,dfd){try{var _996=_992.geometries,_997=[];_4.forEach(_996,function(geom){_997.push(esri.geometry.fromJson(geom).setSpatialReference(_993));});this._successHandler([_997],"onDifferenceComplete",_994,dfd);}catch(err){this._errorHandler(err,_995,dfd);}},onDifferenceComplete:function(){},buffer:function(_998,_999,_99a){var _99b=_4.mixin({},this._url.query,{f:"json"},_998.toJson()),sr=_998.outSpatialReference||_998.geometries[0].spatialReference,_99c=this._bufferHandler,_99d=this._errorHandler,dfd=new _4.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/buffer",content:_99b,callbackParamName:"callback",load:(function(r,i){_99c(r,i,sr,_999,_99a,dfd);}),error:(function(r){_99d(r,_99a,dfd);})});return dfd;},_bufferHandler:function(_99e,io,sr,_99f,_9a0,dfd){try{var Pgon=esri.geometry.Polygon,_9a1=_99e.geometries,_9a2=[];for(var i=0,il=_9a1.length;i<il;i++){_9a2[i]=new Pgon({spatialReference:sr,rings:_9a1[i].rings});}this._successHandler([_9a2],"onBufferComplete",_99f,dfd);}catch(err){this._errorHandler(err,_9a0,dfd);}},onBufferComplete:function(){},areasAndLengths:function(_9a3,_9a4,_9a5){var _9a6=_4.mixin({},this._url.query,{f:"json"},_9a3.toJson()),_9a7=this._areasAndLengthsHandler,_9a8=this._errorHandler,dfd=new _4.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/areasAndLengths",content:_9a6,callbackParamName:"callback",load:(function(r,i){_9a7(r,i,_9a4,_9a5,dfd);}),error:(function(r){_9a8(r,_9a5,dfd);})});return dfd;},_areasAndLengthsHandler:function(_9a9,io,_9aa,_9ab,dfd){try{this._successHandler([_9a9],"onAreasAndLengthsComplete",_9aa,dfd);}catch(err){this._errorHandler(err,_9ab,dfd);}},onAreasAndLengthsComplete:function(){},lengths:function(_9ac,_9ad,_9ae){var _9af=_4.mixin({},this._url.query,{f:"json"},_9ac.toJson()),_9b0=this._lengthsHandler,_9b1=this._errorHandler,dfd=new _4.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/lengths",content:_9af,callbackParamName:"callback",load:(function(r,i){_9b0(r,i,_9ad,_9ae,dfd);}),error:(function(r){_9b1(r,_9ae,dfd);})});return dfd;},_lengthsHandler:function(_9b2,io,_9b3,_9b4,dfd){try{this._successHandler([_9b2],"onLengthsComplete",_9b3,dfd);}catch(err){this._errorHandler(err,_9b4,dfd);}},onLengthsComplete:function(){},labelPoints:function(_9b5,_9b6,_9b7){var _9b8=_4.map(_9b5,function(geom){return geom.toJson();});var sr=_9b5[0].spatialReference,_9b9=_4.mixin({},this._url.query,{f:"json",sr:sr.wkid?sr.wkid:_4.toJson(sr.toJson()),polygons:_4.toJson(_9b8)}),_9ba=this._labelPointsHandler,_9bb=this._errorHandler,dfd=new _4.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/labelPoints",content:_9b9,callbackParamName:"callback",load:(function(r,i){_9ba(r,i,_9b5,sr,_9b6,_9b7,dfd);}),error:(function(r){_9bb(r,_9b7,dfd);})});return dfd;},_labelPointsHandler:function(_9bc,io,_9bd,sr,_9be,_9bf,dfd){try{var _9c0=_9bc.labelPoints,_9c1=[];_4.forEach(_9c0,function(geom){_9c1.push(esri.geometry.fromJson(geom).setSpatialReference(sr));});this._successHandler([_9c1],"onLabelPointsComplete",_9be,dfd);}catch(err){this._errorHandler(err,_9bf,dfd);}},onLabelPointsComplete:function(){},relation:function(_9c2,_9c3,_9c4){var _9c5=_4.mixin({},this._url.query,{f:"json"},_9c2.toJson()),_9c6=this._relationHandler,_9c7=this._errorHandler,dfd=new _4.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/relation",content:_9c5,callbackParamName:"callback",load:(function(r,i){_9c6(r,i,_9c3,_9c4,dfd);}),error:(function(r){_9c7(r,_9c4,dfd);})});return dfd;},_relationHandler:function(_9c8,io,_9c9,_9ca,dfd){try{var _9cb=_9c8.relations;this._successHandler([_9cb],"onRelationComplete",_9c9,dfd);}catch(err){this._errorHandler(err,_9ca,dfd);}},onRelationComplete:function(){},trimExtend:function(_9cc,_9cd,_9ce){var _9cf=_4.mixin({},this._url.query,{f:"json"},_9cc.toJson()),_9d0=_9cc.sr,_9d1=this._trimExtendHandler,_9d2=this._errorHandler,dfd=new _4.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/trimExtend",content:_9cf,callbackParamName:"callback",load:(function(r,i){_9d1(r,i,_9d0,_9cd,_9ce,dfd);}),error:(function(r){_9d2(r,_9ce,dfd);})});return dfd;},_trimExtendHandler:function(_9d3,io,_9d4,_9d5,_9d6,dfd){try{var _9d7=esri.geometry.Polyline,_9d8=_9d3.geometries,_9d9=[];for(var i=0,il=_9d8.length;i<il;i++){_9d9[i]=new _9d7({spatialReference:_9d4,paths:_9d8[i].paths});}this._successHandler([_9d9],"onTrimExtendComplete",_9d5,dfd);}catch(err){this._errorHandler(err,_9d6,dfd);}},onTrimExtendComplete:function(){},densify:function(_9da,_9db,_9dc){var _9dd=_4.mixin({},this._url.query,{f:"json"},_9da.toJson()),_9de=_9da.geometries[0].spatialReference,_9df=this._densifyHandler,_9e0=this._errorHandler,dfd=new _4.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/densify",content:_9dd,callbackParamName:"callback",load:(function(r,i){_9df(r,i,_9de,_9db,_9dc,dfd);}),error:(function(r){_9e0(r,_9dc,dfd);})});return dfd;},_densifyHandler:function(_9e1,io,_9e2,_9e3,_9e4,dfd){try{var _9e5=_9e1.geometries,_9e6=[];_4.forEach(_9e5,function(geom){_9e6.push(esri.geometry.fromJson(geom).setSpatialReference(_9e2));});this._successHandler([_9e6],"onDensifyComplete",_9e3,dfd);}catch(err){this._errorHandler(err,_9e4,dfd);}},onDensifyComplete:function(){},generalize:function(_9e7,_9e8,_9e9){var _9ea=_4.mixin({},this._url.query,{f:"json"},_9e7.toJson()),_9eb=_9e7.geometries[0].spatialReference,_9ec=this._generalizeHandler,_9ed=this._errorHandler,dfd=new _4.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/generalize",content:_9ea,callbackParamName:"callback",load:(function(r,i){_9ec(r,i,_9eb,_9e8,_9e9,dfd);}),error:(function(r){_9ed(r,_9e9,dfd);})});return dfd;},_generalizeHandler:function(_9ee,io,_9ef,_9f0,_9f1,dfd){try{var _9f2=_9ee.geometries,_9f3=[];_4.forEach(_9f2,function(geom){_9f3.push(esri.geometry.fromJson(geom).setSpatialReference(_9ef));});this._successHandler([_9f3],"onGeneralizeComplete",_9f0,dfd);}catch(err){this._errorHandler(err,_9f1,dfd);}},onGeneralizeComplete:function(){},offset:function(_9f4,_9f5,_9f6){var _9f7=_4.mixin({},this._url.query,{f:"json"},_9f4.toJson()),_9f8=_9f4.geometries[0].spatialReference,_9f9=this._offsetHandler,_9fa=this._errorHandler,dfd=new _4.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/offset",content:_9f7,callbackParamName:"callback",load:(function(r,i){_9f9(r,i,_9f8,_9f5,_9f6,dfd);}),error:(function(r){_9fa(r,_9f6,dfd);})});return dfd;},_offsetHandler:function(_9fb,io,_9fc,_9fd,_9fe,dfd){try{var _9ff=_9fb.geometries,_a00=[];_4.forEach(_9ff,function(geom){_a00.push(esri.geometry.fromJson(geom).setSpatialReference(_9fc));});this._successHandler([_a00],"onOffsetComplete",_9fd,dfd);}catch(err){this._errorHandler(err,_9fe,dfd);}},onOffsetComplete:function(){},distance:function(_a01,_a02,_a03){var _a04=_4.mixin({},this._url.query,{f:"json"},_a01.toJson()),_a05=_a01.geometry1.spatialReference,_a06=this._distanceHandler,_a07=this._errorHandler,dfd=new _4.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/distance",content:_a04,callbackParamName:"callback",load:(function(r,i){_a06(r,i,_a05,_a02,_a03,dfd);}),error:(function(r){_a07(r,_a03,dfd);})});return dfd;},_distanceHandler:function(_a08,io,_a09,_a0a,_a0b,dfd){try{_a08=_a08&&_a08.distance;this._successHandler([_a08],"onDistanceComplete",_a0a,dfd);}catch(err){this._errorHandler(err,_a0b,dfd);}},onDistanceComplete:function(){}});_4.declare("esri.tasks.TrimExtendParameters",null,{polylines:null,trimExtendTo:null,extendHow:null,toJson:function(){var _a0c=_4.map(this.polylines,function(geom){return geom.toJson();});var json={};json.polylines=_4.toJson(_a0c);json.trimExtendTo=_4.toJson(this.trimExtendTo.toJson());json.sr=_4.toJson(this.polylines[0].spatialReference.toJson());json.extendHow=this.extendHow||0;return json;}});_4.mixin(esri.tasks.TrimExtendParameters,{DEFAULT_CURVE_EXTENSION:0,RELOCATE_ENDS:1,KEEP_END_ATTRIBUTES:2,NO_END_ATTRIBUTES:4,NO_EXTEND_AT_FROM:8,NO_EXTEND_AT_TO:16});_4.declare("esri.tasks.BufferParameters",null,{geometries:null,outSpatialReference:null,bufferSpatialReference:null,distances:null,unit:null,unionResults:false,toJson:function(){var json={unit:this.unit,unionResults:(""+this.unionResults)},dt=this.distances,_a0d=this.outSpatialReference,_a0e=this.bufferSpatialReference;var _a0f=_4.map(this.geometries,function(geom){geom=(geom.type==="extent")?this._extentToPolygon(geom):geom;return geom.toJson();},this);var _a10=this.geometries;if(_a10&&_a10.length>0){var _a11=_a10[0].type==="extent"?"esriGeometryPolygon":esri.geometry.getJsonType(_a10[0]);json.geometries=_4.toJson({geometryType:_a11,geometries:_a0f});json.inSR=_a10[0].spatialReference.wkid?_a10[0].spatialReference.wkid:_4.toJson(_a10[0].spatialReference.toJson());}if(dt){json.distances=dt.join(",");}if(_a0d){json.outSR=_a0d.wkid?_a0d.wkid:_4.toJson(_a0d.toJson());}if(_a0e){json.bufferSR=_a0e.wkid?_a0e.wkid:_4.toJson(_a0e.toJson());}return json;},_extentToPolygon:function(_a12){var xmin=_a12.xmin,ymin=_a12.ymin,xmax=_a12.xmax,ymax=_a12.ymax;return new esri.geometry.Polygon({"rings":[[[xmin,ymin],[xmin,ymax],[xmax,ymax],[xmax,ymin],[xmin,ymin]]],"spatialReference":_a12.spatialReference.toJson()});}});_4.mixin(esri.tasks.GeometryService,{UNIT_METER:9001,UNIT_GERMAN_METER:9031,UNIT_FOOT:9002,UNIT_SURVEY_FOOT:9003,UNIT_CLARKE_FOOT:9005,UNIT_FATHOM:9014,UNIT_NAUTICAL_MILE:9030,UNIT_SURVEY_CHAIN:9033,UNIT_SURVEY_LINK:9034,UNIT_SURVEY_MILE:9035,UNIT_KILOMETER:9036,UNIT_CLARKE_YARD:9037,UNIT_CLARKE_CHAIN:9038,UNIT_CLARKE_LINK:9039,UNIT_SEARS_YARD:9040,UNIT_SEARS_FOOT:9041,UNIT_SEARS_CHAIN:9042,UNIT_SEARS_LINK:9043,UNIT_BENOIT_1895A_YARD:9050,UNIT_BENOIT_1895A_FOOT:9051,UNIT_BENOIT_1895A_CHAIN:9052,UNIT_BENOIT_1895A_LINK:9053,UNIT_BENOIT_1895B_YARD:9060,UNIT_BENOIT_1895B_FOOT:9061,UNIT_BENOIT_1895B_CHAIN:9062,UNIT_BENOIT_1895B_LINK:9063,UNIT_INDIAN_FOOT:9080,UNIT_INDIAN_1937_FOOT:9081,UNIT_INDIAN_1962_FOOT:9082,UNIT_INDIAN_1975_FOOT:9083,UNIT_INDIAN_YARD:9084,UNIT_INDIAN_1937_YARD:9085,UNIT_INDIAN_1962_YARD:9086,UNIT_INDIAN_1975_YARD:9087,UNIT_FOOT_1865:9070,UNIT_RADIAN:9101,UNIT_DEGREE:9102,UNIT_ARCMINUTE:9103,UNIT_ARCSECOND:9104,UNIT_GRAD:9105,UNIT_GON:9106,UNIT_MICRORADIAN:9109,UNIT_ARCMINUTE_CENTESIMAL:9112,UNIT_ARCSECOND_CENTESIMAL:9113,UNIT_MIL6400:9114,UNIT_BRITISH_1936_FOOT:9095,UNIT_GOLDCOAST_FOOT:9094,UNIT_INTERNATIONAL_CHAIN:109003,UNIT_INTERNATIONAL_LINK:109004,UNIT_INTERNATIONAL_YARD:109001,UNIT_STATUTE_MILE:9093,UNIT_SURVEY_YARD:109002,UNIT_50KILOMETER_LENGTH:109030,UNIT_150KILOMETER_LENGTH:109031,UNIT_DECIMETER:109005,UNIT_CENTIMETER:109006,UNIT_MILLIMETER:109007,UNIT_INTERNATIONAL_INCH:109008,UNIT_US_SURVEY_INCH:109009,UNIT_INTERNATIONAL_ROD:109010,UNIT_US_SURVEY_ROD:109011,UNIT_US_NAUTICAL_MILE:109012,UNIT_UK_NAUTICAL_MILE:109013,UNIT_SQUARE_INCHES:"esriSquareInches",UNIT_SQUARE_FEET:"esriSquareFeet",UNIT_SQUARE_YARDS:"esriSquareYards",UNIT_ACRES:"esriAcres",UNIT_SQUARE_MILES:"esriSquareMiles",UNIT_SQUARE_MILLIMETERS:"esriSquareMillimeters",UNIT_SQUARE_CENTIMETERS:"esriSquareCentimeters",UNIT_SQUARE_DECIMETERS:"esriSquareDecimeters",UNIT_SQUARE_METERS:"esriSquareMeters",UNIT_ARES:"esriAres",UNIT_HECTARES:"esriHectares",UNIT_SQUARE_KILOMETERS:"esriSquareKilometers"});_4.declare("esri.tasks.AreasAndLengthsParameters",null,{polygons:null,lengthUnit:null,areaUnit:null,toJson:function(){var _a13=_4.map(this.polygons,function(geom){return geom.toJson();});var json={};json.polygons=_4.toJson(_a13);var _a14=this.polygons[0].spatialReference;json.sr=_a14.wkid?_a14.wkid:_4.toJson(_a14.toJson());if(this.lengthUnit){json.lengthUnit=this.lengthUnit;}if(this.areaUnit){if(_4.isString(this.areaUnit)){json.areaUnit=_4.toJson({"areaUnit":this.areaUnit});}else{json.areaUnit=this.areaUnit;}}return json;}});_4.declare("esri.tasks.LengthsParameters",null,{polylines:null,lengthUnit:null,geodesic:null,toJson:function(){var _a15=_4.map(this.polylines,function(geom){return geom.toJson();});var json={};json.polylines=_4.toJson(_a15);var _a16=this.polylines[0].spatialReference;json.sr=_a16.wkid?_a16.wkid:_4.toJson(_a16.toJson());if(this.lengthUnit){json.lengthUnit=this.lengthUnit;}if(this.geodesic){json.geodesic=this.geodesic;}return json;}});_4.declare("esri.tasks.RelationParameters",null,{geometries1:null,geometries2:null,relation:null,relationParam:null,toJson:function(){var _a17=_4.map(this.geometries1,function(geom){return geom.toJson();});var _a18=_4.map(this.geometries2,function(geom){return geom.toJson();});var json={};var _a19=this.geometries1;if(_a19&&_a19.length>0){json.geometries1=_4.toJson({geometryType:esri.geometry.getJsonType(_a19[0]),geometries:_a17});var _a1a=this.geometries1[0].spatialReference;json.sr=_a1a.wkid?_a1a.wkid:_4.toJson(_a1a.toJson());}var _a1b=this.geometries2;if(_a1b&&_a1b.length>0){json.geometries2=_4.toJson({geometryType:esri.geometry.getJsonType(_a1b[0]),geometries:_a18});}if(this.relation){json.relation=this.relation;}if(this.relationParam){json.relationParam=_4.toJson(this.relationParam);}return json;}});_4.mixin(esri.tasks.RelationParameters,{SPATIAL_REL_CROSS:"esriGeometryRelationCross",SPATIAL_REL_DISJOINT:"esriGeometryRelationDisjoint",SPATIAL_REL_IN:"esriGeometryRelationIn",SPATIAL_REL_INTERIORINTERSECTION:"esriGeometryRelationInteriorIntersection",SPATIAL_REL_INTERSECTION:"esriGeometryRelationIntersection",SPATIAL_REL_COINCIDENCE:"esriGeometryRelationLineCoincidence",SPATIAL_REL_LINETOUCH:"esriGeometryRelationLineTouch",SPATIAL_REL_OVERLAP:"esriGeometryRelationOverlap",SPATIAL_REL_POINTTOUCH:"esriGeometryRelationPointTouch",SPATIAL_REL_TOUCH:"esriGeometryRelationTouch",SPATIAL_REL_WITHIN:"esriGeometryRelationWithin",SPATIAL_REL_RELATION:"esriGeometryRelationRelation"});_4.declare("esri.tasks.DensifyParameters",null,{geometries:null,geodesic:null,lengthUnit:null,maxSegmentLength:null,toJson:function(){var _a1c=_4.map(this.geometries,function(geom){return geom.toJson();});var json={};if(this.geometries&&this.geometries.length>0){json.geometries=_4.toJson({geometryType:esri.geometry.getJsonType(this.geometries[0]),geometries:_a1c});json.sr=_4.toJson(this.geometries[0].spatialReference.toJson());}if(this.geodesic){json.geodesic=this.geodesic;}if(this.lengthUnit){json.lengthUnit=this.lengthUnit;}if(this.maxSegmentLength){json.maxSegmentLength=this.maxSegmentLength;}return json;}});_4.declare("esri.tasks.GeneralizeParameters",null,{geometries:null,deviationUnit:null,maxDeviation:null,toJson:function(){var _a1d=_4.map(this.geometries,function(geom){return geom.toJson();});var json={};if(this.geometries&&this.geometries.length>0){json.geometries=_4.toJson({geometryType:esri.geometry.getJsonType(this.geometries[0]),geometries:_a1d});json.sr=_4.toJson(this.geometries[0].spatialReference.toJson());}if(this.deviationUnit){json.deviationUnit=this.deviationUnit;}if(this.maxDeviation){json.maxDeviation=this.maxDeviation;}return json;}});_4.declare("esri.tasks.OffsetParameters",null,{geometries:null,bevelRatio:null,offsetDistance:null,offsetHow:null,offsetUnit:null,toJson:function(){var _a1e=_4.map(this.geometries,function(geom){return geom.toJson();});var json={};if(this.geometries&&this.geometries.length>0){json.geometries=_4.toJson({geometryType:esri.geometry.getJsonType(this.geometries[0]),geometries:_a1e});json.sr=_4.toJson(this.geometries[0].spatialReference.toJson());}if(this.bevelRatio){json.bevelRatio=this.bevelRatio;}if(this.offsetDistance){json.offsetDistance=this.offsetDistance;}if(this.offsetHow){json.offsetHow=this.offsetHow;}if(this.offsetUnit){json.offsetUnit=this.offsetUnit;}return json;}});_4.mixin(esri.tasks.OffsetParameters,{OFFSET_BEVELLED:"esriGeometryOffsetBevelled",OFFSET_MITERED:"esriGeometryOffsetMitered",OFFSET_ROUNDED:"esriGeometryOffsetRounded"});_4.declare("esri.tasks.DistanceParameters",null,{geometry1:null,geometry2:null,distanceUnit:null,geodesic:null,toJson:function(){var json={};var _a1f=this.geometry1;if(_a1f){json.geometry1=_4.toJson({geometryType:esri.geometry.getJsonType(_a1f),geometry:_a1f});}var _a20=this.geometry2;if(_a20){json.geometry2=_4.toJson({geometryType:esri.geometry.getJsonType(_a20),geometry:_a20});}json.sr=_4.toJson(this.geometry1.spatialReference.toJson());if(this.distanceUnit){json.distanceUnit=this.distanceUnit;}if(this.geodesic){json.geodesic=this.geodesic;}return json;}});}if(!_4._hasResource["dojo.DeferredList"]){_4._hasResource["dojo.DeferredList"]=true;_4.provide("dojo.DeferredList");_4.DeferredList=function(list,_a21,_a22,_a23,_a24){var _a25=[];_4.Deferred.call(this);var self=this;if(list.length===0&&!_a21){this.resolve([0,[]]);}var _a26=0;_4.forEach(list,function(item,i){item.then(function(_a27){if(_a21){self.resolve([i,_a27]);}else{_a28(true,_a27);}},function(_a29){if(_a22){self.reject(_a29);}else{_a28(false,_a29);}if(_a23){return null;}throw _a29;});function _a28(_a2a,_a2b){_a25[i]=[_a2a,_a2b];_a26++;if(_a26===list.length){self.resolve(_a25);}};});};_4.DeferredList.prototype=new _4.Deferred();_4.DeferredList.prototype.gatherResults=function(_a2c){var d=new _4.DeferredList(_a2c,false,true,false);d.addCallback(function(_a2d){var ret=[];_4.forEach(_a2d,function(_a2e){ret.push(_a2e[1]);});return ret;});return d;};}if(!_4._hasResource["esri.arcgis.utils"]){_4._hasResource["esri.arcgis.utils"]=true;_4.provide("esri.arcgis.utils");(function(){var EAU=esri.arcgis.utils;EAU.arcgisUrl="http://www.arcgis.com/sharing/content/items";EAU.getItem=function(_a2f){if(EAU._arcgisUrl&&EAU._arcgisUrl.length>0){EAU.arcgisUrl=EAU._arcgisUrl;}var url=EAU.arcgisUrl+"/"+_a2f;var _a30={},_a31=new _4.Deferred();esri.request({url:url,content:{f:"json"},callbackParamName:"callback",load:function(_a32){_a30.item=_a32;esri.request({url:url+"/data",content:{f:"json"},callbackParamName:"callback",load:function(_a33){_a30.itemData=_a33;_a31.callback(_a30);},error:function(_a34){_a31.errback(_a34);}});},error:function(_a35){_a31.errback(_a35);}});return _a31;};EAU.createMap=function(arg1,_a36,_a37){var _a38=new _4.Deferred();_a37=_a37||{};var _a39=_a37.infoTemplateClass;_a37._clazz=(_a39&&_4.getObject(_a39))||esri.dijit.PopupTemplate;if(_4.isString(arg1)){EAU.getItem(arg1).addCallback(function(_a3a){EAU._getPopups(_a3a,_a37).addCallback(function(_a3b){EAU._getLayers(_a3b.itemData,_a37).addCallback(_4.hitch(null,EAU._preCreateMap,_a3b,_a36,_a37,_a38));});}).addErrback(_4.hitch(_a38,_a38.errback));}else{EAU._getPopups(arg1,_a37).addCallback(function(_a3c){EAU._getLayers(_a3c.itemData,_a37).addCallback(_4.hitch(null,EAU._preCreateMap,_a3c,_a36,_a37,_a38));});}return _a38;};EAU._arcgisUrl=null;EAU._getPopups=function(_a3d,_a3e){var _a3f=new _4.Deferred();if(_a3e.ignorePopups){_a3f.callback(_a3d);return _a3f;}var _a40=_a3d.itemData;var _a41=[];var _a42=[];_4.forEach(_a40.operationalLayers,function(_a43){if(_a43.itemId&&!_a43.type&&!_a43.layers&&_a43.url.indexOf("/MapServer")>-1&&_a43.url.indexOf("/MapServer/")===-1){_a42.push(_a43);_a41.push(EAU._getItemData(_a43));}});if(_a41.length>0){var _a44=new _4.DeferredList(_a41);_a44.addCallback(function(_a45){_4.forEach(_a42,function(_a46,i){var _a47=_a41[i].ioArgs.json;if(_a47&&_a47.layers){_a46.layers=_a47.layers;}});_a3f.callback(_a3d);});}else{_a3f.callback(_a3d);}return _a3f;};EAU._getItemData=function(_a48){var url=EAU.arcgisUrl+"/"+_a48.itemId+"/data";var _a49=esri.request({url:url,content:{f:"json"},callbackParamName:"callback"});return _a49;};EAU._getLayers=function(_a4a,_a4b){var _a4c=[];var _a4d=[];var _a4e=[];var _a4f=new _4.Deferred();_4.forEach(_a4a.operationalLayers,function(_a50,_a51){if(_a50.featureCollection){_4.forEach(_a50.featureCollection.layers,function(_a52,idx){_a52.opacity=_a50.opacity;_a52.visibility=_a50.visibility;_a52.id=(_a50.id?_a50.id:("operational"+_a51))+"_"+idx;_a4e.push(_a52);});}else{_a4e.push(_a50);}});_4.forEach(_a4a.baseMap.baseMapLayers,function(_a53,_a54){_a53.baseMapLayer=true;_a53.id=_a53.id?_a53.id:"base"+_a54;_a4c.push(_a53);});_4.forEach(_a4e,function(_a55,_a56){_a55.id=_a55.id?_a55.id:"operational"+_a56;_a4c.push(_a55);});_4.forEach(_a4c,function(_a57,i){if(_a57.url&&!_a57.type){_a57.deferredsPos=_a4d.length;_a57.errors=[];_a4d.push(EAU._getServiceInfo(_a57.url,_a57.errors));}else{_a57.layerObject=EAU._initLayer(_a57,_a4c,_a4b);}});var _a58=new _4.DeferredList(_a4d);_a58.addCallback(function(_a59){_4.forEach(_a4c,function(_a5a,_a5b){if(_a5a.url&&!_a5a.type){_a5a.resourceInfo=_a4d[_a5a.deferredsPos].ioArgs.json;if(_a5b===0||_a4c[0].layerObject){_a5a.layerObject=EAU._initLayer(_a5a,_a4c,_a4b);}}});var _a5c=_4.filter(_a4c,function(lyr){return !lyr.isReference;});var _a5d=_4.filter(_a4c,function(lyr){return !!lyr.isReference;});_a4c=_a5c.concat(_a5d);_a4f.callback(_a4c);});return _a4f;};EAU._preCreateMap=function(_a5e,_a5f,_a60,_a61,_a62){try{var _a63=_a60.mapOptions||{};var card=_a5e.item;var _a64=[];_4.forEach(_a62,function(_a65){if(_4.isArray(_a65.layerObject)){_4.forEach(_a65.layerObject,function(l){_a64.push(l);});}else{_a64.push(_a65.layerObject);}});if(!_a64[0]){_a61.errback(new Error(esri.bundle.arcgis.utils.baseLayerError));return;}_a64=_4.filter(_a64,esri._isDefined);if(card){if(card.extent){if(!_a63.extent){var _a66=new esri.geometry.Extent(card.extent[0][0],card.extent[0][1],card.extent[1][0],card.extent[1][1],new esri.SpatialReference({wkid:4326}));var _a67=_a64[0].spatialReference;if(_a67.wkid===4326){_a63.extent=_a66;EAU._createMap(_a64,_a62,_a5e,_a5f,_a60,_a61);}else{if(_a67.wkid===102100||_a67.wkid===102113||_a67.wkid===3857){_a63.extent=esri.geometry.geographicToWebMercator(_a66);EAU._createMap(_a64,_a62,_a5e,_a5f,_a60,_a61);}else{if(_a60.geometryServiceURL||esri.config.defaults.geometryService){var gs;if(_a60.geometryServiceURL){gs=new esri.tasks.GeometryService(_a60.geometryServiceURL);}else{gs=esri.config.defaults.geometryService;}gs.project([_a66],_a67,function(_a68){var _a69=_a68[0];_a63.extent=_a63.extent||_a69;EAU._createMap(_a64,_a62,_a5e,_a5f,_a60,_a61);});}else{_a61.errback(new Error(esri.bundle.arcgis.utils.geometryServiceError));}}}}else{EAU._createMap(_a64,_a62,_a5e,_a5f,_a60,_a61);}}else{EAU._createMap(_a64,_a62,_a5e,_a5f,_a60,_a61);}}else{EAU._createMap(_a64,_a62,_a5e,_a5f,_a60,_a61);}}catch(err){_a61.errback(err);}};EAU._createMap=function(_a6a,_a6b,_a6c,_a6d,_a6e,_a6f){var _a70=_a6e.mapOptions,_a71,_a72;if(!_a70.infoWindow){_a71=new esri.dijit.Popup(null,_4.create("div"));_a70.infoWindow=_a71;}if(!esri._isDefined(_a70.showInfoWindowOnClick)){_a70.showInfoWindowOnClick=false;}var map=new esri.Map(_a6d,_a70);_4.connect(map,"onZoomEnd",EAU._onZoomEnd);if(_a71){_4.place(_a71.domNode,map.root);}var _a73=Math.floor(_a70.extent.getWidth()/map.width);_4.forEach(_a6a,function(_a74){if(_a74&&_a74.declaredClass&&_a74.declaredClass.indexOf("FeatureLayer")!==-1&&!_a74.isEditable()){_a74.setMaxAllowableOffset(_a73);}});if(_a6e.ignorePopups){_4.forEach(_a6a,function(_a75){delete _a75.infoTemplate;});}if(!(_a6e.ignorePopups||_a6e.disableClickBehavior)){_a72=_4.connect(map,"onClick",EAU._showPopup);}_4.connect(map,"onLayersAddResult",EAU._onLayersAddResult);map.addLayers(_a6a);if(!_a6e.ignorePopups){EAU._addSelectionLayers(_a6a,_a73,map,_a6e._clazz);}var _a76=[];_4.forEach(_a6b,function(_a77){_a76=_a76.concat(_a77.errors);},this);_a6f.callback({map:map,itemInfo:_a6c,errors:_a76,clickEventHandle:_a72,clickEventListener:EAU._showPopup});};EAU._addSelectionLayers=function(_a78,_a79,map,_a7a){var _a7b=[];_4.forEach(_a78,function(_a7c){var _a7d=_a7c.__popups;if(_a7d&&_a7d.length>1&&_a7c.version>=10){_a7c.__deferredsPos=_a7b.length;_a7b.push(EAU._getLayersInfo(_a7c));}});var _a7e=[];if(_a7b.length>0){var _a7f=new _4.DeferredList(_a7b);_a7f.addCallback(function(_a80){_4.forEach(_a78,function(_a81,_a82){if(_a81.__popups&&_a81.__popups.length>0){if(_a81.__deferredsPos||_a81.__deferredsPos===0){var _a83=_a7b[_a81.__deferredsPos].ioArgs.json;_a7e=_a7e.concat(EAU._createSelectionFeatureLayers(_a81,_a83.layers,_a79,_a7a));delete _a81.__deferredsPos;}else{_a7e=_a7e.concat(EAU._createSelectionFeatureLayers(_a81,null,_a79,_a7a));}}});map.addLayers(_a7e);});}else{_4.forEach(_a78,function(_a84,_a85){if(_a84.__popups&&_a84.__popups.length>0){_a7e=_a7e.concat(EAU._createSelectionFeatureLayers(_a84,null,_a79,_a7a));}});map.addLayers(_a7e);}};EAU._createSelectionFeatureLayers=function(_a86,_a87,_a88,_a89){var url=_a86.url;var _a8a=_a86.__popups;var ids=_a86.__popupIds;var _a8b=_a86.__resourceInfo;var _a8c=[];_4.forEach(_a8a,function(_a8d,_a8e){var i,_a8f=null;if(_a87){for(i=0;i<_a87.length;i++){if(_a87[i].id===ids[_a8e]){_a8f=_a87[i];break;}}}var _a90=new esri.layers.FeatureLayer(url+"/"+ids[_a8e],{id:_a86.id+"_"+ids[_a8e],outFields:["*"],mode:esri.layers.FeatureLayer.MODE_SELECTION,infoTemplate:_a8d&&new _a89(_a8d),drawMode:false,visible:_a86.visible,resourceInfo:_a8f,maxAllowableOffset:_a88});_4.connect(_a90,"onLoad",function(_a91){EAU._updateLayerScaleInfo(_a8b.layers,_a91);});_a8c.push(_a90);});delete _a86.__popups;delete _a86.__popupIds;delete _a86.__resourceInfo;return _a8c;};EAU._getServiceInfo=function(url,_a92){return esri.request({url:url,content:{f:"json"},callbackParamName:"callback",error:function(_a93,io){if(_a93.message){_a93.message+=" [url:"+url+"]";}else{_a93.message="[url:"+url+"]";}_a92.push(_a93);esri.config.defaults.io.errorHandler(_a93,io);}});};EAU._getLayersInfo=function(_a94){return esri.request({url:_a94.url+"/layers",content:{f:"json"},callbackParamName:"callback",error:function(_a95,io){}});};EAU._initLayer=function(_a96,_a97,_a98){var _a99,_a9a=_a98._clazz;if(_a96.type==="OpenStreetMap"){_a99=new esri.layers.OpenStreetMapLayer({id:_a96.id});}else{if(_a96.type==="WMS"){var _a9b=[];var _a9c=[];_4.forEach(_a96.layers,function(_a9d){_a9c.push(new esri.layers.WMSLayerInfo({name:_a9d.name,title:_a9d.title,legendURL:_a9d.legendURL}));_a9b.push(_a9d.name);},this);if(_a96.visibleLayers){_a9b=_a96.visibleLayers;}var _a9e=new esri.geometry.Extent(_a96.extent[0][0],_a96.extent[0][1],_a96.extent[1][0],_a96.extent[1][1],new esri.SpatialReference({wkid:4326}));var _a9f={extent:_a9e,layerInfos:_a9c,version:_a96.version,maxWidth:_a96.maxWidth,maxHeight:_a96.maxHeight,getMapUrl:_a96.mapUrl,spatialReferences:_a96.spatialReferences,title:_a96.title,copyright:_a96.copyright};_a99=new esri.layers.WMSLayer(_a96.url,{id:_a96.id,visibleLayers:_a9b,format:"png",transparent:_a96.baseMapLayer?false:true,opacity:_a96.opacity,resourceInfo:_a9f});}else{if(_a96.type==="KML"){_a99=new esri.layers.KMLLayer(_a96.url,{id:_a96.id});_4.connect(_a99,"onLoad",function(){if(_a96.opacity!==null){var _aa0=_a99.getLayers();_4.forEach(_aa0,function(_aa1){if(_aa1.declaredClass=="esri.layers.FeatureLayer"||_aa1.declaredClass=="esri.layers.MapImageLayer"){_aa1.setOpacity(_a96.opacity);}});}if(_a96.visibleFolders){_4.forEach(_a99.folders,function(_aa2){if(_4.indexOf(_a96.visibleFolders,_aa2.id)>-1){_a99.setFolderVisibility(_aa2,true);}else{_a99.setFolderVisibility(_aa2,false);}},this);}});}else{if(_a96.layerDefinition&&!_a96.url){var _aa3=_4.fromJson(_4.toJson(_a96));delete _aa3.id;delete _aa3.opacity;delete _aa3.visibility;_a99=new esri.layers.FeatureLayer(_aa3,{id:_a96.id,opacity:_a96.opacity,visible:_a96.visibility,outFields:["*"],infoTemplate:_aa3.popupInfo&&new _a9a(_aa3.popupInfo)});}else{if(_a96.type==="BingMapsAerial"||_a96.type==="BingMapsRoad"||_a96.type==="BingMapsHybrid"){var _aa4=esri.virtualearth.VETiledLayer.MAP_STYLE_AERIAL_WITH_LABELS;if(_a96.type==="BingMapsAerial"){_aa4=esri.virtualearth.VETiledLayer.MAP_STYLE_AERIAL;}else{if(_a96.type==="BingMapsRoad"){_aa4=esri.virtualearth.VETiledLayer.MAP_STYLE_ROAD;}}_a99=new esri.virtualearth.VETiledLayer({bingMapsKey:_a98.bingMapsKey,mapStyle:_aa4,id:_a96.id});}else{if(_a96.resourceInfo&&_a96.resourceInfo.mapName){if(_a96.resourceInfo.singleFusedMapCache===true){if(!_a96.baseMapLayer){if(EAU._sameSpatialReferenceAsBasemap(_a96,_a97)){if(EAU._sameTilingSchemeAsBasemap(_a96,_a97)){_a99=EAU._loadAsCached(_a96);}else{_a99=EAU._loadAsDynamic(_a96);}}else{_a99=EAU._loadAsDynamic(_a96);}}else{_a99=EAU._loadAsCached(_a96);}}else{_a99=EAU._loadAsDynamic(_a96);}}else{if(_a96.resourceInfo&&_a96.resourceInfo.pixelSizeX){var _aa5=new esri.layers.ImageServiceParameters();_aa5.bandIds=_a96.bandIds;if(!_a96.bandIds&&_a96.resourceInfo.bandCount&&parseInt(_a96.resourceInfo.bandCount,10)>3){_aa5.bandIds=[0,1,2];}_a99=new esri.layers.ArcGISImageServiceLayer(_a96.url,{resourceInfo:_a96.resourceInfo,opacity:_a96.opacity,visible:_a96.visibility,id:_a96.id,imageServiceParameters:_aa5});}else{if(_a96.resourceInfo&&_a96.resourceInfo.type==="Feature Layer"){_a99=new esri.layers.FeatureLayer(_a96.url,{resourceInfo:_a96.resourceInfo,opacity:_a96.opacity,visible:_a96.visibility,id:_a96.id,mode:esri._isDefined(_a96.mode)?_a96.mode:esri.layers.FeatureLayer.MODE_ONDEMAND,outFields:["*"],infoTemplate:_a96.popupInfo&&new _a9a(_a96.popupInfo)});if(_a96.layerDefinition){if(_a96.layerDefinition.drawingInfo&&_a96.layerDefinition.drawingInfo.renderer){var _aa6=esri.renderer.fromJson(_a96.layerDefinition.drawingInfo.renderer);_a99.setRenderer(_aa6);}if(_a96.layerDefinition.definitionExpression){_a99.setDefinitionExpression(_a96.layerDefinition.definitionExpression);}if(_a96.layerDefinition.minScale!==null){_a99.minScale=_a96.layerDefinition.minScale;}if(_a96.layerDefinition.maxScale!==null){_a99.maxScale=_a96.layerDefinition.maxScale;}}}}}}}}}}return _a99;};EAU._loadAsCached=function(_aa7){var _aa8=[];if(!_aa7.displayLevels){_aa8=_4.map(_aa7.resourceInfo.tileInfo.lods,function(lod){return lod.level;});}var _aa9=new esri.layers.ArcGISTiledMapServiceLayer(_aa7.url,{resourceInfo:_aa7.resourceInfo,opacity:_aa7.opacity,visible:_aa7.visibility,displayLevels:(_aa7.displayLevels)?_aa7.displayLevels:_aa8,id:_aa7.id});EAU._processPopups(_aa9,_aa7);return _aa9;};EAU._loadAsDynamic=function(_aaa){var _aab=new esri.layers.ImageParameters();_aab.format="png24";if(_aaa.resourceInfo&&_aaa.resourceInfo.supportedImageFormatTypes&&_aaa.resourceInfo.supportedImageFormatTypes.indexOf("PNG32")>-1){_aab.format="png32";}var _aac=new esri.layers.ArcGISDynamicMapServiceLayer(_aaa.url,{resourceInfo:_aaa.resourceInfo,opacity:_aaa.opacity,visible:_aaa.visibility,id:_aaa.id,imageParameters:_aab});if(!_aaa.visibleLayers){var _aad="";var _aae=_aac.layerInfos;_4.forEach(_aae,function(_aaf){if(_aaf.defaultVisibility){_aad+=(_aad.length>0?",":"")+_aaf.id;}});_aaa.visibleLayers=_aad;}var _ab0=EAU._getVisibleFeatureLayers(_aac.layerInfos,_aaa.visibleLayers);_aac.setVisibleLayers(_ab0);if(_aaa.layers&&_aaa.layers.length>0){var _ab1=[];_4.forEach(_aaa.layers,function(_ab2){if(_ab2.layerDefinition&&_ab2.layerDefinition.definitionExpression){_ab1[_ab2.id]=_ab2.layerDefinition.definitionExpression;}},this);if(_ab1.length>0){_aac.setLayerDefinitions(_ab1);}}EAU._processPopups(_aac,_aaa);return _aac;};EAU._processPopups=function(_ab3,_ab4){var _ab5=_ab3.layerInfos;var _ab6=_ab4.layers;if(_ab6&&_ab5){var _ab7=[],ids=[];_4.forEach(_ab5,function(_ab8){var id=_ab8.id,i;if(!_ab8.subLayerIds&&_4.indexOf(_ab3.visibleLayers,id)!==-1){for(i=0;i<_ab6.length;i++){var _ab9=_ab6[i];if(_ab9.id===id){ids.push(id);_ab7.push(_ab9.popupInfo);break;}}}});if(_ab7.length){_ab3.__popups=_ab7;_ab3.__popupIds=ids;_ab3.__resourceInfo=_ab4.resourceInfo;}}};EAU._onZoomEnd=function(){var map=this;var _aba=Math.floor(map.extent.getWidth()/map.width);_4.forEach(map.graphicsLayerIds,function(id){var _abb=map.getLayer(id);if(_abb&&_abb.declaredClass==="esri.layers.FeatureLayer"&&!_abb.isEditable()){_abb.setMaxAllowableOffset(_aba);}});};EAU._onLayersAddResult=function(_abc){_4.forEach(_abc,function(_abd){var _abe=_abd.layer;if(_abe.toJson){var json=_abe.toJson();if(json.featureSet&&_abe.name.indexOf("Text")>-1){_4.forEach(json.featureSet.features,function(_abf,idx){if(_abf.attributes.TEXT){var _ac0=_abe.graphics[idx];_ac0.symbol.setText(_abf.attributes.TEXT);if(_abf.symbol.horizontalAlignment){_ac0.symbol.align=_abf.symbol.horizontalAlignment;}_ac0.setSymbol(_ac0.symbol);_ac0.setAttributes(_abf.attributes);}},this);}}});};EAU._sameSpatialReferenceAsBasemap=function(_ac1,_ac2){var _ac3=[102113,102100,3857];var sp1=_ac2[0].layerObject.fullExtent.spatialReference;var sp2=new esri.SpatialReference(_ac1.resourceInfo.fullExtent.spatialReference);if(_4.toJson(sp1.toJson())===_4.toJson(sp2.toJson())){return true;}else{if(_4.some(_ac3,function(wkid){return wkid===sp2.wkid;})&&_4.some(_ac3,function(wkid){return wkid===sp1.wkid;})){return true;}}return false;};EAU._sameTilingSchemeAsBasemap=function(_ac4,_ac5){if(!_ac5[0].layerObject.tileInfo){return false;}var _ac6=[];_4.forEach(_ac5,function(_ac7){if(_ac7.baseMapLayer){if(_ac7.layerObject.tileInfo){_ac6=_ac6.concat(_4.map(_ac7.layerObject.tileInfo.lods,function(lod){return lod.scale;}));}}});var _ac8=_4.some(_ac4.resourceInfo.tileInfo.lods,function(lod){return _4.some(_ac6,function(_ac9){return _ac9===lod.scale;});});return _ac8;};EAU._showPopup=function(evt){var map=this,_aca=map.infoWindow,_acb=evt.graphic;if(!map.loaded){return;}_aca.hide();_aca.clearFeatures();var _acc=[];_4.forEach(map.graphicsLayerIds,function(_acd){var _ace=map.getLayer(_acd);if(_ace&&_ace.declaredClass.indexOf("FeatureLayer")!==-1&&_ace.loaded&&_ace.visible){_ace.clearSelection();if(_ace.infoTemplate&&!_ace._suspended){_acc.push(_ace);}}});_acb=(_acb&&_acb._getEffInfoTemplate())?_acb:null;if(!_acc.length&&!_acb){return;}var _acf=EAU._calculateClickTolerance(_acc);var _ad0=evt.screenPoint,_ad1=map.toMap(new esri.geometry.Point(_ad0.x-_acf,_ad0.y+_acf)),_ad2=map.toMap(new esri.geometry.Point(_ad0.x+_acf,_ad0.y-_acf)),_ad3=new esri.geometry.Extent(_ad1.x,_ad1.y,_ad2.x,_ad2.y,map.spatialReference);var _ad4=new esri.tasks.Query();_ad4.geometry=_ad3;_ad4.timeExtent=map.timeExtent;var _ad5=_4.map(_acc,function(_ad6){var dfd=_ad6.selectFeatures(_ad4);dfd.addCallback(function(){var _ad7=_ad6.getSelectedFeatures();return _ad7;});return dfd;});if(_acb){var dfd=new _4.Deferred();dfd.callback([_acb]);_ad5.splice(0,0,dfd);}var _ad8=_4.some(_ad5,function(dfd){return dfd.fired===-1;});if(!_ad8){var _ad9=_acb?1:0;_4.forEach(_acc,function(_ada){_ad9=_ad9+_ada.getSelectedFeatures().length;});if(!_ad9){return;}}_aca.setFeatures(_ad5);_aca.show(evt.mapPoint);};EAU._calculateClickTolerance=function(_adb){var _adc=6;_4.forEach(_adb,function(_add){var _ade=_add.renderer;if(_ade.declaredClass==="esri.renderer.SimpleRenderer"){var _adf=_ade.symbol;if(_adf.xoffset){_adc=Math.max(_adc,Math.abs(_adf.xoffset));}if(_adf.yoffset){_adc=Math.max(_adc,Math.abs(_adf.yoffset));}}else{if(_ade.declaredClass==="esri.renderer.UniqueValueRenderer"||_ade.declaredClass==="esri.renderer.ClassBreaksRenderer"){_4.forEach(_ade.infos,function(info){var _ae0=info.symbol;if(_ae0.xoffset){_adc=Math.max(_adc,Math.abs(_ae0.xoffset));}if(_ae0.yoffset){_adc=Math.max(_adc,Math.abs(_ae0.yoffset));}});}}});return _adc;};EAU._getVisibleFeatureLayers=function(_ae1,_ae2){if(!_ae1||!_ae2||_ae2.length===0){return [];}var _ae3=","+_ae2+",";var _ae4=[];var _ae5="";var k,_ae6=",";for(k=0;k<_ae1.length;k++){if(_ae1[k].subLayerIds!==null){if(_ae3.indexOf(","+_ae1[k].id+",")===-1||_ae6.indexOf(","+_ae1[k].id+",")>-1){_ae6+=_ae1[k].subLayerIds.toString()+",";}}else{if(_ae3.indexOf(","+_ae1[k].id+",")>-1&&_ae6.indexOf(","+_ae1[k].id+",")===-1){_ae4.push(_ae1[k].id);_ae5=",";}}}return _ae4;};EAU._updateLayerScaleInfo=function(_ae7,_ae8){if(_ae8.version<=10.1&&_ae7){var i,id=parseInt(_ae8.url.substring(_ae8.url.lastIndexOf("/")+1,_ae8.url.length));for(i=_ae7.length-1;i>=0;i--){if(_ae7[i].id==id){if(_ae8.minScale==0&&_ae7[i].minScale>0){_ae8.minScale=_ae7[i].minScale;}else{if(_ae8.minScale>0&&_ae7[i].minScale==0){_ae8.minScale=_ae8.minScale;}else{if(_ae8.minScale>0&&_ae7[i].minScale>0){_ae8.minScale=Math.min(_ae8.minScale,_ae7[i].minScale);}}}_ae8.maxScale=Math.max(_ae8.maxScale,_ae7[i].maxScale);if(_ae7[i].parentLayerId>-1){id=_ae7[i].parentLayerId;}else{break;}}}}};}());}}};});
