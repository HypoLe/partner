/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


window[esri._dojoScopeName||"dojo"]._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dijit.layout.StackController"],["require","dijit._Widget"],["require","dijit._Templated"],["require","dijit._Container"],["require","dijit.form.ToggleButton"],["requireLocalization","dijit","common",null,"ROOT,ar,ca,cs,da,de,el,es,fi,fr,he,hu,it,ja,kk,ko,nb,nl,pl,pt,pt-pt,ro,ru,sk,sl,sv,th,tr,zh,zh-tw","ROOT,ar,ca,cs,da,de,el,es,fi,fr,he,hu,it,ja,kk,ko,nb,nl,pl,pt,pt-pt,ro,ru,sk,sl,sv,th,tr,zh,zh-tw"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dijit.layout.StackController"]){_4._hasResource["dijit.layout.StackController"]=true;_4.provide("dijit.layout.StackController");_4.require("dijit._Widget");_4.require("dijit._Templated");_4.require("dijit._Container");_4.require("dijit.form.ToggleButton");_4.declare("dijit.layout.StackController",[_5._Widget,_5._Templated,_5._Container],{templateString:"<span role='tablist' dojoAttachEvent='onkeypress' class='dijitStackController'></span>",containerId:"",buttonWidget:"dijit.layout._StackButton",constructor:function(){this.pane2button={};this.pane2connects={};this.pane2watches={};},buildRendering:function(){this.inherited(arguments);_5.setWaiRole(this.domNode,"tablist");},postCreate:function(){this.inherited(arguments);this.subscribe(this.containerId+"-startup","onStartup");this.subscribe(this.containerId+"-addChild","onAddChild");this.subscribe(this.containerId+"-removeChild","onRemoveChild");this.subscribe(this.containerId+"-selectChild","onSelectChild");this.subscribe(this.containerId+"-containerKeyPress","onContainerKeyPress");},onStartup:function(_7){_4.forEach(_7.children,this.onAddChild,this);if(_7.selected){this.onSelectChild(_7.selected);}},destroy:function(){for(var _8 in this.pane2button){this.onRemoveChild(_5.byId(_8));}this.inherited(arguments);},onAddChild:function(_9,_a){var _b=_4.getObject(this.buttonWidget);var _c=new _b({id:this.id+"_"+_9.id,label:_9.title,dir:_9.dir,lang:_9.lang,showLabel:_9.showTitle,iconClass:_9.iconClass,closeButton:_9.closable,title:_9.tooltip});_5.setWaiState(_c.focusNode,"selected","false");var _d=["title","showTitle","iconClass","closable","tooltip"],_e=["label","showLabel","iconClass","closeButton","title"];this.pane2watches[_9.id]=_4.map(_d,function(_f,idx){return _9.watch(_f,function(_10,_11,_12){_c.set(_e[idx],_12);});});this.pane2connects[_9.id]=[this.connect(_c,"onClick",_4.hitch(this,"onButtonClick",_9)),this.connect(_c,"onClickCloseButton",_4.hitch(this,"onCloseButtonClick",_9))];this.addChild(_c,_a);this.pane2button[_9.id]=_c;_9.controlButton=_c;if(!this._currentChild){_c.focusNode.setAttribute("tabIndex","0");_5.setWaiState(_c.focusNode,"selected","true");this._currentChild=_9;}if(!this.isLeftToRight()&&_4.isIE&&this._rectifyRtlTabList){this._rectifyRtlTabList();}},onRemoveChild:function(_13){if(this._currentChild===_13){this._currentChild=null;}_4.forEach(this.pane2connects[_13.id],_4.hitch(this,"disconnect"));delete this.pane2connects[_13.id];_4.forEach(this.pane2watches[_13.id],function(w){w.unwatch();});delete this.pane2watches[_13.id];var _14=this.pane2button[_13.id];if(_14){this.removeChild(_14);delete this.pane2button[_13.id];_14.destroy();}delete _13.controlButton;},onSelectChild:function(_15){if(!_15){return;}if(this._currentChild){var _16=this.pane2button[this._currentChild.id];_16.set("checked",false);_5.setWaiState(_16.focusNode,"selected","false");_16.focusNode.setAttribute("tabIndex","-1");}var _17=this.pane2button[_15.id];_17.set("checked",true);_5.setWaiState(_17.focusNode,"selected","true");this._currentChild=_15;_17.focusNode.setAttribute("tabIndex","0");var _18=_5.byId(this.containerId);_5.setWaiState(_18.containerNode,"labelledby",_17.id);},onButtonClick:function(_19){var _1a=_5.byId(this.containerId);_1a.selectChild(_19);},onCloseButtonClick:function(_1b){var _1c=_5.byId(this.containerId);_1c.closeChild(_1b);if(this._currentChild){var b=this.pane2button[this._currentChild.id];if(b){_5.focus(b.focusNode||b.domNode);}}},adjacent:function(_1d){if(!this.isLeftToRight()&&(!this.tabPosition||/top|bottom/.test(this.tabPosition))){_1d=!_1d;}var _1e=this.getChildren();var _1f=_4.indexOf(_1e,this.pane2button[this._currentChild.id]);var _20=_1d?1:_1e.length-1;return _1e[(_1f+_20)%_1e.length];},onkeypress:function(e){if(this.disabled||e.altKey){return;}var _21=null;if(e.ctrlKey||!e._djpage){var k=_4.keys;switch(e.charOrCode){case k.LEFT_ARROW:case k.UP_ARROW:if(!e._djpage){_21=false;}break;case k.PAGE_UP:if(e.ctrlKey){_21=false;}break;case k.RIGHT_ARROW:case k.DOWN_ARROW:if(!e._djpage){_21=true;}break;case k.PAGE_DOWN:if(e.ctrlKey){_21=true;}break;case k.HOME:case k.END:var _22=this.getChildren();if(_22&&_22.length){_22[e.charOrCode==k.HOME?0:_22.length-1].onClick();}_4.stopEvent(e);break;case k.DELETE:if(this._currentChild.closable){this.onCloseButtonClick(this._currentChild);}_4.stopEvent(e);break;default:if(e.ctrlKey){if(e.charOrCode===k.TAB){this.adjacent(!e.shiftKey).onClick();_4.stopEvent(e);}else{if(e.charOrCode=="w"){if(this._currentChild.closable){this.onCloseButtonClick(this._currentChild);}_4.stopEvent(e);}}}}if(_21!==null){this.adjacent(_21).onClick();_4.stopEvent(e);}}},onContainerKeyPress:function(_23){_23.e._djpage=_23.page;this.onkeypress(_23.e);}});_4.declare("dijit.layout._StackButton",_5.form.ToggleButton,{tabIndex:"-1",buildRendering:function(evt){this.inherited(arguments);_5.setWaiRole((this.focusNode||this.domNode),"tab");},onClick:function(evt){_5.focus(this.focusNode);},onClickCloseButton:function(evt){evt.stopPropagation();}});}}};});